function Bling(d,f){if(isBling(d))return d;f=f||document;var i=null;if(d==null)i=[];else if(typeof d==="number")i=Array(d);else if(d===window||isNode(d))i=[d];else if(typeof d==="string"){d=d.trimLeft();if(d[0]==="<")i=[Bling.HTML.parse(d)];else if(isBling(f))i=f.reduce(function(b,a){for(var c=a.querySelectorAll(d),e=0,h=c.length;e<h;e++)b.push(c[e]);return b},[]);else if(f.querySelectorAll)try{i=f.querySelectorAll(d)}catch(g){throw Error("invalid selector: "+d,g);}else throw Error("invalid context: "+
f);}else i=d;i.__proto__=Bling.prototype;i.selector=d;i.context=f;return i}Bling.prototype=[];Bling.prototype.constructor=Bling;function isBling(d){return isType(d,Bling)}Bling.symbol="$";window[Bling.symbol]=Bling;function isType(d,f){return!d?f===d:typeof f==="string"?d.__proto__.constructor.name===f:d.__proto__.constructor===f}
function isSubtype(d,f){return d==null?d===f:d.__proto__==null?false:typeof f==="string"?d.__proto__.constructor.name==f:d.__proto__.constructor===f?true:isSubtype(d.__proto__,f)}function isString(d){return typeof d==="string"||isSubtype(d,String)}var isNumber=isFinite;function isFunc(d){return typeof d==="function"||isType(d,Function)}function isNode(d){return d?d.nodeType>0:false}function isFragment(d){return d?d.nodeType===11:false}
function isArray(d){return d?Function.ToString(d)==="[object Array]"||isSubtype(d,Array):false}function isObject(d){return typeof d==="object"}function hasValue(d){return d!=null}Object.Extend=function(d,f,i){var g;if(isArray(i))for(g in i)d[i[g]]=f[i[g]]!=void 0?f[i[g]]:d[i[g]];else for(g in i=Object.Keys(f))d[i[g]]=f[i[g]];return d};Object.Keys=function(d,f){var i=[],g=0,b=null;for(b in d)if(f||d.hasOwnProperty(b))i[g++]=b;return i};
function boundmethod(d,f,i){function g(){return d.apply(f,i?i:arguments)}g.toString=function(){return"bound-method of "+f+"."+d.name+"(...) { [code] }"};return g}function tracemethod(d,f){function i(){console.log(f?f:d.name,Array.Slice(arguments,0));return d.apply(this,arguments)}i.toString=function(){return d.toString()};console.log("tracemethod:",f?f:d.name,"created");return i}
Object.Extend(Function,{Empty:function(){},NotNull:function(d){return d!=null},IndexFound:function(d){return d>-1},ReduceAnd:function(d){return d&&this},UpperLimit:function(d){return function(f){return Math.min(d,f)}},LowerLimit:function(d){return function(f){return Math.max(d,f)}},ToString:function(d){return Object.prototype.toString.apply(d)},Px:function(d){return function(){return Number.Px(this,d)}}});var console=console||{};console.log=console.log||Function.Empty;
Array.Slice=function(d,f,i){var g=[],b=0,a=d.length;i=i==null?a:i<0?a+i:i;for(f=f==null?0:f<0?a+f:f;f<i;)g[b++]=d[f++];return g};Number.Px=function(d,f){return parseInt(d,10)+(f|0)+"px"};Object.Extend(String,{PadLeft:function(d,f,i){for(i=i||" ";d.length<f;)d=i+d;return d},PadRight:function(d,f,i){for(i=i||" ";d.length<f;)d+=i;return d},Splice:function(){var d=arguments[0],f=arguments[1],i=arguments[2],g=Array.Slice(arguments,3).join("");return d.substring(0,f)+g+d.substring(i)}});
Bling.plugin=function(d){var f=d.call(Bling,Bling),i=Object.Keys(f,true),g,b,a=arguments.callee.s=arguments.callee.s||[];for(g in i){b=i[g];if(b.charAt(0)==="$")Bling[b.substr(1)]=f[b];else Bling.prototype[b]=f[b]}a.push(d.name);a[d.name]=f};
(function(d){d.plugin(function(){function f(b){var a;return function(){a=this[b];return isFunc(a)?boundmethod(a,this):a}}function i(b){var a=b.indexOf(".");return a>-1?this.zip(b.substr(0,a)).zip(b.substr(a+1)):this.map(f(b))}var g=new function(){this.queue=[];this.next=boundmethod(function(){this.queue.length>0&&this.queue.shift()()},this);this.schedule=function(b,a){if(isFunc(b)){var c=this.queue.length;b.order=a+(new Date).getTime();if(c===0||b.order>this.queue[c-1].order)this.queue[c]=b;else for(var e=
0;e<c;e++)this.queue[e].order>b.order&&this.queue.splice(e,0,b);setTimeout(this.next,a)}}};return{each:function(b){for(var a=-1,c=this.len(),e=null;++a<c;){e=this[a];b.call(e,e)}return this},map:function(b){var a=this.len(),c=d(a),e=0,h=null,j=true;c.context=this;for(c.selector=b;e<a;e++){h=this[e];if(j)try{c[e]=b.call(h,h)}catch(l){if(isType(l,TypeError)){j=false;e--}else c[e]=l}else try{c[e]=b(h)}catch(t){c[e]=t}}return c},reduce:function(b,a){if(!b)return this;var c=a,e=this;if(a==null){c=this[0];
e=this.skip(1)}e.each(function(){c=b.call(this,c,this)});return c},union:function(b){var a=d(),c=0,e=0,h=null;a.context=this.context;a.selector=this.selector;for(this.each(function(){a[c++]=this});h=b[e++];)a.contains(h)||(a[c++]=h);return a},intersect:function(b){var a=d(),c=0,e=0,h=this.length,j=b.length;a.context=this.context;for(a.selector=this.selector;c<h;c++)for(e=0;e<j;e++)if(this[c]===b[e]){a[a.length]=this[c];break}return a},distinct:function(){return this.union(this)},contains:function(b){return this.count(b)>
0},count:function(b,a){if(b===void 0)return this.len();var c=0;this.each(function(e){if(a&&e===b||!a&&e==b)c++});return c},zip:function(){switch(arguments.length){case 0:return this;case 1:return i.call(this,arguments[0]);default:var b={},a=d(),c=arguments.length,e=this.length,h=0,j=0,l=null;for(h=0;h<c;h++)b[h]=i.call(this,arguments[h]);for(h=0;h<e;h++){c={};for(l in b)c[l]=b[l].shift();a[j++]=c}return a}},zap:function(b,a){if(!b)return this;var c=b.indexOf(".");return c>-1?this.zip(b.substr(0,c)).zap(b.substr(c+
1),a):isArray(a)?this.each(function(e){e[b]=a[++c]}):this.each(function(){this[b]=a})},take:function(b){b=Math.min(b|0,this.len());var a=d(b),c=-1;a.context=this.context;for(a.selector=this.selector;++c<b;)a[c]=this[c];return a},skip:function(b){b=Math.min(this.len(),Math.max(0,b|0));var a=d(b),c=0,e=this.len()-b;a.context=this.context;for(a.selector=this.selector;c<e;c++)a[c]=this[c+b];return a},first:function(b){return b?this.take(b):this[0]},last:function(b){return b?this.skip(this.len()-b):this[this.length-
1]},join:function(b){if(this.length===0)return"";return this.reduce(function(a){return a+b+this})},slice:function(b,a){var c=d(Array.Slice(this,b,a));c.context=this.context;c.selector=this.selector;return c},concat:function(b){for(var a=this.len()-1,c=-1,e=b.length;c<e;)this[++a]=b[++c];return this},push:function(b){Array.prototype.push.call(this,b);return this},filter:function(b){var a=0,c=-1,e=this.length,h=d(e),j=null;h.context=this;for(h.selector=b;a<e;a++)if(j=this[a])if(isFunc(b)&&b.call(j,
j)||isString(b)&&j.webkitMatchesSelector&&j.webkitMatchesSelector(b)||isType(b,"RegExp")&&b.test(j))h[++c]=j;return h},matches:function(b){if(isType(b,"RegExp"))return this.map(function(){return b.test(this)});return isString(b)&&this.webkitMatchesSelector?this.map(function(){return this.webkitMatchesSelector(b)}):this.map(function(){return false})},weave:function(b){var a=b.length,c=this.length,e=d(2*Math.max(c,a));c=c-1;e.context=this.context;for(e.selector=this.selector;c>=0;c--)e[c*2+1]=this[c];
for(;++c<a;)e[c*2]=b[c];return e},fold:function(b){var a=this.len(),c=0,e=d(Math.ceil(a/2)),h=0;e.context=this.context;e.selector=this.selector;for(h=0;h<a-1;h+=2)e[c++]=b.call(this,this[h],this[h+1]);if(a%2===1)e[c++]=b.call(this,this[a-1],undefined);return e},flatten:function(){var b=d(),a=this.len(),c=null,e=0,h=0,j=0,l=0;b.context=this.context;for(b.selector=this.selector;h<a;h++){c=this[h];j=0;for(e=c.length;j<e;)b[l++]=c[j++]}return b},call:function(){return this.apply(null,arguments)},apply:function(b,
a){return this.map(function(){if(isFunc(this))return this.apply(b,a);return this})},toString:function(){return d.symbol+"(["+this.map(function(){return this===undefined||this===window?"undefined":this===null?"null":this.toString().replace(/\[object (\w+)\]/,"$1")}).join(", ")+"])"},future:function(b,a){a&&g.schedule(boundmethod(a,this),b);return this},log:function(b){b?console.log(b,this,this.length+" items"):console.log(this,this.length+" items");return this},len:function(){for(var b=this.length;b>
-1&&this[--b]===undefined;);return b+1}}});d.plugin(function(){function f(a,c){a&&c&&a.parentNode.insertBefore(c,a)}function i(a){a=isNode(a)?a:isBling(a)?a.toFragment():isString(a)?d(a).toFragment():isFunc(a.toString)?d(a.toString()).toFragment():undefined;d.nextguid=d.nextguid||1;if(a&&a.guid==null)a.guid=d.nextguid++;return a}function g(a){for(var c=a.cloneNode(),e=0;e<a.childNodes.length;e++)c.appendChild(g(a.childNodes[e])).parentNode=c;return c}var b=null;return{$HTML:{parse:function(a){var c=
document.createElement("body"),e=document.createDocumentFragment();c.innerHTML=a;a=c.childNodes.length;if(a===1)return c.removeChild(c.childNodes[0]);for(var h=0;h<a;h++)e.appendChild(c.removeChild(c.childNodes[0]));return e},stringify:function(a){a=g(a);var c=document.createElement("div");c.appendChild(a);var e=c.innerHTML;c.removeChild(a);a.parentNode=null;return e},escape:function(a){b=b||d("<div>&nbsp;</div>").child(0);a=b.zap("data",a).zip("parentNode.innerHTML").first();b.zap("data","");return a}},
$Color:{fromCss:function(a){a=a||this;if(isString(a)){var c=document.createElement("div");c.style.display="none";c.style.color=a;d(document.body).append(c);a=window.getComputedStyle(c,null).getPropertyValue("color");d(c).remove();if(a){a=a.slice(a.indexOf("(")+1,a.indexOf(")")).split(", ");if(a.length===3)a[3]="1.0";return d(a).floats()}}},toCss:function(a){function c(e){e=e.map(Function.UpperLimit(255)).map(Function.LowerLimit(0));e[3]=Math.min(1,e[3]);return"rgba("+e.join(", ")+")"}a=a||this;return isBling(a[0])?
a.map(c):c(a)},invert:function(a){var c=d(4);if(isString(a))a=d.Color.fromCss(a);c[0]=255-a[0];c[1]=255-a[1];c[2]=255-a[2];c[3]=a[3];return c}},html:function(a){return a===undefined?this.zip("innerHTML"):isString(a)?this.zap("innerHTML",a):isBling(a)?this.html(a.toFragment()):isNode(a)?this.each(function(){for(this.replaceChild(this.childNodes[0],a);this.childNodes.length>1;)this.removeChild(this.childNodes[1])}):undefined},append:function(a){if(a==null)return this;a=i(a);var c=this.zip("appendChild");
c.take(1).call(a);c.skip(1).each(function(){this(g(a))});return this},appendTo:function(a){if(a==null)return this;d(a).append(this);return this},prepend:function(a){if(a==null)return this;a=i(a);this.take(1).each(function(){f(this.childNodes[0],a)});this.skip(1).each(function(){f(this.childNodes[0],g(a))});return this},prependTo:function(a){if(a==null)return this;d(a).prepend(this);return this},before:function(a){if(a==null)return this;a=i(a);this.take(1).each(function(){f(this,a)});this.skip(1).each(function(){f(this,
g(a))});return this},after:function(a){if(a==null)return this;a=i(a);this.take(1).each(function(){this.parentNode.insertBefore(a,this.nextSibling)});this.skip(1).each(function(){this.parentNode.insertBefore(g(a),this.nextSibling)});return this},wrap:function(a){a=i(a);if(isFragment(a))throw Error("cannot wrap something with a fragment");return this.map(function(c){if(isFragment(c))a.appendChild(c);else if(isNode(c)){var e=c.parentNode;if(e){var h=document.createElement("dummy");a.appendChild(e.replaceChild(h,
c));e.replaceChild(a,h)}else a.appendChild(c)}return c})},unwrap:function(){return this.each(function(){this.parentNode&&this.parentNode.parentNode&&this.parentNode.parentNode.replaceChild(this,this.parentNode)})},replace:function(a){a=i(a);var c=d(),e=-1;this.take(1).each(function(){if(this.parentNode){this.parentNode.replaceChild(a,this);c[++e]=a}});this.skip(1).each(function(){if(this.parentNode){var h=g(a);this.parentNode.replaceChild(h,this);c[++e]=h}});return c},attr:function(a,c){var e=this.zip(c===
undefined?"getAttribute":c===null?"removeAttribute":"setAttribute").call(a,c);return c?this:e},addClass:function(a){return this.removeClass(a).each(function(){var c=this.className.split(" ").filter(function(e){return e&&e!=""});c.push(a);this.className=c.join(" ")})},removeClass:function(a){var c=function(e){return e!=a};return this.each(function(){this.className=this.className.split(" ").filter(c).join(" ")})},toggleClass:function(a){function c(e){return e!=a}return this.each(function(e){var h=e.className.split(" ");
e.className=h.indexOf(a)>-1?h.filter(c).join(" "):h.push(a).join(" ")})},hasClass:function(a){return this.zip("className.split").call(" ").zip("indexOf").call(a).map(Function.IndexFound)},text:function(a){return a?this.zap("innerText",a):this.zip("innerText")},val:function(a){return a?this.zap("value",a):this.zip("value")},css:function(a,c){if(hasValue(c)||isObject(a)){var e=this.zip("style.setProperty");if(isString(a))e.call(a,c);else for(var h in a)e.call(h,a[h]);return this}e=this.map(window.getComputedStyle).zip("getPropertyValue").call(a);
return this.zip("style").zip(a).weave(e).fold(function(j,l){return j?j:l})},defaultCss:function(a,c){var e=this.selector,h="<style> ",j=d("head");if(isString(a))if(isString(c))h+=e+" { "+a+": "+c+" } ";else throw Error("defaultCss requires a value with a string key");else if(isObject(a)){h+=e+" { ";for(var l in a)h+=l+": "+a[l];h+=" } "}h+="</style>";j.append(h)},rect:function(){return this.zip("getBoundingClientRect").call()},width:function(){return this.rect().zip("width")},height:function(a){return a==
null?this.rect().zip("height"):this.css("height",a)},top:function(a){return a==null?this.rect().zip("top"):this.css("top",a)},left:function(a){return a==null?this.rect().zip("left"):this.css("left",a)},position:function(a,c){return a==null?this.rect():c==null?this.css("left",Number.Px(a)):this.css({top:Number.Px(c),left:Number.Px(a)})},center:function(a){a=a||"viewport";var c=document.body.clientHeight/2,e=document.body.clientWidth/2;return this.each(function(){var h=d(this),j=h.height().floats().first(),
l=h.width().floats().first();l=a==="viewport"||a==="horizontal"?document.body.scrollLeft+e-l/2:NaN;j=a==="viewport"||a==="vertical"?document.body.scrollTop+c-j/2:NaN;h.css({position:"absolute",left:isNumber(l)?l+"px":undefined,top:isNumber(j)?j+"px":undefined})})},trueColor:function(a,c){a=a||"background-color";c=c||function(e){e[0]+=(this[0]-e[0])*this[3];e[1]+=(this[1]-e[1])*this[3];e[2]+=(this[2]-e[2])*this[3];e[3]=Math.min(1,e[3]+this[3]);return e};return this.parents().map(function(){return this.map(window.getComputedStyle).filter(hasValue).zip("getPropertyValue").call(a).filter(isString).map(d.Color.fromCss).reverse().reduce(c,
d([0,0,0,0])).map(d.Color.toCss)})},child:function(a){return this.map(function(){return this.childNodes[a>=0?a:a+this.childNodes.length]})},children:function(){return this.map(function(){return d(this.childNodes,this)})},parent:function(){return this.zip("parentNode")},parents:function(){return this.map(function(){for(var a=d(),c=-1,e=this;e=e.parentNode;)a[++c]=e;return a})},prev:function(){return this.map(function(){for(var a=d(),c=-1,e=this;e=e.previousSibling;)a[++c]=e;return a})},next:function(){return this.map(function(){for(var a=
d(),c=-1,e=this;e=e.previousSibling;)a[++c]=e;return a})},remove:function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},find:function(a){return this.filter("*").map(function(){return d(a,this)}).flatten()},clone:function(){return this.map(g)},toFragment:function(){if(this.length===1)return i(this[0]);var a=document.createDocumentFragment();this.map(i).map(boundmethod(a.appendChild,a));return a}}});d.plugin(function f(){return{floats:function(){return this.map(function(){if(isBling(this))return this.floats();
return parseFloat(this)})},ints:function(){return this.map(function(){if(isBling(this))return this.ints();return parseInt(this,10)})},px:function(i){i=i||0;return this.ints().map(Function.Px(i))},min:function(){return this.reduce(function(i){if(isBling(this))return this.min();return f.min(this,i)})},max:function(){return this.reduce(function(i){if(isBling(this))return this.max();return f.max(this,i)})},average:function(){return this.sum()/this.length},sum:function(){return this.reduce(function(i){if(isBling(this))return i+
this.sum();return i+this})},squares:function(){return this.map(function(){if(isBling(this))return this.squares();return this*this})},magnitude:function(){var i=this.map(function(){if(isBling(this))return this.magnitude();return parseFloat(this)});return f.sqrt(i.squares().sum())},scale:function(i){return this.map(function(){if(isBling(this))return this.scale(i);return i*this})},normalize:function(){return this.scale(1/this.magnitude())}}});d.plugin(function(){function f(g){eval("var f = function "+
g+"(f) { // ."+g+"([f]) - trigger [or bind] the '"+g+"' event \nreturn isFunc(f) ? this.bind('"+g+"',f) : this.trigger('"+g+"', f ? f : {}) }");return eval("f")}setTimeout(function(){d.prototype.trigger!=null&&document.readyState==="complete"?d(document).trigger("ready"):setTimeout(arguments.callee,20)},0);var i=/, */;return{bind:function(g,b){var a=0,c=(g||"").split(i),e=c.length;return this.each(function(){for(;a<e;a++)this.addEventListener(c[a],b)})},unbind:function(g,b){var a=0,c=(g||"").split(i),
e=c.length;return this.each(function(){for(;a<e;a++)this.removeEventListener(c[a],b)})},once:function(g,b){for(var a=0,c=(g||"").split(i),e=c.length;a<e;a++)this.bind(c[a],function(h){b.call(this,h);this.unbind(h.type,arguments.callee)})},cycle:function(g){function b(){var l=0;return function(t){c[l].call(this,t);l=++l%j}}for(var a=0,c=Array.Slice(arguments,1,arguments.length),e=(g||"").split(i),h=e.length,j=c.length;a<h;)this.bind(e[a++],b());return this},trigger:function(g,b){var a,c=0,e=(g||"").split(i),
h=e.length,j=null;for(b=Object.Extend({bubbles:true,cancelable:true},b);c<h;c++){j=e[c];switch(j){case "click":case "mousemove":case "mousedown":case "mouseup":case "mouseover":case "mouseout":a=document.createEvent("MouseEvents");b=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:null},b);a.initMouseEvent(j,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,
b.shiftKey,b.metaKey,b.button,b.relatedTarget);break;case "blur":case "focus":case "reset":case "submit":case "abort":case "change":case "load":case "unload":a=document.createEvent("UIEvents");a.initUIEvent(j,b.bubbles,b.cancelable,window,1);break;case "touchstart":case "touchmove":case "touchend":case "touchcancel":a=document.createEvent("TouchEvents");b=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,touches:[],targetTouches:[],
changedTouches:[],scale:1,rotation:0},b);a.initTouchEvent(j,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.touches,b.targetTouches,b.changedTouches,b.scale,b.rotation);break;case "gesturestart":case "gestureend":case "gesturecancel":a=document.createEvent("GestureEvents");b=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,target:null,scale:1,rotation:0},
b);a.initGestureEvent(j,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.target,b.scale,b.rotation);break;default:a=document.createEvent("Events");a.initEvent(j,b.bubbles,b.cancelable)}a&&this.each(function(){this.dispatchEvent(a);delete a.result;delete a.returnValue})}return this},live:function(g,b){var a=this.selector,c=this.context;d(c).bind(g,function(h){d(a,c).intersect(d(h.target).parents().first().union(d(h.target))).each(function(){h.target=
this;b.call(this,h)})});var e=c.__livers__=c.__livers__||{};e[a]=e[a]||{};e[a][g]=e[a][g]||[];e[a][g].push(b)},die:function(g,b){var a=this.selector,c=this.context,e=d(c),h=c.__livers__;if(h==null)return this;h=c.__livers__[a][g];a=0;for(c=h.length;a<c;a++)if(b==null||b===h[a]){e.unbind(g,b);h.splice(a,1);c--;a--}},liveCycle:function(g){var b=0,a=Array.Slice(arguments,1,arguments.length);return this.live(g,function(c){a[b].call(this,c);b=++b%a.length})},click:function(g){this.css("cursor").intersect(["auto",
""]).len()>0&&this.css("cursor","pointer");return isFunc(g)?this.bind("click",g):this.trigger("click",g?g:{})},mousemove:f("mousemove"),mousedown:f("mousedown"),mouseup:f("mouseup"),mouseover:f("mouseover"),mouseout:f("mouseout"),blur:f("blur"),focus:f("focus"),load:f("load"),ready:f("ready"),unload:f("unload"),reset:f("reset"),submit:f("submit"),keyup:f("keyup"),keydown:f("keydown"),change:f("change"),abort:f("abort"),cut:f("cut"),copy:f("copy"),paste:f("paste"),selection:f("selection"),drag:f("drag"),
drop:f("drop"),orientationchange:f("orientationchange"),touchstart:f("touchstart"),touchmove:f("touchmove"),touchend:f("touchend"),touchcancel:f("touchcancel"),gesturestart:f("gesturestart"),gestureend:f("gestureend"),gesturecancel:f("gesturecancel")}});d.plugin(function(){var f=/(?:scale|translate|rotate|scale3d|translateX|translateY|translateZ|translate3d|rotateX|rotateY|rotateZ|rotate3d)/,i={slow:700,medium:500,normal:300,fast:100,instant:0,now:0};return{$duration:function(g){return i[g]||parseFloat(g)},
transform:function(g,b,a){if(isFunc(b)){a=b;b=null}b=b||"normal";var c=d.duration(b);b=[];var e=0,h=0,j=null,l="",t={};for(h in g)if(f.test(h)){j=g[h];if(j.join)j=j.join(", ");else if(j.toString)j=j.toString();l+=" "+h+"("+j+")"}else t[h]=g[h];for(h in t)b[e++]=h;if(l)b[e++]="-webkit-transfrom";t["-webkit-transition-property"]=b.join(", ");t["-webkit-transition-duration"]=b.map(function(){return c+"ms"}).join(", ");if(l)t["-webkit-transform"]=l;this.css(t);return this.future(c,a)},hide:function(g){return this.each(function(){if(this.style){this._display=
this.style.display==="none"?"":this.style.display;this.style.display="none"}}).future(50,g)},show:function(g){return this.each(function(){if(this.style){this.style.display=this._display;delete this._display}}).future(50,g)},toggle:function(g){this.weave(this.css("display")).fold(function(b,a){if(b==="none"){a.style.display=a._old_display?a._old_display:"block";delete a._old_display}else{a._old_display=b;a.style.display="none"}return a}).future(50,g)},fadeIn:function(g,b){return this.css("opacity",
"0.0").show(function(){this.transform({opacity:"1.0",translate3d:[0,0,0]},g,b)})},fadeOut:function(g,b,a,c){a=a||0;c=c||0;return this.each(function(e){d(e).transform({opacity:"0.0",translate3d:[a,c,0]},g,function(){this.hide()})}).future(d.duration(g),b)},fadeLeft:function(g,b){return this.fadeOut(g,b,"-"+this.width().first(),0)},fadeRight:function(g,b){return this.fadeOut(g,b,this.width().first(),0)},fadeUp:function(g,b){return this.fadeOut(g,b,0,"-"+this.height().first())},fadeDown:function(g,b){return this.fadeOut(g,
b,0,this.height().first())}}});d.plugin(function(){function f(g){var b=[],a=0;g=i.parse(i.stringify(g));for(var c in g)b[a++]=c+"="+escape(g[c]);return b.join("&")}var i=i||{};return{$http:function(g,b){var a=new XMLHttpRequest;if(isFunc(b))b={success:boundmethod(b,a)};b=Object.Extend({method:"GET",data:null,state:Function.Empty,success:Function.Empty,error:Function.Empty,async:true,withCredentials:false},b);b.state=boundmethod(b.state,a);b.success=boundmethod(b.success,a);b.error=boundmethod(b.error,
a);if(b.data&&b.method==="GET")g+="?"+f(b.data);else if(b.data&&b.method==="POST")b.data=f(b.data);a.open(b.method,g,b.async);a.withCredentials=b.withCredentials;a.onreadystatechange=function(){b.state&&b.state();if(a.readyState===4)a.status===200?b.success(a.responseText):b.error(a.status,a.statusText)};a.send(b.data);return d([a])},$post:function(g,b){if(isFunc(b))b={success:b};b=b||{};b.method="POST";return d.http(g,b)},$get:function(g,b){if(isFunc(b))b={success:b};b=b||{};b.method="GET";return d.http(g,
b)}}});d.plugin(function(){function f(a,c){throw Error("sql error ["+c.code+"] "+c.message);}function i(a,c){if(!a)throw Error("assert failed: "+c);}function g(a,c,e,h){if(a==null)return null;if(isFunc(c)){h=e;e=c;c=null}c=c||[];e=e||Function.Empty;h=h||f;i(isType(this[0],"Database"),"can only call .sql() on a bling of Database");return this.transaction(function(j){j.executeSql(a,c,e,h)})}function b(a){this.zip("transaction").call(a);return this}return{$db:function(a,c,e,h){a=d([window.openDatabase(a||
"bling.db",c||"1.0",e||"bling database",h||1024)]);a.transaction=b;a.execute=g;return a}}});d.plugin(function(){function f(p){var s=[];p=p.split(/%[\(\/]/);var m=-1,q=1,u=p.length,n=null,r=m=null;for(s.push(p[0]);q<u;q++){a:{n=p[q];m=-1;r=1;if(m==null||m===-1)m=n.length;for(var v=0;v<m;v++){if(n.charAt(v)==="(")r+=1;else if(n.charAt(v)===")")r-=1;if(r===0){m=v;break a}}m=-1}if(m===-1)return"Template syntax error: unmatched '%(' in chunk starting at: "+p[q].substring(0,15);n=p[q].substring(0,m);m=
p[q].substring(m);r=b.exec(m);if(r===null)return"Template syntax error: invalid type specifier starting at '"+m+"'";m=r[4];s.push(n);s.push(r[1]|0);s.push(r[2]|0);s.push(r[3]);s.push(m)}return s}function i(p,s){for(var m=f.cache[p]||(f.cache[p]=f(p)),q=[m[0]],u=1,n=1,r=m.length;n<r-4;n+=5){var v=m[n],z=m[n+1],A=m[n+2],w=m[n+3],k=m[n+4],x=s[v];if(x==null)x="missing required value: "+v;switch(w){case "d":q[u++]=""+parseInt(x,10);break;case "f":q[u++]=parseFloat(x).toFixed(A);break;default:q[u++]=""+
x}if(z>0)q[u]=String.PadLeft(q[u],z);q[u++]=k}return q.join("")}function g(p){function s(){var y=d.HTML.parse(z);w?w.appendChild(y):x.push(y);z="";k=a}function m(){var y=document.createElement(q);y.id=u?u:null;y.className=n?n:null;for(var B in A)y.setAttribute(B,A[B]);w?w.appendChild(y):x.push(y);w=y;z=v=r=n=u=q="";A={};k=a}for(var q="",u="",n="",r="",v="",z="",A={},w=null,k=a,x=d([]),C=0,o=null;o=p.charAt(C++);)if(o==="+"&&k===a)w=w?w.parentNode:w;else if(o==="#"&&(k===a||k===e||k===h))k=c;else if(o===
"."&&(k===a||k===c||k===h)){if(n.length>0)n+=" ";k=e}else if(o==="."&&n.length>0)n+=" ";else if(o==="["&&(k===a||k===c||k===e||k===h))k=h;else if(o==="="&&k===h)k=j;else if(o==='"'&&k===a)k=l;else if(o==="'"&&k===a)k=t;else if(o==="]"&&(k===h||k===j)){A[r]=v;v=r="";k=a}else if(o==='"'&&k===l)s();else if(o==="'"&&k===t)s();else if((o===" "||o===",")&&k!==j&&k!==h&&q.length>0){m();if(o==",")w=null}else if(k===a)q+=o!=" "?o:"";else if(k===c)u+=o;else if(k===e)n+=o;else if(k===h)r+=o;else if(k===j)v+=
o;else if(k===l||k===t)z+=o;else throw Error("Unknown input/state: '"+o+"'/"+k);q.length>0&&m();z.length>0&&s();return x}var b=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;f.cache={};var a=1,c=2,e=3,h=4,j=5,l=6,t=7;return{$render:i,$synth:g,template:function(p){this.render=function(s){return i(this.map(d.HTML.stringify).join(""),Object.Extend(p,s))};return this.remove()},render:function(p){return i(this.map(d.HTML.stringify).join(""),p)},synth:function(p){return g(p).appendTo(this)}}})})(Bling);
