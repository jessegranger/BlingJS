function Bling(e,k){if(Object.IsBling(e))return e;k=k||document;var j=null;if(e==null)j=[];else if(typeof e==="number")j=Array(e);else if(e===window||Object.IsNode(e))j=[e];else if(typeof e==="string"){e=e.trimLeft();if(e[0]==="<")j=[Bling.HTML.parse(e)];else if(k.querySelectorAll)try{j=k.querySelectorAll(e)}catch(m){throw Error("invalid selector: "+e,m);}else if(Object.IsBling(k))j=k.reduce(function(v,h){for(var o=h.querySelectorAll(e),i=0,b=o.length;i<b;i++)v.push(o[i]);return v},[]);else throw Error("invalid context: "+
k);}else j=e;j.__proto__=Bling.fn;j.selector=e;j.context=k;return j}Bling.fn=[];Bling.fn.constructor=Bling;Bling.symbol="$";window[Bling.symbol]=Bling;Object.Keys=function(e,k){var j=[],m=0,v=null;for(v in e)if(k||e.hasOwnProperty(v))j[m++]=v;return j};Object.Extend=function(e,k,j){var m;if(Object.prototype.toString.apply(j)=="[object Array]")for(m in j)e[j[m]]=k[j[m]]!=void 0?k[j[m]]:e[j[m]];else for(m in j=Object.Keys(k))e[j[m]]=k[j[m]];return e};
Object.Extend(Object,{Values:function(e,k){var j=Object.Keys(e,k),m={},v=0,h=null;for(v in j){h=j[v];m[e[h]]=h}return m},IsType:function(e,k){return e==null?e===k:e.__proto__==null?false:e.__proto__.constructor===k?true:typeof k==="string"?e.__proto__.constructor.name===k:Object.IsType(e.__proto__,k)},IsString:function(e){return typeof e==="string"||Object.IsType(e,String)},IsNumber:isFinite,IsFunc:function(e){return typeof e==="function"||Object.IsType(e,Function)},IsNode:function(e){return e?e.nodeType>
0:false},IsFragment:function(e){return e?e.nodeType===11:false},IsArray:function(e){return e?Function.ToString(e)==="[object Array]"||Object.IsType(e,Array):false},IsBling:function(e){return Object.IsType(e,Bling)},IsObject:function(e){return typeof e==="object"},HasValue:function(e){return e!=null},Unbox:function(e){if(Object.IsObject(e))switch(true){case Object.IsString(e):return e.toString();case Object.IsNumber(e):return Number(e)}return e}});
Object.Extend(Function,{Empty:function(){},Bound:function(e,k,j){function m(){return e.apply(k,j?j:arguments)}m.toString=function(){return"bound-method of "+k+"."+e.name};return m},Trace:function(e,k){function j(){console.log(k?k:""+(this.name?this.name:this)+"."+e.name,Array.Slice(arguments,0));return e.apply(this,arguments)}j.toString=function(){return e.toString()};console.log("Function.Trace:",k?k:e.name,"created");return j},NotNull:function(e){return e!=null},IndexFound:function(e){return e>
-1},ReduceAnd:function(e){return e&&this},UpperLimit:function(e){return function(k){return Math.min(e,k)}},LowerLimit:function(e){return function(k){return Math.max(e,k)}},ToString:function(e){return Object.prototype.toString.apply(e)},Px:function(e){return function(){return Number.Px(this,e)}}});Object.Extend(Array,{Slice:function(e,k,j){var m=[],v=0,h=e.length;j=j==null?h:j<0?h+j:j;for(k=k==null?0:k<0?h+k:k;k<j;)m[v++]=e[k++];return m}});
Object.Extend(Number,{Px:function(e,k){return parseInt(e,10)+(k|0)+"px"}});Object.Extend(String,{PadLeft:function(e,k,j){for(j=j||" ";e.length<k;)e=j+e;return e},PadRight:function(e,k,j){for(j=j||" ";e.length<k;)e+=j;return e},Splice:function(e,k,j,m){var v=e.length;j=j==null?v:j<0?v+j:j;return e.substring(0,k==null?0:k<0?v+k:k)+m+e.substring(j)}});
(function(e){var k=", ",j=/, */,m=" ",v=/\[object (\w+)\]/;e.plugin=function(h){var o=h.call(e,e),i=Object.Keys(o,true),b,c,a=arguments.callee.s=arguments.callee.s||[];for(b in i){c=i[b];if(c.charAt(0)==="$")e[c.substr(1)]=o[c];else e.fn[c]=o[c]}a.push(h.name);a[h.name]=o};e.plugin(function(){function h(b){var c;return function(){c=this[b];return Object.IsFunc(c)?Function.Bound(c,this):c}}function o(b){var c=b.indexOf(".");return c>-1?this.zip(b.substr(0,c)).zip(b.substr(c+1)):this.map(h(b))}var i=
new function(){this.queue=[];this.next=Function.Bound(function(){this.queue.length>0&&this.queue.shift()()},this);this.schedule=function(b,c){if(Object.IsFunc(b)){var a=this.queue.length;b.order=c+(new Date).getTime();if(a===0||b.order>this.queue[a-1].order)this.queue[a]=b;else{for(var d=false,f=0;f<a;f++)if(this.queue[f].order>b.order){this.queue.splice(f,0,b);d=true;break}d||this.queue.push(b)}setTimeout(this.next,c)}}};return{each:function(b){for(var c=-1,a=this.length,d=null;++c<a;){d=this[c];
b.call(d,d)}return this},map:function(b){var c=this.len(),a=e(c),d=0,f=null;a.context=this;for(a.selector=b;d<c;d++){f=this[d];try{a[d]=b.call(f,f)}catch(g){a[d]=g}}return a},reduce:function(b,c){if(!b)return this;var a=c,d=this;if(c==null){a=this[0];d=this.skip(1)}d.each(function(){a=b.call(this,a,this)});return a},union:function(b,c){var a=e(),d,f,g=d=f=0;a.context=this.context;for(a.selector=this.selector;g=this[f++];)a.contains(g,c)||(a[d++]=g);for(f=0;g=b[f++];)a.contains(g,c)||(a[d++]=g);return a},
intersect:function(b){var c=e(),a=0,d=0,f=this.length,g=b.length;c.context=this.context;for(c.selector=this.selector;a<f;a++)for(d=0;d<g;d++)if(this[a]===b[d]){c[c.length]=this[a];break}return c},distinct:function(b){return this.union(this,b)},contains:function(b,c){return this.count(b,c)>0},count:function(b,c){if(b===void 0)return this.len();var a=0;this.each(function(d){if(c&&d===b||!c&&d==b)a++});return a},zip:function(){switch(arguments.length){case 0:return this;case 1:return o.call(this,arguments[0]);
default:var b={},c=e(),a=arguments.length,d=this.length,f=0,g=0,n=null;for(f=0;f<a;f++)b[f]=o.call(this,arguments[f]);for(f=0;f<d;f++){a={};for(n in b)a[n]=b[n].shift();c[g++]=a}return c}},zap:function(b,c){if(!b)return this;var a=b.indexOf(".");return a>-1?this.zip(b.substr(0,a)).zap(b.substr(a+1),c):Object.IsArray(c)?this.each(function(d){d[b]=c[++a]}):this.each(function(){this[b]=c})},take:function(b){b=Math.min(b|0,this.len());var c=e(b),a=-1;c.context=this.context;for(c.selector=this.selector;++a<
b;)c[a]=this[a];return c},skip:function(b){b=Math.min(this.len(),Math.max(0,b|0));var c=0,a=this.len()-b,d=e(a);d.context=this.context;for(d.selector=this.selector;c<a;c++)d[c]=this[c+b];return d},first:function(b){return b?this.take(b):this[0]},last:function(b){return b?this.skip(this.len()-b):this[this.length-1]},join:function(b){if(this.length===0)return"";return this.reduce(function(c){return c+b+this})},slice:function(b,c){var a=e(Array.Slice(this,b,c));a.context=this.context;a.selector=this.selector;
return a},concat:function(b){for(var c=this.len()-1,a=-1,d=b.length;a<d-1;)this[++c]=b[++a];return this},push:function(b){Array.prototype.push.call(this,b);return this},filter:function(b){var c=0,a=-1,d=this.length,f=e(),g=null;f.context=this;for(f.selector=b;c<d;c++)if(g=this[c])if(Object.IsFunc(b)&&b.call(g,g)||Object.IsString(b)&&g.webkitMatchesSelector&&g.webkitMatchesSelector(b)||Object.IsType(b,"RegExp")&&b.test(g))f[++a]=g;return f},matches:function(b){if(Object.IsType(b,"RegExp"))return this.map(function(){return b.test(this)});
return Object.IsString(b)?this.zip("webkitMatchesSelector").call(b):this.map(function(){})},weave:function(b){var c=b.length,a=this.length,d=e(2*Math.max(a,c));a=a-1;d.context=this.context;for(d.selector=this.selector;a>=0;a--)d[a*2+1]=this[a];for(;++a<c;)d[a*2]=b[a];return d},fold:function(b){var c=this.len(),a=0,d=e(Math.ceil(c/2)),f=0;d.context=this.context;d.selector=this.selector;for(f=0;f<c-1;f+=2)d[a++]=b.call(this,this[f],this[f+1]);if(c%2===1)d[a++]=b.call(this,this[c-1],undefined);return d},
flatten:function(){var b=e(),c=this.len(),a=null,d=0,f=0,g=0,n=0;b.context=this.context;for(b.selector=this.selector;f<c;f++){a=this[f];g=0;for(d=a.length;g<d;)b[n++]=a[g++]}return b},call:function(){return this.apply(null,arguments)},apply:function(b,c){return this.map(function(){if(Object.IsFunc(this))return this.apply(b,c);return this})},toString:function(){return e.symbol+"(["+this.map(function(){return this===undefined||this===window?"undefined":this===null?"null":this.toString().replace(v,"$1")}).join(k)+
"])"},future:function(b,c){c&&i.schedule(Function.Bound(c,this),b);return this},log:function(b){b?console.log(b,this,this.length+" items"):console.log(this,this.length+" items");return this},len:function(){for(var b=this.length;b>-1&&this[--b]===undefined;);return b+1}}});e.plugin(function(){function h(a,d){a&&d&&a.parentNode.insertBefore(d,a)}function o(a){return Object.IsNode(a)?a:Object.IsBling(a)?a.toFragment():Object.IsString(a)?e(a).toFragment():Object.IsFunc(a.toString)?e(a.toString()).toFragment():
undefined}function i(a){for(var d=a.cloneNode(),f=0,g=a.childNodes.length;f<g;f++)d.appendChild(i(a.childNodes[f]));return d}function b(a){return function(){window.getComputedStyle(this,null).getPropertyValue(a)}}var c=null;return{$HTML:{parse:function(a){var d=document.createElement("html"),f=document.createDocumentFragment();d.innerHTML=a;a=d.childNodes[1];d=a.childNodes;var g=d.length;if(g===1)return a.removeChild(d[0]);for(var n=0;n<g;n++)f.appendChild(a.removeChild(d[0]));return f},stringify:function(a){a=
i(a);var d=document.createElement("div");d.appendChild(a);var f=d.innerHTML;d.removeChild(a);a.parentNode=null;return f},escape:function(a){c=c||e("<div>&nbsp;</div>").child(0);a=c.zap("data",a).zip("parentNode.innerHTML").first();c.zap("data","");return a}},$Color:{fromCss:function(a){a=a||this;if(Object.IsString(a)){var d=document.createElement("div");d.style.display="none";d.style.color=a;a=e(d).appendTo(document.body);d=window.getComputedStyle(d,null).getPropertyValue("color");a.remove();if(d){d=
d.slice(d.indexOf("(")+1,d.indexOf(")")).split(j);if(d.length===3)d[3]="1.0";return e(d).floats()}}},toCss:function(a){function d(f){f=f.map(Function.UpperLimit(255)).map(Function.LowerLimit(0));f[3]=Math.min(1,f[3]);return"rgba("+f.join(k)+")"}a=a||this;return Object.IsBling(a[0])?a.map(d):d(a)},invert:function(a){var d=e(4);if(Object.IsString(a))a=e.Color.fromCss(a);d[0]=255-a[0];d[1]=255-a[1];d[2]=255-a[2];d[3]=a[3];return d}},html:function(a){return a===undefined?this.zip("innerHTML"):Object.IsString(a)?
this.zap("innerHTML",a):Object.IsBling(a)?this.html(a.toFragment()):Object.IsNode(a)?this.each(function(){for(this.replaceChild(this.childNodes[0],a);this.childNodes.length>1;)this.removeChild(this.childNodes[1])}):undefined},append:function(a){if(a==null)return this;a=o(a);var d=this.zip("appendChild");d.take(1).call(a);d.skip(1).each(function(){this(i(a))});return this},appendTo:function(a){if(a==null)return this;e(a).append(this);return this},prepend:function(a){if(a==null)return this;a=o(a);this.take(1).each(function(){h(this.childNodes[0],
a)});this.skip(1).each(function(){h(this.childNodes[0],i(a))});return this},prependTo:function(a){if(a==null)return this;e(a).prepend(this);return this},before:function(a){if(a==null)return this;a=o(a);this.take(1).each(function(){h(this,a)});this.skip(1).each(function(){h(this,i(a))});return this},after:function(a){if(a==null)return this;a=o(a);this.take(1).each(function(){this.parentNode.insertBefore(a,this.nextSibling)});this.skip(1).each(function(){this.parentNode.insertBefore(i(a),this.nextSibling)});
return this},wrap:function(a){a=o(a);if(Object.IsFragment(a))throw Error("cannot wrap something with a fragment");return this.map(function(d){if(Object.IsFragment(d))a.appendChild(d);else if(Object.IsNode(d)){var f=d.parentNode;if(f){var g=document.createElement("dummy");a.appendChild(f.replaceChild(g,d));f.replaceChild(a,g)}else a.appendChild(d)}return d})},unwrap:function(){return this.each(function(){this.parentNode&&this.parentNode.parentNode&&this.parentNode.parentNode.replaceChild(this,this.parentNode)})},
replace:function(a){a=o(a);var d=e(),f=-1;this.take(1).each(function(){if(this.parentNode){this.parentNode.replaceChild(a,this);d[++f]=a}});this.skip(1).each(function(){if(this.parentNode){var g=i(a);this.parentNode.replaceChild(g,this);d[++f]=g}});return d},attr:function(a,d){var f=this.zip(d===undefined?"getAttribute":d===null?"removeAttribute":"setAttribute").call(a,d);return d?this:f},addClass:function(a){return this.removeClass(a).each(function(){var d=this.className.split(m).filter(function(f){return f&&
f!=""});d.push(a);this.className=d.join(m)})},removeClass:function(a){var d=function(f){return f!=a};return this.each(function(){this.className=this.className.split(m).filter(d).join(m)})},toggleClass:function(a){function d(f){return f!=a}return this.each(function(f){var g=f.className.split(m);if(g.indexOf(a)>-1)f.className=g.filter(d).join(m);else{g.push(a);f.className=g.join(m)}})},hasClass:function(a){return this.zip("className.split").call(m).zip("indexOf").call(a).map(Function.IndexFound)},text:function(a){return a?
this.zap("textContent",a):this.zip("textContent")},val:function(a){return a?this.zap("value",a):this.zip("value")},css:function(a,d){if(Object.HasValue(d)||Object.IsObject(a)){var f=this.zip("style.setProperty");if(Object.IsString(a))f.call(a,d);else for(var g in a)f.call(g,a[g]);return this}f=this.map(b(a));return this.zip("style").zip(a).weave(f).fold(function(n,q){return n?n:q})},defaultCss:function(a,d){var f=this.selector,g="<style> ",n=e("head");if(Object.IsString(a))if(Object.IsString(d))g+=
f+" { "+a+": "+d+" } ";else throw Error("defaultCss requires a value with a string key");else if(Object.IsObject(a)){g+=f+" { ";for(var q in a)g+=q+": "+a[q]+"; ";g+="} "}g+="</style>";n.append(g);return this},empty:function(){return this.html("")},rect:function(){return this.zip("getBoundingClientRect").call()},width:function(a){return a==null?this.rect().zip("width"):this.css("width",a)},height:function(a){return a==null?this.rect().zip("height"):this.css("height",a)},top:function(a){return a==
null?this.rect().zip("top"):this.css("top",a)},left:function(a){return a==null?this.rect().zip("left"):this.css("left",a)},bottom:function(a){return a==null?this.rect().zip("bottom"):this.css("bottom",a)},right:function(a){return a==null?this.rect().zip("right"):this.css("right",a)},position:function(a,d){return a==null?this.rect():d==null?this.css("left",Number.Px(a)):this.css({top:Number.Px(d),left:Number.Px(a)})},center:function(a){a=a||"viewport";var d=document.body.scrollLeft+document.body.clientHeight/
2,f=document.body.scrollTop+document.body.clientWidth/2;return this.each(function(){var g=e(this),n=g.height().floats().first(),q=g.width().floats().first();q=a==="viewport"||a==="horizontal"?f-q/2:NaN;n=a==="viewport"||a==="vertical"?d-n/2:NaN;g.css({position:"absolute",left:Object.IsNumber(q)?q+"px":undefined,top:Object.IsNumber(n)?n+"px":undefined})})},trueColor:function(a,d){a=a||"background-color";d=d||function(f){f[0]+=(this[0]-f[0])*this[3];f[1]+=(this[1]-f[1])*this[3];f[2]+=(this[2]-f[2])*
this[3];f[3]=Math.min(1,f[3]+this[3]);return f};return this.parents().map(function(){return this.map(window.getComputedStyle).filter(Object.HasValue).zip("getPropertyValue").call(a).filter(Object.IsString).map(e.Color.fromCss).reverse().reduce(d,e([0,0,0,0])).map(e.Color.toCss)})},child:function(a){return this.map(function(){return this.childNodes[a>=0?a:a+this.childNodes.length]})},children:function(){return this.map(function(){return e(this.childNodes,this)})},parent:function(){return this.zip("parentNode")},
parents:function(){return this.map(function(){for(var a=e(),d=-1,f=this;f=f.parentNode;)a[++d]=f;return a})},prev:function(){return this.map(function(){for(var a=e(),d=-1,f=this;f=f.previousSibling;)a[++d]=f;return a})},next:function(){return this.map(function(){for(var a=e(),d=-1,f=this;f=f.nextSibling;)a[++d]=f;return a})},remove:function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},find:function(a){return this.filter("*").map(function(){return e(a,this)}).flatten()},
clone:function(){return this.map(i)},toFragment:function(){if(this.length===1)return o(this[0]);var a=document.createDocumentFragment();this.map(o).map(Function.Bound(a.appendChild,a));return a}}});e.plugin(function(){return{floats:function(){return this.map(function(){if(Object.IsBling(this))return this.floats();return parseFloat(this)})},ints:function(){return this.map(function(){if(Object.IsBling(this))return this.ints();return parseInt(this,10)})},px:function(h){h=h||0;return this.ints().map(Function.Px(h))},
min:function(){return this.reduce(function(h){if(Object.IsBling(this))return this.min();return Math.min(this,h)})},max:function(){return this.reduce(function(h){if(Object.IsBling(this))return this.max();return Math.max(this,h)})},average:function(){return this.sum()/this.length},sum:function(){return this.reduce(function(h){if(Object.IsBling(this))return h+this.sum();return h+this})},squares:function(){return this.map(function(){if(Object.IsBling(this))return this.squares();return this*this})},magnitude:function(){var h=
this.map(function(){if(Object.IsBling(this))return this.magnitude();return parseFloat(this)});return Math.sqrt(h.squares().sum())},scale:function(h){return this.map(function(){if(Object.IsBling(this))return this.scale(h);return h*this})},normalize:function(){return this.scale(1/this.magnitude())}}});e.plugin(function(){function h(b){eval("var g = function "+b+"(f) { // ."+b+"([f]) - trigger [or bind] the '"+b+"' event \nreturn Object.IsFunc(f) ? this.bind('"+b+"',f) : this.trigger('"+b+"', f ? f : {}) }");
return eval("g")}function o(b,c,a,d,f){e(c).bind(a,f).each(function(){var g=this.__alive__=this.__alive__||{};g=g[b]=g[b]||{};(g[a]=g[a]||{})[d]=f})}function i(b,c,a,d){var f=e(c);f.each(function(){var g=this.__alive__=this.__alive__||{};g=g[b]=g[b]||{};g=g[a]=g[a]||{};f.unbind(a,g[d]);delete g[d]})}setTimeout(function(){e.fn.trigger!=null&&document.readyState==="complete"?e(document).trigger("ready"):setTimeout(arguments.callee,20)},0);return{bind:function(b,c){var a=0,d=(b||"").split(j),f=d.length;
return this.each(function(){for(;a<f;a++)this.addEventListener(d[a],c)})},unbind:function(b,c){var a=0,d=(b||"").split(j),f=d.length;return this.each(function(){for(;a<f;a++)this.removeEventListener(d[a],c)})},once:function(b,c){for(var a=0,d=(b||"").split(j),f=d.length;a<f;a++)this.bind(d[a],function(g){c.call(this,g);this.unbind(g.type,arguments.callee)})},cycle:function(b){function c(){var q=0;return function(t){d[q].call(this,t);q=++q%n}}for(var a=0,d=Array.Slice(arguments,1,arguments.length),
f=(b||"").split(j),g=f.length,n=d.length;a<g;)this.bind(f[a++],c());return this},trigger:function(b,c){var a,d=0,f=(b||"").split(j),g=f.length,n=null;for(c=Object.Extend({bubbles:true,cancelable:true},c);d<g;d++){n=f[d];switch(n){case "click":case "mousemove":case "mousedown":case "mouseup":case "mouseover":case "mouseout":a=document.createEvent("MouseEvents");c=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:null},
c);a.initMouseEvent(n,c.bubbles,c.cancelable,window,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget);break;case "blur":case "focus":case "reset":case "submit":case "abort":case "change":case "load":case "unload":a=document.createEvent("UIEvents");a.initUIEvent(n,c.bubbles,c.cancelable,window,1);break;case "touchstart":case "touchmove":case "touchend":case "touchcancel":a=document.createEvent("TouchEvents");c=Object.Extend({detail:1,
screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},c);a.initTouchEvent(n,c.bubbles,c.cancelable,window,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.touches,c.targetTouches,c.changedTouches,c.scale,c.rotation);break;case "gesturestart":case "gestureend":case "gesturecancel":a=document.createEvent("GestureEvents");c=Object.Extend({detail:1,screenX:0,
screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,target:null,scale:1,rotation:0},c);a.initGestureEvent(n,c.bubbles,c.cancelable,window,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.target,c.scale,c.rotation);break;default:a=document.createEvent("Events");a.initEvent(n,c.bubbles,c.cancelable)}a&&this.each(function(){this.dispatchEvent(a);delete a.result;delete a.returnValue})}return this},live:function(b,c){function a(g){e(d,
f).intersect(e(g.target).parents().first().union(e(g.target))).each(function(){g.target=this;c.call(this,g)})}var d=this.selector,f=this.context;e(f).bind(b,a);o(d,f,b,c,a);return this},die:function(b,c){var a=this.context,d=i(this.selector,a,b,c);e(a).unbind(b,d);return this},liveCycle:function(b){var c=0,a=Array.Slice(arguments,1,arguments.length);return this.live(b,function(d){a[c].call(this,d);c=++c%a.length})},click:function(b){this.css("cursor").intersect(["auto",""]).len()>0&&this.css("cursor",
"pointer");return Object.IsFunc(b)?this.bind("click",b):this.trigger("click",b?b:{})},mousemove:h("mousemove"),mousedown:h("mousedown"),mouseup:h("mouseup"),mouseover:h("mouseover"),mouseout:h("mouseout"),blur:h("blur"),focus:h("focus"),load:h("load"),ready:h("ready"),unload:h("unload"),reset:h("reset"),submit:h("submit"),keyup:h("keyup"),keydown:h("keydown"),change:h("change"),abort:h("abort"),cut:h("cut"),copy:h("copy"),paste:h("paste"),selection:h("selection"),drag:h("drag"),drop:h("drop"),orientationchange:h("orientationchange"),
touchstart:h("touchstart"),touchmove:h("touchmove"),touchend:h("touchend"),touchcancel:h("touchcancel"),gesturestart:h("gesturestart"),gestureend:h("gestureend"),gesturecancel:h("gesturecancel")}});e.plugin(function(){var h=/(?:scale|translate|rotate|scale3d|translate[XYZ]|translate3d|rotate[XYZ]|rotate3d)/,o={slow:700,medium:500,normal:300,fast:100,instant:0,now:0};return{$duration:function(i){return o[i]||parseFloat(i)},transform:function(i,b,c){if(Object.IsFunc(b)){c=b;b=null}b=b||"normal";var a=
e.duration(b);b=[];var d=0,f=0,g=null,n="",q={};for(f in i)if(h.test(f)){g=i[f];if(g.join)g=g.join(k);else if(g.toString)g=g.toString();n+=m+f+"("+g+")"}else q[f]=i[f];for(f in q)b[d++]=f;if(n)b[d++]="-webkit-transform";q["-webkit-transition-property"]=b.join(k);q["-webkit-transition-duration"]=b.map(function(){return a+"ms"}).join(k);if(n)q["-webkit-transform"]=n;this.css(q);return this.future(a,c)},hide:function(i){return this.each(function(){if(this.style){this._display=this.style.display==="none"?
"":this.style.display;this.style.display="none"}}).future(50,i)},show:function(i){return this.each(function(){if(this.style){this.style.display=this._display;delete this._display}}).future(50,i)},visible:function(){var i,b=i=null;return this.parents().map(function(c){for(var a=-1,d=c.length;++a<d;){var f=e(c[a]);if(f[0]===document){b=b||document;i=i||document}else{if(f.css("overflow-x").first()=="hidden")b=f;if(f.css("overflow-y").first()=="hidden")i=f;if(b&&i)break}}return e([b,i])})},toggle:function(i){this.weave(this.css("display")).fold(function(b,
c){if(b==="none"){console.log("new display:",c._display||"");c.style.display=c._display||"";delete c._display}else{console.log("display:",b);c._display=b;c.style.display="none"}return c}).future(50,i)},fadeIn:function(i,b){return this.css("opacity","0.0").show(function(){this.transform({opacity:"1.0",translate3d:[0,0,0]},i,b)})},fadeOut:function(i,b,c,a){c=c||0;a=a||0;return this.each(function(d){e(d).transform({opacity:"0.0",translate3d:[c,a,0]},i,function(){this.hide()})}).future(e.duration(i),
b)},fadeLeft:function(i,b){return this.fadeOut(i,b,"-"+this.width().first(),0)},fadeRight:function(i,b){return this.fadeOut(i,b,this.width().first(),0)},fadeUp:function(i,b){return this.fadeOut(i,b,0,"-"+this.height().first())},fadeDown:function(i,b){return this.fadeOut(i,b,0,this.height().first())}}});e.plugin(function(){function h(i){var b=[],c=0;i=o.parse(o.stringify(i));for(var a in i)b[c++]=a+"="+escape(i[a]);return b.join("&")}var o=o||{};return{$http:function(i,b){var c=new XMLHttpRequest;
if(Object.IsFunc(b))b={success:Function.Bound(b,c)};b=Object.Extend({method:"GET",data:null,state:Function.Empty,success:Function.Empty,error:Function.Empty,async:true,withCredentials:false},b);b.state=Function.Bound(b.state,c);b.success=Function.Bound(b.success,c);b.error=Function.Bound(b.error,c);if(b.data&&b.method==="GET")i+="?"+h(b.data);else if(b.data&&b.method==="POST")b.data=h(b.data);c.open(b.method,i,b.async);c.withCredentials=b.withCredentials;c.onreadystatechange=function(){b.state&&b.state();
if(c.readyState===4)c.status===200?b.success(c.responseText):b.error(c.status,c.statusText)};c.send(b.data);return e([c])},$post:function(i,b){if(Object.IsFunc(b))b={success:b};b=b||{};b.method="POST";return e.http(i,b)},$get:function(i,b){if(Object.IsFunc(b))b={success:b};b=b||{};b.method="GET";return e.http(i,b)}}});e.plugin(function(){function h(c,a){throw Error("sql error ["+a.code+"] "+a.message);}function o(c,a){if(!c)throw Error("assert failed: "+a);}function i(c,a,d,f){if(c==null)return null;
if(Object.IsFunc(a)){f=d;d=a;a=null}a=a||[];d=d||Function.Empty;f=f||h;o(Object.IsType(this[0],"Database"),"can only call .sql() on a bling of Database");return this.transaction(function(g){g.executeSql(c,a,d,f)})}function b(c){this.zip("transaction").call(c);return this}return{$db:function(c,a,d,f){c=e([window.openDatabase(c||"bling.db",a||"1.0",d||"bling database",f||1024)]);c.transaction=b;c.execute=i;return c}}});e.plugin(function(){function h(t){var x=[];t=t.split(/%[\(\/]/);var p=-1,u=1,y=t.length,
r=null,w=p=null;for(x.push(t[0]);u<y;u++){a:{r=t[u];p=-1;w=1;if(p==null||p===-1)p=r.length;for(var z=0;z<p;z++){if(r.charAt(z)==="(")w+=1;else if(r.charAt(z)===")")w-=1;if(w===0){p=z;break a}}p=-1}if(p===-1)return"Template syntax error: unmatched '%(' in chunk starting at: "+t[u].substring(0,15);r=t[u].substring(0,p);p=t[u].substring(p);w=b.exec(p);if(w===null)return"Template syntax error: invalid type specifier starting at '"+p+"'";p=w[4];x.push(r);x.push(w[1]|0);x.push(w[2]|0);x.push(w[3]);x.push(p)}return x}
function o(t,x){for(var p=h.cache[t]||(h.cache[t]=h(t)),u=[p[0]],y=1,r=1,w=p.length;r<w-4;r+=5){var z=p[r],D=p[r+1],E=p[r+2],A=p[r+3],l=p[r+4],B=x[z];if(B==null)B="missing required value: "+z;switch(A){case "d":u[y++]=""+parseInt(B,10);break;case "f":u[y++]=parseFloat(B).toFixed(E);break;default:u[y++]=""+B}if(D>0)u[y]=String.PadLeft(u[y],D);u[y++]=l}return u.join("")}function i(t){function x(){var C=e.HTML.parse(D);A?A.appendChild(C):B.push(C);D="";l=c}function p(){var C=document.createElement(u);
C.id=y?y:null;C.className=r?r:null;for(var F in E)C.setAttribute(F,E[F]);A?A.appendChild(C):B.push(C);A=C;D=z=w=r=y=u="";E={};l=c}for(var u="",y="",r="",w="",z="",D="",E={},A=null,l=c,B=e([]),G=0,s=null;s=t.charAt(G++);)if(s==="+"&&l===c)A=A?A.parentNode:A;else if(s==="#"&&(l===c||l===d||l===f))l=a;else if(s==="."&&(l===c||l===a||l===f)){if(r.length>0)r+=m;l=d}else if(s==="."&&r.length>0)r+=m;else if(s==="["&&(l===c||l===a||l===d||l===f))l=f;else if(s==="="&&l===f)l=g;else if(s==='"'&&l===c)l=n;else if(s===
"'"&&l===c)l=q;else if(s==="]"&&(l===f||l===g)){E[w]=z;z=w="";l=c}else if(s==='"'&&l===n)x();else if(s==="'"&&l===q)x();else if((s===m||s===",")&&l!==g&&l!==f&&u.length>0){p();if(s==",")A=null}else if(l===c)u+=s!=m?s:"";else if(l===a)y+=s;else if(l===d)r+=s;else if(l===f)w+=s;else if(l===g)z+=s;else if(l===n||l===q)D+=s;else throw Error("Unknown input/state: '"+s+"'/"+l);u.length>0&&p();D.length>0&&x();return B}var b=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;h.cache={};var c=1,
a=2,d=3,f=4,g=5,n=6,q=7;return{$render:o,$synth:i,template:function(t){this.render=function(x){return o(this.map(e.HTML.stringify).join(""),Object.Extend(t,x))};return this.remove()},render:function(t){return o(this.map(e.HTML.stringify).join(""),t)},synth:function(t){return i(t).appendTo(this)}}})})(Bling);
