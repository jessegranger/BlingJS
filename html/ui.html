<html>
	<head>
		<script src="../bling.js"></script>
		<script src="../plugins/bling.ui.js"></script>
		<style>
			div.droppable {
				width: 120px;
				height: 120px;
				text-align: center;
				line-height: 120px;
				border: 1px dashed black;
			}
		</style>
		<script>
			$(document).ready(function() {
				$.UI.Draggable(".draggable").bind("drag", function() {
					$(this).css({top: "", left: ""})
				})

				$.fn.snapTo = function(to, fromside, toside) {
					var $to = $(to),
						fpos = this.position()[0],
						tpos = $to.position()[0],
						top = fpos.top,
						left = fpos.left
					switch (toside) {
						case "left":
							left = tpos.left
							break
						case "right":
							left = tpos.width + tpos.left
							break
						case "top":
							top = tpos.top
							break
						case "bottom":
							top = tpos.top + tpos.height
							break
					}
					switch (fromside) {
						case "top": /*fall-through*/
						case "left":
						break
						case "right":
							left -= fpos.width
							break
						case "bottom":
							top -= fpos.height
							break
					}
					return this.transform({
						top: top + "px",
						left: left + "px",
						translate: [ 0, 0 ]
					}, "now")
				}

				$(".droppable").bind('drop', function(evt) {
					$(evt.dropObject).snapTo(this, "left", "left")
				})
			})
		</script>
	</head>
	<body>
		<h1>UI Demos</h1>

		<h2>Progress Bar</h2>
		<p>Show the progress of long-running tasks.
		<div id="bar-demo">
			<div class="progressbar">Any content can be</div>
			<input class="progressbar" type="text" value="a progressbar.">
			<script>
				$(document).ready(function() {
					var bars = $("#bar-demo .progressbar")
							.progressBar(),
						interval = 30, // ms
						steps = 15,
						i = 0,
						loop = function() {
							// update the progress bar
							bars.zip("update").call(i / steps)
							if( i++ < steps)
								setTimeout(arguments.callee, interval)
						}
					// begin the update loop
					loop()
				})
			</script>
		</div>

		<h2>View Stack</h2>
		<p>Multiple objects that are visually exclusive.
		<div id="view-demo">
			<div class="views">
				<div id="view1">View #1</div>
				<div id="view2">View #2</div>
				<div id="view3">View #3</div>
			</div>
			<style>
				.views > * {
					border:1px dashed black;
					width: 200px;
					text-align: center;
				}
			</style>
			<script>
				// make a viewStack, and button to rotate the stack
				$(document).ready(function() {
					var views = $("#view-demo .views > *")
						.viewStack()
					$.synth("button")
						.text("Next View")
						.click(function() {
							views.next()
						})
						.appendTo("#view-demo")
					$.synth("button")
						.text("Select View 3")
						.click(function() {
							views.activate(2)
						})
						.appendTo("#view-demo")
					$.synth("button")
						.text("Select View 2")
						.click(function() {
							$("#view2").zip("activate").call()
						})
						.appendTo("#view-demo")
					$.synth("button")
						.text("Select View 1")
						.click(function() {
							$("#view1")[0].activate()
						})
						.appendTo("#view-demo")
				})
			</script>
		</div>

		<h2>Tabs</h2>
		<p>Tabs are small clickable items that control a ViewStack.
		<div id="tab-demo">
			<ul class="tabs">
				<li>Tab One</li>
				<li>Tab Two</li>
				<li>Tab Three</li>
			</ul>
			<div class="views">
				<div>View 1</div>
				<div>View 2</div>
				<div>View 3</div>
			</div>
			<script>
				// make set of tabs to control a viewStack
				$(document).ready(function() {
					function Tabs(selector, views) {
						var tabs = $(selector),
							views = $(views).viewStack(),
							nn = tabs.len(),
							i = 0
						while( i < nn )
							tabs[i]._tabIndex = i++
						tabs.click(function tab_click() {
							views.activate(this._tabIndex)
						})
						return tabs
					}
					$.fn.tabs = function (views) {
						return Tabs(this, views)
					}
					$("#tab-demo .tabs > *").tabs("#tab-demo .views > *")
				})
			</script>
		</div>

		<h2>Drag / Drop</h2>
		<div class="droppable">Drop stuff here.</div>
		<span class="draggable">Drag me around.</span>

	</body>
</html>

