(function(){var l,r,B,s,n=Array.prototype.slice,D=Object.prototype.hasOwnProperty,E=function(a,j){function h(){this.constructor=a}for(var i in j)D.call(j,i)&&(a[i]=j[i]);h.prototype=j.prototype;a.prototype=new h;a.__super__=j.prototype;return a},C=function(a,j){return function(){return a.apply(j,arguments)}};!1 in document?alert("This browser is not supported"):(s=console&&console.log?function(){var a;a=1<=arguments.length?n.call(arguments,0):[];return console.log.apply(console,a)}:function(){var a;
a=1<=arguments.length?n.call(arguments,0):[];return alert(a.join(", "))},r=/,* +/,B=/\[object (\w+)\]/,l=function(a,j){var h;j==null&&(j=document);h=Object.Type(a);if(h==="undefined"||h==="null")h=[];else if(h==="array"||h==="bling"||h==="nodelist")h=a;else if(h==="node"||h==="window"||h==="function")h=[a];else if(h==="number")h=Array(a);else if(h==="string")if(a=a.trimLeft(),a[0]==="<")h=[l.HTML.parse(a)];else if(j.querySelectorAll)h=j.querySelectorAll(a);else throw Error("invalid context: "+j+" (type: "+
Object.Type(j)+")");else throw Error("invalid selector: "+a+" (type: "+Object.Type(a)+")");h.constructor=l;h.__proto__=l.fn;h.selector=a;h.context=j;h.length=h.len();return h},l.fn=[],Object.Keys=function(a,j){var h,i,e;j==null&&(j=!1);e=[];i=0;for(h in a)if(j||a.hasOwnProperty(h))e[i++]=h;return e},Object.Extend=function(a,j,h){var i,e,b;if(Object.prototype.toString.apply(h)==="[object Array]")for(i in h)j[h[i]]!==void 0&&(a[h[i]]=j[h[i]]);else{b=Object.Keys(j);for(h=0,e=b.length;h<e;h++)i=b[h],
a[i]=j[i]}return a},Object.Extend(Object,{Type:function(a){var j;switch(!0){case a===void 0:return"undefined";case a===null:return"null";case Object.IsString(a):return"string";case Object.IsType(a,l):return"bling";case Object.IsArray(a):return"array";case Object.IsType(a,NodeList):return"nodelist";case Object.IsNumber(a):return"number";case Object.IsFragment(a):return"fragment";case Object.IsNode(a):return"node";case Object.IsFunc(a):return"function";case Object.IsType(a,"RegExp"):return"regexp";
case (j=String(a))==="true"||j==="false":return"boolean";case Object.IsError(a):return"error";case Object.IsObject(a):return"setInterval"in a?"window":"object"}},IsType:function(a,j){return a===null?a===j:a.constructor===j?!0:typeof j==="string"?a.constructor.name===j||Object.prototype.toString.apply(a).replace(B,"$1")===j:Object.IsType(a.__proto__,j)},IsString:function(a){return a!=null&&(typeof a==="string"||Object.IsType(a,String))},IsNumber:function(a){return a!=null&&Object.IsType(a,Number)},
IsBoolean:function(a){return typeof a==="boolean"},IsFunc:function(a){return a!=null&&(typeof a==="function"||Object.IsType(a,Function))&&a.call!=null},IsNode:function(a){return a!=null&&a.nodeType>0},IsFragment:function(a){return a!=null&&a.nodeType===11},IsArray:function(a){return a!=null&&(Object.ToString(a)==="[object Array]"||Object.IsType(a,Array))},IsBling:function(a){return a!=null&&Object.IsType(a,l)},IsError:function(a){var j;return a!=null&&((j=a.constructor)!=null?j.name:void 0)==="Error"},
IsObject:function(a){return a!=null&&typeof a==="object"},IsDefined:function(a){return a!=null},Unbox:function(a){if(a!=null&&Object.IsObject(a)){if(Object.IsString(a))return a.toString();if(Object.IsNumber(a))return Number(a)}return a},ToString:function(a){return Object.prototype.toString.apply(a)}}),Object.Extend(Function,{Empty:function(){},Bound:function(a,j,h){var i;h==null&&(h=[]);"bind"in a?(h.splice(0,0,j),i=a.bind.apply(a,h)):i=function(){1<=arguments.length&&n.call(arguments,0);return a.apply(j,
h)};i.toString=function(){return"bound-method of "+j+"."+a.name};return i},Trace:function(a,j,h){var i;h==null&&(h=s);i=function(){var e;e=1<=arguments.length?n.call(arguments,0):[];h(""+(this.name||Object.Type(this))+"."+(j||a.name)+"(",e,")");return a.apply(this,e)};h("Function.Trace: "+(j||a.name)+" created.");i.toString=a.toString;return i},NotNull:function(a){return a!==null},IndexFound:function(a){return a>-1},ReduceAnd:function(a){return a&&this},UpperLimit:function(a){return function(j){return Math.min(a,
j)}},LowerLimit:function(a){return function(j){return Math.max(a,j)}},Px:function(a){return function(){return Number.Px(this,a)}}}),Object.Extend(Array,{Coalesce:function(){var a,j,h,i;a=1<=arguments.length?n.call(arguments,0):[];if(Object.IsArray(a[0]))return Array.Coalesce.apply(Array,a[0]);else for(h=0,i=a.length;h<i;h++)if(j=a[h],j!=null)return j},Extend:function(a,j){var h,i,e,b;i=a.length;for(e=0,b=j.length;e<b;e++)h=j[e],a[i++]=h;return a}}),Object.Extend(Number,{Px:function(a,j){j==null&&
(j=0);return a!=null&&parseInt(a,10)+(j|0)+"px"},AtLeast:function(a){return function(j){return Math.max(parseFloat(j||0),a)}},AtMost:function(a){return function(j){return Math.min(parseFloat(j||0),a)}}}),Object.Extend(String,{PadLeft:function(a,j,h){for(h==null&&(h=" ");a.length<j;)a=h+a;return a},PadRight:function(a,j,h){for(h==null&&(h=" ");a.length<j;)a+=h;return a},Splice:function(a,j,h,i){var e;e=a.length;h<0&&(h+=e);j<0&&(j+=e);return a.substring(0,j)+i+a.substring(h)},Checksum:function(a){var j,
h,i,e;j=1;h=0;for(i=0,e=a.length;0<=e?i<e:i>e;0<=e?i++:i--)j=(j+a.charCodeAt(i))%65521,h=(h+j)%65521;return h<<16|j}}),Object.Extend(Event,{Cancel:function(a){a.stopPropagation();a.preventDefault();a.cancelBubble=!0;return a.returnValue=!1},Prevent:function(a){return a.preventDefault()},Stop:function(a){a.stopPropagation();return a.cancelBubble=!0}}),function(a){a.plugins=[];a.plugin=function(j){var h,i;try{h=j.name;i=j.call(a,a);h=h||i.name;if(!h)throw Error("plugin requires a 'name'");a.plugins.push(h);
a.plugins[h]=i;delete i.name;i[l.symbol]&&(Object.Extend(l,i[l.symbol]),delete i[l.symbol]);return Object.Extend(l.fn,i)}catch(e){throw s("failed to load plugin "+h),e;}};a.plugin(function(){var j;j=null;a.__defineSetter__("symbol",function(a){j in window&&delete window[j];j=a;return window[a]=l});a.__defineGetter__("symbol",function(){return j});a.symbol="$";window.Bling=l;return{name:"Symbol"}});a.plugin(function(){var a,h,i;a=/^\s+/;String.prototype.trimLeft=Array.Coalesce(String.prototype.trimLeft,
function(){return this.replace(a,"")});String.prototype.split=Array.Coalesce(String.prototype.split,function(a){var b,d,g,f;b=[];for(d=f=0;(g=this.indexOf(a,d))>-1;)b[f++]=this.substring(d+1,g+1),d=g+1;return b});Array.prototype.join=Array.Coalesce(Array.prototype.join,function(a){var b,d;a==null&&(a="");b=this.length;if(b===0)return"";for(d=this[b-1];--b>0;)d=this[b-1]+a+d;return d});if(typeof Element!=="undefined"&&Element!==null&&(Element.prototype.matchesSelector=Array.Coalesce(Element.prototype.webkitMatchesSelector,
Element.prototype.mozMatchesSelector,Element.prototype.matchesSelector),i=Element.prototype.toString,Element.prototype.toString=function(a){return a?(a=this.nodeName.toLowerCase(),this.id!=null?a+="#"+this.id:this.className!=null&&(a+="."+this.className.split(" ").join(".")),a):i.apply(this)},Element.prototype.cloneNode.length===0))h=Element.prototype.cloneNode,Element.prototype.cloneNode=function(a){var b,d,g,f;a==null&&(a=!1);b=h.call(this);if(a){f=this.childNodes;for(d=0,g=f.length;d<g;d++)a=f[d],
b.appendChild(a.cloneNode(!0))}return b};return{name:"Compat"}});a.plugin(function(){var j,h,i;h=new (function(){function a(){var e;e=C(function(){if(this.length>0)return this.shift()()},this);this.schedule=C(function(a,g){var f,c;if(!Object.IsFunc(a))throw Error("function expected, got: "+typeof a);c=this.length;a.order=g+(new Date).getTime();if(c===0||a.order>this[c-1].order)this[c]=a;else for(f=0;0<=c?f<c:f>c;0<=c?f++:f--)if(this[f].order>a.order){this.splice(f,0,a);break}setTimeout(e,g);return this},
this)}E(a,Array);return a}());j=function(a){return function(){var b;b=this[a];return Object.IsFunc(b)?Function.Bound(b,this):b}};i=function(a){var b;b=a.indexOf(".");return b>-1?this.zip(a.substr(0,b)).zip(a.substr(b+1)):this.map(j(a))};return{name:"Core",eq:function(e){var b;b=a([this[e]]);b.context=this;b.selector=function(){return b.context.eq(e)};return b},each:function(a){var b,d,g;for(d=0,g=this.length;d<g;d++)b=this[d],a.call(b,b);return this},map:function(e){var b,d,g,f;b=a();b.context=this;
b.selector=function(){return b.context.map(e)};g=this.len();for(d=0;0<=g?d<g:d>g;0<=g?d++:d--){f=this[d];try{b[d]=e.call(f,f)}catch(c){b[d]=c}}return b},reduce:function(a,b){var d,g;d=b;g=this;b==null&&(d=this[0],g=this.skip(1));g.each(function(){return d=a.call(this,d,this)});return d},union:function(e,b){var d,g,f,c;f=a();c=d=g=0;f.context=this;for(f.selector=function(){return f.context.union(e,b)};c=this[g++];)f.contains(c,b)||(f[d++]=c);for(g=0;c=e[g++];)f.contains(c,b)||(f[d++]=c);return f},
intersect:function(e){var b,d,g,f,c,m;m=a();g=0;f=this.len();c=Object.IsFunc(e.len)?e.len():e.length;m.context=this;m.selector=function(){return m.context.intersect(e)};for(b=0;0<=f?b<f:b>f;0<=f?b++:b--)for(d=0;0<=c?d<c:d>c;0<=c?d++:d--)if(this[b]===e[d]){m[g++]=this[b];break}return m},distinct:function(a){return this.union(this,a)},contains:function(a,b){var d,g,f;for(g=0,f=this.length;g<f;g++)if(d=this[g],b&&d===a||!b&&d===a)return!0;return!1},count:function(a,b){var d;if(a===void 0)return this.len();
d=0;this.each(function(g){if(b&&g===a||!b&&g===a)return d++});return d},zip:function(){var e,b,d,g,f,c,m,A;e=1<=arguments.length?n.call(arguments,0):[];c=e.length;switch(c){case 0:return a();case 1:return i.call(this,e[0]);default:A={};m=this.len();f=a();for(b=d=0;0<=c?b<c:b>c;0<=c?b++:b--)A[e[b]]=i.call(this,e[b]);for(b=0;0<=m?b<m:b>m;0<=m?b++:b--){e={};for(g in A)e[g]=A[g].shift();f[d++]=e}return f}},zap:function(a,b){var d;d=a.indexOf(".");return d>-1?this.zip(a.substr(0,d)).zap(a.substr(d+1),
b):Object.IsArray(b)?this.each(function(){return this[a]=b[++d%b.length]}):this.each(function(){return this[a]=b})},zipzapmap:function(a,b){var d;d=this.zip(a);d=d.map(b);return this.zap(a,d)},take:function(e){var b,d,g,f,c;g=this.len();c=0;d=Math.min(e|0,g);e<0&&(c=Math.max(0,g+e),d=g);b=a();b.context=this;b.selector=function(){return b.context.take(e)};f=0;for(g=c;c<=d?g<d:g>d;c<=d?g++:g--)b[f++]=this[g];return b},skip:function(e){var b,d,g,f,c;e==null&&(e=0);c=Math.max(0,e|0);d=this.len();b=a();
b.context=this;b.selector=function(){return b.context.skip(e)};f=0;for(g=c;c<=d?g<d:g>d;c<=d?g++:g--)b[f++]=this[g];return b},first:function(a){a==null&&(a=1);return a===1?this[0]:this.take(a)},last:function(a){a==null&&(a=1);return a===1?this[this.len()-1]:this.skip(this.len()-a)},slice:function(e,b){var d,g,f;e==null&&(e=0);b==null&&(b=this.len());f=0;g=this.len();e<0&&(e+=g);b<0&&(b+=g);d=a();d.context=this;d.selector=function(){return d.context.slice(e,b)};for(g=e;e<=b?g<b:g>b;e<=b?g++:g--)d[f++]=
this[g];return d},concat:function(a){var b,d,g;b=this.len()-1;d=-1;for(g=Object.IsFunc(a.len)?a.len():a.length;d<g-1;)this[++b]=a[++d];return this},push:function(a){Array.prototype.push.call(this,a);return this},filter:function(e){var b,d,g,f,c,m;b=a();b.context=this;b.selector=function(){return b.context.filter(e)};switch(Object.Type(e)){case "string":d=function(a){return a.matchesSelector(e)};break;case "regexp":d=function(a){return e.test(a)};break;case "function":d=e;break;default:throw Error("unsupported type passed to filter: "+
Object.Type(e));}f=0;for(c=0,m=this.length;c<m;c++)g=this[c],d.call(g,g)&&(b[f++]=g);return b},test:function(a){return this.map(function(){return a.test(this)})},matches:function(a){return this.zip("matchesSelector").call(a)},querySelectorAll:function(e){return this.filter("*").reduce(function(a,d){return Array.Extend(a,d.querySelectorAll(e))},a())},weave:function(e){var b,d,g,f;f=this.len();g=e.length;d=f-1;b=a();b.context=this;b.selector=function(){return b.context.weave(e)};for(d=f-=1;f<=0?d<=
0:d>=0;f<=0?d++:d--)b[d*2+1]=this[d];for(d=0;0<=g?d<g:d>g;0<=g?d++:d--)b[d*2]=e[d];return b},fold:function(e){var b,d,g,f,c;f=this.len();g=0;b=a();b.context=this;b.selector=function(){return b.context.fold(e)};for(d=0,c=f-1;d<c;d+=2)b[g++]=e.call(this,this[d],this[d+1]);f%2===1&&(b[g++]=e.call(this,this[f-1],void 0));return b},flatten:function(){var e,b,d,g,f,c,m;e=a();e.context=this;e.selector=function(){return e.context.flatten()};m=this.len();for(g=c=0;0<=m?g<m:g>m;0<=m?g++:g--){b=this[g];d=Object.IsFunc(b.len)?
b.len():b.length;for(f=0;0<=d?f<d:f>d;0<=d?f++:f--)e[c++]=b[f]}return e},call:function(){return this.apply(null,arguments)},apply:function(a,b){return this.map(function(){return Object.IsFunc(this)?this.apply(a,b):this})},toString:function(){return a.symbol+"(["+this.map(function(){var a;a=Object.Type(this);return a==="undefined"||a==="null"||a==="window"?a:this.toString().replace(B,"$1")}).join(", ")+"])"},delay:function(a,b){b&&h.schedule(Function.Bound(b,this),a);return this},log:function(a){var b;
b=this.len();a?s(a,this,b+" items"):s(this,b+" items");return this},len:function(){var a;for(a=this.length;this[a]!==void 0;)a++;for(;a>-1&&this[a]===void 0;)a--;return a+1}}});a.plugin(function(){var j,h,i,e,b,d;h=function(a,f){var c;a.parentNode==null&&(c=document.createDocumentFragment(),c.appendChild(a));return a.parentNode.insertBefore(f,a)};j=function(a,f){var c;a.parentNode==null&&(c=document.createDocumentFragment(),c.appendChild(a));return a.parentNode.insertBefore(f,a.nextSibling)};d=function(g){switch(Object.Type(g)){case "fragment":return g;
case "node":return g;case "bling":return g.toFragment();case "string":return a(g).toFragment();case "function":return a(g.toString()).toFragment();default:throw Error("toNode called with invalid argument: "+g+" (type: "+Object.Type(g)+")");}};e=null;b=function(a){return function(){return window.getComputedStyle(this,null).getPropertyValue(a)}};i=function(a){var f,c,b,d,e,i,h;i=[];f="A".charCodeAt(0);c="Z".charCodeAt(0);b="a".charCodeAt(0);for(e=0,h=a.length;0<=h?e<h:e>h;0<=h?e++:e--)d=a.charCodeAt(e),
c>=d&&d>=f&&(d=d-f+b,i.push("-")),i.push(String.fromCharCode(d));return i.join("")};return{name:"Html",$:{HTML:{parse:function(a){var f,c,b,d;d=document.createElement("div");d.innerHTML=a;a=d.childNodes;b=a.length;if(b===1)return d.removeChild(a[0]);f=document.createDocumentFragment();for(c=0;0<=b?c<b:c>b;0<=b?c++:c--)f.appendChild(d.removeChild(a[0]));return f},stringify:function(a){var f,c;switch(Object.Type(a)){case "string":return a;case "node":return a=a.cloneNode(!0),f=document.createElement("div"),
f.appendChild(a),c=f.innerHTML,f.removeChild(a),c;default:return"unknown type: "+Object.Type(a)}},escape:function(g){e||(e=a("<div>&nbsp;</div>").child(0));g=e.zap("data",g).zip("parentNode.innerHTML").first();e.zap("data","");return g}},dataName:function(a){return i(a)}},html:function(a){switch(Object.Type(a)){case "undefined":return this.zip("innerHTML");case "string":return this.zap("innerHTML",a);case "bling":return this.html(a.toFragment());case "node":return this.each(function(){var f;this.replaceChild(this.childNodes[0],
a);for(f=[];this.childNodes.length>1;)f.push(this.removeChild(this.childNodes[1]));return f})}},append:function(a){var f,a=d(a);f=this.zip("appendChild");f.take(1).call(a);f.skip(1).each(function(c){return c(a.cloneNode(!0))});return this},appendTo:function(g){a(g).append(this);return this},prepend:function(a){a!=null&&(a=d(a),this.take(1).each(function(){return h(this.childNodes[0],a)}),this.skip(1).each(function(){return h(this.childNodes[0],a.cloneNode(!0))}));return this},prependTo:function(g){g!=
null&&a(g).prepend(this);return this},before:function(a){a!=null&&(a=d(a),this.take(1).each(function(){return h(this,a)}),this.skip(1).each(function(){return h(this,a.cloneNode(!0))}));return this},after:function(a){a!=null&&(a=d(a),this.take(1).each(function(){return j(this,a)}),this.skip(1).each(function(){return j(this,a.cloneNode(!0))}));return this},wrap:function(a){a=d(a);if(Object.IsFragment(a))throw Error("cannot wrap with a fragment");return this.map(function(f){var c,b;if(Object.IsFragment(f))a.appendChild(f);
else if(Object.IsNode(f))(b=f.parentNode)?(c=document.createElement("dummy"),a.appendChild(b.replaceChild(c,f)),b.replaceChild(a,c)):a.appendChild(f);return f})},unwrap:function(){return this.each(function(){if(this.parentNode&&this.parentNode.parentNode)return this.parentNode.parentNode.replaceChild(this,this.parentNode);else if(this.parentNode)return this.parentNode.removeChild(this)})},replace:function(g){var f,c,g=d(g);f=a();c=0;this.take(1).each(function(){var a;(a=this.parentNode)!=null&&a.replaceChild(g,
this);return f[c++]=g});this.skip(1).each(function(){var a,b;a=g.cloneNode(!0);(b=this.parentNode)!=null&&b.replaceChild(a,this);return f[c++]=a});return f},attr:function(a,f){switch(f){case void 0:return this.zip("getAttribute").call(a,f);case null:return this.zip("removeAttribute").call(a,f);default:return this.zip("setAttribute").call(a,f),this}},addClass:function(a){return this.removeClass(a).each(function(){var f;f=this.className.split(" ").filter(function(a){return a!==""});f.push(a);return this.className=
f.join(" ")})},removeClass:function(a){var f;f=function(c){return c!==a};return this.each(function(){return this.className=this.className.split(" ").filter(f).join(" ")})},toggleClass:function(a){var f;f=function(c){return c!==a};return this.each(function(){var c;c=this.className.split(" ");return c.indexOf(a)>-1?this.className=c.filter(f).join(" "):(c.push(a),this.className=c.join(" "))})},hasClass:function(a){return this.zip("className.split").call(" ").zip("indexOf").call(a).map(Function.IndexFound)},
text:function(a){return a!=null?this.zap("textContent",a):this.zip("textContent")},val:function(a){return a!=null?this.zap("value",a):this.zip("value")},css:function(a,f){var c,d,e,h;if(f!=null||Object.IsObject(a)){h=this.zip("style.setProperty");e=h.len();if(Object.IsObject(a))for(c in a)h.call(c,a[c],"");else if(Object.IsString(f))h.call(a,f,"");else if(Object.IsArray(f)){d=Math.max(f.length,e);for(c=0;0<=d?c<d:c>d;0<=d?c++:c--)h[c%e](a,f[c%d],"")}return this}else return c=this.map(b(a)),d=this.zip("style").zip(a),
d.weave(c).fold(function(a,c){return a||c})},defaultCss:function(g,f){var c,b,d;b=this.selector;d="";if(Object.IsString(g))if(Object.IsString(f))d+=""+b+" { "+g+": "+f+" } ";else throw Error("defaultCss requires a value with a string key");else if(Object.IsObject(g)){d+=""+b+" { ";for(c in g)d+=""+c+": "+g[c]+"; ";d+="} "}a.synth("style").text(d).appendTo("head");return this},empty:function(){return this.html("")},rect:function(){return this.zip("getBoundingClientRect").call()},width:function(a){return a===
null?this.rect().zip("width"):this.css("width",a)},height:function(a){return a===null?this.rect().zip("height"):this.css("height",a)},top:function(a){return a===null?this.rect().zip("top"):this.css("top",a)},left:function(a){return a===null?this.rect().zip("left"):this.css("left",a)},bottom:function(a){return a===null?this.rect().zip("bottom"):this.css("bottom",a)},right:function(a){return a===null?this.rect().zip("right"):this.css("right",a)},position:function(a,f){return a===null?this.rect():f===
null?this.css("left",Number.Px(a)):this.css({top:Number.Px(f),left:Number.Px(a)})},center:function(b){var f,c,d;b==null&&(b="viewport");f=document.body;c=f.scrollTop+f.clientHeight/2;d=f.scrollLeft+f.clientWidth/2;return this.each(function(){var f,e,h;e=a(this);f=e.height().floats().first();h=e.width().floats().first();h=b==="viewport"||b==="horizontal"?d-h/2:NaN;f=b==="viewport"||b==="vertical"?c-f/2:NaN;return e.css({position:"absolute",left:Number.Px(h),top:Number.Px(f)})})},scrollToCenter:function(){document.body.scrollTop=
this.zip("offsetTop")[0]-window.innerHeight/2;return this},child:function(a){return this.zip("childNodes").map(function(){var f;f=a;f<0&&(f+=this.length);return this[f]})},children:function(){return this.map(function(){return a(this.childNodes,this)})},parent:function(){return this.zip("parentNode")},parents:function(){return this.map(function(){var b,f,c;b=a();f=0;for(c=this;c=c.parentNode;)b[f++]=c;return b})},prev:function(){return this.map(function(){var b,f,c;b=a();f=0;for(c=this;c=c.previousSibling;)b[f++]=
c;return b})},next:function(){return this.map(function(){var b,f,c;b=a();f=0;for(c=this;c=c.nextSibling;)b[f++]=c;return b})},remove:function(){return this.each(function(){if(this.parentNode)return this.parentNode.removeChild(this)})},find:function(b){return this.filter("*").map(function(){return a(b,this)}).flatten()},clone:function(a){a==null&&(a=!0);return this.map(function(){return Object.IsNode(this)?this.cloneNode(a):null})},data:function(b,f){b="data-"+i(b);return a(this).attr(b,f)},toFragment:function(){var a,
f;return this.len()>1?(f=document.createDocumentFragment(),a=Function.Bound(f.appendChild,f),this.map(d).map(a),f):d(this[0])}}});a.plugin(function(){return{name:"Maths",floats:function(){return this.map(parseFloat)},ints:function(){return this.map(function(){return parseInt(this,10)})},px:function(a){a==null&&(a=0);return this.ints().map(Function.Px(a))},min:function(){return this.reduce(function(a){return Math.min(this,a)})},max:function(){return this.reduce(function(a){return Math.max(this,a)})},
average:function(){return this.sum()/this.len()},sum:function(){return this.reduce(function(a){return a+this})},squares:function(){return this.map(function(){return this*this})},magnitude:function(){return Math.sqrt(this.floats().squares().sum())},scale:function(a){return this.map(function(){return a*this})},normalize:function(){return this.scale(1/this.magnitude())}}});a.plugin(function(){var j,h,i,e,b,d,g;j=function(a){return function(c){c==null&&(c={});return Object.IsFunc(c)?this.bind(a,c):this.trigger(a,
c)}};e=function(f,c,b,d,g){return a(c).bind(b,g).each(function(){var a;a=this.__alive__||(this.__alive__={});a=a[f]||(a[f]={});return(a[b]||(a[b]={}))[d]=g})};g=function(f,c,b,d){var g;g=a(c);return g.each(function(){var a;a=this.__alive__||(this.__alive__={});a=a[f]||(a[f]={});a=a[b]||(a[b]={});g.unbind(b,a[d]);return delete a[d]})};h=i=0;d=function(){if(!i++)return a(document).trigger("ready").unbind("ready"),typeof document.removeEventListener==="function"&&document.removeEventListener("DOMContentLoaded",
d,!1),typeof window.removeEventListener==="function"?window.removeEventListener("load",d,!1):void 0};h++||(typeof document.addEventListener==="function"&&document.addEventListener("DOMContentLoaded",d,!1),typeof window.addEventListener==="function"&&window.addEventListener("load",d,!1));b={name:"Events",bind:function(a,c){var d,g;d=(a||"").split(r);g=function(a){b=c.apply(this,arguments);b===!1&&Event.Prevent(a);return b};return this.each(function(){var a,c,f,b;b=[];for(c=0,f=d.length;c<f;c++)a=d[c],
b.push(this.addEventListener(a,g,!1));return b})},unbind:function(a,c){var b;b=(a||"").split(r);return this.each(function(){var a,f,d,g;g=[];for(f=0,d=b.length;f<d;f++)a=b[f],g.push(this.removeEventListener(a,c,null));return g})},once:function(a,c){var b,d,g,e,h;b=(a||"").split(r);h=[];for(g=0,e=b.length;g<e;g++)d=b[g],h.push(this.bind(d,function(a){c.call(this,a);return this.removeEventListener(a.type,arguments.callee,null)}));return h},cycle:function(){var a,c,b,d,g,e,h;a=arguments[0];b=2<=arguments.length?
n.call(arguments,1):[];a=(a||"").split(r);g=b.length;c=function(){var a;a=0;return function(c){b[a].call(this,c);return a=++a%g}};for(e=0,h=a.length;e<h;e++)d=a[e],this.bind(d,c());return this},trigger:function(a,c){var b,d,g,e,h;c==null&&(c={});g=(a||"").split(r);c=Object.Extend({bubbles:!0,cancelable:!0},c);for(e=0,h=g.length;e<h;e++){d=g[e];if(d==="click"||d==="mousemove"||d==="mousedown"||d==="mouseup"||d==="mouseover"||d==="mouseout")b=document.createEvent("MouseEvents"),c=Object.Extend({detail:1,
screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null},c),b.initMouseEvent(d,c.bubbles,c.cancelable,window,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget);else if(d==="blur"||d==="focus"||d==="reset"||d==="submit"||d==="abort"||d==="change"||d==="load"||d==="unload")b=document.createEvent("UIEvents"),b.initUIEvent(d,c.bubbles,c.cancelable,window,1);else if(d==="touchstart"||
d==="touchmove"||d==="touchend"||d==="touchcancel")b=document.createEvent("TouchEvents"),c=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},c),b.initTouchEvent(d,c.bubbles,c.cancelable,window,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.touches,c.targetTouches,c.changedTouches,c.scale,c.rotation);else if(d==="gesturestart"||d===
"gestureend"||d==="gesturecancel")b=document.createEvent("GestureEvents"),c=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,target:null,scale:1,rotation:0},c),b.initGestureEvent(d,c.bubbles,c.cancelable,window,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.target,c.scale,c.rotation);else{b=document.createEvent("Events");b.initEvent(d,c.bubbles,c.cancelable);try{b=Object.Extend(b,c)}catch(i){}}if(b)try{this.each(function(){return this.dispatchEvent(b)})}catch(j){s("dispatchEvent error:",
j)}}return this},live:function(b,c){var d,g;g=this.selector;d=this.context;e(g,d,b,c,function(b){return a(g,d).intersect(a(b.target).parents().first().union(a(b.target))).each(function(){b.target=this;return c.call(this,b)})});return this},die:function(b,c){var d,e;e=this.selector;d=this.context;e=g(e,d,b,c);a(d).unbind(b,e);return this},liveCycle:function(){var a,c,b;a=arguments[0];c=2<=arguments.length?n.call(arguments,1):[];b=0;return this.live(a,function(a){c[b].call(this,a);return b=++b%c.length})},
click:function(a){a==null&&(a={});this.css("cursor").intersect(["auto",""]).len()>0&&this.css("cursor","pointer");return Object.IsFunc(a)?this.bind("click",a):this.trigger("click",a)},ready:function(a){a==null&&(a={});return Object.IsFunc(a)?i?a.call(this):this.bind("ready",a):this.trigger("ready",a)}};"mousemove,mousedown,mouseup,mouseover,mouseout,blur,focus,load,unload,reset,submit,keyup,keydown,change,abort,cut,copy,paste,selection,drag,drop,orientationchange,touchstart,touchmove,touchend,touchcancel,gesturestart,gestureend,gesturecancel,hashchange".split(",").forEach(function(a){return b[a]=
j(a)});return b});a.plugin(function(){var j,h,i,e,b,d,g;h={slow:700,medium:500,normal:300,fast:100,instant:0,now:0};j=/(?:scale(?:3d)*|translate(?:[XYZ]|3d)*|rotate(?:[XYZ]|3d)*)/;i=document.createElement("div").style;"WebkitTransform"in i?(e="-webkit-transform",d="-webkit-transition-property",b="-webkit-transition-duration",g="-webkit-transition-timing-function"):"MozTransform"in i?(e="-moz-transform",d="-moz-transition-property",b="-moz-transition-duration",g="-moz-transition-timing-function"):
"OTransform"in i&&(e="-o-transform",d="-o-transition-property",b="-o-transition-duration",g="-o-transition-timing-function");return{name:"Transform",$:{duration:function(a){var c;c=h[a];return c!=null?c:parseFloat(a)}},transform:function(f,c,h,i){var x,o,k,l,p,q;Object.IsFunc(c)?(i=c,h=c=null):Object.IsFunc(h)&&(i=h,h=null);c==null&&(c="normal");h||(h="ease");x=a.duration(c)+"ms";p=[];l=0;q="";c={};for(o in f)j.test(o)?(k=f[o],k.join?k=a(k).px().join(", "):k.toString&&(k=k.toString()),q+=" "+o+"("+
k+")"):c[o]=f[o];for(o in c)p[l++]=o;q&&(p[l++]=e);c[d]=p.join(", ");c[b]=p.map(function(){return x}).join(", ");c[g]=p.map(function(){return h}).join(", ");q&&(c[e]=q);this.css(c);return this.delay(x,i)},hide:function(a){return this.each(function(){if(this.style){this._display="";if(this.style.display===!1)this._display=this.syle.display;return this.style.display="none"}}).trigger("hide").delay(50,a)},show:function(a){return this.each(function(){if(this.style)return this.style.display=this._display,
delete this._display}).trigger("show").delay(50,a)},toggle:function(b){return this.weave(this.css("display")).fold(function(c,b){c==="none"?(b.style.display=b._display||"",delete b._display,a(b).trigger("show")):(b._display=c,b.style.display="none",a(b).trigger("hide"));return b}).delay(50,b)},fadeIn:function(a,b){return this.css("opacity","0.0").show(function(){return this.transform({opacity:"1.0",translate3d:[0,0,0]},a,b)})},fadeOut:function(a,b,d,g){d==null&&(d=0);g==null&&(g=0);return this.transform({opacity:"0.0",
translate3d:[d,g,0]},a,function(){return this.hide(b)})},fadeLeft:function(a,b){return this.fadeOut(a,b,"-"+this.width().first(),0)},fadeRight:function(a,b){return this.fadeOut(a,b,this.width().first(),0)},fadeUp:function(a,b){return this.fadeOut(a,b,0,"-"+this.height().first())},fadeDown:function(a,b){return this.fadeOut(a,b,0,this.height().first())}}});a.plugin(function(){var j;j=function(a){var i,e,b;b=[];e=0;a=JSON.parse(JSON.stringify(a));for(i in a)b[e++]=""+i+"="+escape(a[i]);return b.join("&")};
return{name:"Http",$:{http:function(h,i){var e;i==null&&(i={});e=new XMLHttpRequest;Object.IsFunc(i)&&(i={success:Function.Bound(i,e)});i=Object.Extend({method:"GET",data:null,state:Function.Empty,success:Function.Empty,error:Function.Empty,async:!0,timeout:0,withCredentials:!1,followRedirects:!1,asBlob:!1},i);i.state=Function.Bound(i.state,e);i.success=Function.Bound(i.success,e);i.error=Function.Bound(i.error,e);if(i.data&&i.method==="GET")h+="?"+j(i.data);else if(i.data&&i.method==="POST")i.data=
j(i.data);e.open(i.method,h,i.async);e.withCredentials=i.withCredentials;e.asBlob=i.asBlob;e.timeout=i.timeout;e.followRedirects=i.followRedirects;e.onreadystatechange=function(){i.state&&i.state();if(e.readyState===4)return e.status===200?i.success(e.responseText):i.error(e.status,e.statusText)};e.send(i.data);return a([e])},post:function(h,i){i==null&&(i={});Object.IsFunc(i)&&(i={success:i});i.method="POST";return a.http(h,i)},get:function(h,i){i==null&&(i={});Object.IsFunc(i)&&(i={success:i});
i.method="GET";return a.http(h,i)}}}});a.plugin(function(){var j,h,i,e,b,d;i=function(a,b,c,d,e){var h,i;h=1;if(e===null||e===-1)e=a.length;for(i=d;d<=e?i<e:i>e;d<=e?i++:i--)if(a[i]===c?h+=1:a[i]===b&&(h-=1),h===0)return i;return-1};d=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;j=/%[\(\/]/;h=function(a){var b,c,e,h,x,o,k,a=a.split(j);x=a.length;k=[a[0]];for(c=e=1;1<=x?c<x:c>x;1<=x?c++:c--){b=i(a[c],")","(",0,-1);if(b===-1)return"Template syntax error: unmatched '%(' starting at: "+
a[c].substring(0,15);h=a[c].substring(0,b);o=a[c].substring(b);b=d.exec(o);if(b===null)return"Template syntax error: invalid type specifier starting at '"+o+"'";o=b[4];k[e++]=h;k[e++]=b[1]|0;k[e++]=b[2]|0;k[e++]=b[3];k[e++]=o}return k};h.cache={};e=function(a,b){var c,d,e,i,j,k,l,p,q,t,n,u;c=h.cache[a];c===null&&(c=h.cache[a]=h(a));k=[c[0]];i=1;d=c.length;for(e=1,n=d-5;e<=n;e+=5){u=c.slice(e,e+4+1||9E9);j=u[0];l=u[1];d=u[2];q=u[3];p=u[4];t=b[j];t==null&&(t="missing value: "+j);switch(q){case "d":k[i++]=
""+parseInt(t,10);break;case "f":k[i++]=parseFloat(t).toFixed(d);break;case "s":k[i++]=""+t;break;default:k[i++]=""+t}l>0&&(k[i]=String.PadLeft(k[i],l));k[i++]=p}return k.join("")};b=function(b){var d,c,e,h,i,j,k,l,p,q,t,n,u,v,w,r,s,y,z;w=null;s=u=k=c=z=y="";e={};v=0;r=a([]);r.selector=b;t=function(){var b;b=a.HTML.parse(y);w?w.appendChild(b):r.push(b);y="";return 0};l=function(){var a,b;b=document.createElement(s);b.id=u||null;b.className=k||null;for(a in e)b.setAttribute(a,e[a]);w?w.appendChild(b):
r.push(b);w=b;s=u=k=c=z=y="";e={};return 0};p=function(){l();w=null;return 0};q=function(){l();if(w)w=w.parentNode;return 0};i=function(){k.length>0&&(k+=" ");return 2};h=function(){return 3};n=function(){e[c]=z;c=z="";return 0};j=function(){return 1};d=function(a){y+=a;return null};i=[{'"':function(){return 5},"'":function(){return 6},"#":j,".":i,"[":h,"+":q," ":l,",":p,def:function(a){s+=a;return null}},{".":i,"[":h,"+":q," ":l,",":p,def:function(a){u+=a;return null}},{"#":j,".":i,"[":h,"+":q," ":l,
",":p,def:function(a){k+=a;return null}},{"=":function(){return 4},"]":n,def:function(a){c+=a;return null}},{"]":n,def:function(a){z+=a;return null}},{'"':t,def:d},{"'":t,def:d}];for(h=0;d=b[h++];)j=v,v=i[v],v=d in v?v[d](d):v.def(d),v===null&&(v=j);s.length>0&&l();y.length>0&&t();return r};return{name:"Template",$:{render:e,synth:b},template:function(b){this.render=function(d){return e(this.map(a.HTML.stringify).join(""),Object.Extend(b,d))};return this.remove()},render:function(b){return e(this.map(a.HTML.stringify).join(""),
b)},synth:function(a){return b(a).appendTo(this)}}});return a}(l))}).call(this);
