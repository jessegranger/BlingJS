<<<<<<< HEAD
(function(){var d,g,f,e=[].slice,c=[].indexOf||function(k){for(var j=0,h=this.length;j<h;j++){if(j in this&&this[j]===k){return j}}return -1},a={}.hasOwnProperty,b=function(k,i){for(var h in i){if(a.call(i,h)){k[h]=i[h]}}function j(){this.constructor=k}j.prototype=i.prototype;k.prototype=new j();k.__super__=i.prototype;return k};Object.keys||(Object.keys=function(j){var i,h;h=[];for(i in j){h.push(i)}return h});Object.values||(Object.values=function(j){var i,h;h=[];for(i in j){h.push(j[i])}return h});f=function(i,h){var l,j;if(h){for(l in h){j=h[l];if(j!=null){i[l]=j}}}return i};g=(function(){var h,i;h=typeof document!=="undefined"&&document!==null?document:{};function j(k,l){if(l==null){l=h}return j.pipe("bling-init",[k,l])}j.plugin=function(o,m){var l,n,q,p=this;if(!m){m=o;o={}}if("depends" in o){return this.depends(o.depends,function(){return p.plugin({provides:o.provides},m)})}try{if((n=m!=null?m.call(this,this):void 0)){f(this,n!=null?n.$:void 0);["$","name"].forEach(function(r){return delete n[r]});f(this.prototype,n);q=function(r){return p[r]||(p[r]=function(){var s;s=1<=arguments.length?e.call(arguments,0):[];return p.prototype[r].apply(j(s[0]),s.slice(1))})};for(l in n){q(l)}if(o.provides!=null){this.provide(o.provides)}}}catch(k){console.log("failed to load plugin: "+this.name+" "+k.message+": "+k.stack)}return this};i={q:[],done:{},filter:function(k){return((typeof k)==="string"?k.split(/, */):k).filter(function(l){return !(l in i.done)})}};j.depends=function(k,l){if((k=i.filter(k)).length===0){l()}else{i.q.push(function(n){var m;if((m=k.indexOf(n))>-1){k.splice(m,1)}return k.length===0&&l})}return l};j.provide=function(m,r){var q,l,n,p,k,o;o=i.filter(m);for(p=0,k=o.length;p<k;p++){n=o[p];i.done[n]=l=0;while(l<i.q.length){if((q=i.q[l](n))){i.q.splice(l,1);q(r);l=0}else{l++}}}return r};return j})();g.prototype=[];g.prototype.constructor=g;g.global=typeof window!=="undefined"&&window!==null?window:global;d=g;d.plugin({provides:"cartesian"},function(){return{$:{cartesian:function(){var j,k,h,i;i=1<=arguments.length?e.call(arguments,0):[];k=i.length;h=[];j=function(q,n){var l,p,m,o;if(++n>=k){return h.push(q)}o=i[n];for(p=0,m=o.length;p<m;p++){l=o[p];j(q.concat(l),n)}return null};j([],-1);return d(h)}}}});d.plugin(function(){var l,j,k,i,h;(j=String.prototype).trimLeft||(j.trimLeft=function(){return this.replace(/^\s+/,"")});(k=String.prototype).split||(k.split=function(o){var m,p,n;m=[];p=0;while((n=this.indexOf(o,p))>-1){m.push(this.substring(p,n));p=n+1}return m});(i=String.prototype).lastIndexOf||(i.lastIndexOf=function(o,p,n){var m;if(n==null){n=-1}m=-1;while((n=o.indexOf(p,n+1))>-1){m=n}return m});(h=Array.prototype).join||(h.join=function(m){var p,o;if(m==null){m=""}p=this.length;if(p===0){return""}o=this[p-1];while(--p>0){o=this[p-1]+m+o}return o});if(typeof Event!=="undefined"&&Event!==null){Event.prototype.preventAll=function(){this.preventDefault();this.stopPropagation();return this.cancelBubble=true}}if(typeof Element!=="undefined"&&Element!==null){Element.prototype.matchesSelector=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.matchesSelector;if(Element.prototype.cloneNode.length===0){l=Element.prototype.cloneNode;Element.prototype.cloneNode=function(o){var p,s,r,m,q;if(o==null){o=false}s=l.call(this);if(o){q=this.childNodes;for(r=0,m=q.length;r<m;r++){p=q[r];s.appendChild(p.cloneNode(true))}}return s}}}return{}});d.plugin({provides:"config",depends:"type"},function(){var h;h=function(i,k){var j;return(j=process.env[i])!=null?j:k};return{$:{config:d.extend(h,{get:h})}}});d.plugin({provides:"core",depends:"string"},function(){var i,h;d.defineProperty(d,"now",{get:function(){return +(new Date)}});h=function(j,k){while(j<0){j+=k.length}return Math.min(j,k.length)};i=d.now;return{$:{log:d.extend(function(){var j,k;j=1<=arguments.length?e.call(arguments,0):[];k="+"+(d.padLeft(String(d.now-i),d.log.prefixSize,"0"))+":";if(k.length>d.log.prefixSize+2){k=""+(i=d.now)+":"}if(j.length&&d.is("string",j[0])){j[0]=""+k+" "+j[0]}else{j.unshift(k)}console.log.apply(console,j);if(j.length){return j[j.length-1]}},{prefixSize:5}),assert:function(k,j){if(j==null){j=""}if(!k){throw new Error("assertion failed: "+j)}},coalesce:function(){var j;j=1<=arguments.length?e.call(arguments,0):[];return d(j).coalesce()},keysOf:function(l){var j;return d((function(){var k;k=[];for(j in l){k.push(j)}return k})())},valuesOf:function(j){return d.keysOf(j).map(function(l){try{return j[l]}catch(m){return m}})}},eq:function(j){return d([this[h(j,this)]])},each:function(m){var k,l,j;for(l=0,j=this.length;l<j;l++){k=this[l];m.call(k,k)}return this},map:function(k){var j;return d((function(){var n,m,l;l=[];for(n=0,m=this.length;n<m;n++){j=this[n];l.push(k.call(j,j))}return l}).call(this))},reduce:function(o,k){var l,p,j,m;l=0;p=this.length;if(!(k!=null)){k=this[l++]}for(j=m=l;m<p;j=m+=1){k=o.call(this[j],k,this[j])}return k},union:function(k,n){var o,j,q,p,m,l;if(n==null){n=true}o=d();for(q=0,m=this.length;q<m;q++){j=this[q];if(!o.contains(j,n)){o.push(j)}}for(p=0,l=k.length;p<l;p++){j=k[p];if(!o.contains(j,n)){o.push(j)}}return o},distinct:function(j){if(j==null){j=true}return this.union(this,j)},intersect:function(k){var j;return d((function(){var n,m,l;l=[];for(n=0,m=this.length;n<m;n++){j=this[n];if(c.call(k,j)>=0){l.push(j)}}return l}).call(this))},contains:function(l,j){var k;if(j==null){j=true}return((function(){var o,n,m;m=[];for(o=0,n=this.length;o<n;o++){k=this[o];m.push((j&&k===l)||(!j&&k==l))}return m}).call(this)).reduce((function(n,m){return n||m}),false)},count:function(l,j){var k;if(j==null){j=true}return d((function(){var o,n,m;m=[];for(o=0,n=this.length;o<n;o++){k=this[o];if((l===void 0)||(j&&k===l)||(!j&&k==l)){m.push(1)}}return m}).call(this)).sum()},coalesce:function(){var k,m,j,l;for(m=0,j=this.length;m<j;m++){k=this[m];if((l=d.type(k))==="array"||l==="bling"){k=d(k).coalesce()}if(k!=null){return k}}return null},swap:function(l,k){var m;l=h(l,this);k=h(k,this);if(l!==k){m=[this[k],this[l]],this[l]=m[0],this[k]=m[1]}return this},shuffle:function(){var j;j=this.length-1;while(j>=0){this.swap(--j,Math.floor(Math.random()*j))}return this},select:(function(){var k,j;k=function(l){return function(){var m;if(d.is("function",m=this[l])){return d.bound(this,m)}else{return m}}};return j=function(m){var l;if((l=m.indexOf("."))>-1){return this.select(m.substr(0,l)).select(m.substr(l+1))}else{return this.map(k(m))}}})(),or:function(j){var k,m,l;for(k=m=0,l=this.length;0<=l?m<l:m>l;k=0<=l?++m:--m){this[k]||(this[k]=j)}return this},zap:function(n,j){var m,l,k;l=n.lastIndexOf(".");if(l>0){m=n.substr(0,l);k=n.substr(l+1);this.select(m).zap(k,j);return this}switch(d.type(j)){case"array":case"bling":this.each(function(){return this[n]=j[++l%j.length]});break;case"function":this.zap(n,this.select(n).map(j));break;default:this.each(function(){return this[n]=j})}return this},clean:function(j){return this.each(function(){return delete this[j]})},take:function(l){var j,k;if(l==null){l=1}j=Math.min(l,this.length);return d((function(){var n,m;m=[];for(k=n=0;n<j;k=n+=1){m.push(this[k])}return m}).call(this))},skip:function(l){var j,k;if(l==null){l=0}k=Math.max(0,l|0);return d((function(){var o,n,m;m=[];for(j=o=k,n=this.length;o<n;j=o+=1){m.push(this[j])}return m}).call(this))},first:function(j){if(j==null){j=1}if(j===1){return this[0]}else{return this.take(j)}},last:function(j){if(j==null){j=1}if(j===1){return this[this.length-1]}else{return this.skip(this.length-j)}},slice:function(l,j){var k;if(l==null){l=0}if(j==null){j=this.length}l=h(l,this);j=h(j,this);return d((function(){var n,m;m=[];for(k=n=l;l<=j?n<j:n>j;k=l<=j?++n:--n){m.push(this[k])}return m}).call(this))},extend:function(j){var l,m,k;for(m=0,k=j.length;m<k;m++){l=j[m];this.push(l)}return this},push:function(j){Array.prototype.push.call(this,j);return this},filter:function(l){var k,j;k=(function(){switch(d.type(l)){case"string":return function(m){return m.matchesSelector(l)};case"regexp":return function(m){return l.test(m)};case"function":return l;default:throw new Error("unsupported argument to filter: "+(d.type(l)))}})();return d((function(){var o,n,m;m=[];for(o=0,n=this.length;o<n;o++){j=this[o];if(k.call(j,j)){m.push(j)}}return m}).call(this))},matches:function(j){switch(d.type(j)){case"string":return this.select("matchesSelector").call(j);case"regexp":return this.map(function(k){return j.test(k)});default:throw new Error("unsupported argument to matches: "+(d.type(j)))}},querySelectorAll:function(j){return this.filter("*").reduce(function(k,l){return k.extend(l.querySelectorAll(j))},d())},weave:function(k){var p,l,o,m,n,j;p=d();for(l=o=n=this.length-1;o>=0;l=o+=-1){p[(l*2)+1]=this[l]}for(l=m=0,j=k.length;m<j;l=m+=1){p[l*2]=k[l]}return p},fold:function(l){var j,k,m;m=this.length;j=d((function(){var p,o,n;n=[];for(k=p=0,o=m-1;p<o;k=p+=2){n.push(l.call(this,this[k],this[k+1]))}return n}).call(this));if((m%2)===1){j.push(l.call(this,this[m-1],void 0))}return j},flatten:function(){var k,o,n,q,p,m,l;k=d();for(q=0,m=this.length;q<m;q++){o=this[q];for(p=0,l=o.length;p<l;p++){n=o[p];k.push(n)}}return k},call:function(){return this.apply(null,arguments)},apply:function(k,j){return this.filter(function(){return d.is("function",this)}).map(function(){return this.apply(k,j)})},log:function(j){if(j){d.log(j,this.toString(),this.length+" items")}else{d.log(this.toString(),this.length+" items")}return this},toArray:function(){this.__proto__=Array.prototype;return this}}});d.plugin({provides:"date",depends:"type"},function(){var j,r,o,p,t,n,k,i,u,v,w,q,l;l=[1,1000,1000*60,1000*60*60,1000*60*60*24],i=l[0],w=l[1],k=l[2],n=l[3],r=l[4];q={ms:i,s:w,m:k,h:n,d:r,sec:w,second:w,seconds:w,min:k,minute:k,minutes:k,hr:n,hour:n,hours:n,day:r,days:r};t={yyyy:Date.prototype.getUTCFullYear,mm:function(){return this.getUTCMonth()+1},dd:Date.prototype.getUTCDate,HH:Date.prototype.getUTCHours,MM:Date.prototype.getUTCMinutes,SS:Date.prototype.getUTCSeconds,MS:Date.prototype.getUTCMilliseconds};p=Object.keys(t).sort().reverse();v={yyyy:Date.prototype.setUTCFullYear,mm:function(h){return this.setUTCMonth(h-1)},dd:Date.prototype.setUTCDate,HH:Date.prototype.setUTCHours,MM:Date.prototype.setUTCMinutes,SS:Date.prototype.setUTCSeconds,MS:Date.prototype.setUTCMilliseconds};u=Object.keys(v).sort().reverse();o=Math.floor;d.type.register("date",{match:function(h){return d.isType(Date,h)},array:function(h){return[h]},string:function(s,h,m){return d.date.format(s,h,m)},number:function(m,h){return d.date.stamp(m,h)}});d.type.extend("string",{date:function(m,h){if(h==null){h=d.date.defaultFormat}return new Date(d.date.parse(m,h,"ms"))}});d.type.extend("number",{date:function(m,h){return d.date.unstamp(m,h)}});j=function(h){return function(s,z,y){var m;if(y==null){y=d.date.defaultUnit}m=d.date.unstamp(s,y);v[h].call(m,(t[h].call(m))+z);return d.date.stamp(m,y)}};return{$:{date:{defaultUnit:"s",defaultFormat:"yyyy-mm-dd HH:MM:SS",stamp:function(h,m){if(h==null){h=new Date}if(m==null){m=d.date.defaultUnit}return o(h/q[m])},unstamp:function(h,m){if(m==null){m=d.date.defaultUnit}return new Date(o(h*q[m]))},convert:function(h,s,m){if(s==null){s=d.date.defaultUnit}if(m==null){m=d.date.defaultUnit}if(d.is("date",h)){h=d.date.stamp(h,s)}return o(h*q[s]/q[m])},midnight:function(h,m){if(m==null){m=d.date.defaultUnit}return d.date.convert(d.date.convert(h,m,"d"),"d",m)},format:function(z,m,A){var y,s,B,h;if(m==null){m=d.date.defaultFormat}if(A==null){A=d.date.defaultUnit}if(d.is("date",z)){z=d.date.stamp(z,A)}y=d.date.unstamp(z,A);for(B=0,h=p.length;B<h;B++){s=p[B];m=m.replace(s,d.padLeft(""+t[s].call(y),s.length,"0"))}return m},parse:function(E,h,F){var m,C,A,B,z,D,y;if(h==null){h=d.date.defaultFormat}if(F==null){F=d.date.defaultUnit}m=new Date(0);for(C=B=0,y=h.length;B<y;C=B+=1){for(z=0,D=u.length;z<D;z++){A=u[z];if(h.indexOf(A,C)===C){try{v[A].call(m,parseInt(E.slice(C,C+A.length),10))}catch(s){throw new Error("Invalid date ('"+E+"') given format mask: "+h+" (failed at position "+C+")")}}}}return d.date.stamp(m,F)},addMilliseconds:j("MS"),addSeconds:j("SS"),addMinutes:j("MM"),addHours:j("HH"),addDays:j("dd"),addMonths:j("mm"),addYears:j("yyyy"),range:function(C,B,h,y,s){var z,A,m;if(h==null){h=1}if(y==null){y="dd"}if(s==null){s=d.date.defaultUnit}z=j(y);m=[C];while((A=m[m.length-1])<B){m.push(z(A,h,s))}return m}}},midnight:function(h){if(h==null){h=d.date.defaultUnit}return this.map(function(){return d.date.midnight(this,h)})},unstamp:function(h){if(h==null){h=d.date.defaultUnit}return this.map(function(){return d.date.unstamp(this,h)})},stamp:function(h){if(h==null){h=d.date.defaultUnit}return this.map(function(){return d.date.stamp(this,h)})},dateFormat:function(h,m){if(h==null){h=d.date.defaultFormat}if(m==null){m=d.date.defaultUnit}return this.map(function(){return d.date.format(this,h,m)})},dateParse:function(h,m){if(h==null){h=d.date.defaultFormat}if(m==null){m=d.date.defaultUnit}return this.map(function(){return d.date.parse(this,h,m)})}}});d.plugin({provides:"delay",depends:"function"},function(){return{$:{delay:(function(){var h;h=d.extend([],(function(){var i;i=function(j){return function(){if(j.length){return j.shift()()}}};return{add:function(m,o){var j,l,k;m.order=o+d.now;for(j=l=0,k=this.length;l<=k;j=l+=1){if(j===this.length||this[j].order>m.order){this.splice(j,0,m);break}}setTimeout(i(this),o);return this},cancel:function(m){var j,l,k;for(j=l=0,k=this.length;l<k;j=l+=1){if(this[j]===m){this.splice(j,1);break}}return this}}})());return function(j,i){if(d.is("function",i)){h.add(i,j)}return{cancel:function(){return h.cancel(i)}}}})()},delay:function(j,h,i){if(i==null){i=this}d.delay(j,d.bound(i,h));return this},interval:function(m,k,l){var j,i;if(l==null){l=this}j=d.bound(l,k);i=function(){j();return d.delay(m,i)};d.delay(m,i);return this}}});if(d.global.document!=null){d.plugin({depends:"function,type",provides:"dom"},function(){var j,p,l,n,h,i,m,k,o;d.type.register("nodelist",{match:function(q){return(q!=null)&&d.isType("NodeList",q)},hash:function(r){var q;return d((function(){var u,t,s;s=[];for(u=0,t=x.length;u<t;u++){q=x[u];s.push(d.hash(q))}return s})()).sum()},array:d.identity,string:function(q){return"{Nodelist:["+d(q).select("nodeName").join(",")+"]}"},node:function(q){return d(q).toFragment()}});d.type.register("node",{match:function(q){return(q!=null?q.nodeType:void 0)>0},hash:function(q){return d.checksum(q.nodeName)+d.hash(q.attributes)+d.checksum(q.innerHTML)},string:function(q){return q.toString()},node:d.identity});d.type.register("fragment",{match:function(q){return(q!=null?q.nodeType:void 0)===11},hash:function(r){var q;return d((function(){var v,t,u,s;u=r.childNodes;s=[];for(v=0,t=u.length;v<t;v++){q=u[v];s.push(d.hash(q))}return s})()).sum()},string:function(q){return q.toString()},node:d.identity});d.type.register("html",{match:function(r){var q;return typeof r==="string"&&(q=r.trimLeft())[0]==="<"&&q[q.length-1]===">"},node:function(r){var v,u,q,w,s,t;(s=document.createElement("div")).innerHTML=r;if(w=(v=s.childNodes).length===1){return s.removeChild(v[0])}u=document.createDocumentFragment();for(q=t=0;t<w;q=t+=1){u.appendChild(s.removeChild(v[0]))}return u},array:function(r,s){var q;return d.type.lookup(q=g.HTML.parse(r)).array(q,s)},string:function(q){return"'"+q+"'"},repr:function(q){return'"'+q+'"'}});d.type.extend({unknown:{node:function(){return null}},bling:{node:function(q){return q.toFragment()}},node:{html:function(s){var r,q;r=document.createElement("div");r.appendChild((s=s.cloneNode(true)));q=r.innerHTML;r.removeChild(s);return q}},string:{node:function(q){return d(q).toFragment()},array:function(q,r){return typeof r.querySelectorAll==="function"?r.querySelectorAll(q):void 0}},"function":{node:function(q){return d(q.toString()).toFragment()}}});k=function(q){var r;if(!(q.parentNode!=null)){r=document.createDocumentFragment();r.appendChild(q)}return q};p=function(r,q){return k(r).parentNode.insertBefore(q,r)};j=function(r,q){return k(r).parentNode.insertBefore(q,r.nextSibling)};o=function(q){return d.type.lookup(q).node(q)};n=false;i=false;l=function(q){return function(){return d.global.getComputedStyle(this,null).getPropertyValue(q)}};h=function(q){return function(r){if(r!=null){return this.css(q,r)}else{return this.rect().select(q)}}};m=function(q){return function(){return this.map(function(r){return d((function(){var s;s=[];while(r=r[q]){s.push(r)}return s})())})}};return{$:{HTML:{parse:function(q){return d.type.lookup(q).node(q)},stringify:function(q){return d.type.lookup(q).html(q)},escape:function(r){var q;n||(n=d("<div>&nbsp;</div>").child(0));q=n.zap("data",r).select("parentNode.innerHTML").first();n.zap("data","");return q}}},html:function(q){switch(d.type(q)){case"undefined":case"null":return this.select("innerHTML");case"string":case"html":return this.zap("innerHTML",q);case"bling":return this.html(q.toFragment());case"node":return this.each(function(){var r;this.replaceChild(this.childNodes[0],q);r=[];while(this.childNodes.length>1){r.push(this.removeChild(this.childNodes[1]))}return r})}},append:function(q){q=o(q);return this.each(function(){return this.appendChild(q.cloneNode(true))})},appendTo:function(q){var s,r;s=this.map(function(){return this.cloneNode(true)});r=0;d(q).each(function(){return this.appendChild(s[r++])});return s},prepend:function(q){if(q!=null){q=o(q);this.take(1).each(function(){return p(this.childNodes[0],q)});this.skip(1).each(function(){return p(this.childNodes[0],q.cloneNode(true))})}return this},prependTo:function(q){if(q!=null){d(q).prepend(this)}return this},before:function(q){if(q!=null){q=o(q);this.take(1).each(function(){return p(this,q)});this.skip(1).each(function(){return p(this,q.cloneNode(true))})}return this},after:function(q){if(q!=null){q=o(q);this.take(1).each(function(){return j(this,q)});this.skip(1).each(function(){return j(this,q.cloneNode(true))})}return this},wrap:function(q){q=o(q);if(d.is("fragment",q)){throw new Error("cannot call .wrap() with a fragment as the parent")}return this.each(function(t){var s,r;if((d.is("fragment",t))||!t.parentNode){return q.appendChild(t)}s=t.parentNode;r=document.createElement("dummy");q.appendChild(s.replaceChild(r,t));return s.replaceChild(q,r)})},unwrap:function(){return this.each(function(){if(this.parentNode&&this.parentNode.parentNode){return this.parentNode.parentNode.replaceChild(this,this.parentNode)}else{if(this.parentNode){return this.parentNode.removeChild(this)}}})},replace:function(v){var u,r,t,s,q;v=o(v);u=this.map(function(){return v.cloneNode(true)});for(r=t=0,s=u.length;t<s;r=t+=1){if((q=this[r].parentNode)!=null){q.replaceChild(u[r],this[r])}}return u},attr:function(q,r){switch(r){case void 0:return this.select("getAttribute").call(q,r);case null:return this.select("removeAttribute").call(q,r);default:this.select("setAttribute").call(q,r);return this}},data:function(r,q){return this.attr("data-"+(d.dashize(r)),q)},addClass:function(r){var q;q=function(s){return s!==""};return this.removeClass(r).each(function(){var s;s=this.className.split(" ").filter(q);s.push(r);return this.className=s.join(" ")})},removeClass:function(q){var r;r=function(s){return s!==q};return this.each(function(){var s;s=this.className.split(" ").filter(r).join(" ");if(s.length===0){return this.removeAttribute("class")}})},toggleClass:function(q){var r;r=function(s){return s!==q};return this.each(function(){var u,s,t;s=this.className.split(" ");t=d.not(d.isEmpty);if(s.indexOf(q)>-1){t=d.and(r,t)}else{s.push(q)}u=s.filter(t).join(" ");this.className=u;if(u.length===0){return this.removeAttribute("class")}})},hasClass:function(q){return this.select("className.split").call(" ").select("indexOf").call(q).map(function(r){return r>-1})},text:function(q){if(q!=null){return this.zap("textContent",q)}return this.select("textContent")},val:function(q){if(q!=null){return this.zap("value",q)}return this.select("value")},css:function(t,A){var z,y,q,B,r,s,u,w;if((A!=null)||d.is("object",t)){s=this.select("style.setProperty");if(d.is("object",t)){for(y in t){s.call(y,t[y],"")}}else{if(d.is("string",A)){s.call(t,A,"")}else{if(d.is("array",A)){for(y=u=0,w=q=Math.max(A.length,B=s.len());u<w;y=u+=1){s[y%B](t,A[y%q],"")}}}}return this}else{z=this.map(l(t));r=this.select("style").select(t);return r.weave(z).fold(function(v,C){return v||C})}},defaultCss:function(r,q){var s,u,t;u=this.selector;t="";if(d.is("string",r)){if(d.is("string",q)){t+=""+u+" { "+r+": "+q+" } "}else{throw Error("defaultCss requires a value with a string key")}}else{if(d.is("object",r)){for(s in r+"} "){t+=(""+u+" { ")+(""+s+": "+r[s]+"; ")}}}d("<style></style>").text(t).appendTo("head");return this},rect:function(){return this.select("getBoundingClientRect").call()},width:h("width"),height:h("height"),top:h("top"),left:h("left"),bottom:h("bottom"),right:h("right"),position:function(r,q){switch(true){case !(r!=null):return this.rect();case !(q!=null):return this.css("left",d.px(r));default:return this.css({top:d.px(q),left:d.px(r)})}},scrollToCenter:function(){document.body.scrollTop=this[0].offsetTop-(d.global.innerHeight/2);return this},child:function(q){return this.select("childNodes").map(function(){return this[q<0?q+this.length:q]})},parents:m("parentNode"),prev:m("previousSibling"),next:m("nextSibling"),remove:function(){return this.each(function(){var q;return(q=this.parentNode)!=null?q.removeChild(this):void 0})},find:function(q){return this.filter("*").map(function(){return d(q,this)}).flatten()},clone:function(q){if(q==null){q=true}return this.map(function(){if(d.is("node",this)){return this.cloneNode(q)}})},toFragment:function(){var q;if(this.length>1){q=document.createDocumentFragment();(this.map(o)).map(d.bound(q,q.appendChild));return q}return o(this[0])}}})}d.plugin({provides:"EventEmitter",depends:"type,pipe"},function(){return{$:{EventEmitter:d.pipe("bling-init").append(function(j){var i,h;h={};i=function(k){return h[k]||(h[k]=[])};return d.inherit({emit:function(){var l,p,o,n,k,m;p=arguments[0],l=2<=arguments.length?e.call(arguments,1):[];m=i(p);for(n=0,k=m.length;n<k;n++){o=m[n];o.apply(this,l)}return this},addListener:function(l,k){i(l).push(k);return this.emit("newListener",l,k)},on:function(l,k){return this.addListener(l,k)},removeListener:function(m,l){var k;if((k=i(m).indexOf(l))>-1){return i(m).splice(k,1)}},removeAllListeners:function(k){return h[k]=[]},setMaxListeners:function(k){},listeners:function(k){return i(k).slice(0)}},j)})}}});d.plugin({depends:"dom,function,core",provides:"event"},function(){var j,o,h,k,m,i,n,l;j=/,* +/;k=["mousemove","mousedown","mouseup","mouseover","mouseout","blur","focus","load","unload","reset","submit","keyup","keydown","change","abort","cut","copy","paste","selection","drag","drop","orientationchange","touchstart","touchmove","touchend","touchcancel","gesturestart","gestureend","gesturecancel","hashchange"];h=function(p){return function(q){return this.bind(p,q)(d.is("function",q)?void 0:this.trigger(p,q))}};m=function(p,r,q,t,s){return d(r).bind(q,s).each(function(){var u,v;return((u=((v=(this.__alive__||(this.__alive__={})))[p]||(v[p]={})))[q]||(u[q]={}))[t]=s})};l=function(p,q,t,s){var r;r=d(q);return r.each(function(){var v,u,w;v=(this.__alive__||(this.__alive__={}));u=(v[p]||(v[p]={}));w=(u[t]||(u[t]={}));r.unbind(t,w[s]);return delete w[s]})};n=d.once(function(){var p;d(document).trigger("ready").unbind("ready");if(typeof document.removeEventListener==="function"){document.removeEventListener("DOMContentLoaded",n,false)}return typeof(p=d.global).removeEventListener==="function"?p.removeEventListener("load",n,false):void 0});o=d.once(function(){var p;if(typeof document.addEventListener==="function"){document.addEventListener("DOMContentLoaded",n,false)}return typeof(p=d.global).addEventListener==="function"?p.addEventListener("load",n,false):void 0});o();i={bind:function(r,q){var s,p;s=(r||"").split(j);p=function(t){i=q.apply(this,arguments);if(i===false){t.preventAll()}return i};return this.each(function(){var v,w,u,t;t=[];for(w=0,u=s.length;w<u;w++){v=s[w];t.push(this.addEventListener(v,p,false))}return t})},unbind:function(q,p){var r;r=(q||"").split(j);return this.each(function(){var u,v,t,s;s=[];for(v=0,t=r.length;v<t;v++){u=r[v];s.push(this.removeEventListener(u,p,null))}return s})},trigger:function(q,r){var w,s,v,p,u;if(r==null){r={}}r=d.extend({bubbles:true,cancelable:true},r);u=(q||"").split(j);for(v=0,p=u.length;v<p;v++){s=u[v];if(s==="click"||s==="mousemove"||s==="mousedown"||s==="mouseup"||s==="mouseover"||s==="mouseout"){w=document.createEvent("MouseEvents");r=d.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:null},r);w.initMouseEvent(s,r.bubbles,r.cancelable,d.global,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}else{if(s==="blur"||s==="focus"||s==="reset"||s==="submit"||s==="abort"||s==="change"||s==="load"||s==="unload"){w=document.createEvent("UIEvents");w.initUIEvent(s,r.bubbles,r.cancelable,d.global,1)}else{if(s==="touchstart"||s==="touchmove"||s==="touchend"||s==="touchcancel"){w=document.createEvent("TouchEvents");r=d.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},r);w.initTouchEvent(s,r.bubbles,r.cancelable,d.global,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.touches,r.targetTouches,r.changedTouches,r.scale,r.rotation)}else{if(s==="gesturestart"||s==="gestureend"||s==="gesturecancel"){w=document.createEvent("GestureEvents");r=d.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,target:null,scale:1,rotation:0},r);w.initGestureEvent(s,r.bubbles,r.cancelable,d.global,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.target,r.scale,r.rotation)}else{w=document.createEvent("Events");w.initEvent(s,r.bubbles,r.cancelable);try{w=d.extend(w,r)}catch(t){}}}}}if(!w){continue}else{try{this.each(function(){return this.dispatchEvent(w)})}catch(t){d.log("dispatchEvent error:",t)}}}return this},live:function(t,s){var q,r,p;p=this.selector;q=this.context;r=function(u){return d(p,q).intersect(d(u.target).parents().first().union(d(u.target))).each(function(){return s.call(u.target=this,u)})};m(p,q,t,s,r);return this},die:function(q,p){d(this.context).unbind(q,l(this.selector,this.context,q,p));return this},click:function(q){var p;if(q==null){q={}}if((p=this.css("cursor"))==="auto"||p===""){this.css("cursor","pointer")}if(d.is("function",q)){this.bind("click",q)}else{this.trigger("click",q)}return this},ready:function(p){if(n.exhausted){return p.call(this)}return this.bind("ready",p)}};k.forEach(function(p){return i[p]=h(p)});return i});d.plugin({provides:"function",depends:"hash"},function(){return{$:{identity:function(h){return h},not:function(h){return function(){return !h.apply(this,arguments)}},compose:function(i,h){return function(j){var k;return i.call(k,(k=h.call(j,j)))}},and:function(i,h){return function(j){return h.call(this,j)&&i.call(this,j)}},once:function(h,i){if(i==null){i=1}return d.defineProperty((function(){if(i-->0){return h.apply(this,arguments)}}),"exhausted",{get:function(){return i<=0}})},cycle:function(){var j,h;j=1<=arguments.length?e.call(arguments,0):[];h=-1;return function(){return j[h=++h%j.length].apply(this,arguments)}},bound:function(i,k,h){var j;if(h==null){h=[]}if(d.is("function",k.bind)){h.splice(0,0,i);j=k.bind.apply(k,h)}else{j=function(){var l;l=1<=arguments.length?e.call(arguments,0):[];return k.apply(i,h(h.length?void 0:l))}}return d.extend(j,{toString:function(){return"bound-method of "+i+"."+k.name}})},memoize:function(i){var h;h={};return function(){var k,j,l;k=1<=arguments.length?e.call(arguments,0):[];return(l=h[j=d.hash(k)])!=null?l:h[j]=i.apply(this,k)}},E:function(h){return function(i){return function(j,k){if(!j){return i(k)}return h(j,k)}}}}}});d.plugin({provides:"hash",depends:"type"},function(){d.type.extend({unknown:{hash:function(h){return d.checksum(d.toString(h))}},object:{hash:function(i){var h;return d.hash(Object)+d((function(){var j;j=[];for(h in i){j.push(d.hash(i[h]))}return j})()).sum()+d.hash(Object.keys(i))}},array:{hash:function(h){return d.hash(Array)+d(h.map(d.hash)).reduce(function(j,i){return(j*j)+(i|0)},1)}},bool:{hash:function(h){return parseInt(h?1:void 0)}}});return{$:{hash:function(h){return d.type.lookup(h).hash(h)}},hash:function(){return d.hash(this)}}});d.plugin(function(){return{$:{histogram:function(B,w,y){var q,m,u,v,t,r,l,s,A,k,p,j,h,z,o;if(w==null){w=1}if(y==null){y=80}q=d();v=0;for(j=0,z=B.length;j<z;j++){p=B[j];u=Math.floor(p/w);if((o=q[u])==null){q[u]=0}q[u]+=1;v=Math.max(v,u+1)}q.length=v;t=q.max();q=q.map(function(i){return i||0}).scale(1/t).scale(y);k=q.sum();A="";s=0;for(r=h=0;h<v;r=h+=1){m=(r+1)*w;l=q[r]*100/k;s+=l;A+=d.padLeft(s.toFixed(2)+"%",7)+d.padRight(" < "+(m.toFixed(2)),10)+": "+d.repeat("#",q[r])+"\n"}return A}},histogram:function(){return d.histogram(this)}}});d.plugin({depends:"dom",provides:"http"},function(){var h;h=function(k){var j,l;l=JSON.parse(JSON.stringify(k));return((function(){var i;i=[];for(j in l){i.push(""+j+"="+(escape(l[j])))}return i})()).join("&")};d.type.register("http",{match:function(i){return d.isType("XMLHttpRequest",i)},array:function(i){return[i]}});return{$:{http:function(i,j){var k;if(j==null){j={}}k=new XMLHttpRequest();if(d.is("function",j)){j={success:d.bound(k,j)}}j=d.extend({method:"GET",data:null,state:d.identity,success:d.identity,error:d.identity,async:true,asBlob:false,timeout:0,followRedirects:false,withCredentials:false},j);j.state=d.bound(k,j.state);j.success=d.bound(k,j.success);j.error=d.bound(k,j.error);if(j.data&&j.method==="GET"){i+="?"+h(j.data)}else{if(j.data&&j.method==="POST"){j.data=h(j.data)}}k.open(j.method,i,j.async);k=d.extend(k,{asBlob:j.asBlob,timeout:j.timeout,followRedirects:j.followRedirects,withCredentials:j.withCredentials,onreadystatechange:function(){if(typeof j.state==="function"){j.state()}if(k.readyState===4){if(k.status===200){return j.success(k.responseText)}else{return j.error(k.status,k.statusText)}}}});k.send(j.data);return d(k)},post:function(i,j){if(j==null){j={}}if(d.is("function",j)){j={success:j}}j.method="POST";return d.http(i,j)},get:function(i,j){if(j==null){j={}}if(d.is("function",j)){j={success:j}}j.method="GET";return d.http(i,j)}}}});d.depends("pipe",function(){return d.pipe("bling-init").append(function(j){var h,i;i={};h=null;return d.inherit({index:function(k){h=k;return this.each(function(l){return i[k(l)]=l})},query:function(l){var k;if(d.is("function",h)){k=h(l);if(k in i){return i[k]}}return null}},j)})});d.plugin({depends:"dom",provides:"lazy"},function(){var h;h=function(i,j){return d("head").append(d.extend(document.createElement(i),j))};return{$:{script:function(i){return h("script",{src:i})},style:function(i){return h("link",{href:i,rel:"stylesheet"})}}}});d.plugin({provides:"math",depends:"core"},function(){var h;d.type.extend({bool:{number:function(i){if(i){return 1}else{return 0}}},number:{bool:function(i){return !!i}}});return{$:{range:function(m,j,l){var k;if(l==null){l=1}if(!(j!=null)){j=m;m=0}if(j<m&&l>0){l*=-1}return d((function(){var o,n,i;i=[];for(k=o=0,n=Math.ceil((j-m)/l);0<=n?o<n:o>n;k=0<=n?++o:--o){i.push(m+(k*l))}return i})())},zeros:function(k){var j;return d((function(){var l,i;i=[];for(j=l=0;0<=k?l<k:l>k;j=0<=k?++l:--l){i.push(0)}return i})())},ones:function(k){var j;return d((function(){var l,i;i=[];for(j=l=0;0<=k?l<k:l>k;j=0<=k?++l:--l){i.push(1)}return i})())}},floats:function(){return this.map(parseFloat)},ints:function(){return this.map(function(){return parseInt(this,10)})},px:function(i){return this.ints().map(function(){return d.px(this,i)})},min:function(){return this.filter(isFinite).reduce(Math.min)},max:function(){return this.filter(isFinite).reduce(Math.max)},mean:h=function(){if(!this.length){return 0}else{return this.sum()/this.length}},avg:h,sum:function(){return this.filter(isFinite).reduce((function(i){return i+this}),0)},product:function(){return this.filter(isFinite).reduce(function(i){return i*this})},squares:function(){return this.map(function(){return this*this})},magnitude:function(){return Math.sqrt(this.floats().squares().sum())},scale:function(i){return this.map(function(){return i*this})},add:function(k){var j;switch(d.type(k)){case"number":return this.map(function(){return k+this});case"bling":case"array":return d((function(){var m,l,i;i=[];for(j=m=0,l=Math.min(this.length,k.length);0<=l?m<l:m>l;j=0<=l?++m:--m){i.push(this[j]+k[j])}return i}).call(this))}},normalize:function(){return this.scale(1/this.magnitude())}}});d.plugin({provides:"pipe",depends:"type"},function(){var h,i;i={};h=function(l,k){var m,o,n,j;o=(i[l]||(i[l]=[]));if(!k){return{prepend:function(p){o.unshift(p);return p},append:function(p){o.push(p);return p}}}for(n=0,j=o.length;n<j;n++){m=o[n];k=m.call(this,k)}return k};h("bling-init").prepend(function(k){var l,j;j=k[0],l=k[1];return d.inherit(g,d.inherit({selector:j,context:l},d.type.lookup(j).array(j,l)))});return{$:{pipe:h}}});d.plugin({provides:"pubsub"},function(){var h;h={};return{$:{publish:function(){var j,n,m,l,i,k;n=arguments[0],j=2<=arguments.length?e.call(arguments,1):[];k=(h[n]||(h[n]=[]));for(l=0,i=k.length;l<i;l++){m=k[l];m.apply(null,j)}return j},publisher:function(j,i){return function(){var k;k=1<=arguments.length?e.call(arguments,0):[];return d.publish(j,i.apply(this,k))}},subscribe:function(j,i){(h[j]||(h[j]=[])).push(i);return i},unsubscribe:function(m,l){var j,k;if(!(l!=null)){return h[m]=[]}else{j=(h[m]||(h[m]=[]));if((k=j.indexOf(l))>-1){return j.splice(k,k)}}}}}});d.plugin({provides:"random",depends:"type"},function(){var h;h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return{$:{random:(function(){var m,j,i,l,k,o,n;m=new Array(624);k=0;o=function(q){var r,s,p;k=0;m[0]=q;p=[];for(r=s=1;s<=623;r=++s){p.push(m[r]=4294967295&(1812433253*(m[r-1]^(m[r-1]>>>30))+r))}return p};l=function(){var q,s,r,p;p=[];for(q=r=0;r<=623;q=++r){s=((m[q]&2147483648)>>>31)+(2147483647&m[(q+1)%624]);m[q]=m[(q+397)%624]^(s>>>1);if((s%2)===1){p.push(m[q]=m[q]^2567483615)}else{p.push(void 0)}}return p};j=Math.pow(2,31);i=j*2;n=function(){var p;if(k===0){l()}p=m[k]^(p>>>11)^((p<<7)&&2636928640)^((p<<15)&&4022730752)^(p>>>18);k=(k+1)%624;return(p+j)/i};d.defineProperty(n,"seed",{set:function(p){return o(p)}});n.seed=+new Date();return d.extend(n,{real:function(r,q){var s,p;if(!(r!=null)){s=[0,1],r=s[0],q=s[1]}if(!(q!=null)){p=[0,r],r=p[0],q=p[1]}return(d.random()*(q-r))+r},integer:function(q,p){return Math.floor(d.random.real(q,p))},string:function(p,q){if(q==null){q=""}while(q.length<p){q+=d.random.element(h)}return q},coin:function(p){if(p==null){p=0.5}return d.random()<=p},element:function(p){return p[d.random.integer(0,p.length)]},gaussian:function(r,w){var z,t,s,p,A;if(r==null){r=0.5}if(w==null){w=0.12}while(true){t=d.random();s=1.7156*(d.random()-0.5);p=t-0.449871;A=Math.abs(s)+0.386595;z=(p*p)+A*(0.196*A-0.25472*p);if(!(z>0.27597&&(z>0.27846||(s*s)>(-4*Math.log(t)*t*t)))){break}}return r+w*s/t}})})()}}});d.plugin({provides:"sendgrid",depends:"config"},function(){var j,i;try{j=require("nodemailer")}catch(h){return}i=j.createTransport("SMTP",{service:"SendGrid",auth:{user:d.config.get("SENDGRID_USERNAME"),pass:d.config.get("SENDGRID_PASSWORD")}});return{$:{sendMail:function(l,o){var m,k,n;if((m=l.transport)==null){l.transport=i}if((k=l.from)==null){l.from=d.config.get("EMAILS_FROM")}if((n=l.bcc)==null){l.bcc=d.config.get("EMAILS_BCC")}if(d.config.get("SENDGRID_ENABLED","true")==="true"){return j.sendMail(l,o)}else{return o(false)}}}}});d.plugin({provides:"string",depends:"function"},function(){var h;h=function(i){return function(){var j;j=1<=arguments.length?e.call(arguments,0):[];try{return i.apply(null,j)}catch(k){return"[Error: "+k.message+"]"}}};d.type.extend({unknown:{string:h(function(j){var i;return(i=typeof j.toString==="function"?j.toString():void 0)!=null?i:String(j)}),repr:h(function(i){return d.type.lookup(i).string(i)}),number:h(function(i){return parseFloat(String(i))})},"null":{string:function(){return"null"}},undefined:{string:function(){return"undefined"}},string:{number:h(parseFloat),repr:function(i){return"'"+i+"'"}},array:{string:h(function(j){var i;return"["+((function(){var m,l,k;k=[];for(m=0,l=j.length;m<l;m++){i=j[m];k.push(d.toString(i))}return k})()).join(",")+"]"})},object:{string:h(function(n){var j,l,i;l=[];for(j in n){try{i=n[j]}catch(m){i="[Error: "+m.message+"]"}l.push(""+j+":"+(d.toString(i)))}return"{"+l.join(", ")+"}"})},"function":{string:function(i){return i.toString().replace(/^([^{]*){(?:.|\n|\r)*}$/,"$1{ ... }")}},number:{repr:function(i){return String(i)},string:h(function(i){switch(true){case i.precision!=null:return i.toPrecision(i.precision);case i.fixed!=null:return i.toFixed(i.fixed);default:return String(i)}})}});return{$:{toString:function(i){if(!(i!=null)){return"function Bling(selector, context) { [ ... ] }"}else{try{return d.type.lookup(i).string(i)}catch(j){return"[Error: "+j.message+"]"}}},toRepr:function(i){return d.type.lookup(i).repr(i)},px:function(i,j){if(j==null){j=0}return(i!=null)&&(parseInt(i,10)+(j|0))+"px"},capitalize:function(i){return(i.split(" ").map(function(j){return j[0].toUpperCase()+j.substring(1).toLowerCase()})).join(" ")},dashize:function(k){var o,l,j,n,m;j="";for(l=n=0,m=(k!=null?k.length:void 0)|0;0<=m?n<m:n>m;l=0<=m?++n:--n){o=k.charCodeAt(l);if((91>o&&o>64)){o+=32;j+="-"}j+=String.fromCharCode(o)}return j},camelize:function(j){var k;j.split("-");while((k=j!=null?j.indexOf("-"):void 0)>-1){j=d.stringSplice(j,k,k+2,j[k+1].toUpperCase())}return j},padLeft:function(i,k,j){if(j==null){j=" "}while(i.length<k){i=j+i}return i},padRight:function(i,k,j){if(j==null){j=" "}while(i.length<k){i=i+j}return i},stringTruncate:function(j,m,l){var k,i;if(l==null){l="..."}j=j.split(" ");k=[];while(m>0){i=j.shift();m-=i.length;if(m>=0){k.push(i)}}return k.join("")+l},stringCount:function(o,k,m,p){var l;if(m==null){m=0}if(p==null){p=0}if((l=o.indexOf(k,m))>m-1){return d.stringCount(o,k,l+1,p+1)}else{return p}},stringSplice:function(o,m,l,r){var k,q,p;q=o.length;k=l;if(k<0){k+=q}p=m;if(p<0){p+=q}return o.substring(0,p)+r+o.substring(k)},checksum:function(m){var k,j,l,o,n;k=1;j=0;for(l=o=0,n=m.length;0<=n?o<n:o>n;l=0<=n?++o:--o){k=(k+m.charCodeAt(l))%65521;j=(j+k)%65521}return(j<<16)|k},repeat:function(i,j){if(j==null){j=2}switch(true){case j===1:return i;case j<1:return"";case d.is("string",i):return i+d.repeat(i,j-1);default:return d(i).extend(d.repeat(i,j-1))}},stringBuilder:function(){var i,j=this;if(d.is("global",this)){return new d.stringBuilder()}i=[];this.length=0;this.append=function(k){i.push(k);return j.length+=(k!=null?k.toString().length:void 0)|0};this.prepend=function(k){i.splice(0,0,k);return j.length+=(k!=null?k.toString().length:void 0)|0};this.clear=function(){var k;k=j.toString();i=[];j.length=0;return k};this.toString=function(){return i.join("")};return this}},toString:function(){return d.toString(this)},toRepr:function(){return d.toRepr(this)}}});d.plugin({provides:"symbol",depends:"type"},function(){var h,i,j;j=null;h={};i=d.global;i.Bling=g;if(typeof module!=="undefined"&&module!==null){module.exports=g}d.defineProperty(d,"symbol",{set:function(k){i[j]=h[j];h[j=k]=i[k];return i[k]=g},get:function(){return j}});return{$:{symbol:"$",noConflict:function(){g.symbol="Bling";return g}}}});d.plugin({provides:"StateMachine"},function(){var h;return{$:{StateMachine:h=(function(){function i(j){this.debug=false;this.reset();this.table=j;Object.defineProperty(this,"modeline",{get:function(){return this.table[this._mode]}});Object.defineProperty(this,"mode",{set:function(k){var l;this._lastMode=this._mode;this._mode=k;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){l=this.modeline.enter.call(this);while(d.is("function",l)){l=l.call(this)}}return k},get:function(){return this._mode}})}i.prototype.reset=function(){this._mode=null;return this._lastMode=null};i.prototype.GO=function(j){return function(){return this.mode=j}};i.GO=function(j){return function(){return this.mode=j}};i.prototype.tick=function(l){var j,k;k=this.modeline;if(!(k!=null)){j=null}else{if(l in k){j=k[l]}else{if("def" in k){j=k.def}}}while(d.is("function",j)){j=j.call(this,l)}return j};i.prototype.run=function(k){var o,l,n,j,m;this.mode=0;for(n=0,j=k.length;n<j;n++){o=k[n];l=this.tick(o)}if(d.is("function",(m=this.modeline)!=null?m.eof:void 0)){l=this.modeline.eof.call(this)}while(d.is("function",l)){l=l.call(this)}this.reset();return this};return i})()}}});d.plugin({provides:"synth",depends:"StateMachine, type"},function(){var h;h=(function(k){var i;b(j,k);i={"#":j.GO(2),".":j.GO(3),"[":j.GO(4),'"':j.GO(6),"'":j.GO(7)," ":j.GO(8),",":j.GO(10),"+":j.GO(11),eof:j.GO(13)};j.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},d.extend({def:function(l){return this.tag+=l}},i),d.extend({def:function(l){return this.id+=l}},i),d.extend({enter:function(){if(this.cls.length>0){return this.cls+=" "}},def:function(l){return this.cls+=l}},i),{"=":j.GO(5),"]":function(){this.attrs[this.attr]=this.val;this.attr=this.val="";return this.GO(1)},def:function(l){return this.attr+=l},eof:j.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;this.attr=this.val="";return this.GO(1)},def:function(l){return this.val+=l},eof:j.GO(12)},{'"':j.GO(8),def:function(l){return this.text+=l},eof:j.GO(12)},{"'":j.GO(8),def:function(l){return this.text+=l},eof:j.GO(12)},{enter:function(){if(this.tag){this.emitNode()}if(this.text){this.emitText()}return this.GO(0)}},{},{enter:function(){this.emitNode();this.cursor=null;return this.GO(0)}},{enter:function(){var l;this.emitNode();this.cursor=(l=this.cursor)!=null?l.parentNode:void 0;return this.GO(0)}},{enter:function(){throw new Error("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag){this.emitNode()}if(this.text){return this.emitText()}}}];function j(){j.__super__.constructor.call(this,j.STATE_TABLE);this.fragment=this.cursor=document.createDocumentFragment()}j.prototype.emitNode=function(){var l,m;if(this.tag){m=document.createElement(this.tag);m.id=this.id||null;m.className=this.cls||null;for(l in this.attrs){m.setAttribute(l,this.attrs[l])}this.cursor.appendChild(m);return this.cursor=m}};j.prototype.emitText=function(){this.cursor.appendChild(d.type.lookup("<html>").node(this.text));return this.text=""};return j})(d.StateMachine);return{$:{synth:function(j){var i;i=new h();i.run(j);if(i.fragment.childNodes.length===1){return d(i.fragment.childNodes[0])}else{return d(i.fragment)}}}}});(function(i){var h;i.plugin(function(){var j,l,k;j=null;l={};k={register_engine:function(m,n){l[m]=n;if(!(j!=null)){return j=m}},render:function(n,m){if(j in l){return l[j](n,m)}}};k.__defineSetter__("engine",function(m){if(!m in l){throw new Error("invalid template engine: "+m+" not one of "+(Object.Keys(l)))}else{return j=m}});k.__defineGetter__("engine",function(){return j});return{name:"Template",$:{template:k}}});i.template.register_engine("null",(function(){return function(k,j){return k}})());h=function(q,o,k,j,p){var n,m,r,l;if(p==null){p=-1}n=1;if(p<0){p=q.length+1+p}for(m=l=j;l<p;m=l+=1){r=q[m];if(r===k){n+=1}else{if(r===o){n-=1}}if(n===0){return m}}return -1};i.template.register_engine("pythonic",(function(){var l,m,k,j;j=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;l=/%[\(\/]/;m=function(z){var v,q,t,s,y,u,p,o,w,r;v=z.split(l);p=v.length;w=[v[0]];s=1;for(t=r=1;r<p;t=r+=1){q=h(v[t],")","(",0,-1);if(q===-1){return"Template syntax error: unmatched '%(' starting at: "+(v[t].substring(0,15))}y=v[t].substring(0,q);o=v[t].substring(q);u=j.exec(o);if(u===null){return"Template syntax error: invalid type specifier starting at '"+o+"'"}o=u[4];w[s++]=y;w[s++]=u[1]|0;w[s++]=u[2]|0;w[s++]=u[3];w[s++]=o}return w};m.cache={};k=function(E,D){var o,u,z,w,C,r,q,s,p,A,B,v,y,t;o=m.cache[E];if(!(o!=null)){o=m.cache[E]=m(E)}q=[o[0]];w=1;r=o.length;for(z=v=1,y=r-5;v<=y;z=v+=5){t=o.slice(z,(z+4)+1||9000000000),C=t[0],s=t[1],u=t[2],A=t[3],p=t[4];B=D[C];if(!(B!=null)){B="missing value: "+C}switch(A){case"d":q[w++]=""+parseInt(B,10);break;case"f":q[w++]=parseFloat(B).toFixed(u);break;case"s":q[w++]=""+B;break;default:q[w++]=""+B}if(s>0){q[w]=String.PadLeft(q[w],s)}q[w++]=p}return q.join("")};return k})());return i.template.register_engine("js-eval",(function(){var j;j=(function(l){b(k,l);function k(){return k.__super__.constructor.apply(this,arguments)}k.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return k})(i.StateMachine);return function(l,k){return l}})())})(g);d.plugin({provides:"throttle",depends:"core"},function(){return{$:{throttle:function(h,j){var i;i=0;return function(){var k,l;k=1<=arguments.length?e.call(arguments,0):[];l=d.now-i;if(l>h){i+=l;return j.apply(this,k)}return null}},debounce:function(h,j){var i;i=0;return function(){var k,l;k=1<=arguments.length?e.call(arguments,0):[];i+=(l=d.now-i);return j.apply(this,k(l>h?void 0:null))}}}}});d.plugin(function(){var j,i,h;h=function(p){var l,m,o,k,n;m=p.indexOf(":");if(m>0){k=parseInt(p.slice(0,m),10);o=p.slice(m+1,m+1+k);n=p[m+1+k];l=p.slice(m+k+2);o=(function(){switch(n){case"#":return Number(o);case"'":return String(o);case"!":return o==="true";case"~":return null;case"]":return j(o);case"}":return i(o)}})();return[o,l]}return void 0};j=function(k){var n,l,m;n=[];while(k.length>0){m=h(k),l=m[0],k=m[1];n.push(l)}return n};i=function(l){var p,m,o,n,k;p={};while(l.length>0){n=h(l),m=n[0],l=n[1];k=h(l),o=k[0],l=k[1];p[m]=o}return p};return{$:{TNET:{stringify:function(k){var n,l,o,m;m=(function(){switch(d.type(k)){case"number":return[String(k),"#"];case"string":return[k,"'"];case"function":return[String(k),"'"];case"boolean":return[String(!!k),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var r,q,p;p=[];for(r=0,q=k.length;r<q;r++){o=k[r];p.push(d.TNET.stringify(o))}return p})()).join(""),"]"];case"object":return[((function(){var p;p=[];for(o in k){p.push(d.TNET.stringify(o)+d.TNET.stringify(k[o]))}return p})()).join(""),"}"]}})(),n=m[0],l=m[1];return(n.length|0)+":"+n+l},parse:function(k){var l;return(l=h(k))!=null?l[0]:void 0}}}}});d.plugin({provides:"trace",depends:"function,type"},function(){d.type.extend({unknown:{trace:d.identity},object:{trace:function(l,p,j){var i,n,h,m;m=Object.keys(p);for(n=0,h=m.length;n<h;n++){i=m[n];p[i]=d.trace(p[i],""+l+"."+i,j)}return p}},array:{trace:function(j,n,h){var k,m,l;for(k=m=0,l=n.length;m<l;k=m+=1){n[k]=d.trace(n[k],""+j+"["+k+"]",h)}return n}},"function":{trace:function(i,k,h){var j;i||(i=k.name);j=function(){var l;l=1<=arguments.length?e.call(arguments,0):[];h(""+(this.name||d.type(this))+"."+i+"("+(d(l).map(d.toRepr).join(","))+")");return k.apply(this,l)};j.toString=function(){return"{Trace '"+i+"' of "+(k.toString())};return j}}});return{$:{trace:function(i,k,h){var j;if(!d.is("string",i)){j=[k,i],h=j[0],k=j[1]}h||(h=d.log);i||(i="");return d.type.lookup(k).trace(i,k,h)}}}});d.plugin({depends:"dom"},function(){var l,h,j,p,m,k,o,n,i;l=", ";j={slow:700,medium:500,normal:300,fast:100,instant:0,now:0};h=/(?:scale(?:3d)*|translate(?:[XYZ]|3d)*|rotate(?:[XYZ]|3d)*)/;i=30;p=document.createElement("div").style;m="transform";o="transition-property";k="transition-duration";n="transition-timing-function";if("WebkitTransform" in p){m="-webkit-transform";o="-webkit-transition-property";k="-webkit-transition-duration";n="-webkit-transition-timing-function"}else{if("MozTransform" in p){m="-moz-transform";o="-moz-transition-property";k="-moz-transition-duration";n="-moz-transition-timing-function"}else{if("OTransform" in p){m="-o-transform";o="-o-transition-property";k="-o-transition-duration";n="-o-transition-timing-function"}}}return{$:{duration:function(q){var r;r=j[q];if(r!=null){return r}return parseFloat(q)}},transform:function(v,q,u,y){var t,r,s,z,w,A;if(d.is("function",q)){y=q;q=u=null}else{if(d.is("function",u)){y=u;u=null}}if(q==null){q="normal"}u||(u="ease");r=d.duration(q)+"ms";w=[];A="";t={};for(s in v){if(h.test(s)){z=v[s];if(z.join){z=d(z).px().join(l)}else{if(z.toString){z=z.toString()}}A+=" "+s+"("+z+")"}else{t[s]=v[s]}}for(s in t){w.push(s)}if(A){w.push(m)}t[o]=w.join(l);t[k]=w.map(function(){return r}).join(l);t[n]=w.map(function(){return u}).join(l);if(A){t[m]=A}this.css(t);return this.delay(r,y)},hide:function(q){return this.each(function(){if(this.style){this._display="";if(this.style.display===!"none"){this._display=this.syle.display}return this.style.display="none"}}).trigger("hide".delay(i,q))},show:function(q){return this.each(function(){if(this.style){this.style.display=this._display;return delete this._display}}).trigger("show".delay(i,q))},toggle:function(q){return this.weave(this.css("display")).fold(function(s,r){if(s==="none"){r.style.display=r._display||"";delete r._display;d(r).trigger("show")}else{r._display=s;r.style.display="none";d(r).trigger("hide")}return r}).delay(i,q)},fadeIn:function(q,r){return this.css("opacity","0.0").show(function(){return this.transform({opacity:"1.0",translate3d:[0,0,0]},q,r)})},fadeOut:function(r,t,q,s){if(q==null){q=0}if(s==null){s=0}return this.transform({opacity:"0.0",translate3d:[q,s,0]},r,function(){return this.hide(t)})},fadeLeft:function(q,r){return this.fadeOut(q,r,"-"+this.width().first(),0)},fadeRight:function(q,r){return this.fadeOut(q,r,this.width().first(),0)},fadeUp:function(q,r){return this.fadeOut(q,r,0,"-"+this.height().first())},fadeDown:function(q,r){return this.fadeOut(q,r,0,this.height().first())}}});d.plugin({provides:"type"},function(){var i,j,h;j=function(k,l){if(!(l!=null)){return k===l||k==="null"||k==="undefined"}else{return l.constructor===k||l.constructor.name===k||Object.prototype.toString.apply(l)===("[object "+k+"]")||j(k,l.__proto__)}};i=function(k,l){if(typeof k==="function"){k=k.prototype}if(k.__proto__===Object.prototype){k.__proto__=l.__proto__}l.__proto__=k;return l};h=(function(){var o,l,p,k,n,m;l={};o={name:"unknown",match:function(q){return true}};k=[];n=function(q,r){if(!(q in l)){k.unshift(q)}l[r.name=q]=o!==r?i(o,r):r;return l[q][q]=function(s){return s}};m=function(s,u){var r,t,q;if(typeof s==="string"){if((t=l[s])==null){l[s]=n(s,{})}return l[s]=f(l[s],u)}else{if(typeof s==="object"){q=[];for(r in s){q.push(m(r,s[r]))}return q}}};p=function(u){var r,t,q,s;for(t=0,q=k.length;t<q;t++){r=k[t];if((s=l[r])!=null?s.match.call(u,u):void 0){return l[r]}}};n("unknown",o);n("object",{match:function(){return typeof this==="object"}});n("error",{match:function(){return j("Error",this)}});n("regexp",{match:function(){return j("RegExp",this)}});n("string",{match:function(){return typeof this==="string"||j(String,this)}});n("number",{match:function(){return(j(Number,this))&&this!==NaN}});n("bool",{match:function(){var q;return typeof this==="boolean"||((q=String(this))==="true"||q==="false")}});n("array",{match:function(){return(typeof Array.isArray==="function"?Array.isArray(this):void 0)||j(Array,this)}});n("function",{match:function(){return typeof this==="function"}});n("global",{match:function(){return typeof this==="object"&&"setInterval" in this}});n("undefined",{match:function(q){return q===void 0}});n("null",{match:function(q){return q===null}});return f((function(q){return p(q).name}),{register:n,lookup:p,extend:m,is:function(q,s){var r;return(r=l[q])!=null?r.match.call(s,s):void 0},as:function(){var u,s,q,r;q=arguments[0],u=arguments[1],s=3<=arguments.length?e.call(arguments,2):[];return typeof(r=p(u))[q]==="function"?r[q].apply(r,[u].concat(e.call(s))):void 0}})})();h.extend({unknown:{array:function(k){return[k]}},"null":{array:function(k){return[]}},undefined:{array:function(k){return[]}},array:{array:function(k){return k}},number:{array:function(k){return g.extend(new Array(k),{length:0})}}});h.register("bling",{match:function(k){return k&&j(g,k)},array:function(k){return k.toArray()},hash:function(k){return k.map(g.hash).reduce(function(m,l){return(m*m)+l})},string:function(k){return g.symbol+"(["+k.map(function(l){return d.type.lookup(l).string(l)}).join(", ")+"])"},repr:function(k){return g.symbol+"(["+k.map(function(l){return d.type.lookup(l).repr(l)}).join(", ")+"])"}});return{$:{inherit:i,extend:f,defineProperty:function(m,k,l){Object.defineProperty(m,k,f({configurable:true,enumerable:true},l));return m},isType:j,type:h,is:h.is,as:h.as,isSimple:function(l){var k;return(k=h(l))==="string"||k==="number"||k==="bool"},isEmpty:function(k){return(k===""||k===null||k===(void 0))||k.length===0||(typeof k==="object"&&Object.keys(k).length===0)}},defineProperty:function(k,l){return this.each(function(){return d.defineProperty(this,k,l)})}}});d.plugin({provides:"unittest",depends:"core,function"},function(){var m,j,k,i,l,h;l=i=m=0;j=[];k=function(u,p,s){var o,t,n,r;if(!d.is("function",s)){return}r=function(v){return d.log(""+u+": "+p+"... "+v)};n=p.toLowerCase().indexOf("fail")!==-1;o=d.once(function(v){l--;if(!!v!==n){r("fail: "+v);m++;return j.push(p)}else{r("pass");i++;return d.provide(p)}});t=function(v){try{return s(v)}catch(w){return v(w)}finally{if(p.toLowerCase().indexOf("async")===-1){v()}}};l++;try{return t(o)}catch(q){return o(q)}};h=d.once(function(){d.log("Passed: "+i+" Failed: "+m+" ["+j+"]");if(m>0){try{return process.exit(m)}catch(n){}}});return{$:{approx:function(o,n,p){if(p==null){p=0.1}return Math.abs(o-n)<p},assert:function(o,n){if(n==null){n="no message"}if(!o){throw new Error("Assertion failed: "+n)}},assertEqual:function(o,n,p){if(o!==n){throw Error(""+(p||"")+" ("+(o!=null?o.toString():void 0)+") should equal ("+(n!=null?n.toString():void 0)+")")}},assertArrayEqual:function(p,n,q){var r,u,t,o;o=[];for(r=u=0,t=p.length;u<t;r=u+=1){try{o.push(d.assertEqual(p[r],n[r],q))}catch(s){throw Error(""+(q||"")+" "+(p!=null?p.toString():void 0)+" should equal "+(n!=null?n.toString():void 0))}}return o},testGroup:function(r,q){var s,p,o,n;p=setInterval((function(){if(l===0){clearInterval(p);return h()}}),50);n=[];for(o in q){s=q[o];n.push(k(r,o,s))}return n}},assertEqual:function(){var n,o,p,r,q,s=this;o=1<=arguments.length?e.call(arguments,0):[];if(o.length>1){o=o.map(function(t){if(d.is("function",t)){return t.call(s,s)}else{return t}});n=o[0];for(p=r=1,q=o.length;1<=q?r<q:r>q;p=1<=q?++r:--r){d.assertEqual(n,o[p])}}return this}}})}).call(this);
=======
(function(){var a,b,k,h,c,m,g,e,f,i=[].slice,l=[].indexOf||function(p){for(var o=0,n=this.length;o<n;o++){if(o in this&&this[o]===p){return o}}return -1},j={}.hasOwnProperty,d=function(q,o){for(var n in o){if(j.call(o,n)){q[n]=o[n]}}function p(){this.constructor=q}p.prototype=o.prototype;q.prototype=new p();q.__super__=o.prototype;return q};if((g=Object.keys)==null){Object.keys=function(q){var p,n;n=[];for(p in q){n.push(p)}return n}}if((e=Object.values)==null){Object.values=function(q){var p,n;n=[];for(p in q){n.push(q[p])}return n}}k=function(o,n){var q,p;if(n){for(q in n){p=n[q];if(p!=null){o[q]=p}}}return o};b=function(q,n,p){Object.defineProperty(q,n,k({configurable:true,enumerable:true},p));return q};c=function(n,p){if(!(p!=null)){return n===p||n==="null"||n==="undefined"}else{return p.constructor===n||p.constructor.name===n||Object.prototype.toString.apply(p)===("[object "+n+"]")||c(n,p.__proto__)}};h=function(n,o){if(typeof n==="function"){n=n.prototype}if(n.__proto__===Object.prototype){n.__proto__=o.__proto__}o.__proto__=n;return o};f=(function(){var r,o,s,n,q,p;o={};r={name:"unknown",match:function(t){return true}};n=[];q=function(t,u){if(!(t in o)){n.unshift(t)}o[u.name=t]=r!==u?h(r,u):u;return o[t][t]=function(v){return v}};p=function(v,w){var u,y,t;if(typeof v==="string"){if((y=o[v])==null){o[v]=q(v,{})}return o[v]=k(o[v],w)}else{if(typeof v==="object"){t=[];for(u in v){t.push(p(u,v[u]))}return t}}};s=function(w){var u,v,t,y;for(v=0,t=n.length;v<t;v++){u=n[v];if((y=o[u])!=null?y.match.call(w,w):void 0){return o[u]}}};q("unknown",r);q("object",{match:function(){return typeof this==="object"}});q("error",{match:function(){return c("Error",this)}});q("regexp",{match:function(){return c("RegExp",this)}});q("string",{match:function(){return typeof this==="string"||c(String,this)}});q("number",{match:function(){return(c(Number,this))&&this!==NaN}});q("bool",{match:function(){var t;return typeof this==="boolean"||((t=String(this))==="true"||t==="false")}});q("array",{match:function(){return(typeof Array.isArray==="function"?Array.isArray(this):void 0)||c(Array,this)}});q("function",{match:function(){return typeof this==="function"}});q("global",{match:function(){return typeof this==="object"&&"setInterval" in this}});q("undefined",{match:function(t){return t===void 0}});q("null",{match:function(t){return t===null}});return k((function(t){return s(t).name}),{register:q,lookup:s,extend:p,is:function(u,v){var w;return(w=o[u])!=null?w.match.call(v,v):void 0},as:function(){var y,w,u,v;u=arguments[0],y=arguments[1],w=3<=arguments.length?i.call(arguments,2):[];return typeof(v=s(y))[u]==="function"?v[u].apply(v,[y].concat(i.call(w))):void 0}})})();m=(function(){var n;n={};return function(r,q){var s,u,t,o;u=(n[r]||(n[r]=[]));if(!q){return{prepend:function(p){u.unshift(p);return p},append:function(p){u.push(p);return p}}}for(t=0,o=u.length;t<o;t++){s=u[t];q=s.call(this,q)}return q}})();a=(function(){var n,o;n=typeof document!=="undefined"&&document!==null?document:{};function p(q,r){if(r==null){r=n}return p.pipe("bling-init",[q,r])}p.pipe=m;p.pipe("bling-init").prepend(function(r){var s,q;q=r[0],s=r[1];return h(p,h({selector:q,context:s},f.lookup(q).array(q,s)))});p.plugin=function(u,s){var r,t,w,v=this;if(!(s!=null)){s=u;u={}}if("depends" in u){return this.depends(u.depends,function(){return v.plugin({provides:u.provides},s)})}try{if((t=s!=null?s.call(this,this):void 0)){k(this,t!=null?t.$:void 0);["$","name"].forEach(function(y){return delete t[y]});k(this.prototype,t);w=function(y){return v[y]||(v[y]=function(){var z;z=1<=arguments.length?i.call(arguments,0):[];return v.prototype[y].apply($(z[0]),z.slice(1))})};for(r in t){w(r)}if(u.provides!=null){this.provide(u.provides)}}}catch(q){console.log("failed to load plugin: "+this.name+" "+q.message+": "+q.stack)}return this};o={q:[],done:{},filter:function(q){return((typeof q)==="string"?q.split(/, */):q).filter(function(r){return !(r in o.done)})}};p.depends=function(q,r){if((q=o.filter(q)).length===0){r()}else{o.q.push(function(t){var s;if((s=q.indexOf(t))>-1){q.splice(s,1)}return q.length===0&&r})}return r};p.provide=function(s,w){var v,r,t,u,q,y;y=o.filter(s);for(u=0,q=y.length;u<q;u++){t=y[u];o.done[t]=r=0;while(r<o.q.length){if((v=o.q[r](t))){o.q.splice(r,1);v(w)}else{r++}}}return w};p.provides=function(q,r){return function(){var s;s=1<=arguments.length?i.call(arguments,0):[];return p.provide(q,r.apply(null,s))}};f.extend({unknown:{array:function(q){return[q]}},"null":{array:function(q){return[]}},undefined:{array:function(q){return[]}},array:{array:function(q){return q}},number:{array:function(q){return p.extend(new Array(q),{length:0})}}});f.register("bling",{match:function(q){return q&&c(p,q)},array:function(q){return q.toArray()},hash:function(q){return q.map(p.hash).reduce(function(s,r){return(s*s)+r})},string:function(q){return p.symbol+"(["+q.map(function(r){return $.type.lookup(r).string(r)}).join(", ")+"])"},repr:function(q){return p.symbol+"(["+q.map(function(r){return $.type.lookup(r).repr(r)}).join(", ")+"])"}});return p})();a.prototype=[];a.prototype.constructor=a;(function(n){var o;n.global=o=typeof window!=="undefined"&&window!==null?window:global;n.plugin({provides:"type"},function(){return{$:{inherit:h,extend:k,defineProperty:b,isType:c,type:f,is:f.is,as:f.as,isSimple:function(p){var q;return(q=f(p))==="string"||q==="number"||q==="bool"},isEmpty:function(p){return p===""||p===null||p===(void 0)}}}});n.plugin({provides:"symbol",depends:"type"},function(){var p,q;q=null;p={};o.Bling=a;if(typeof module!=="undefined"&&module!==null){module.exports=a}n.type.extend("bling",{string:function(r){return q+"(["+r.map(n.toString).join(", ")+"])"}});b(n,"symbol",{set:function(r){o[q]=p[q];p[q=r]=o[r];return o[r]=a},get:function(){return q}});return{$:{symbol:"$",noConflict:function(){a.symbol="Bling";return a}}}});n.plugin(function(){var t,r,s,q,p;(r=String.prototype).trimLeft||(r.trimLeft=function(){return this.replace(/^\s+/,"")});(s=String.prototype).split||(s.split=function(w){var u,y,v;u=[];y=0;while((v=this.indexOf(w,y))>-1){u.push(this.substring(y,v));y=v+1}return u});(q=String.prototype).lastIndexOf||(q.lastIndexOf=function(w,y,v){var u;if(v==null){v=-1}u=-1;while((v=w.indexOf(y,v+1))>-1){u=v}return u});(p=Array.prototype).join||(p.join=function(u){var w,v;if(u==null){u=""}w=this.length;if(w===0){return""}v=this[w-1];while(--w>0){v=this[w-1]+u+v}return v});if(typeof Event!=="undefined"&&Event!==null){Event.prototype.preventAll=function(){this.preventDefault();this.stopPropagation();return this.cancelBubble=true}}if(typeof Element!=="undefined"&&Element!==null){Element.prototype.matchesSelector=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.matchesSelector;if(Element.prototype.cloneNode.length===0){t=Element.prototype.cloneNode;Element.prototype.cloneNode=function(v){var w,A,y,u,z;if(v==null){v=false}A=t.call(this);if(v){z=this.childNodes;for(y=0,u=z.length;y<u;y++){w=z[y];A.appendChild(w.cloneNode(true))}}return A}}}return{}});n.plugin({provides:"core",depends:"string"},function(){var q,p;b(n,"now",{get:function(){return +(new Date)}});p=function(r,s){while(r<0){r+=s.length}return Math.min(r,s.length)};q=n.now;return{$:{log:n.extend(function(){var r,s;r=1<=arguments.length?i.call(arguments,0):[];s="+"+(n.padLeft(String(n.now-q),n.log.prefixSize,"0"))+":";if(s.length>n.log.prefixSize+2){s=""+(q=n.now)+":"}if(r.length&&n.is("string",r[0])){r[0]=""+s+" "+r[0]}else{r.unshift(s)}console.log.apply(console,r);if(r.length){return r[r.length-1]}},{prefixSize:5}),assert:function(s,r){if(r==null){r=""}if(!s){throw new Error("assertion failed: "+r)}},coalesce:function(){var r;r=1<=arguments.length?i.call(arguments,0):[];return n(r).coalesce()}},eq:function(r){return n([this[p(r,this)]])},each:function(v){var s,u,r;for(u=0,r=this.length;u<r;u++){s=this[u];v.call(s,s)}return this},map:function(s){var r;return n((function(){var v,u,t;t=[];for(v=0,u=this.length;v<u;v++){r=this[v];t.push(s.call(r,r))}return t}).call(this))},reduce:function(v,s){var t,w,r,u;t=0;w=this.length;if(!(s!=null)){s=this[t++]}for(r=u=t;u<w;r=u+=1){s=v.call(this[r],s,this[r])}return s},union:function(s,v){var w,r,z,y,u,t;if(v==null){v=true}w=n();for(z=0,u=this.length;z<u;z++){r=this[z];if(!w.contains(r,v)){w.push(r)}}for(y=0,t=s.length;y<t;y++){r=s[y];if(!w.contains(r,v)){w.push(r)}}return w},distinct:function(r){if(r==null){r=true}return this.union(this,r)},intersect:function(s){var r;return n((function(){var v,u,t;t=[];for(v=0,u=this.length;v<u;v++){r=this[v];if(l.call(s,r)>=0){t.push(r)}}return t}).call(this))},contains:function(u,r){var s;if(r==null){r=true}return((function(){var w,v,t;t=[];for(w=0,v=this.length;w<v;w++){s=this[w];t.push((r&&s===u)||(!r&&s==u))}return t}).call(this)).reduce((function(v,t){return v||t}),false)},count:function(u,r){var s;if(r==null){r=true}return n((function(){var w,v,t;t=[];for(w=0,v=this.length;w<v;w++){s=this[w];if((u===void 0)||(r&&s===u)||(!r&&s==u)){t.push(1)}}return t}).call(this)).sum()},coalesce:function(){var s,t,r,u;for(t=0,r=this.length;t<r;t++){s=this[t];if((u=n.type(s))==="array"||u==="bling"){s=n(s).coalesce()}if(s!=null){return s}}return null},swap:function(s,r){var t;s=p(s,this);r=p(r,this);if(s!==r){t=[this[r],this[s]],this[s]=t[0],this[r]=t[1]}return this},shuffle:function(){var r;r=this.length-1;while(r>=0){this.swap(--r,Math.floor(Math.random()*r))}return this},select:(function(){var s,r;s=function(t){return function(){var u;if(n.is("function",u=this[t])){return n.bound(this,u)}else{return u}}};return r=function(u){var t;if((t=u.indexOf("."))>-1){return this.select(u.substr(0,t)).select(u.substr(t+1))}else{return this.map(s(u))}}})(),or:function(r){var s,t,u;for(s=t=0,u=this.length;0<=u?t<u:t>u;s=0<=u?++t:--t){this[s]||(this[s]=r)}return this},zap:function(w,r){var u,t,s;t=w.lastIndexOf(".");if(t>0){u=w.substr(0,t);s=w.substr(t+1);this.select(u).zap(s,r);return this}switch(n.type(r)){case"array":case"bling":this.each(function(){return this[w]=r[++t%r.length]});break;case"function":this.zap(w,this.select(w).map(r));break;default:this.each(function(){return this[w]=r})}return this},clean:function(r){return this.each(function(){return delete this[r]})},take:function(t){var r,s;if(t==null){t=1}r=Math.min(t,this.length);return n((function(){var v,u;u=[];for(s=v=0;0<=r?v<r:v>r;s=0<=r?++v:--v){u.push(this[s])}return u}).call(this))},skip:function(t){var r,s;if(t==null){t=0}s=Math.max(0,t|0);return n((function(){var v,w,u;u=[];for(r=v=s,w=this.length;s<=w?v<w:v>w;r=s<=w?++v:--v){u.push(this[r])}return u}).call(this))},first:function(r){if(r==null){r=1}if(r===1){return this[0]}else{return this.take(r)}},last:function(r){if(r==null){r=1}if(r===1){return this[this.length-1]}else{return this.skip(this.length-r)}},slice:function(t,r){var s;if(t==null){t=0}if(r==null){r=this.length}t=p(t,this);r=p(r,this);return n((function(){var v,u;u=[];for(s=v=t;t<=r?v<r:v>r;s=t<=r?++v:--v){u.push(this[s])}return u}).call(this))},extend:function(r){var t,u,s;for(u=0,s=r.length;u<s;u++){t=r[u];this.push(t)}return this},push:function(r){Array.prototype.push.call(this,r);return this},filter:function(t){var s,r;s=(function(){switch(n.type(t)){case"string":return function(u){return u.matchesSelector(t)};case"regexp":return function(u){return t.test(u)};case"function":return t;default:throw new Error("unsupported type passed to filter: "+(n.type(t)))}})();return n((function(){var w,v,u;u=[];for(w=0,v=this.length;w<v;w++){r=this[w];if(s.call(r,r)){u.push(r)}}return u}).call(this))},matches:function(r){return this.select("matchesSelector").call(r)},querySelectorAll:function(r){return this.filter("*").reduce(function(s,t){return s.extend(t.querySelectorAll(r))},n())},weave:function(r){var y,s,u,t,w,v;y=n();for(s=u=w=this.length-1;u>=0;s=u+=-1){y[(s*2)+1]=this[s]}for(s=t=0,v=r.length;t<v;s=t+=1){y[s*2]=r[s]}return y},fold:function(t){var r,s,u;u=this.length;r=n((function(){var w,y,v;v=[];for(s=w=0,y=u-1;w<y;s=w+=2){v.push(t.call(this,this[s],this[s+1]))}return v}).call(this));if((u%2)===1){r.push(t.call(this,this[u-1],void 0))}return r},flatten:function(){var r,v,u,y,w,t,s;r=n();for(y=0,t=this.length;y<t;y++){v=this[y];for(w=0,s=v.length;w<s;w++){u=v[w];r.push(u)}}return r},call:function(){return this.apply(null,arguments)},apply:function(s,r){return this.map(function(){if(n.is("function",this)){return this.apply(s,r)}else{return this}})},log:function(r){if(r){n.log(r,this.toString(),this.length+" items")}else{n.log(this.toString(),this.length+" items")}return this},toArray:function(){this.__proto__=Array.prototype;return this}}});n.plugin({provides:"math",depends:"core"},function(){n.type.extend({bool:{number:function(p){if(p){return 1}else{return 0}}},number:{bool:function(p){return !!p}}});return{$:{range:function(s,p,r){var q;if(r==null){r=1}if(!(p!=null)){p=s;s=0}if(p<s&&r>0){r*=-1}return n((function(){var u,v,t;t=[];for(q=u=0,v=Math.ceil((p-s)/r);0<=v?u<v:u>v;q=0<=v?++u:--u){t.push(s+(q*r))}return t})())},zeros:function(q){var p;return n((function(){var s,r;r=[];for(p=s=0;0<=q?s<q:s>q;p=0<=q?++s:--s){r.push(0)}return r})())},ones:function(q){var p;return n((function(){var s,r;r=[];for(p=s=0;0<=q?s<q:s>q;p=0<=q?++s:--s){r.push(1)}return r})())}},floats:function(){return this.map(parseFloat)},ints:function(){return this.map(function(){return parseInt(this,10)})},px:function(p){return this.ints().map(function(){return n.px(this,p)})},min:function(){return this.filter(isFinite).reduce(Math.min)},max:function(){return this.filter(isFinite).reduce(Math.max)},mean:function(){return this.sum()/this.length},avg:function(){return this.sum()/this.length},sum:function(){return this.filter(isFinite).reduce((function(p){return p+this}),0)},product:function(){return this.filter(isFinite).reduce(function(p){return p*this})},squares:function(){return this.map(function(){return this*this})},magnitude:function(){return Math.sqrt(this.floats().squares().sum())},scale:function(p){return this.map(function(){return p*this})},add:function(q){var p;switch(n.type(q)){case"number":return this.map(function(){return q+this});case"bling":case"array":return n((function(){var s,t,r;r=[];for(p=s=0,t=Math.min(this.length,q.length);0<=t?s<t:s>t;p=0<=t?++s:--s){r.push(this[p]+q[p])}return r}).call(this))}},normalize:function(){return this.scale(1/this.magnitude())}}});n.plugin({provides:"string",depends:"function"},function(){n.type.extend({unknown:{string:function(p){var q;return(q=typeof p.toString==="function"?p.toString():void 0)!=null?q:String(p)},repr:function(p){return n.type.lookup(p).string(p)},number:function(p){return parseFloat(String(p))}},"null":{string:function(){return"null"}},undefined:{string:function(){return"undefined"}},string:{number:parseFloat,repr:function(p){return"'"+p+"'"}},array:{string:function(q){var p;return"["+((function(){var t,s,r;r=[];for(t=0,s=q.length;t<s;t++){p=q[t];r.push(n.toString(p))}return r})()).join(",")+"]"}},object:{string:function(r){var q,p;return"{"+((function(){var s;s=[];for(q in r){p=r[q];s.push(""+q+":"+(n.toString(p)))}return s})()).join(", ")+"}"}},"function":{string:function(p){return p.toString().replace(/^([^{]*){(?:.|\n|\r)*}$/,"$1{ ... }")}},number:{repr:function(p){return String(p)},string:function(p){switch(true){case p.precision!=null:return p.toPrecision(p.precision);case p.fixed!=null:return p.toFixed(p.fixed);default:return String(p)}}}});return{$:{toString:function(p){if(!(p!=null)){return"function Bling(selector, context) { [ ... ] }"}else{return n.type.lookup(p).string(p)}},toRepr:function(p){return n.type.lookup(p).repr(p)},px:function(p,q){if(q==null){q=0}return(p!=null)&&(parseInt(p,10)+(q|0))+"px"},capitalize:function(p){return(p.split(" ").map(function(q){return q[0].toUpperCase()+q.substring(1).toLowerCase()})).join(" ")},dashize:function(q){var u,r,p,s,t;p="";for(r=s=0,t=(q!=null?q.length:void 0)|0;0<=t?s<t:s>t;r=0<=t?++s:--s){u=q.charCodeAt(r);if((91>u&&u>64)){u+=32;p+="-"}p+=String.fromCharCode(u)}return p},camelize:function(p){var q;p.split("-");while((q=p!=null?p.indexOf("-"):void 0)>-1){p=n.stringSplice(p,q,q+2,p[q+1].toUpperCase())}return p},padLeft:function(p,r,q){if(q==null){q=" "}while(p.length<r){p=q+p}return p},padRight:function(p,r,q){if(q==null){q=" "}while(p.length<r){p=p+q}return p},stringCount:function(t,p,r,u){var q;if(r==null){r=0}if(u==null){u=0}if((q=t.indexOf(p,r))>r-1){return n.stringCount(t,p,q+1,u+1)}else{return u}},stringSplice:function(t,r,q,w){var p,v,u;v=t.length;p=q;if(p<0){p+=v}u=r;if(u<0){u+=v}return t.substring(0,u)+w+t.substring(p)},checksum:function(t){var q,p,r,u,v;q=1;p=0;for(r=u=0,v=t.length;0<=v?u<v:u>v;r=0<=v?++u:--u){q=(q+t.charCodeAt(r))%65521;p=(p+q)%65521}return(p<<16)|q},repeat:function(p,q){if(q==null){q=2}switch(true){case q===1:return p;case q<1:return"";case n.is("string",p):return p+n.repeat(p,q-1);default:return n(p).extend(n.repeat(p,q-1))}},stringBuilder:function(){var p,q=this;if(n.is("global",this)){return new n.stringBuilder()}p=[];this.length=0;this.append=function(r){p.push(r);return q.length+=(r!=null?r.toString().length:void 0)|0};this.prepend=function(r){p.splice(0,0,r);return q.length+=(r!=null?r.toString().length:void 0)|0};this.clear=function(){var r;r=q.toString();p=[];q.length=0;return r};this.toString=function(){return p.join("")};return this}},toString:function(){return n.toString(this)},toRepr:function(){return n.toRepr(this)}}});n.plugin({provides:"function",depends:"hash"},function(){return{$:{identity:function(p){return p},not:function(p){return function(){return !p.apply(this,arguments)}},compose:function(q,p){return function(r){var s;return q.call(s,(s=p.call(r,r)))}},and:function(q,p){return function(r){return p.call(this,r)&&q.call(this,r)}},once:function(p,q){if(q==null){q=1}return n.defineProperty((function(){if(q-->0){return p.apply(this,arguments)}}),"exhausted",{get:function(){return q<=0}})},cycle:function(){var q,p;q=1<=arguments.length?i.call(arguments,0):[];p=-1;return function(){return q[p=++p%q.length].apply(this,arguments)}},bound:function(q,u,p){var s;if(p==null){p=[]}if(n.is("function",u.bind)){p.splice(0,0,q);s=u.bind.apply(u,p)}else{s=function(){var r;r=1<=arguments.length?i.call(arguments,0):[];return u.apply(q,p(p.length?void 0:r))}}return n.extend(s,{toString:function(){return"bound-method of "+q+"."+u.name}})},memoize:function(q){var p;p={};return function(){var s,r,t;s=1<=arguments.length?i.call(arguments,0):[];return(t=p[r=n.hash(s)])!=null?t:p[r]=q.apply(this,s)}},E:function(p){return function(q){return function(r,s){if(!r){return q(s)}return p(r,s)}}}}}});n.plugin({provides:"hash",depends:"type"},function(){n.type.extend({unknown:{hash:function(p){return n.checksum(n.toString(p))}},object:{hash:function(q){var p;return n.hash(Object)+n((function(){var r;r=[];for(p in q){r.push(n.hash(q[p]))}return r})()).sum()+n.hash(Object.keys(q))}},array:{hash:function(p){return n.hash(Array)+n(p.map(n.hash)).reduce(function(r,q){return(r*r)+(q|0)},1)}},bool:{hash:function(p){return parseInt(p?1:void 0)}}});return{$:{hash:function(p){return n.type.lookup(p).hash(p)}},hash:function(){return n.hash(this)}}});n.plugin({provides:"pubsub"},function(){var p;p={};return{$:{publish:function(){var r,u,t,s,q,v;u=arguments[0],r=2<=arguments.length?i.call(arguments,1):[];v=(p[u]||(p[u]=[]));for(s=0,q=v.length;s<q;s++){t=v[s];t.apply(null,r)}return r},publisher:function(r,q){return function(){var s;s=1<=arguments.length?i.call(arguments,0):[];q.apply(this,s);return n.publish(r,s)}},subscribe:function(r,q){(p[r]||(p[r]=[])).push(q);return q},unsubscribe:function(t,s){var q,r;if(!(s!=null)){return p[t]=[]}else{q=(p[t]||(p[t]=[]));if((r=q.indexOf(s))>-1){return q.splice(r,r)}}}}}});n.plugin({provides:"throttle",depends:"core"},function(){return{$:{throttle:function(q,r,p){if(r==null){r=250}if(p==null){p=0}return function(){var s,t;s=1<=arguments.length?i.call(arguments,0):[];t=n.now-p;if(t>r){p+=t;return q.apply(this,s)}return null}},debounce:function(q,r,p){if(r==null){r=250}if(p==null){p=0}return function(){var s,t;s=1<=arguments.length?i.call(arguments,0):[];p+=(t=n.now-p);return q.apply(this,s(t>r?void 0:null))}}}}});return n.plugin({provides:"EventEmitter"},function(){return{$:{EventEmitter:n.pipe("bling-init").append(function(r){var q,p;p={};q=function(s){return p[s]||(p[s]=[])};return h({emit:function(){var t,w,v,u,s,y;w=arguments[0],t=2<=arguments.length?i.call(arguments,1):[];y=q(w);for(u=0,s=y.length;u<s;u++){v=y[u];v.apply(this,t)}return this},addListener:function(t,s){q(t).push(s);return this.emit("newListener",t,s)},on:function(t,s){return this.addListener(t,s)},removeListener:function(u,t){var s;if((s=q(u).indexOf(t))>-1){return q(u).splice(s,1)}},removeAllListeners:function(s){return p[s]=[]},setMaxListeners:function(s){},listeners:function(s){return q(s).slice(0)}},r)})}}})})(a);(function(n){return n.plugin({provides:"cartesian"},function(){return{$:{cartesian:function(){var q,r,o,p;p=1<=arguments.length?i.call(arguments,0):[];r=p.length;o=[];q=function(w,u){var s,v,t,y;if(++u>=r){return o.push(w)}y=p[u];for(v=0,t=y.length;v<t;v++){s=y[v];q(w.concat(s),u)}return null};q([],-1);return n(o)}}}})})(a);(function(n){return n.plugin({provides:"config"},function(){var o;o=function(p,q){var r;return(r=process.env[p])!=null?r:q};return{$:{config:n.extend(o,{get:o})}}})})(a);(function(n){return n.plugin({provides:"date"},function(){var p,y,u,v,z,t,q,o,A,B,C,w,r;r=[1,1000,1000*60,1000*60*60,1000*60*60*24],o=r[0],C=r[1],q=r[2],t=r[3],y=r[4];w={ms:o,s:C,m:q,h:t,d:y,sec:C,second:C,seconds:C,min:q,minute:q,minutes:q,hr:t,hour:t,hours:t,day:y,days:y};z={yyyy:Date.prototype.getUTCFullYear,mm:function(){return this.getUTCMonth()+1},dd:Date.prototype.getUTCDate,HH:Date.prototype.getUTCHours,MM:Date.prototype.getUTCMinutes,SS:Date.prototype.getUTCSeconds,MS:Date.prototype.getUTCMilliseconds};v=Object.keys(z).sort().reverse();B={yyyy:Date.prototype.setUTCFullYear,mm:function(s){return this.setUTCMonth(s-1)},dd:Date.prototype.setUTCDate,HH:Date.prototype.setUTCHours,MM:Date.prototype.setUTCMinutes,SS:Date.prototype.setUTCSeconds,MS:Date.prototype.setUTCMilliseconds};A=Object.keys(B).sort().reverse();u=Math.floor;n.type.register("date",{match:function(s){return n.isType(Date,s)},array:function(s){return[s]},string:function(E,s,D){return n.date.format(E,s,D)},number:function(D,s){return n.date.stamp(D,s)}});n.type.extend("string",{date:function(D,s){if(s==null){s=n.date.defaultFormat}return new Date(n.date.parse(D,s,"ms"))}});n.type.extend("number",{date:function(D,s){return n.date.unstamp(D,s)}});p=function(s){return function(E,G,F){var D;if(F==null){F=n.date.defaultUnit}D=n.date.unstamp(E,F);B[s].call(D,(z[s].call(D))+G);return n.date.stamp(D,F)}};return{$:{date:{defaultUnit:"s",defaultFormat:"yyyy-mm-dd HH:MM:SS",stamp:function(s,D){if(s==null){s=new Date}if(D==null){D=n.date.defaultUnit}return u(s/w[D])},unstamp:function(s,D){if(D==null){D=n.date.defaultUnit}return new Date(u(s*w[D]))},convert:function(s,E,D){if(E==null){E=n.date.defaultUnit}if(D==null){D=n.date.defaultUnit}if(n.is("date",s)){s=n.date.stamp(s,E)}return u(s*w[E]/w[D])},midnight:function(s,D){if(D==null){D=n.date.defaultUnit}return n.date.convert(n.date.convert(s,D,"d"),"d",D)},format:function(G,D,H){var F,E,I,s;if(D==null){D=n.date.defaultFormat}if(H==null){H=n.date.defaultUnit}if(n.is("date",G)){G=n.date.stamp(G,H)}F=n.date.unstamp(G,H);for(I=0,s=v.length;I<s;I++){E=v[I];D=D.replace(E,n.padLeft(""+z[E].call(F),E.length,"0"))}return D},parse:function(L,s,M){var E,J,H,I,G,K,D;if(s==null){s=n.date.defaultFormat}if(M==null){M=n.date.defaultUnit}E=new Date(0);for(J=I=0,D=s.length;I<D;J=I+=1){for(G=0,K=A.length;G<K;G++){H=A[G];if(s.indexOf(H,J)===J){try{B[H].call(E,parseInt(L.slice(J,J+H.length),10))}catch(F){throw new Error("Invalid date ('"+L+"') given format mask: "+s+" (failed at position "+J+")")}}}}return n.date.stamp(E,M)},addMilliseconds:p("MS"),addSeconds:p("SS"),addMinutes:p("MM"),addHours:p("HH"),addDays:p("dd"),addMonths:p("mm"),addYears:p("yyyy"),range:function(J,I,s,F,E){var G,H,D;if(s==null){s=1}if(F==null){F="dd"}if(E==null){E=n.date.defaultUnit}G=p(F);D=[J];while((H=D[D.length-1])<I){D.push(G(H,s,E))}return D}}},midnight:function(s){if(s==null){s=n.date.defaultUnit}return this.map(function(){return n.date.midnight(this,s)})},unstamp:function(s){if(s==null){s=n.date.defaultUnit}return this.map(function(){return n.date.unstamp(this,s)})},stamp:function(s){if(s==null){s=n.date.defaultUnit}return this.map(function(){return n.date.stamp(this,s)})},dateFormat:function(s,D){if(s==null){s=n.date.defaultFormat}if(D==null){D=n.date.defaultUnit}return this.map(function(){return n.date.format(this,s,D)})},dateParse:function(s,D){if(s==null){s=n.date.defaultFormat}if(D==null){D=n.date.defaultUnit}return this.map(function(){return n.date.parse(this,s,D)})}}})})(a);(function(n){return n.plugin({provides:"delay",depends:"function"},function(){return{$:{delay:(function(){var o;o=n.extend([],(function(){var p;p=function(q){return function(){if(q.length){return q.shift()()}}};return{add:function(s,u){var q,r,t;s.order=u+n.now;for(q=r=0,t=this.length;r<=t;q=r+=1){if(q===this.length||this[q].order>s.order){this.splice(q,0,s);break}}setTimeout(p(this),u);return this},cancel:function(s){var q,r,t;for(q=r=0,t=this.length;r<t;q=r+=1){if(this[q]===s){this.splice(q,1);break}}return this}}})());return function(q,p){if(n.is("function",p)){o.add(p,q)}return{cancel:function(){return o.cancel(p)}}}})()},delay:function(q,o,p){if(p==null){p=this}n.delay(q,n.bound(p,o));return this}}})})(a);(function(n){if(n.global.document!=null){return n.plugin({depends:"function",provides:"dom"},function(){var q,w,s,u,o,p,t,r,v;n.type.register("nodelist",{match:function(y){return(y!=null)&&n.isType("NodeList",y)},hash:function(z){var y;return n((function(){var C,B,A;A=[];for(C=0,B=x.length;C<B;C++){y=x[C];A.push(n.hash(y))}return A})()).sum()},array:n.identity,string:function(y){return"{Nodelist:["+n(y).select("nodeName").join(",")+"]}"},node:function(y){return n(y).toFragment()}});n.type.register("node",{match:function(y){return(y!=null?y.nodeType:void 0)>0},hash:function(y){return n.checksum(y.nodeName)+n.hash(y.attributes)+n.checksum(y.innerHTML)},string:function(y){return y.toString()},node:n.identity});n.type.register("fragment",{match:function(y){return(y!=null?y.nodeType:void 0)===11},hash:function(z){var y;return n((function(){var C,B,D,A;D=z.childNodes;A=[];for(C=0,B=D.length;C<B;C++){y=D[C];A.push(n.hash(y))}return A})()).sum()},string:function(y){return y.toString()},node:n.identity});n.type.register("html",{match:function(z){var y;return typeof z==="string"&&(y=z.trimLeft())[0]==="<"&&y[y.length-1]===">"},node:function(z){var D,C,y,E,A,B;(A=document.createElement("div")).innerHTML=z;if(E=(D=A.childNodes).length===1){return A.removeChild(D[0])}C=document.createDocumentFragment();for(y=B=0;B<E;y=B+=1){C.appendChild(A.removeChild(D[0]))}return C},array:function(z,A){var y;return n.type.lookup(y=a.HTML.parse(z)).array(y,A)},string:function(y){return"'"+y+"'"},repr:function(y){return'"'+y+'"'}});n.type.extend({unknown:{node:function(){return null}},bling:{node:function(y){return y.toFragment()}},node:{html:function(A){var z,y;z=document.createElement("div");z.appendChild((A=A.cloneNode(true)));y=z.innerHTML;z.removeChild(A);return y}},string:{node:function(y){return n(y).toFragment()},array:function(y,z){return typeof z.querySelectorAll==="function"?z.querySelectorAll(y):void 0}},"function":{node:function(y){return n(y.toString()).toFragment()}}});r=function(y){var z;if(!(y.parentNode!=null)){z=document.createDocumentFragment();z.appendChild(y)}return y};w=function(z,y){return r(z).parentNode.insertBefore(y,z)};q=function(z,y){return r(z).parentNode.insertBefore(y,z.nextSibling)};v=function(y){return n.type.lookup(y).node(y)};u=false;p=false;s=function(y){return function(){return n.global.getComputedStyle(this,null).getPropertyValue(y)}};o=function(y){return function(z){if(z!=null){return this.css(y,z)}else{return this.rect().select(y)}}};t=function(y){return function(){return this.map(function(z){return n((function(){var A;A=[];while(z=z[y]){A.push(z)}return A})())})}};return{$:{HTML:{parse:function(y){return n.type.lookup(y).node(y)},stringify:function(y){return n.type.lookup(y).html(y)},escape:function(z){var y;u||(u=n("<div>&nbsp;</div>").child(0));y=u.zap("data",z).select("parentNode.innerHTML").first();u.zap("data","");return y}}},html:function(y){switch(n.type(y)){case"undefined":case"null":return this.select("innerHTML");case"string":case"html":return this.zap("innerHTML",y);case"bling":return this.html(y.toFragment());case"node":return this.each(function(){var z;this.replaceChild(this.childNodes[0],y);z=[];while(this.childNodes.length>1){z.push(this.removeChild(this.childNodes[1]))}return z})}},append:function(y){y=v(y);return this.each(function(){return this.appendChild(y.cloneNode(true))})},appendTo:function(y){var A,z;A=this.map(function(){return this.cloneNode(true)});z=0;n(y).each(function(){return this.appendChild(A[z++])});return A},prepend:function(y){if(y!=null){y=v(y);this.take(1).each(function(){return w(this.childNodes[0],y)});this.skip(1).each(function(){return w(this.childNodes[0],y.cloneNode(true))})}return this},prependTo:function(y){if(y!=null){n(y).prepend(this)}return this},before:function(y){if(y!=null){y=v(y);this.take(1).each(function(){return w(this,y)});this.skip(1).each(function(){return w(this,y.cloneNode(true))})}return this},after:function(y){if(y!=null){y=v(y);this.take(1).each(function(){return q(this,y)});this.skip(1).each(function(){return q(this,y.cloneNode(true))})}return this},wrap:function(y){y=v(y);if(n.is("fragment",y)){throw new Error("cannot call .wrap() with a fragment as the parent")}return this.each(function(B){var A,z;if((n.is("fragment",B))||!B.parentNode){return y.appendChild(B)}A=B.parentNode;z=document.createElement("dummy");y.appendChild(A.replaceChild(z,B));return A.replaceChild(y,z)})},unwrap:function(){return this.each(function(){if(this.parentNode&&this.parentNode.parentNode){return this.parentNode.parentNode.replaceChild(this,this.parentNode)}else{if(this.parentNode){return this.parentNode.removeChild(this)}}})},replace:function(D){var A,y,z,C,B;D=v(D);A=this.map(function(){return D.cloneNode(true)});for(y=z=0,C=A.length;z<C;y=z+=1){if((B=this[y].parentNode)!=null){B.replaceChild(A[y],this[y])}}return A},attr:function(y,z){switch(z){case void 0:return this.select("getAttribute").call(y,z);case null:return this.select("removeAttribute").call(y,z);default:this.select("setAttribute").call(y,z);return this}},data:function(z,y){return this.attr("data-"+(n.dashize(z)),y)},addClass:function(z){var y;y=function(A){return A!==""};return this.removeClass(z).each(function(){var A;A=this.className.split(" ").filter(y);A.push(z);return this.className=A.join(" ")})},removeClass:function(y){var z;z=function(A){return A!==y};return this.each(function(){var A;A=this.className.split(" ").filter(z).join(" ");if(A.length===0){return this.removeAttribute("class")}})},toggleClass:function(y){var z;z=function(A){return A!==y};return this.each(function(){var C,A,B;A=this.className.split(" ");B=n.not(n.isEmpty);if(A.indexOf(y)>-1){B=n.and(z,B)}else{A.push(y)}C=A.filter(B).join(" ");this.className=C;if(C.length===0){return this.removeAttribute("class")}})},hasClass:function(y){return this.select("className.split").call(" ").select("indexOf").call(y).map(function(z){return z>-1})},text:function(y){if(y!=null){return this.zap("textContent",y)}return this.select("textContent")},val:function(y){if(y!=null){return this.zap("value",y)}return this.select("value")},css:function(C,G){var F,E,y,H,z,B,D,A;if((G!=null)||n.is("object",C)){B=this.select("style.setProperty");if(n.is("object",C)){for(E in C){B.call(E,C[E],"")}}else{if(n.is("string",G)){B.call(C,G,"")}else{if(n.is("array",G)){for(E=D=0,A=y=Math.max(G.length,H=B.len());D<A;E=D+=1){B[E%H](C,G[E%y],"")}}}}return this}else{F=this.map(s(C));z=this.select("style").select(C);return z.weave(F).fold(function(I,J){return I||J})}},defaultCss:function(z,y){var A,C,B;C=this.selector;B="";if(n.is("string",z)){if(n.is("string",y)){B+=""+C+" { "+z+": "+y+" } "}else{throw Error("defaultCss requires a value with a string key")}}else{if(n.is("object",z)){for(A in z+"} "){B+=(""+C+" { ")+(""+A+": "+z[A]+"; ")}}}n("<style></style>").text(B).appendTo("head");return this},rect:function(){return this.select("getBoundingClientRect").call()},width:o("width"),height:o("height"),top:o("top"),left:o("left"),bottom:o("bottom"),right:o("right"),position:function(z,y){switch(true){case !(z!=null):return this.rect();case !(y!=null):return this.css("left",n.px(z));default:return this.css({top:n.px(y),left:n.px(z)})}},scrollToCenter:function(){document.body.scrollTop=this[0].offsetTop-(n.global.innerHeight/2);return this},child:function(y){return this.select("childNodes").map(function(){return this[y<0?y+this.length:y]})},parents:t("parentNode"),prev:t("previousSibling"),next:t("nextSibling"),remove:function(){return this.each(function(){var y;return(y=this.parentNode)!=null?y.removeChild(this):void 0})},find:function(y){return this.filter("*").map(function(){return n(y,this)}).flatten()},clone:function(y){if(y==null){y=true}return this.map(function(){if(n.is("node",this)){return this.cloneNode(y)}})},toFragment:function(){var y;if(this.length>1){y=document.createDocumentFragment();(this.map(v)).map(n.bound(y,y.appendChild));return y}return v(this[0])}}})}})(a);(function(n){return n.plugin({depends:"dom,function,core",provides:"event"},function(){var q,v,o,r,t,p,u,s;q=/,* +/;r=["mousemove","mousedown","mouseup","mouseover","mouseout","blur","focus","load","unload","reset","submit","keyup","keydown","change","abort","cut","copy","paste","selection","drag","drop","orientationchange","touchstart","touchmove","touchend","touchcancel","gesturestart","gestureend","gesturecancel","hashchange"];o=function(w){return function(y){return this.bind(w,y)(n.is("function",y)?void 0:this.trigger(w,y))}};t=function(w,z,y,B,A){return n(z).bind(y,A).each(function(){var C,D;return((C=((D=(this.__alive__||(this.__alive__={})))[w]||(D[w]={})))[y]||(C[y]={}))[B]=A})};s=function(w,y,B,A){var z;z=n(y);return z.each(function(){var D,C,E;D=(this.__alive__||(this.__alive__={}));C=(D[w]||(D[w]={}));E=(C[B]||(C[B]={}));z.unbind(B,E[A]);return delete E[A]})};u=n.once(function(){var w;n(document).trigger("ready").unbind("ready");if(typeof document.removeEventListener==="function"){document.removeEventListener("DOMContentLoaded",u,false)}return typeof(w=n.global).removeEventListener==="function"?w.removeEventListener("load",u,false):void 0});v=n.once(function(){var w;if(typeof document.addEventListener==="function"){document.addEventListener("DOMContentLoaded",u,false)}return typeof(w=n.global).addEventListener==="function"?w.addEventListener("load",u,false):void 0});v();p={bind:function(z,y){var A,w;A=(z||"").split(q);w=function(B){p=y.apply(this,arguments);if(p===false){B.preventAll()}return p};return this.each(function(){var D,E,C,B;B=[];for(E=0,C=A.length;E<C;E++){D=A[E];B.push(this.addEventListener(D,w,false))}return B})},unbind:function(y,w){var z;z=(y||"").split(q);return this.each(function(){var C,D,B,A;A=[];for(D=0,B=z.length;D<B;D++){C=z[D];A.push(this.removeEventListener(C,w,null))}return A})},trigger:function(y,z){var D,A,C,w,E;if(z==null){z={}}z=n.extend({bubbles:true,cancelable:true},z);E=(y||"").split(q);for(C=0,w=E.length;C<w;C++){A=E[C];if(A==="click"||A==="mousemove"||A==="mousedown"||A==="mouseup"||A==="mouseover"||A==="mouseout"){D=document.createEvent("MouseEvents");z=n.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:null},z);D.initMouseEvent(A,z.bubbles,z.cancelable,n.global,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.button,z.relatedTarget)}else{if(A==="blur"||A==="focus"||A==="reset"||A==="submit"||A==="abort"||A==="change"||A==="load"||A==="unload"){D=document.createEvent("UIEvents");D.initUIEvent(A,z.bubbles,z.cancelable,n.global,1)}else{if(A==="touchstart"||A==="touchmove"||A==="touchend"||A==="touchcancel"){D=document.createEvent("TouchEvents");z=n.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},z);D.initTouchEvent(A,z.bubbles,z.cancelable,n.global,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.touches,z.targetTouches,z.changedTouches,z.scale,z.rotation)}else{if(A==="gesturestart"||A==="gestureend"||A==="gesturecancel"){D=document.createEvent("GestureEvents");z=n.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,target:null,scale:1,rotation:0},z);D.initGestureEvent(A,z.bubbles,z.cancelable,n.global,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.target,z.scale,z.rotation)}else{D=document.createEvent("Events");D.initEvent(A,z.bubbles,z.cancelable);try{D=n.extend(D,z)}catch(B){}}}}}if(!D){continue}else{try{this.each(function(){return this.dispatchEvent(D)})}catch(B){n.log("dispatchEvent error:",B)}}}return this},live:function(B,A){var y,z,w;w=this.selector;y=this.context;z=function(C){return n(w,y).intersect(n(C.target).parents().first().union(n(C.target))).each(function(){return A.call(C.target=this,C)})};t(w,y,B,A,z);return this},die:function(y,w){n(this.context).unbind(y,s(this.selector,this.context,y,w));return this},click:function(w){var y;if(w==null){w={}}if((y=this.css("cursor"))==="auto"||y===""){this.css("cursor","pointer")}if(n.is("function",w)){this.bind("click",w)}else{this.trigger("click",w)}return this},ready:function(w){if(u.exhausted){return w.call(this)}return this.bind("ready",w)}};r.forEach(function(w){return p[w]=o(w)});return p})})(a);(function(n){return n.plugin(function(){return{$:{histogram:function(w,r,o){var q,u,y,A,C,p,F,B,z,E,v,t,D,s;if(r==null){r=1}if(o==null){o=80}q=n();A=0;for(v=0,D=w.length;v<D;v++){E=w[v];y=Math.floor(E/r);if((s=q[y])==null){q[y]=0}q[y]+=1;A=Math.max(A,y+1)}q.length=A;C=q.max();q=q.map(function(G){return G||0}).scale(1/C).scale(o);z=q.sum();B="";for(p=t=0;t<A;p=t+=1){u=(p+1)*r;F=(q[p]*100/z).toFixed(0);B+=n.padLeft(F+"%",3)+n.padRight(" < "+(u.toFixed(2)),10)+": "+n.repeat("#",q[p])+"\n"}return B}}}})})(a);(function(n){return n.plugin({depends:"dom",provides:"http"},function(){var o;o=function(q){var p,r;r=JSON.parse(JSON.stringify(q));return((function(){var s;s=[];for(p in r){s.push(""+p+"="+(escape(r[p])))}return s})()).join("&")};n.type.register("http",{match:function(p){return n.isType("XMLHttpRequest",p)},array:function(p){return[p]}});return{$:{http:function(p,q){var r;if(q==null){q={}}r=new XMLHttpRequest();if(n.is("function",q)){q={success:n.bound(r,q)}}q=n.extend({method:"GET",data:null,state:n.identity,success:n.identity,error:n.identity,async:true,asBlob:false,timeout:0,followRedirects:false,withCredentials:false},q);q.state=n.bound(r,q.state);q.success=n.bound(r,q.success);q.error=n.bound(r,q.error);if(q.data&&q.method==="GET"){p+="?"+o(q.data)}else{if(q.data&&q.method==="POST"){q.data=o(q.data)}}r.open(q.method,p,q.async);r=n.extend(r,{asBlob:q.asBlob,timeout:q.timeout,followRedirects:q.followRedirects,withCredentials:q.withCredentials,onreadystatechange:function(){if(typeof q.state==="function"){q.state()}if(r.readyState===4){if(r.status===200){return q.success(r.responseText)}else{return q.error(r.status,r.statusText)}}}});r.send(q.data);return n(r)},post:function(p,q){if(q==null){q={}}if(n.is("function",q)){q={success:q}}q.method="POST";return n.http(p,q)},get:function(p,q){if(q==null){q={}}if(n.is("function",q)){q={success:q}}q.method="GET";return n.http(p,q)}}}})})(a);(function(n){return n.plugin({depends:"dom",provides:"lazy"},function(){var o;o=function(p,q){return n("head").append(n.extend(document.createElement(p),q))};return{$:{script:function(p){return o("script",{src:p})},style:function(p){return o("link",{href:p,rel:"stylesheet"})}}}})})(a);(function(o){var p,n;p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");n=(function(){var u,r,q,t,s,w,v;u=new Array(624);s=0;w=function(z){var A,B,y;s=0;u[0]=z;y=[];for(A=B=1;B<=623;A=++B){y.push(u[A]=4294967295&(1812433253*(u[A-1]^(u[A-1]>>>30))+A))}return y};t=function(){var A,C,B,z;z=[];for(A=B=0;B<=623;A=++B){C=((u[A]&2147483648)>>>31)+(2147483647&u[(A+1)%624]);u[A]=u[(A+397)%624]^(C>>>1);if((C%2)===1){z.push(u[A]=u[A]^2567483615)}else{z.push(void 0)}}return z};r=Math.pow(2,31);q=r*2;v=function(){var z;if(s===0){t()}z=u[s]^(z>>>11)^((z<<7)&&2636928640)^((z<<15)&&4022730752)^(z>>>18);s=(s+1)%624;return(z+r)/q};o.defineProperty(v,"seed",{set:function(y){return w(y)}});v.seed=+new Date();return o.extend(v,{real:function(z,y){var B,A;if(!(z!=null)){B=[0,1],z=B[0],y=B[1]}if(!(y!=null)){A=[0,z],z=A[0],y=A[1]}return(o.random()*(y-z))+z},integer:function(z,y){return Math.floor(o.random.real(z,y))},string:function(y,z){if(z==null){z=""}while(z.length<y){z+=o.random.element(p)}return z},coin:function(y){if(y==null){y=0.5}return o.random()<=y},element:function(y){return y[o.random.integer(0,y.length)]},gaussian:function(A,D){var E,C,B,z,F;if(A==null){A=0.5}if(D==null){D=0.12}while(true){C=o.random();B=1.7156*(o.random()-0.5);z=C-0.449871;F=Math.abs(B)+0.386595;E=(z*z)+F*(0.196*F-0.25472*z);if(!(E>0.27597&&(E>0.27846||(B*B)>(-4*Math.log(C)*C*C)))){break}}return A+D*B/C}})})();return o.plugin({provides:"random"},function(){return{$:{random:n}}})})(a);(function(n){return n.plugin({provides:"sendgrid",depends:"config"},function(){var q,p;try{q=require("nodemailer")}catch(o){return}p=q.createTransport("SMTP",{service:"SendGrid",auth:{user:n.config.get("SENDGRID_USERNAME"),pass:n.config.get("SENDGRID_PASSWORD")}});return{$:{sendMail:function(r,v){var u,t,s;if((u=r.transport)==null){r.transport=p}if((t=r.from)==null){r.from=n.config.get("EMAILS_FROM")}if((s=r.bcc)==null){r.bcc=n.config.get("EMAILS_BCC")}if(n.config.get("SENDGRID_ENABLED","true")==="true"){return q.sendMail(r,v)}else{return v(false)}}}}})})(a);(function(n){n.plugin({provides:"StateMachine"},function(){var o;return{$:{StateMachine:o=(function(){function p(q){this.debug=false;this.reset();this.table=q;Object.defineProperty(this,"modeline",{get:function(){return this.table[this._mode]}});Object.defineProperty(this,"mode",{set:function(r){var s;this._lastMode=this._mode;this._mode=r;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){s=this.modeline.enter.call(this);while(n.is("function",s)){s=s.call(this)}}return r},get:function(){return this._mode}})}p.prototype.reset=function(){this._mode=null;return this._lastMode=null};p.prototype.GO=function(q){return function(){return this.mode=q}};p.GO=function(q){return function(){return this.mode=q}};p.prototype.tick=function(s){var q,r;r=this.modeline;if(!(r!=null)){q=null}else{if(s in r){q=r[s]}else{if("def" in r){q=r.def}}}while(n.is("function",q)){q=q.call(this,s)}return q};p.prototype.run=function(r){var v,s,t,q,u;this.mode=0;for(t=0,q=r.length;t<q;t++){v=r[t];s=this.tick(v)}if(n.is("function",(u=this.modeline)!=null?u.eof:void 0)){s=this.modeline.eof.call(this)}while(n.is("function",s)){s=s.call(this)}this.reset();return this};return p})()}}});return n.plugin({provides:"synth",depends:"StateMachine"},function(){var o;o=(function(r){var p;d(q,r);p={"#":q.GO(2),".":q.GO(3),"[":q.GO(4),'"':q.GO(6),"'":q.GO(7)," ":q.GO(8),",":q.GO(10),"+":q.GO(11),eof:q.GO(13)};q.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},n.extend({def:function(s){return this.tag+=s}},p),n.extend({def:function(s){return this.id+=s}},p),n.extend({enter:function(){if(this.cls.length>0){return this.cls+=" "}},def:function(s){return this.cls+=s}},p),{"=":q.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(s){return this.attr+=s},eof:q.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(s){return this.val+=s},eof:q.GO(12)},{'"':q.GO(8),def:function(s){return this.text+=s},eof:q.GO(12)},{"'":q.GO(8),def:function(s){return this.text+=s},eof:q.GO(12)},{enter:function(){if(this.tag){this.emitNode()}if(this.text){this.emitText()}return this.GO(0)}},{},{enter:function(){this.emitNode();this.cursor=null;return this.GO(0)}},{enter:function(){var s;this.emitNode();this.cursor=(s=this.cursor)!=null?s.parentNode:void 0;return this.GO(0)}},{enter:function(){throw new Error("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag){this.emitNode()}if(this.text){return this.emitText()}}}];function q(){q.__super__.constructor.call(this,q.STATE_TABLE);this.fragment=this.cursor=document.createDocumentFragment()}q.prototype.emitNode=function(){var s,t;if(this.tag){t=document.createElement(this.tag);t.id=this.id||null;t.className=this.cls||null;for(s in this.attrs){t.setAttribute(s,this.attrs[s])}this.cursor.appendChild(t);return this.cursor=t}};q.prototype.emitText=function(){this.cursor.appendChild(n.type.lookup("<html>").node(this.text));return this.text=""};return q})(n.StateMachine);return{$:{synth:function(q){var p;p=new o();p.run(q);if(p.fragment.childNodes.length===1){return n(p.fragment.childNodes[0])}else{return n(p.fragment)}}}}})})(a);(function(p){var o,n;o={};p.plugin(function(){var q,r;q=null;o={};r={register_engine:function(s,t){o[s]=t;if(!(q!=null)){return q=s}},render:function(t,s){if(q in o){return o[q](t,s)}}};r.__defineSetter__("engine",function(s){if(!s in o){throw new Error("invalid template engine: "+s+" not one of "+(Object.Keys(o)))}else{return q=s}});r.__defineGetter__("engine",function(){return q});return{name:"Template",$:{template:r}}});p.template.register_engine("null",(function(){return function(r,q){return r}})());n=function(z,w,r,q,y){var v,u,A,s;if(y==null){y=-1}v=1;if(y<0){y=z.length+1+y}for(u=s=q;q<=y?s<y:s>y;u=q<=y?++s:--s){A=z[u];if(A===r){v+=1}else{if(A===w){v-=1}}if(v===0){return u}}return -1};p.template.register_engine("pythonic",(function(){var s,t,r,q;q=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;s=/%[\(\/]/;t=function(F){var C,w,A,z,E,B,v,u,D,y;C=F.split(s);v=C.length;D=[C[0]];z=1;for(A=y=1;1<=v?y<v:y>v;A=1<=v?++y:--y){w=n(C[A],")","(",0,-1);if(w===-1){return"Template syntax error: unmatched '%(' starting at: "+(C[A].substring(0,15))}E=C[A].substring(0,w);u=C[A].substring(w);B=q.exec(u);if(B===null){return"Template syntax error: invalid type specifier starting at '"+u+"'"}u=B[4];D[z++]=E;D[z++]=B[1]|0;D[z++]=B[2]|0;D[z++]=B[3];D[z++]=u}return D};t.cache={};r=function(K,J){var u,C,F,E,I,y,w,A,v,G,H,D,B,z;u=t.cache[K];if(!(u!=null)){u=t.cache[K]=t(K)}w=[u[0]];E=1;y=u.length;for(F=D=1,B=y-5;D<=B;F=D+=5){z=u.slice(F,(F+4)+1||9000000000),I=z[0],A=z[1],C=z[2],G=z[3],v=z[4];H=J[I];if(!(H!=null)){H="missing value: "+I}switch(G){case"d":w[E++]=""+parseInt(H,10);break;case"f":w[E++]=parseFloat(H).toFixed(C);break;case"s":w[E++]=""+H;break;default:w[E++]=""+H}if(A>0){w[E]=String.PadLeft(w[E],A)}w[E++]=v}return w.join("")};return r})());return p.template.register_engine("js-eval",(function(){var q;q=(function(s){d(r,s);function r(){return r.__super__.constructor.apply(this,arguments)}r.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return r})(p.StateMachine);return function(s,r){return s}})())})(a);(function(n){return n.plugin(function(){var q,p,o;o=function(w){var s,t,v,r,u;t=w.indexOf(":");if(t>0){r=parseInt(w.slice(0,t),10);v=w.slice(t+1,t+1+r);u=w[t+1+r];s=w.slice(t+r+2);v=(function(){switch(u){case"#":return Number(v);case"'":return String(v);case"!":return v==="true";case"~":return null;case"]":return q(v);case"}":return p(v)}})();return[v,s]}return void 0};q=function(r){var t,s,u;t=[];while(r.length>0){u=o(r),s=u[0],r=u[1];t.push(s)}return t};p=function(r){var u,s,t,w,v;u={};while(r.length>0){w=o(r),s=w[0],r=w[1];v=o(r),t=v[0],r=v[1];u[s]=t}return u};return{$:{TNET:{stringify:function(r){var t,s,v,u;u=(function(){switch(n.type(r)){case"number":return[String(r),"#"];case"string":return[r,"'"];case"function":return[String(r),"'"];case"boolean":return[String(!!r),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var z,y,w;w=[];for(z=0,y=r.length;z<y;z++){v=r[z];w.push(n.TNET.stringify(v))}return w})()).join(""),"]"];case"object":return[((function(){var w;w=[];for(v in r){w.push(n.TNET.stringify(v)+n.TNET.stringify(r[v]))}return w})()).join(""),"}"]}})(),t=u[0],s=u[1];return(t.length|0)+":"+t+s},parse:function(r){var s;return(s=o(r))!=null?s[0]:void 0}}}}})})(a);(function(n){return n.plugin({provides:"trace",depends:"function,type"},function(){n.type.extend({unknown:{trace:n.identity},object:{trace:function(s,u,r){var q,t,p,v;v=Object.keys(u);for(t=0,p=v.length;t<p;t++){q=v[t];u[q]=n.trace(u[q],""+s+"."+q,r)}return u}},array:{trace:function(q,t,p){var r,s,u;for(r=s=0,u=t.length;s<u;r=s+=1){t[r]=n.trace(t[r],""+q+"["+r+"]",p)}return t}},"function":{trace:function(p,s,o){var q;p||(p=s.name);q=function(){var r;r=1<=arguments.length?i.call(arguments,0):[];o(""+(this.name||n.type(this))+"."+p+"("+(n(r).map(n.toRepr).join(","))+")");return s.apply(this,r)};q.toString=function(){return"{Trace '"+p+"' of "+(s.toString())};return q}}});return{$:{trace:function(q,r,p){var s;if(!n.is("string",q)){s=[r,q],p=s[0],r=s[1]}p||(p=n.log);q||(q="");return n.type.lookup(r).trace(q,r,p)}}}})})(a);(function(n){return n.plugin({depends:"dom"},function(){var s,o,q,w,t,r,v,u,p;s=", ";q={slow:700,medium:500,normal:300,fast:100,instant:0,now:0};o=/(?:scale(?:3d)*|translate(?:[XYZ]|3d)*|rotate(?:[XYZ]|3d)*)/;p=30;w=document.createElement("div").style;t="transform";v="transition-property";r="transition-duration";u="transition-timing-function";if("WebkitTransform" in w){t="-webkit-transform";v="-webkit-transition-property";r="-webkit-transition-duration";u="-webkit-transition-timing-function"}else{if("MozTransform" in w){t="-moz-transform";v="-moz-transition-property";r="-moz-transition-duration";u="-moz-transition-timing-function"}else{if("OTransform" in w){t="-o-transform";v="-o-transition-property";r="-o-transition-duration";u="-o-transition-timing-function"}}}return{$:{duration:function(y){var z;z=q[y];if(z!=null){return z}return parseFloat(y)}},transform:function(D,y,C,F){var B,z,A,G,E,H;if(n.is("function",y)){F=y;y=C=null}else{if(n.is("function",C)){F=C;C=null}}if(y==null){y="normal"}C||(C="ease");z=n.duration(y)+"ms";E=[];H="";B={};for(A in D){if(o.test(A)){G=D[A];if(G.join){G=n(G).px().join(s)}else{if(G.toString){G=G.toString()}}H+=" "+A+"("+G+")"}else{B[A]=D[A]}}for(A in B){E.push(A)}if(H){E.push(t)}B[v]=E.join(s);B[r]=E.map(function(){return z}).join(s);B[u]=E.map(function(){return C}).join(s);if(H){B[t]=H}this.css(B);return this.delay(z,F)},hide:function(y){return this.each(function(){if(this.style){this._display="";if(this.style.display===!"none"){this._display=this.syle.display}return this.style.display="none"}}).trigger("hide".delay(p,y))},show:function(y){return this.each(function(){if(this.style){this.style.display=this._display;return delete this._display}}).trigger("show".delay(p,y))},toggle:function(y){return this.weave(this.css("display")).fold(function(A,z){if(A==="none"){z.style.display=z._display||"";delete z._display;n(z).trigger("show")}else{z._display=A;z.style.display="none";n(z).trigger("hide")}return z}).delay(p,y)},fadeIn:function(y,z){return this.css("opacity","0.0").show(function(){return this.transform({opacity:"1.0",translate3d:[0,0,0]},y,z)})},fadeOut:function(A,C,z,B){if(z==null){z=0}if(B==null){B=0}return this.transform({opacity:"0.0",translate3d:[z,B,0]},A,function(){return this.hide(C)})},fadeLeft:function(y,z){return this.fadeOut(y,z,"-"+this.width().first(),0)},fadeRight:function(y,z){return this.fadeOut(y,z,this.width().first(),0)},fadeUp:function(y,z){return this.fadeOut(y,z,0,"-"+this.height().first())},fadeDown:function(y,z){return this.fadeOut(y,z,0,this.height().first())}}})})(a);(function(n){return n.plugin({provides:"unittest",depends:"core,function"},function(){var t,q,r,p,s,o;s=p=t=0;q=[];r=function(C,w,A){var v,B,u,z;if(!n.is("function",A)){return}z=function(D){return n.log(""+C+": "+w+"... "+D)};u=w.toLowerCase().indexOf("fail")!==-1;v=n.once(function(D){s--;if(!!D!==u){z("fail: "+D);t++;return q.push(w)}else{z("pass");p++;return n.provide(w)}});B=function(D){try{return A(D)}catch(E){return D(E)}finally{if(w.toLowerCase().indexOf("async")===-1){D()}}};s++;try{return B(v)}catch(y){return v(y)}};o=n.once(function(){n.log("Passed: "+p+" Failed: "+t+" ["+q+"]");if(t>0){try{return process.exit(t)}catch(u){}}});return{$:{approx:function(v,u,w){if(w==null){w=0.1}return Math.abs(v-u)<w},assert:function(v,u){if(u==null){u="no message"}if(!v){throw new Error("Assertion failed: "+u)}},assertEqual:function(v,u,w){if(v!==u){throw Error(""+(w||"")+" ("+(v!=null?v.toString():void 0)+") should equal ("+(u!=null?u.toString():void 0)+")")}},assertArrayEqual:function(w,u,y){var z,B,C,v;v=[];for(z=B=0,C=w.length;B<C;z=B+=1){try{v.push(n.assertEqual(w[z],u[z],y))}catch(A){throw Error(""+(y||"")+" "+(w!=null?w.toString():void 0)+" should equal "+(u!=null?u.toString():void 0))}}return v},testGroup:function(z,y){var A,w,v,u;w=setInterval((function(){if(s===0){clearInterval(w);return o()}}),50);u=[];for(v in y){A=y[v];u.push(r(z,v,A))}return u}},assertEqual:function(){var u,v,w,y,A,z=this;v=1<=arguments.length?i.call(arguments,0):[];if(v.length>1){v=v.map(function(B){if(n.is("function",B)){return B.call(z,z)}else{return B}});u=v[0];for(w=y=1,A=v.length;1<=A?y<A:y>A;w=1<=A?++y:--y){n.assertEqual(u,v[w])}}return this}}})})(a)}).call(this);
>>>>>>> f68c123280c09a8f240afe637a2e5d4a64974601
