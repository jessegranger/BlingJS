(function(){var a,b,h,f,c,d,i,e,g=[].slice,j=[].indexOf||function(n){for(var m=0,k=this.length;m<k;m++){if(m in this&&this[m]===n){return m}}return -1};d=function(){var k;k=1<=arguments.length?g.call(arguments,0):[];try{return console.log.apply(console,k)}catch(l){}return alert(k.join(", "))};if((e=Object.keys)==null){Object.keys=function(n){var m,l;l=[];for(m in n){l.push(m)}return l}}h=function(o,m){var q,p,r,n,l;if(!m){return o}l=Object.keys(m);for(r=0,n=l.length;r<n;r++){q=l[r];p=m[q];if(p!=null){o[q]=p}}return o};b=function(m,k,l){return Object.defineProperty(m,k,h({configurable:true,enumerable:true},l))};c=function(k,l){if(!(l!=null)){return k===l||k==="null"||k==="undefined"}else{return l.constructor===k||l.constructor.name===k||Object.prototype.toString.apply(l)===("[object "+k+"]")||c(k,l.__proto__)}};f=function(k,l){if(typeof k==="function"){l.constructor=k;k=k.prototype}l.__proto__=k;return l};i=(function(){var o,l,p,k,n,m;l={};o={name:"unknown",match:function(q){return true}};k=[];n=function(q,r){if(!(q in l)){k.unshift(q)}return l[r.name=q]=o!==r?f(o,r):r};m=function(t,u){var s,q,r;if(typeof t==="string"){if((q=l[t])==null){l[t]=n(t,{})}return l[t]=h(l[t],u)}else{if(typeof t==="object"){r=[];for(s in t){r.push(m(s,t[s]))}return r}}};p=function(u){var s,t,r,q;for(t=0,r=k.length;t<r;t++){s=k[t];if((q=l[s])!=null?q.match.call(u,u):void 0){return l[s]}}};n("unknown",o);n("object",{match:function(){return typeof this==="object"}});n("error",{match:function(){return c("Error",this)}});n("regexp",{match:function(){return c("RegExp",this)}});n("string",{match:function(){return typeof this==="string"||c(String,this)}});n("number",{match:function(){return c(Number,this)}});n("bool",{match:function(){var q;return typeof this==="boolean"||((q=String(this))==="true"||q==="false")}});n("array",{match:function(){return(typeof Array.isArray==="function"?Array.isArray(this):void 0)||c(Array,this)}});n("function",{match:function(){return typeof this==="function"}});n("global",{match:function(){return typeof this==="object"&&"setInterval" in this}});n("undefined",{match:function(q){return q===void 0}});n("null",{match:function(q){return q===null}});return h((function(q){return p(q).name}),{register:n,lookup:p,extend:m,is:function(r,s){var q;return(q=l[r])!=null?q.match.call(s,s):void 0}})})();a=(function(){var l,m,k,n;l=typeof document!=="undefined"&&document!==null?document:{};function o(p,q){if(q==null){q=l}return f(o,h(i.lookup(p).array(p,q),{selector:p,context:q}))}o.plugin=function(t,r){var q,s,u=this;if(!(r!=null)){r=t;t={}}if("depends" in t){return this.depends(t.depends,function(){return u.plugin({provides:t.provides},r)})}try{if((s=r!=null?r.call(this,this):void 0)){h(this,s!=null?s.$:void 0);["$","name"].forEach(function(v){return delete s[v]});h(this.prototype,s);for(q in s){this[q]||(this[q]=function(){var v;v=1<=arguments.length?g.call(arguments,0):[];return u.prototype[q].apply($(v[0]),v.slice(1))})}if(t.provides!=null){this.provide(t.provides)}}}catch(p){d("failed to load plugin: "+this.name+" '"+p.message+"'");throw p}return this};n=[];m={};k=function(p){return((typeof p)==="string"?p.split(","):p).filter(function(q){return !(q in m)})};o.depends=function(p,q){if((p=k(p)).length===0){q()}else{n.push(function(s){var r;return((r=p.indexOf(s))>-1?p.splice(r,1):void 0)&&p.length===0&&q})}return q};o.provide=function(s){var v,r,t,u,q,p;console.log("provide("+s+")");p=k(s);for(u=0,q=p.length;u<q;u++){t=p[u];m[t]=r=0;while(r<n.length){if((v=n[r](t))){n.splice(r,1);v()}else{r++}}}return null};o.provides=function(p,q){return function(){var s,t;s=1<=arguments.length?g.call(arguments,0):[];t=q.apply(null,s);o.provide(p);return t}};i.extend({unknown:{array:function(p){return[p]}},"null":{array:function(p){return[]}},undefined:{array:function(p){return[]}},array:{array:function(p){return p}},number:{array:function(p){return o.extend(new Array(p),{length:0})}}});i.register("bling",{match:function(p){return c(o,p)},array:function(p){return p},hash:function(p){return p.map(o.hash).sum()},string:function(p){return o.symbol+"(["+p.map(o.toString).join(", ")+"])"}});return o})();a.prototype=[];(function(k){k.plugin({provides:"type"},function(){return{$:{inherit:f,extend:h,isType:c,type:i,is:i.is,isSimple:function(m){var l;return(l=i(m))==="string"||l==="number"||l==="bool"},isEmpty:function(l){return l===""||l===null||l===(void 0)}}}});k.plugin({provides:"symbol"},function(){var l,m,n;n=null;l={};(m=typeof window!=="undefined"&&window!==null?window:global).Bling=a;b(k,"symbol",{set:function(o){m[n]=l[n];l[n=o]=m[o];return m[o]=a},get:function(){return n}});return{$:{symbol:"$"}}});k.plugin(function(){var p,n,o,m,l;(n=String.prototype).trimLeft||(n.trimLeft=function(){return this.replace(/^\s+/,"")});(o=String.prototype).split||(o.split=function(s){var q,t,r;q=[];t=0;while((r=this.indexOf(s,t))>-1){q.push(this.substring(t,r));t=r+1}return q});(m=String.prototype).lastIndexOf||(m.lastIndexOf=function(t,u,r){var q;if(r==null){r=-1}q=-1;while((r=t.indexOf(u,r+1))>-1){q=r}return q});(l=Array.prototype).join||(l.join=function(q){var t,r;if(q==null){q=""}t=this.length;if(t===0){return""}r=this[t-1];while(--t>0){r=this[t-1]+q+r}return r});if(typeof Event!=="undefined"&&Event!==null){Event.prototype.preventAll=function(){this.preventDefault();this.stopPropagation();return this.cancelBubble=true}}if(typeof Element!=="undefined"&&Element!==null){Element.prototype.matchesSelector=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.matchesSelector;if(Element.prototype.cloneNode.length===0){p=Element.prototype.cloneNode;Element.prototype.cloneNode=function(s){var t,v,u,r,q;if(s==null){s=false}v=p.call(this);if(s){q=this.childNodes;for(u=0,r=q.length;u<r;u++){t=q[u];v.appendChild(t.cloneNode(true))}}return v}}}return{}});k.plugin({depends:"function",provides:"delay"},function(){return{$:{delay:(function(){var l;l=k.extend([],(function(){var m;m=function(){if(this.length){return this.shift()()}};return{add:function(r,s){var p,q,o;r.order=s+k.now;for(p=q=0,o=this.length;0<=o?q<o:q>o;p=0<=o?++q:--q){if(this[p].order>r.order){this.splice(p,0,r);break}}setTimeout(m,s);return this},cancel:function(q){var o,p,n;for(o=p=0,n=this.length;0<=n?p<n:p>n;o=0<=n?++p:--p){if(this[o]===q){this.splice(o,1);break}}return this}}})());return function(o,m){if(k.is("function",m)){l.add(m,o)}return{cancel:function(){return l.cancel(m)}}}})()},delay:function(o,l,m){if(m==null){m=this}return k.delay(o,k.bound(m,l))}}});k.plugin({provides:"core"},function(){var l;b(k,"now",{get:function(){return +(new Date)}});l=function(m,n){while(m<0){m+=n.length}return Math.min(m,n.length)};return{$:{log:d,assert:function(o,n){if(n==null){n=""}if(!o){throw new Error("assertion failed: "+n)}},coalesce:function(){var m;m=1<=arguments.length?g.call(arguments,0):[];return k(m).coalesce()}},eq:function(m){return k([this[l(m,this)]])},each:function(p){var n,o,m;for(o=0,m=this.length;o<m;o++){n=this[o];p.call(n,n)}return this},map:function(n){var m;return k((function(){var q,p,o;o=[];for(q=0,p=this.length;q<p;q++){m=this[q];o.push(n.call(m,m))}return o}).call(this))},reduce:function(r,o){var p,m,q,n;p=this;if(!(o!=null)){o=this[0];p=this.skip(1)}for(q=0,n=p.length;q<n;q++){m=p[q];o=r.call(m,o,m)}return o},union:function(n,q){var r,m,t,s,p,o;if(q==null){q=true}r=k();for(t=0,p=this.length;t<p;t++){m=this[t];if(!r.contains(m,q)){r.push(m)}}for(s=0,o=n.length;s<o;s++){m=n[s];if(!r.contains(m,q)){r.push(m)}}return r},distinct:function(m){if(m==null){m=true}return this.union(this,m)},intersect:function(n){var m;return k((function(){var q,p,o;o=[];for(q=0,p=this.length;q<p;q++){m=this[q];if(j.call(n,m)>=0){o.push(m)}}return o}).call(this))},contains:function(o,m){var n;if(m==null){m=true}return((function(){var r,q,p;p=[];for(r=0,q=this.length;r<q;r++){n=this[r];p.push((m&&n===o)||(!m&&n===o))}return p}).call(this)).reduce((function(q,p){return q||p}),false)},count:function(o,m){var n;if(m==null){m=true}return k((function(){var r,q,p;p=[];for(r=0,q=this.length;r<q;r++){n=this[r];if((o===void 0)||(m&&n===o)||(!m&&n===o)){p.push(1)}}return p}).call(this)).sum()},coalesce:function(){var o,p,n,m;for(p=0,n=this.length;p<n;p++){o=this[p];if((m=k.type(o))==="array"||m==="bling"){o=k(o).coalesce()}if(o!=null){return o}}return null},swap:function(o,n){var m;o=l(o,this);n=l(n,this);if(o!==n){m=[this[n],this[o]],this[o]=m[0],this[n]=m[1]}return this},shuffle:function(){var m;m=this.length-1;while(m>=0){this.swap(--m,Math.floor(Math.random()*m))}return this},select:(function(){var n,m;n=function(o){return function(){var p;if(k.is("function",p=this[o])){return k.bound(this,p)}else{return p}}};return m=function(q){var o;if((o=q.indexOf("."))>-1){return this.select(q.substr(0,o)).select(q.substr(o+1))}else{return this.map(n(q))}}})(),or:function(n){var o,p,m;for(o=p=0,m=this.length;0<=m?p<m:p>m;o=0<=m?++p:--p){this[o]||(this[o]=n)}return this},zap:function(r,m){var q,o,n;o=r.lastIndexOf(".");if(o>0){q=r.substr(0,o);n=r.substr(o+1);this.select(q).zap(n,m);return this}switch(k.type(m)){case"array":case"bling":this.each(function(){return this[r]=m[++o%m.length]});break;case"function":this.zap(r,this.select(r).map(m));break;default:this.each(function(){return this[r]=m})}return this},take:function(p){var m,o;if(p==null){p=1}m=Math.min(p,this.length);return k((function(){var q,n;n=[];for(o=q=0;0<=m?q<m:q>m;o=0<=m?++q:--q){n.push(this[o])}return n}).call(this))},skip:function(p){var m,o;if(p==null){p=0}o=Math.max(0,p|0);return k((function(){var r,n,q;q=[];for(m=r=o,n=this.length;o<=n?r<n:r>n;m=o<=n?++r:--r){q.push(this[m])}return q}).call(this))},first:function(m){if(m==null){m=1}if(m===1){return this[0]}else{return this.take(m)}},last:function(m){if(m==null){m=1}if(m===1){return this[this.length-1]}else{return this.skip(this.length-m)}},slice:function(o,m){var n;if(o==null){o=0}if(m==null){m=this.length}o=l(o,this);m=l(m,this);return k((function(){var q,p;p=[];for(n=q=o;o<=m?q<m:q>m;n=o<=m?++q:--q){p.push(this[n])}return p}).call(this))},extend:function(m){var o,p,n;for(p=0,n=m.length;p<n;p++){o=m[p];this.push(o)}return this},push:function(m){Array.prototype.push.call(this,m);return this},filter:function(n){var m;m=(function(){switch(k.type(n)){case"string":return function(o){return o.matchesSelector(n)};case"regexp":return function(o){return n.test(o)};case"function":return n;default:throw new Error("unsupported type passed to filter: "+(k.type(n)))}})();return k(Array.prototype.filter.call(this,m))},matches:function(m){return this.select("matchesSelector").call(m)},querySelectorAll:function(m){return this.filter("*").reduce(function(n,o){return n.extend(o.querySelectorAll(m))},k())},weave:function(n){var s,o,q,p,m,r;s=k();for(o=q=m=this.length-1;m<=0?q<=0:q>=0;o=m<=0?++q:--q){s[(o*2)+1]=this[o]}for(o=p=0,r=n.length;0<=r?p<r:p>r;o=0<=r?++p:--p){s[o*2]=n[o]}return s},fold:function(p){var m,o,q;q=this.length;m=k((function(){var s,n,r;r=[];for(o=s=0,n=q-1;s<n;o=s+=2){r.push(p.call(this,this[o],this[o+1]))}return r}).call(this));if((q%2)===1){m.push(p.call(this,this[q-1],void 0))}return m},flatten:function(){var m,q,p,s,r,o,n;m=k();for(s=0,o=this.length;s<o;s++){q=this[s];for(r=0,n=q.length;r<n;r++){p=q[r];m.push(p)}}return m},call:function(){return this.apply(null,arguments)},apply:function(n,m){return this.map(function(){if(k.is("function",this)){return this.apply(n,m)}else{return this}})},log:function(m){if(m){k.log(m,this,this.length+" items")}else{k.log(this,this.length+" items")}return this},toArray:function(){this.__proto__=Array.prototype;return this}}});k.plugin({provides:"math"},function(){return{$:{range:function(o,l,n){var m;if(n==null){n=1}if(l<o&&n>0){n*=-1}return k((function(){var r,p,q;q=[];for(m=r=0,p=Math.ceil((l-o)/n);0<=p?r<p:r>p;m=0<=p?++r:--r){q.push(o+(m*n))}return q})())},zeros:function(m){var l;return k((function(){var o,n;n=[];for(l=o=0;0<=m?o<m:o>m;l=0<=m?++o:--o){n.push(0)}return n})())},ones:function(m){var l;return k((function(){var o,n;n=[];for(l=o=0;0<=m?o<m:o>m;l=0<=m?++o:--o){n.push(1)}return n})())}},floats:function(){return this.map(parseFloat)},ints:function(){return this.map(function(){return parseInt(this,10)})},px:function(l){return this.ints().map(function(){return k.px(this,l)})},min:function(){return this.reduce(function(l){return Math.min(this,l)})},max:function(){return this.reduce(function(l){return Math.max(this,l)})},mean:function(){return this.sum()/this.length},sum:function(){return this.reduce(function(l){return l+this})},squares:function(){return this.map(function(){return this*this})},magnitude:function(){return Math.sqrt(this.floats().squares().sum())},scale:function(l){return this.map(function(){return l*this})},add:function(m){var l;switch(k.type(m)){case"number":return this.map(function(){return m+this});case"bling":case"array":return k((function(){var p,n,o;o=[];for(l=p=0,n=Math.min(this.length,m.length)-1;0<=n?p<n:p>n;l=0<=n?++p:--p){o.push(this[l]+m[l])}return o}).call(this))}},normalize:function(){return this.scale(1/this.magnitude())}}});k.plugin({depends:"function",provides:"string"},function(){k.type.extend({unknown:{string:function(m){var l;return(l=typeof m.toString==="function"?m.toString():void 0)!=null?l:String(m)}},"null":{string:function(){return"null"}},undefined:{string:function(){return"undefined"}},string:{string:k.identity},array:{string:function(m){var l;return"["+((function(){var p,o,n;n=[];for(p=0,o=m.length;p<o;p++){l=m[p];n.push(k.toString(l))}return n})()).join(",")+"]"}},object:{string:function(n){var m,l;return"{"+((function(){var q,p,o;o=[];for(l=q=0,p=n.length;q<p;l=++q){m=n[l];o.push(""+m+":"+(k.toString(l)))}return o})()).join(", ")+"}"}},number:{string:function(l){switch(true){case l.precision!=null:return l.toPrecision(l.precision);case l.fixed!=null:return l.toFixed(l.fixed);default:return String(l)}}}});return{$:{toString:function(l){return k.type.lookup(l).string(l)},px:function(l,m){if(m==null){m=0}return(l!=null)&&(parseInt(l,10)+(m|0))+"px"},capitalize:function(l){return(l.split(" ").map(function(m){return m[0].toUpperCase()+m.substring(1).toLowerCase()})).join(" ")},dashize:function(n){var q,o,m,p,l;m="";for(o=p=0,l=(n!=null?n.length:void 0)|0;0<=l?p<l:p>l;o=0<=l?++p:--p){q=n.charCodeAt(o);if((91>q&&q>64)){q+=32;m+="-"}m+=String.fromCharCode(q)}return m},camelize:function(l){var m;l.split("-");while((m=l!=null?l.indexOf("-"):void 0)>-1){l=k.stringSplice(l,m,m+2,l[m+1].toUpperCase())}return l},padLeft:function(l,o,m){if(m==null){m=" "}while(l.length<o){l=m+l}return l},padRight:function(l,o,m){if(m==null){m=" "}while(l.length<o){l=l+m}return l},stringCount:function(p,l,o,q){var m;if(o==null){o=0}if(q==null){q=0}if((m=p.indexOf(l,o))>o-1){return k.count(p,l,m+1,q+1)}else{return q}},stringSplice:function(p,o,m,t){var l,r,q;r=p.length;l=m;if(l<0){l+=r}q=o;if(q<0){q+=r}return p.substring(0,q)+t+p.substring(l)},checksum:function(p){var n,m,o,q,l;n=1;m=0;for(o=q=0,l=p.length;0<=l?q<l:q>l;o=0<=l?++q:--q){n=(n+p.charCodeAt(o))%65521;m=(m+n)%65521}return(m<<16)|n},stringBuilder:function(){var l,m=this;if(k.is("window",this)){return new k.stringBuilder()}l=[];this.length=0;this.append=function(n){l.push(n);return m.length+=(n!=null?n.toString().length:void 0)|0};this.prepend=function(n){l.splice(0,0,n);return m.length+=(n!=null?n.toString().length:void 0)|0};this.clear=function(){var n;n=m.toString();l=[];m.length=0;return n};this.toString=function(){return l.join("")};return this}},toString:function(){return k.toString(this)}}});k.plugin({provides:"function",depends:"hash"},function(){return{$:{identity:function(l){return l},not:function(l){return function(){var m;m=1<=arguments.length?g.call(arguments,0):[];return !l.apply(this,m)}},compose:function(m,l){return function(n){var o;return m.call(o,(o=l.call(n,n)))}},and:function(m,l){return function(n){return l.call(n,n)&&m.call(n,n)}},once:function(l,m){if(m==null){m=1}l.n=m;return function(){var n;n=1<=arguments.length?g.call(arguments,0):[];if(l.n-->0){return l.apply(this,n)}}},bound:function(m,o,l){var n;if(l==null){l=[]}if(k.is("function",o.bind)){l.splice(0,0,m);n=o.bind.apply(o,l)}else{n=function(){var p;p=1<=arguments.length?g.call(arguments,0):[];return o.apply(m,l(l.length?void 0:p))}}return k.extend(n,{toString:function(){return"bound-method of "+m+"."+o.name}})},memoize:function(m){var l;l={};return function(){var p,o,n;p=1<=arguments.length?g.call(arguments,0):[];return(n=l[o=k.hash(p)])!=null?n:l[o]=m.apply(this,p)}}}}});k.plugin({provides:"trace",depends:"function,type"},function(){k.type.extend({unknown:{trace:k.identity},object:{trace:function(s,q,p){var n,r,m,l;l=Object.keys(s);for(r=0,m=l.length;r<m;r++){n=l[r];s[n]=k.trace(s[n],""+q+"."+n,p)}return s}},array:{trace:function(r,n,m){var p,q,l;for(p=q=0,l=r.length;0<=l?q<l:q>l;p=0<=l?++q:--q){r[p]=k.trace(r[p],""+n+"["+p+"]",m)}return r}},"function":{trace:function(o,m,l){var n;n=function(){var p;p=1<=arguments.length?g.call(arguments,0):[];l(""+(this.name||k.type(this))+"."+(m||o.name)+"(",p,")");return o.apply(this,p)};l("Trace: "+(m||o.name)+" created.");n.toString=o.toString;return n}}});return{$:{trace:function(n,m,l){return k.type.lookup(n).trace(n,m,l)}},trace:function(m,l){return this.map(function(){return k.trace(this,m,l)})}}});k.plugin({provides:"hash",depends:"type"},function(){k.type.extend({unknown:{hash:function(l){return k.checksum(k.toString(l))}},object:{hash:function(m){var l;return((function(){var n;n=[];for(l in m){n.push(k.hash(m[l]))}return n})())+k.hash(Object.keys(m))}},array:{hash:function(m){var l;return((function(){var p,o,n;n=[];for(p=0,o=x.length;p<o;p++){l=x[p];n.push(k.hash(l))}return n})()).reduce(function(o,n){return o+n})}},bool:{hash:function(l){return parseInt(l?1:void 0)}}});return{$:{hash:function(l){return k.type.lookup(l).hash(l)}},hash:function(){return k.hash(this)}}});k.plugin({provides:"pubsub"},function(){var m,l,o,n;o={};m=function(){var r,u,t,s,q,p;u=arguments[0],r=2<=arguments.length?g.call(arguments,1):[];p=(o[u]||(o[u]=[]));for(s=0,q=p.length;s<q;s++){t=p[s];t.apply(null,r)}return this};l=function(q,p){(o[q]||(o[q]=[])).push(p);return p};n=function(s,r){var p,q;if(!(r!=null)){return o[s]=[]}else{p=(o[s]||(o[s]=[]));if((q=p.indexOf(r))>-1){return p.splice(q,q)}}};return{$:{publish:m,subscribe:l,unsubscribe:n}}});k.plugin({provides:"throttle",depends:"core"},function(){return{$:{throttle:function(m,o,l){if(o==null){o=250}if(l==null){l=0}return function(){var n,p;n=1<=arguments.length?g.call(arguments,0):[];p=k.now-l;if(p>o){l+=p;return m.apply(this,n)}return null}},debounce:function(m,o,l){if(o==null){o=250}if(l==null){l=0}return function(){var n,p;n=1<=arguments.length?g.call(arguments,0):[];l+=(p=k.now-l);return m.apply(this,n(p>o?void 0:null))}}}}});k.plugin({provides:"EventEmitter"},function(){var l;return{$:{EventEmitter:l=(function(){function m(){this.__event={}}m.prototype.addListener=function(p,o){var n;((n=this.__event)[p]||(n[p]=[])).push(o);return this.emit("newListener",p,o)};m.prototype.on=function(o,n){return this.addListener(o,n)};m.prototype.once=function(p,n){var o;return this.addListener(p,(o=function(){var q;q=1<=arguments.length?g.call(arguments,0):[];this.removeListener(o);return n.apply(null,q)}))};m.prototype.removeListener=function(q,p){var n,o;if((n=((o=this.__event)[q]||(o[q]=[])).indexOf(p))>-1){return this.__event[q].splice(n,1)}};m.prototype.removeAllListeners=function(n){return this.__event[n]=[]};m.prototype.setMaxListeners=function(o){};m.prototype.listeners=function(n){return this.__event[n]};m.prototype.emit=function(){var p,t,s,q,r,o,n;t=arguments[0],p=2<=arguments.length?g.call(arguments,1):[];n=((q=this.__event)[t]||(q[t]=[]));for(r=0,o=n.length;r<o;r++){s=n[r];s.apply(this,p)}return null};return m})()}}});if((typeof window!=="undefined"&&window!==null?window:global).document!=null){k.plugin({depends:"function",provides:"dom"},function(){var r,o,n,m,p,q,l;k.type.register("nodelist",{match:function(s){return(s!=null)&&k.isType("NodeList",s)},hash:function(t){var s;return k((function(){var w,v,u;u=[];for(w=0,v=x.length;w<v;w++){s=x[w];u.push(k.hash(s))}return u})()).sum()},array:k.identity,string:function(s){return"{nodelist:"+k(s).select("nodeName").join(",")+"}"},node:function(s){return k(s).toFragment()}});k.type.register("node",{match:function(s){return(s!=null?s.nodeType:void 0)>0},hash:function(s){return k.checksum(s.nodeName)+k.hash(s.attributes)+k.checksum(s.innerHTML)},string:function(s){return s.toString()},node:k.identity});k.type.register("fragment",{match:function(s){return(s!=null?s.nodeType:void 0)===11},hash:function(t){var s;return k((function(){var y,w,u,v;u=t.childNodes;v=[];for(y=0,w=u.length;y<w;y++){s=u[y];v.push(k.hash(s))}return v})()).sum()},string:function(s){return s.toString()},node:k.identity});k.type.register("html",{match:function(u){var t;return typeof u==="string"&&(t=u.trimLeft())[0]==="<"&&t[t.length-1]===">"},node:function(t){var s;return k.type.lookup(s=a.HTML.parse(t)).node(s)},array:function(t,u){var s;return k.type.lookup(s=a.HTML.parse(t)).array(s,u)}});k.type.extend({unknown:{node:function(){return null}},bling:{node:function(s){return s.toFragment()}},string:{node:function(s){return k(s).toFragment()},array:function(s,t){return typeof t.querySelectorAll==="function"?t.querySelectorAll(s):void 0}},"function":{node:function(s){return k(s.toString()).toFragment()}}});q=function(s){var t;if(!(s.parentNode!=null)){t=document.createDocumentFragment();t.appendChild(s)}return s};o=function(t,s){return q(t).parentNode.insertBefore(s,t)};r=function(t,s){return q(t).parentNode.insertBefore(s,t.nextSibling)};l=function(s){return k.type.lookup(s).node(s)};m=null;n=function(s){return function(){return window.getComputedStyle(this,null).getPropertyValue(s)}};p=function(s){return function(t){if(t!=null){return this.css(s,t)}else{return this.rect().select(s)}}};return{$:{HTML:{parse:function(t){var y,w,s,z,u,v;(u=document.createElement("div")).innerHTML=t;if(z=(y=u.childNodes).length===1){return u.removeChild(y[0])}w=document.createDocumentFragment();for(s=v=0;0<=z?v<z:v>z;s=0<=z?++v:--v){w.appendChild(u.removeChild(y[0]))}return w},stringify:function(u){var t,s;switch(k.type(u)){case"string":case"html":return u;case"node":case"fragment":t=document.createElement("div");t.appendChild((u=u.cloneNode(true)));s=t.innerHTML;t.removeChild(u);return s;default:return"HTML.stringify of unknown type: "+k.type(u)}},escape:function(t){var s;m||(m=k("<div>&nbsp;</div>").child(0));s=m.zap("data",t).select("parentNode.innerHTML").first();m.zap("data","");return s}}},html:function(s){switch(k.type(s)){case"undefined":case"null":return this.select("innerHTML");case"string":return this.zap("innerHTML",s);case"bling":return this.html(s.toFragment());case"node":return this.each(function(){var t;this.replaceChild(this.childNodes[0],s);t=[];while(this.childNodes.length>1){t.push(this.removeChild(this.childNodes[1]))}return t})}},append:function(s){s=l(s);return this.each(function(){return this.appendChild(s.cloneNode(true))})},appendTo:function(s){var u,t;u=this.map(function(){return this.cloneNode(true)});t=0;k(s).each(function(){return this.appendChild(u[t++])});return u},prepend:function(s){if(s!=null){s=l(s);this.take(1).each(function(){return o(this.childNodes[0],s)});this.skip(1).each(function(){return o(this.childNodes[0],s.cloneNode(true))})}return this},prependTo:function(s){if(s!=null){k(s).prepend(this)}return this},before:function(s){if(s!=null){s=l(s);this.take(1).each(function(){return o(this,s)});this.skip(1).each(function(){return o(this,s.cloneNode(true))})}return this},after:function(s){if(s!=null){s=l(s);this.take(1).each(function(){return r(this,s)});this.skip(1).each(function(){return r(this,s.cloneNode(true))})}return this},wrap:function(s){s=l(s);if(k.is("fragment",s)){throw new Error("cannot wrap with a fragment")}return this.each(function(v){var t,u;switch(k.type(v)){case"fragment":return s.appendChild(v);case"node":u=v.parentNode;if(!u){return s.appendChild(v)}else{t=document.createElement("dummy");s.appendChild(u.replaceChild(t,v));return u.replaceChild(s,t)}}})},unwrap:function(){return this.each(function(){if(this.parentNode&&this.parentNode.parentNode){return this.parentNode.parentNode.replaceChild(this,this.parentNode)}else{if(this.parentNode){return this.parentNode.removeChild(this)}}})},replace:function(u){var s,t;u=l(u);s=k();t=0;this.take(1).each(function(){var v;if((v=this.parentNode)!=null){v.replaceChild(u,this)}return s[t++]=u});this.skip(1).each(function(){var w,v;w=u.cloneNode(true);if((v=this.parentNode)!=null){v.replaceChild(w,this)}return s[t++]=w});return s},attr:function(s,t){switch(t){case void 0:return this.select("getAttribute").call(s,t);case null:return this.select("removeAttribute").call(s,t);default:this.select("setAttribute").call(s,t);return this}},data:function(t,s){t="data-"+(k.dashize(t));return this.attr(t,s)},addClass:function(s){return this.removeClass(s).each(function(){var t;t=this.className.split(" ").filter(function(u){return u!==""});t.push(s);return this.className=t.join(" ")})},removeClass:function(s){var t;t=function(u){return u!==s};return this.each(function(){var v,u;v=(u=this.className)!=null?u.split(" ").filter(t).join(" "):void 0;if(v.length===0){return this.removeAttribute("class")}})},toggleClass:function(s){var t;t=function(u){return u!==s};return this.each(function(){var w,u,v;u=this.className.split(" ");v=k.not(k.isEmpty);if(u.indexOf(s)>-1){v=k.and(t,v)}else{u.push(s)}w=u.filter(v).join(" ");this.className=w;if(w.length===0){return this.removeAttribute("class")}})},hasClass:function(s){return this.select("className.split").call(" ").select("indexOf").call(s).map(function(t){return t>-1})},text:function(s){if(s!=null){return this.zap("textContent",s)}return this.select("textContent")},val:function(s){if(s!=null){return this.zap("value",s)}return this.select("value")},css:function(y,C){var B,A,s,D,t,w,z,u;if((C!=null)||k.is("object",y)){w=this.select("style.setProperty");if(k.is("object",y)){for(A in y){w.call(A,y[A],"")}}else{if(k.is("string",C)){w.call(y,C,"")}else{if(k.is("array",C)){for(A=z=0,u=s=Math.max(C.length,D=w.len());0<=u?z<u:z>u;A=0<=u?++z:--z){w[A%D](y,C[A%s],"")}}}}return this}else{B=this.map(n(y));t=this.select("style").select(y);return t.weave(B).fold(function(v,E){return v||E})}},defaultCss:function(t,s){var u,y,w;y=this.selector;w="";if(k.is("string",t)){if(k.is("string",s)){w+=""+y+" { "+t+": "+s+" } "}else{throw Error("defaultCss requires a value with a string key")}}else{if(k.is("object",t)){for(u in t+"} "){w+=(""+y+" { ")+(""+u+": "+t[u]+"; ")}}}k("<style></style>").text(w).appendTo("head");return this},rect:function(){return this.select("getBoundingClientRect").call()},width:p("width"),height:p("height"),top:p("top"),left:p("left"),bottom:p("bottom"),right:p("right"),position:function(t,s){switch(true){case !(t!=null):return this.rect();case !(s!=null):return this.css("left",k.px(t));default:return this.css({top:k.px(s),left:k.px(t)})}},scrollToCenter:function(){document.body.scrollTop=this[0].offsetTop-(window.innerHeight/2);return this},child:function(s){return this.select("childNodes").map(function(){return this[s<0?s+this.length:s]})},parents:function(){return this.map(function(){var s;s=this;return k((function(){var t;t=[];while(s=s!=null?s.parentNode:void 0){t.push(s)}return t})())})},prev:function(){return this.map(function(){var s;s=this;return k((function(){var t;t=[];while(s=s!=null?s.previousSibling:void 0){t.push(s)}return t})())})},next:function(){return this.map(function(){var s;s=this;return k((function(){var t;t=[];while(s=s!=null?s.nextSibling:void 0){t.push(s)}return t})())})},remove:function(){return this.each(function(){var s;return(s=this.parentNode)!=null?s.removeChild(this):void 0})},find:function(s){return this.filter("*").map(function(){return k(s,this)}).flatten()},clone:function(s){if(s==null){s=true}return this.map(function(){if(k.is("node",this)){return this.cloneNode(s)}})},toFragment:function(){var s;if(this.length>1){s=document.createDocumentFragment();this.map(l).map(k.bound(s,s.appendChild));return s}return l(this[0])}}})}k.plugin({depends:"dom"},function(){var p,l,n,t,q,o,s,r,m;p=", ";n={slow:700,medium:500,normal:300,fast:100,instant:0,now:0};l=/(?:scale(?:3d)*|translate(?:[XYZ]|3d)*|rotate(?:[XYZ]|3d)*)/;m=30;t=document.createElement("div").style;q="transform";s="transition-property";o="transition-duration";r="transition-timing-function";if("WebkitTransform" in t){q="-webkit-transform";s="-webkit-transition-property";o="-webkit-transition-duration";r="-webkit-transition-timing-function"}else{if("MozTransform" in t){q="-moz-transform";s="-moz-transition-property";o="-moz-transition-duration";r="-moz-transition-timing-function"}else{if("OTransform" in t){q="-o-transform";s="-o-transition-property";o="-o-transition-duration";r="-o-transition-timing-function"}}}return{$:{duration:function(u){var v;v=n[u];if(v!=null){return v}return parseFloat(u)}},transform:function(A,u,z,C){var y,v,w,D,B,E;if(k.is("function",u)){C=u;u=z=null}else{if(k.is("function",z)){C=z;z=null}}if(u==null){u="normal"}z||(z="ease");v=k.duration(u)+"ms";B=[];E="";y={};for(w in A){if(l.test(w)){D=A[w];if(D.join){D=k(D).px().join(p)}else{if(D.toString){D=D.toString()}}E+=" "+w+"("+D+")"}else{y[w]=A[w]}}for(w in y){B.push(w)}if(E){B.push(q)}y[s]=B.join(p);y[o]=B.map(function(){return v}).join(p);y[r]=B.map(function(){return z}).join(p);if(E){y[q]=E}this.css(y);return this.delay(v,C)},hide:function(u){return this.each(function(){if(this.style){this._display="";if(this.style.display===!"none"){this._display=this.syle.display}return this.style.display="none"}}).trigger("hide".delay(m,u))},show:function(u){return this.each(function(){if(this.style){this.style.display=this._display;return delete this._display}}).trigger("show".delay(m,u))},toggle:function(u){return this.weave(this.css("display")).fold(function(w,v){if(w==="none"){v.style.display=v._display||"";delete v._display;k(v).trigger("show")}else{v._display=w;v.style.display="none";k(v).trigger("hide")}return v}).delay(m,u)},fadeIn:function(u,v){return this.css("opacity","0.0").show(function(){return this.transform({opacity:"1.0",translate3d:[0,0,0]},u,v)})},fadeOut:function(v,z,u,w){if(u==null){u=0}if(w==null){w=0}return this.transform({opacity:"0.0",translate3d:[u,w,0]},v,function(){return this.hide(z)})},fadeLeft:function(u,v){return this.fadeOut(u,v,"-"+this.width().first(),0)},fadeRight:function(u,v){return this.fadeOut(u,v,this.width().first(),0)},fadeUp:function(u,v){return this.fadeOut(u,v,0,"-"+this.height().first())},fadeDown:function(u,v){return this.fadeOut(u,v,0,this.height().first())}}});k.plugin({depends:"dom"},function(){var l;l=function(n){var m,p;p=JSON.parse(JSON.stringify(n));return((function(){var o;o=[];for(m in p){o.push(""+m+"="+(escape(p[m])))}return o})()).join("&")};k.type.register("http",{match:function(m){return k.isType("XMLHttpRequest",m)},array:function(m){return[m]}});return{$:{http:function(m,n){var o;if(n==null){n={}}o=new XMLHttpRequest();if(k.is("function",n)){n={success:k.bound(o,n)}}n=k.extend({method:"GET",data:null,state:k.identity,success:k.identity,error:k.identity,async:true,asBlob:false,timeout:0,followRedirects:false,withCredentials:false},n);n.state=k.bound(o,n.state);n.success=k.bound(o,n.success);n.error=k.bound(o,n.error);if(n.data&&n.method==="GET"){m+="?"+l(n.data)}else{if(n.data&&n.method==="POST"){n.data=l(n.data)}}o.open(n.method,m,n.async);o=k.extend(o,{asBlob:n.asBlob,timeout:n.timeout,followRedirects:n.followRedirects,withCredentials:n.withCredentials,onreadystatechange:function(){if(typeof n.state==="function"){n.state()}if(o.readyState===4){if(o.status===200){return n.success(o.responseText)}else{return n.error(o.status,o.statusText)}}}});o.send(n.data);return k(o)},post:function(m,n){if(n==null){n={}}if(k.is("function",n)){n={success:n}}n.method="POST";return k.http(m,n)},get:function(m,n){if(n==null){n={}}if(k.is("function",n)){n={success:n}}n.method="GET";return k.http(m,n)}}}});k.plugin({depends:"dom,function,core",provides:"event"},function(){var n,s,l,o,q,m,r,p;n=/,* +/;o=["mousemove","mousedown","mouseup","mouseover","mouseout","blur","focus","load","unload","reset","submit","keyup","keydown","change","abort","cut","copy","paste","selection","drag","drop","orientationchange","touchstart","touchmove","touchend","touchcancel","gesturestart","gestureend","gesturecancel","hashchange"];l=function(t){return function(u){return this.bind(t,u)(k.is("function",u)?void 0:this.trigger(t,u))}};q=function(t,v,u,y,w){return k(v).bind(u,w).each(function(){var z,A;return((z=((A=(this.__alive__||(this.__alive__={})))[t]||(A[t]={})))[u]||(z[u]={}))[y]=w})};p=function(t,u,y,w){var v;v=k(u);return v.each(function(){var A,z,B;A=(this.__alive__||(this.__alive__={}));z=(A[t]||(A[t]={}));B=(z[y]||(z[y]={}));v.unbind(y,B[w]);return delete B[w]})};r=k.once(function(){k(document).trigger("ready").unbind("ready");if(typeof document.removeEventListener==="function"){document.removeEventListener("DOMContentLoaded",r,false)}return typeof window.removeEventListener==="function"?window.removeEventListener("load",r,false):void 0});s=k.once(function(){if(typeof document.addEventListener==="function"){document.addEventListener("DOMContentLoaded",r,false)}return typeof window.addEventListener==="function"?window.addEventListener("load",r,false):void 0});s();m={bind:function(v,u){var w,t;w=(v||"").split(n);t=function(y){m=u.apply(this,arguments);if(m===false){y.preventAll()}return m};return this.each(function(){var A,B,z,y;y=[];for(B=0,z=w.length;B<z;B++){A=w[B];y.push(this.addEventListener(A,t,false))}return y})},unbind:function(u,t){var v;v=(u||"").split(n);return this.each(function(){var z,A,y,w;w=[];for(A=0,y=v.length;A<y;A++){z=v[A];w.push(this.removeEventListener(z,t,null))}return w})},once:function(z,y){var A,v,w,u,t;A=(z||"").split(n);t=[];for(w=0,u=A.length;w<u;w++){v=A[w];t.push(this.bind(v,function(B){y.call(this,B);return this.removeEventListener(B.type,arguments.callee,null)}))}return t},cycle:function(){var B,A,z,u,v,y,w,t;z=arguments[0],u=2<=arguments.length?g.call(arguments,1):[];B=(z||"").split(n);y=u.length;A=function(C){if(C==null){C=-1}return function(D){return u[C=++C%y].call(this,D)}};for(w=0,t=B.length;w<t;w++){v=B[w];this.bind(v,A())}return this},trigger:function(v,w){var B,y,A,u,t;if(w==null){w={}}w=k.extend({bubbles:true,cancelable:true},w);t=(v||"").split(n);for(A=0,u=t.length;A<u;A++){y=t[A];if(y==="click"||y==="mousemove"||y==="mousedown"||y==="mouseup"||y==="mouseover"||y==="mouseout"){B=document.createEvent("MouseEvents");w=k.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:null},w);B.initMouseEvent(y,w.bubbles,w.cancelable,window,w.detail,w.screenX,w.screenY,w.clientX,w.clientY,w.ctrlKey,w.altKey,w.shiftKey,w.metaKey,w.button,w.relatedTarget)}else{if(y==="blur"||y==="focus"||y==="reset"||y==="submit"||y==="abort"||y==="change"||y==="load"||y==="unload"){B=document.createEvent("UIEvents");B.initUIEvent(y,w.bubbles,w.cancelable,window,1)}else{if(y==="touchstart"||y==="touchmove"||y==="touchend"||y==="touchcancel"){B=document.createEvent("TouchEvents");w=k.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},w);B.initTouchEvent(y,w.bubbles,w.cancelable,window,w.detail,w.screenX,w.screenY,w.clientX,w.clientY,w.ctrlKey,w.altKey,w.shiftKey,w.metaKey,w.touches,w.targetTouches,w.changedTouches,w.scale,w.rotation)}else{if(y==="gesturestart"||y==="gestureend"||y==="gesturecancel"){B=document.createEvent("GestureEvents");w=k.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,target:null,scale:1,rotation:0},w);B.initGestureEvent(y,w.bubbles,w.cancelable,window,w.detail,w.screenX,w.screenY,w.clientX,w.clientY,w.ctrlKey,w.altKey,w.shiftKey,w.metaKey,w.target,w.scale,w.rotation)}else{B=document.createEvent("Events");B.initEvent(y,w.bubbles,w.cancelable);try{B=k.extend(B,w)}catch(z){}}}}}if(!B){continue}else{try{this.each(function(){return this.dispatchEvent(B)})}catch(z){d("dispatchEvent error:",z)}}}return this},live:function(y,w){var u,v,t;t=this.selector;u=this.context;v=function(z){return k(t,u).intersect(k(z.target).parents().first().union(k(z.target))).each(function(){return w.call(z.target=this,z)})};q(t,u,y,w,v);return this},die:function(u,t){k(this.context).unbind(u,p(this.selector,this.context,u,t));return this},liveCycle:function(){var w,t,u,v;w=arguments[0],t=2<=arguments.length?g.call(arguments,1):[];u=-1;v=t.length;return this.live(w,function(y){return t[u=++u%v].call(this,y)})},click:function(u){var t;if(u==null){u={}}if((t=this.css("cursor"))==="auto"||t===""){this.css("cursor","pointer")}if(k.is("function",u)){return this.bind("click",u)}else{return this.trigger("click",u)}},ready:function(t){if(r.n<=0){return t.call(this)}return this.bind("ready",t)}};o.forEach(function(t){return m[t]=l(t)});return m});return k.plugin({depends:"dom",provides:"lazy"},function(){var l;l=function(m,n){return k("head").append(k.extend(document.createElement(m),n))};return{$:{script:function(m){return l("script",{src:m})},style:function(m){return l("link",{href:m,rel:"stylesheet"})}}}})})(a)}).call(this);