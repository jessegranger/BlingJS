(function(){var a,b,k,g,c,e,f,h,i=[].slice,l=[].indexOf||function(o){for(var n=0,m=this.length;n<m;n++){if(n in this&&this[n]===o){return n}}return -1},j={}.hasOwnProperty,d=function(p,n){for(var m in n){if(j.call(n,m)){p[m]=n[m]}}function o(){this.constructor=p}o.prototype=n.prototype;p.prototype=new o();p.__super__=n.prototype;return p};e=function(){var m;m=1<=arguments.length?i.call(arguments,0):[];try{return console.log.apply(console,m)}catch(n){}return alert(m.join(", "))};if((f=Object.keys)==null){Object.keys=function(p){var n,m;m=[];for(n in p){m.push(n)}return m}}k=function(n,m){var p,o;if(!m){return n}for(p in m){o=m[p];if(o!=null){n[p]=o}}return n};b=function(p,m,n){Object.defineProperty(p,m,k({configurable:true,enumerable:true},n));return p};c=function(m,n){if(!(n!=null)){return m===n||m==="null"||m==="undefined"}else{return n.constructor===m||n.constructor.name===m||Object.prototype.toString.apply(n)===("[object "+m+"]")||c(m,n.__proto__)}};g=function(m,n){if(typeof m==="function"){m=m.prototype}n.__proto__=m;return n};h=(function(){var q,n,r,m,p,o;n={};q={name:"unknown",match:function(s){return true}};m=[];p=function(s,t){if(!(s in n)){m.unshift(s)}return n[t.name=s]=q!==t?g(q,t):t};o=function(v,w){var u,s,t;if(typeof v==="string"){if((s=n[v])==null){n[v]=p(v,{})}return n[v]=k(n[v],w)}else{if(typeof v==="object"){t=[];for(u in v){t.push(o(u,v[u]))}return t}}};r=function(w){var u,v,t,s;for(v=0,t=m.length;v<t;v++){u=m[v];if((s=n[u])!=null?s.match.call(w,w):void 0){return n[u]}}};p("unknown",q);p("object",{match:function(){return typeof this==="object"}});p("error",{match:function(){return c("Error",this)}});p("regexp",{match:function(){return c("RegExp",this)}});p("string",{match:function(){return typeof this==="string"||c(String,this)}});p("number",{match:function(){return c(Number,this)}});p("bool",{match:function(){var s;return typeof this==="boolean"||((s=String(this))==="true"||s==="false")}});p("array",{match:function(){return(typeof Array.isArray==="function"?Array.isArray(this):void 0)||c(Array,this)}});p("function",{match:function(){return typeof this==="function"}});p("global",{match:function(){return typeof this==="object"&&"setInterval" in this}});p("undefined",{match:function(s){return s===void 0}});p("null",{match:function(s){return s===null}});return k((function(s){return r(s).name}),{register:p,lookup:r,extend:o,is:function(u,v){var s;return(s=n[u])!=null?s.match.call(v,v):void 0}})})();a=(function(){var n,o,m,p,q;p={};r.pipe=function(u,t){var v,y,w,s;y=(p[u]||(p[u]=[]));if(!t){return{prepend:function(z){y.unshift(z);return z},append:function(z){y.push(z);return z}}}for(w=0,s=y.length;w<s;w++){v=y[w];t=v.call(this,t)}return t};r.pipe("bling-init").prepend(function(t){var u,s;s=t[0],u=t[1];return g(r,g({selector:s,context:u},h.lookup(s).array(s,u)))});n=typeof document!=="undefined"&&document!==null?document:{};function r(s,t){if(t==null){t=n}return r.pipe("bling-init",[s,t])}r.plugin=function(w,u){var t,v,z,y=this;if(!(u!=null)){u=w;w={}}if("depends" in w){return this.depends(w.depends,function(){return y.plugin({provides:w.provides},u)})}try{if((v=u!=null?u.call(this,this):void 0)){k(this,v!=null?v.$:void 0);["$","name"].forEach(function(A){return delete v[A]});k(this.prototype,v);z=function(A){return y[A]||(y[A]=function(){var B;B=1<=arguments.length?i.call(arguments,0):[];return y.prototype[A].apply($(B[0]),B.slice(1))})};for(t in v){z(t)}if(w.provides!=null){this.provide(w.provides)}}}catch(s){e("failed to load plugin: "+this.name+" '"+s.message+"'");throw s}return this};q=[];o={};m=function(s){return((typeof s)==="string"?s.split(/, */):s).filter(function(t){return !(t in o)})};r.depends=function(s,t){if((s=m(s)).length===0){t()}else{q.push(function(v){var u;return((u=s.indexOf(v))>-1?s.splice(u,1):void 0)&&s.length===0&&t})}return t};r.provide=function(v){var z,u,w,y,t,s;s=m(v);for(y=0,t=s.length;y<t;y++){w=s[y];o[w]=u=0;while(u<q.length){if((z=q[u](w))){q.splice(u,1);z()}else{u++}}}return null};r.provides=function(s,t){return function(){var u,v;u=1<=arguments.length?i.call(arguments,0):[];v=t.apply(null,u);r.provide(s);return v}};h.extend({unknown:{array:function(s){return[s]}},"null":{array:function(s){return[]}},undefined:{array:function(s){return[]}},array:{array:function(s){return s}},number:{array:function(s){return r.extend(new Array(s),{length:0})}}});h.register("bling",{match:function(s){return s&&c(r,s)},array:function(s){return s.toArray()},hash:function(s){return s.map(r.hash).sum()},string:function(s){return r.symbol+"(["+s.map(function(t){return $.type.lookup(t).string(t)}).join(", ")+"])"},repr:function(s){return r.symbol+"(["+s.map(function(t){return $.type.lookup(t).repr(t)}).join(", ")+"])"}});return r})();a.prototype=[];a.prototype.constructor=a;(function(m){var n;m.global=n=typeof window!=="undefined"&&window!==null?window:global;m.plugin({provides:"type"},function(){return{$:{inherit:g,extend:k,defineProperty:b,isType:c,type:h,is:h.is,isSimple:function(q){var p;return(p=h(q))==="string"||p==="number"||p==="bool"},isEmpty:function(p){return p===""||p===null||p===(void 0)}}}});m.plugin({provides:"symbol",depends:"type"},function(){var o,p;p=null;o={};n.Bling=m;if(typeof module!=="undefined"&&module!==null){module.exports={$:a,Bling:a}}m.type.extend("bling",{string:function(q){return p+"(["+q.map(m.toString).join(", ")+"])"}});b(m,"symbol",{set:function(q){n[p]=o[p];o[p=q]=n[q];return n[q]=a},get:function(){return p}});return{$:{symbol:"$"}}});m.plugin(function(){var s,q,r,p,o;(q=String.prototype).trimLeft||(q.trimLeft=function(){return this.replace(/^\s+/,"")});(r=String.prototype).split||(r.split=function(v){var t,w,u;t=[];w=0;while((u=this.indexOf(v,w))>-1){t.push(this.substring(w,u));w=u+1}return t});(p=String.prototype).lastIndexOf||(p.lastIndexOf=function(v,w,u){var t;if(u==null){u=-1}t=-1;while((u=v.indexOf(w,u+1))>-1){t=u}return t});(o=Array.prototype).join||(o.join=function(t){var v,u;if(t==null){t=""}v=this.length;if(v===0){return""}u=this[v-1];while(--v>0){u=this[v-1]+t+u}return u});if(typeof Event!=="undefined"&&Event!==null){Event.prototype.preventAll=function(){this.preventDefault();this.stopPropagation();return this.cancelBubble=true}}if(typeof Element!=="undefined"&&Element!==null){Element.prototype.matchesSelector=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.matchesSelector;if(Element.prototype.cloneNode.length===0){s=Element.prototype.cloneNode;Element.prototype.cloneNode=function(v){var w,z,y,u,t;if(v==null){v=false}z=s.call(this);if(v){t=this.childNodes;for(y=0,u=t.length;y<u;y++){w=t[y];z.appendChild(w.cloneNode(true))}}return z}}}return{}});m.plugin({provides:"core",depends:"type"},function(){var o;b(m,"now",{get:function(){return +(new Date)}});o=function(p,q){while(p<0){p+=q.length}return Math.min(p,q.length)};return{$:{log:e,assert:function(q,p){if(p==null){p=""}if(!q){throw new Error("assertion failed: "+p)}},coalesce:function(){var p;p=1<=arguments.length?i.call(arguments,0):[];return m(p).coalesce()}},eq:function(p){return m([this[o(p,this)]])},each:function(s){var q,r,p;for(r=0,p=this.length;r<p;r++){q=this[r];s.call(q,q)}return this},map:function(q){var p;return m((function(){var t,s,r;r=[];for(t=0,s=this.length;t<s;t++){p=this[t];r.push(q.call(p,p))}return r}).call(this))},reduce:function(t,q){var r,u,p,s;r=0;u=this.length;if(!(q!=null)){q=this[r++]}for(p=s=r;s<u;p=s+=1){q=t.call(this[p],q,this[p])}return q},union:function(q,t){var u,p,w,v,s,r;if(t==null){t=true}u=m();for(w=0,s=this.length;w<s;w++){p=this[w];if(!u.contains(p,t)){u.push(p)}}for(v=0,r=q.length;v<r;v++){p=q[v];if(!u.contains(p,t)){u.push(p)}}return u},distinct:function(p){if(p==null){p=true}return this.union(this,p)},intersect:function(q){var p;return m((function(){var t,s,r;r=[];for(t=0,s=this.length;t<s;t++){p=this[t];if(l.call(q,p)>=0){r.push(p)}}return r}).call(this))},contains:function(r,p){var q;if(p==null){p=true}return((function(){var u,t,s;s=[];for(u=0,t=this.length;u<t;u++){q=this[u];s.push((p&&q===r)||(!p&&q===r))}return s}).call(this)).reduce((function(t,s){return t||s}),false)},count:function(r,p){var q;if(p==null){p=true}return m((function(){var u,t,s;s=[];for(u=0,t=this.length;u<t;u++){q=this[u];if((r===void 0)||(p&&q===r)||(!p&&q===r)){s.push(1)}}return s}).call(this)).sum()},coalesce:function(){var r,s,q,p;for(s=0,q=this.length;s<q;s++){r=this[s];if((p=m.type(r))==="array"||p==="bling"){r=m(r).coalesce()}if(r!=null){return r}}return null},swap:function(r,q){var p;r=o(r,this);q=o(q,this);if(r!==q){p=[this[q],this[r]],this[r]=p[0],this[q]=p[1]}return this},shuffle:function(){var p;p=this.length-1;while(p>=0){this.swap(--p,Math.floor(Math.random()*p))}return this},select:(function(){var q,p;q=function(r){return function(){var s;if(m.is("function",s=this[r])){return m.bound(this,s)}else{return s}}};return p=function(s){var r;if((r=s.indexOf("."))>-1){return this.select(s.substr(0,r)).select(s.substr(r+1))}else{return this.map(q(s))}}})(),or:function(q){var r,s,p;for(r=s=0,p=this.length;0<=p?s<p:s>p;r=0<=p?++s:--s){this[r]||(this[r]=q)}return this},zap:function(u,q){var t,s,r;s=u.lastIndexOf(".");if(s>0){t=u.substr(0,s);r=u.substr(s+1);this.select(t).zap(r,q);return this}switch(m.type(q)){case"array":case"bling":this.each(function(){return this[u]=q[++s%q.length]});break;case"function":this.zap(u,this.select(u).map(q));break;default:this.each(function(){return this[u]=q})}return this},clean:function(p){return this.each(function(){return delete this[p]})},take:function(r){var p,q;if(r==null){r=1}p=Math.min(r,this.length);return m((function(){var t,s;s=[];for(q=t=0;0<=p?t<p:t>p;q=0<=p?++t:--t){s.push(this[q])}return s}).call(this))},skip:function(r){var p,q;if(r==null){r=0}q=Math.max(0,r|0);return m((function(){var u,s,t;t=[];for(p=u=q,s=this.length;q<=s?u<s:u>s;p=q<=s?++u:--u){t.push(this[p])}return t}).call(this))},first:function(p){if(p==null){p=1}if(p===1){return this[0]}else{return this.take(p)}},last:function(p){if(p==null){p=1}if(p===1){return this[this.length-1]}else{return this.skip(this.length-p)}},slice:function(r,p){var q;if(r==null){r=0}if(p==null){p=this.length}r=o(r,this);p=o(p,this);return m((function(){var t,s;s=[];for(q=t=r;r<=p?t<p:t>p;q=r<=p?++t:--t){s.push(this[q])}return s}).call(this))},extend:function(p){var r,s,q;for(s=0,q=p.length;s<q;s++){r=p[s];this.push(r)}return this},push:function(p){Array.prototype.push.call(this,p);return this},filter:function(q){var p;p=(function(){switch(m.type(q)){case"string":return function(r){return r.matchesSelector(q)};case"regexp":return function(r){return q.test(r)};case"function":return q;default:throw new Error("unsupported type passed to filter: "+(m.type(q)))}})();return m(Array.prototype.filter.call(this,p))},matches:function(p){return this.select("matchesSelector").call(p)},querySelectorAll:function(p){return this.filter("*").reduce(function(q,r){return q.extend(r.querySelectorAll(p))},m())},weave:function(q){var v,r,t,s,p,u;v=m();for(r=t=p=this.length-1;t>=0;r=t+=-1){v[(r*2)+1]=this[r]}for(r=s=0,u=q.length;s<u;r=s+=1){v[r*2]=q[r]}return v},fold:function(r){var p,q,s;s=this.length;p=m((function(){var v,t,u;u=[];for(q=v=0,t=s-1;v<t;q=v+=2){u.push(r.call(this,this[q],this[q+1]))}return u}).call(this));if((s%2)===1){p.push(r.call(this,this[s-1],void 0))}return p},flatten:function(){var p,t,s,v,u,r,q;p=m();for(v=0,r=this.length;v<r;v++){t=this[v];for(u=0,q=t.length;u<q;u++){s=t[u];p.push(s)}}return p},call:function(){return this.apply(null,arguments)},apply:function(q,p){return this.map(function(){if(m.is("function",this)){return this.apply(q,p)}else{return this}})},log:function(p){if(p){m.log(p,this.toString(),this.length+" items")}else{m.log(this.toString(),this.length+" items")}return this},toArray:function(){this.__proto__=Array.prototype;return this}}});m.plugin({provides:"math",depends:"core"},function(){return{$:{range:function(r,o,q){var p;if(q==null){q=1}if(!(o!=null)){o=r;r=0}if(o<r&&q>0){q*=-1}return m((function(){var u,s,t;t=[];for(p=u=0,s=Math.ceil((o-r)/q);0<=s?u<s:u>s;p=0<=s?++u:--u){t.push(r+(p*q))}return t})())},zeros:function(p){var o;return m((function(){var r,q;q=[];for(o=r=0;0<=p?r<p:r>p;o=0<=p?++r:--r){q.push(0)}return q})())},ones:function(p){var o;return m((function(){var r,q;q=[];for(o=r=0;0<=p?r<p:r>p;o=0<=p?++r:--r){q.push(1)}return q})())}},floats:function(){return this.map(parseFloat)},ints:function(){return this.map(function(){return parseInt(this,10)})},px:function(o){return this.ints().map(function(){return m.px(this,o)})},min:function(){return this.filter(isFinite).reduce(Math.min)},max:function(){return this.filter(isFinite).reduce(Math.max)},mean:function(){return this.sum()/this.length},avg:function(){return this.sum()/this.length},sum:function(){return this.filter(isFinite).reduce(function(o){return o+this})},product:function(){return this.filter(isFinite).reduce(function(o){return o*this})},squares:function(){return this.map(function(){return this*this})},magnitude:function(){return Math.sqrt(this.floats().squares().sum())},scale:function(o){return this.map(function(){return o*this})},add:function(p){var o;switch(m.type(p)){case"number":return this.map(function(){return p+this});case"bling":case"array":return m((function(){var s,q,r;r=[];for(o=s=0,q=Math.min(this.length,p.length);0<=q?s<q:s>q;o=0<=q?++s:--s){r.push(this[o]+p[o])}return r}).call(this))}},normalize:function(){return this.scale(1/this.magnitude())}}});m.plugin({provides:"string",depends:"function"},function(){m.type.extend({unknown:{string:function(q){var p;return(p=typeof q.toString==="function"?q.toString():void 0)!=null?p:String(q)},repr:function(p){return m.type.lookup(p).string(p)}},"null":{string:function(){return"null"}},undefined:{string:function(){return"undefined"}},string:{string:m.identity,repr:function(o){return"'"+o+"'"}},array:{string:function(p){var o;return"["+((function(){var s,r,q;q=[];for(s=0,r=p.length;s<r;s++){o=p[s];q.push(m.toString(o))}return q})()).join(",")+"]"}},object:{string:function(r){var q,p;return"{"+((function(){var o;o=[];for(q in r){p=r[q];o.push(""+q+":"+(m.toString(p)))}return o})()).join(", ")+"}"}},number:{repr:function(o){return String(o)},string:function(o){switch(true){case o.precision!=null:return o.toPrecision(o.precision);case o.fixed!=null:return o.toFixed(o.fixed);default:return String(o)}}}});return{$:{toString:function(o){if(!(o!=null)){return"function Bling(selector, context) { [ ... ] }"}else{return m.type.lookup(o).string(o)}},toRepr:function(o){return m.type.lookup(o).repr(o)},px:function(o,p){if(p==null){p=0}return(o!=null)&&(parseInt(o,10)+(p|0))+"px"},capitalize:function(o){return(o.split(" ").map(function(p){return p[0].toUpperCase()+p.substring(1).toLowerCase()})).join(" ")},dashize:function(q){var t,r,p,s,o;p="";for(r=s=0,o=(q!=null?q.length:void 0)|0;0<=o?s<o:s>o;r=0<=o?++s:--s){t=q.charCodeAt(r);if((91>t&&t>64)){t+=32;p+="-"}p+=String.fromCharCode(t)}return p},camelize:function(o){var p;o.split("-");while((p=o!=null?o.indexOf("-"):void 0)>-1){o=m.stringSplice(o,p,p+2,o[p+1].toUpperCase())}return o},padLeft:function(o,q,p){if(p==null){p=" "}while(o.length<q){o=p+o}return o},padRight:function(o,q,p){if(p==null){p=" "}while(o.length<q){o=o+p}return o},stringCount:function(r,o,q,t){var p;if(q==null){q=0}if(t==null){t=0}if((p=r.indexOf(o,q))>q-1){return m.stringCount(r,o,p+1,t+1)}else{return t}},stringSplice:function(r,q,p,v){var o,u,t;u=r.length;o=p;if(o<0){o+=u}t=q;if(t<0){t+=u}return r.substring(0,t)+v+r.substring(o)},checksum:function(t){var q,p,r,u,o;q=1;p=0;for(r=u=0,o=t.length;0<=o?u<o:u>o;r=0<=o?++u:--u){q=(q+t.charCodeAt(r))%65521;p=(p+q)%65521}return(p<<16)|q},repeat:function(o,p){if(p==null){p=2}switch(true){case p===1:return o;case p<1:return"";case m.is("string",o):return o+m.repeat(o,p-1);default:return m(o).extend(m.repeat(o,p-1))}},stringBuilder:function(){var o,p=this;if(m.is("global",this)){return new m.stringBuilder()}o=[];this.length=0;this.append=function(q){o.push(q);return p.length+=(q!=null?q.toString().length:void 0)|0};this.prepend=function(q){o.splice(0,0,q);return p.length+=(q!=null?q.toString().length:void 0)|0};this.clear=function(){var q;q=p.toString();o=[];p.length=0;return q};this.toString=function(){return o.join("")};return this}},toString:function(){return m.toString(this)},toRepr:function(){return m.toRepr(this)}}});m.plugin({provides:"function",depends:"hash"},function(){return{$:{identity:function(p){return p},not:function(o){return function(){return !o.apply(this,arguments)}},compose:function(p,o){return function(q){var r;return p.call(r,(r=o.call(q,q)))}},and:function(p,o){return function(q){return o.call(this,q)&&p.call(this,q)}},once:function(o,p){if(p==null){p=1}return m.defineProperty((function(){if(p-->0){return o.apply(this,arguments)}}),"exhausted",{get:function(){return p<=0}})},cycle:function(){var p,o;p=1<=arguments.length?i.call(arguments,0):[];o=-1;return function(){return p[o=++o%p.length].apply(this,arguments)}},bound:function(p,s,o){var q;if(o==null){o=[]}if(m.is("function",s.bind)){o.splice(0,0,p);q=s.bind.apply(s,o)}else{q=function(){var r;r=1<=arguments.length?i.call(arguments,0):[];return s.apply(p,o(o.length?void 0:r))}}return m.extend(q,{toString:function(){return"bound-method of "+p+"."+s.name}})},memoize:function(p){var o;o={};return function(){var s,r,q;s=1<=arguments.length?i.call(arguments,0):[];return(q=o[r=m.hash(s)])!=null?q:o[r]=p.apply(this,s)}}}}});m.plugin({provides:"hash",depends:"type"},function(){m.type.extend({unknown:{hash:function(p){return m.checksum(m.toString(p))}},object:{hash:function(q){var p;return((function(){var o;o=[];for(p in q){o.push(m.hash(q[p]))}return o})())+m.hash(Object.keys(q))}},array:{hash:function(q){var p;return((function(){var s,r,o;o=[];for(s=0,r=x.length;s<r;s++){p=x[s];o.push(m.hash(p))}return o})()).reduce(function(r,o){return r+o})}},bool:{hash:function(p){return parseInt(p?1:void 0)}}});return{$:{hash:function(o){return m.type.lookup(o).hash(o)}},hash:function(){return m.hash(this)}}});m.plugin({provides:"pubsub"},function(){var o;o={};return{$:{publish:function(){var r,u,t,s,q,p;u=arguments[0],r=2<=arguments.length?i.call(arguments,1):[];p=(o[u]||(o[u]=[]));for(s=0,q=p.length;s<q;s++){t=p[s];t.apply(null,r)}return r},publisher:function(q,p){return function(){var r;r=1<=arguments.length?i.call(arguments,0):[];p.apply(this,r);return m.publish(q,r)}},subscribe:function(q,p){(o[q]||(o[q]=[])).push(p);return p},unsubscribe:function(s,r){var p,q;if(!(r!=null)){return o[s]=[]}else{p=(o[s]||(o[s]=[]));if((q=p.indexOf(r))>-1){return p.splice(q,q)}}}}}});m.plugin({provides:"throttle",depends:"core"},function(){return{$:{throttle:function(p,q,o){if(q==null){q=250}if(o==null){o=0}return function(){var r,s;r=1<=arguments.length?i.call(arguments,0):[];s=m.now-o;if(s>q){o+=s;return p.apply(this,r)}return null}},debounce:function(p,q,o){if(q==null){q=250}if(o==null){o=0}return function(){var r,s;r=1<=arguments.length?i.call(arguments,0):[];o+=(s=m.now-o);return p.apply(this,r(s>q?void 0:null))}}}}});return m.plugin({provides:"EventEmitter"},function(){return{$:{EventEmitter:m.pipe("bling-init").append(function(q){var p,o;o={};p=function(r){return o[r]||(o[r]=[])};q.__proto__={emit:function(){var t,w,v,u,s,r;w=arguments[0],t=2<=arguments.length?i.call(arguments,1):[];r=p(w);for(u=0,s=r.length;u<s;u++){v=r[u];v.apply(this,t)}return this},addListener:function(s,r){p(s).push(r);return this.emit("newListener",s,r)},on:function(s,r){return this.addListener(s,r)},removeListener:function(t,s){var r;if((r=p(t).indexOf(s))>-1){return p(t).splice(r,1)}},removeAllListeners:function(r){return o[r]=[]},setMaxListeners:function(r){},listeners:function(r){return p(r).slice(0)},__proto__:q.__proto__};return q})}}})})(a,this);(function(m){return m.plugin({provides:"cartesian"},function(){return{$:{cartesian:function(){var q,r,o,p;p=1<=arguments.length?i.call(arguments,0):[];r=p.length;o=[];q=function(w,u){var s,v,t,n;if(++u>=r){return o.push(w)}n=p[u];for(v=0,t=n.length;v<t;v++){s=n[v];q(w.concat(s),u)}return null};q([],-1);return m(o)}}}})})(a);(function(m){return m.plugin({provides:"config"},function(){return{$:{config:{get:function(o,p){var n;return(n=process.env[o])!=null?n:p}}}}})})(a);(function(m){return m.plugin({provides:"date"},function(){var o,w,t,u,y,r,p,n,z,A,B,v,q;q=[1,1000,1000*60,1000*60*60,1000*60*60*24],n=q[0],B=q[1],p=q[2],r=q[3],w=q[4];v={ms:n,s:B,m:p,h:r,d:w,sec:B,second:B,seconds:B,min:p,minute:p,minutes:p,hr:r,hour:r,hours:r,day:w,days:w};y={yyyy:Date.prototype.getUTCFullYear,mm:function(){return this.getUTCMonth()+1},dd:Date.prototype.getUTCDate,HH:Date.prototype.getUTCHours,MM:Date.prototype.getUTCMinutes,SS:Date.prototype.getUTCSeconds,MS:Date.prototype.getUTCMilliseconds};u=Object.keys(y).sort().reverse();A={yyyy:Date.prototype.setUTCFullYear,mm:function(s){return this.setUTCMonth(s-1)},dd:Date.prototype.setUTCDate,HH:Date.prototype.setUTCHours,MM:Date.prototype.setUTCMinutes,SS:Date.prototype.setUTCSeconds,MS:Date.prototype.setUTCMilliseconds};z=Object.keys(A).sort().reverse();t=Math.floor;m.type.register("date",{match:function(s){return m.isType(Date,s)},array:function(s){return[s]}});o=function(s){return function(D,F,E){var C;if(E==null){E=m.date.defaultUnit}C=m.date.unstamp(D,E);A[s].call(C,(y[s].call(C))+F);return m.date.stamp(C,E)}};return{$:{date:{defaultUnit:"ms",defaultFormat:"yyyy-mm-dd HH:MM:SS",stamp:function(s,C){if(s==null){s=new Date}if(C==null){C=m.date.defaultUnit}return t(s/v[C])},unstamp:function(s,C){if(C==null){C=m.date.defaultUnit}return new Date(t(s*v[C]))},convert:function(s,D,C){if(D==null){D=m.date.defaultUnit}if(C==null){C=m.date.defaultUnit}return t(s*v[D]/v[C])},midnight:function(s,C){if(C==null){C=m.date.defaultUnit}return m.date.convert(m.date.convert(s,C,"d"),"d",C)},format:function(F,C,G){var E,D,H,s;if(C==null){C=m.date.defaultFormat}if(G==null){G=m.date.defaultUnit}E=m.date.unstamp(F,G);for(H=0,s=u.length;H<s;H++){D=u[H];C=C.replace(D,m.padLeft(""+y[D].call(E),D.length,"0"))}return C},parse:function(K,s,L){var C,I,G,H,F,J,D;if(s==null){s=m.date.defaultFormat}if(L==null){L=m.date.defaultUnit}C=new Date(0);for(I=H=0,D=s.length;H<D;I=H+=1){for(F=0,J=z.length;F<J;F++){G=z[F];if(s.indexOf(G,I)===I){try{A[G].call(C,parseInt(K.slice(I,I+G.length),10))}catch(E){throw new Error("Invalid date ('"+K+"') given format mask: "+s+" (failed at position "+I+")")}}}}return m.date.stamp(C,L)},addMilliseconds:o("MS"),addSeconds:o("SS"),addMinutes:o("MM"),addHours:o("HH"),addDays:o("dd"),addMonths:o("mm"),addYears:o("yyyy"),range:function(I,H,s,E,D){var F,G,C;if(s==null){s=1}if(E==null){E="dd"}if(D==null){D=m.date.defaultUnit}F=o(E);C=[I];while((G=C[C.length-1])<H){C.push(F(G,s,D))}return C}}},midnight:function(s){if(s==null){s=m.date.defaultUnit}return this.map(function(){return m.date.midnight(this,s)})},unstamp:function(s){if(s==null){s=m.date.defaultUnit}return this.map(function(){return m.date.unstamp(this,s)})},stamp:function(s){if(s==null){s=m.date.defaultUnit}return this.map(function(){return m.date.stamp(this,s)})},dateFormat:function(s,C){if(s==null){s=m.date.defaultFormat}if(C==null){C=m.date.defaultUnit}return this.map(function(){return m.date.format(this,s,C)})},dateParse:function(s,C){if(s==null){s=m.date.defaultFormat}if(C==null){C=m.date.defaultUnit}return this.map(function(){return m.date.parse(this,s,C)})}}})})(a);(function(m){return m.plugin({provides:"delay",depends:"function"},function(){return{$:{delay:(function(){var n;n=m.extend([],(function(){var o;o=function(p){return function(){if(p.length){return p.shift()()}}};return{add:function(s,t){var q,r,p;s.order=t+m.now;for(q=r=0,p=this.length;0<=p?r<=p:r>=p;q=0<=p?++r:--r){if(q===this.length||this[q].order>s.order){this.splice(q,0,s);break}}setTimeout(o(this),t);return this},cancel:function(s){var q,r,p;for(q=r=0,p=this.length;0<=p?r<p:r>p;q=0<=p?++r:--r){if(this[q]===s){this.splice(q,1);break}}return this}}})());return function(p,o){if(m.is("function",o)){n.add(o,p)}return{cancel:function(){return n.cancel(o)}}}})()},delay:function(q,o,p){if(p==null){p=this}return g(this,m.delay(q,m.bound(p,o)))}}})})(a);(function(m){if(m.global.document!=null){return m.plugin({depends:"function",provides:"dom"},function(){var p,v,r,t,n,o,s,q,u;m.type.register("nodelist",{match:function(w){return(w!=null)&&m.isType("NodeList",w)},hash:function(y){var w;return m((function(){var B,A,z;z=[];for(B=0,A=x.length;B<A;B++){w=x[B];z.push(m.hash(w))}return z})()).sum()},array:m.identity,string:function(w){return"{Nodelist:["+m(w).select("nodeName").join(",")+"]}"},node:function(w){return m(w).toFragment()}});m.type.register("node",{match:function(w){return(w!=null?w.nodeType:void 0)>0},hash:function(w){return m.checksum(w.nodeName)+m.hash(w.attributes)+m.checksum(w.innerHTML)},string:function(w){return w.toString()},node:m.identity});m.type.register("fragment",{match:function(w){return(w!=null?w.nodeType:void 0)===11},hash:function(y){var w;return m((function(){var C,B,z,A;z=y.childNodes;A=[];for(C=0,B=z.length;C<B;C++){w=z[C];A.push(m.hash(w))}return A})()).sum()},string:function(w){return w.toString()},node:m.identity});m.type.register("html",{match:function(y){var w;return typeof y==="string"&&(w=y.trimLeft())[0]==="<"&&w[w.length-1]===">"},node:function(y){var C,B,w,D,z,A;(z=document.createElement("div")).innerHTML=y;if(D=(C=z.childNodes).length===1){return z.removeChild(C[0])}B=document.createDocumentFragment();for(w=A=0;A<D;w=A+=1){B.appendChild(z.removeChild(C[0]))}return B},array:function(y,z){var w;return m.type.lookup(w=a.HTML.parse(y)).array(w,z)},string:function(w){return"'"+w+"'"},repr:function(w){return'"'+w+'"'}});m.type.extend({unknown:{node:function(){return null}},bling:{node:function(w){return w.toFragment()}},node:{html:function(z){var y,w;y=document.createElement("div");y.appendChild((z=z.cloneNode(true)));w=y.innerHTML;y.removeChild(z);return w}},string:{node:function(w){return m(w).toFragment()},array:function(w,y){return typeof y.querySelectorAll==="function"?y.querySelectorAll(w):void 0}},"function":{node:function(w){return m(w.toString()).toFragment()}}});q=function(w){var y;if(!(w.parentNode!=null)){y=document.createDocumentFragment();y.appendChild(w)}return w};v=function(y,w){return q(y).parentNode.insertBefore(w,y)};p=function(y,w){return q(y).parentNode.insertBefore(w,y.nextSibling)};u=function(w){return m.type.lookup(w).node(w)};t=false;o=false;r=function(w){return function(){return m.global.getComputedStyle(this,null).getPropertyValue(w)}};n=function(w){return function(y){if(y!=null){return this.css(w,y)}else{return this.rect().select(w)}}};s=function(w){return function(){return this.map(function(y){return m((function(){var z;z=[];while(y=y[w]){z.push(y)}return z})())})}};return{$:{HTML:{parse:function(w){return m.type.lookup(w).node(w)},stringify:function(w){return m.type.lookup(w).html(w)},escape:function(y){var w;t||(t=m("<div>&nbsp;</div>").child(0));w=t.zap("data",y).select("parentNode.innerHTML").first();t.zap("data","");return w}}},html:function(w){switch(m.type(w)){case"undefined":case"null":return this.select("innerHTML");case"string":return this.zap("innerHTML",w);case"bling":return this.html(w.toFragment());case"node":return this.each(function(){var y;this.replaceChild(this.childNodes[0],w);y=[];while(this.childNodes.length>1){y.push(this.removeChild(this.childNodes[1]))}return y})}},append:function(w){w=u(w);return this.each(function(){return this.appendChild(w.cloneNode(true))})},appendTo:function(w){var z,y;z=this.map(function(){return this.cloneNode(true)});y=0;m(w).each(function(){return this.appendChild(z[y++])});return z},prepend:function(w){if(w!=null){w=u(w);this.take(1).each(function(){return v(this.childNodes[0],w)});this.skip(1).each(function(){return v(this.childNodes[0],w.cloneNode(true))})}return this},prependTo:function(w){if(w!=null){m(w).prepend(this)}return this},before:function(w){if(w!=null){w=u(w);this.take(1).each(function(){return v(this,w)});this.skip(1).each(function(){return v(this,w.cloneNode(true))})}return this},after:function(w){if(w!=null){w=u(w);this.take(1).each(function(){return p(this,w)});this.skip(1).each(function(){return p(this,w.cloneNode(true))})}return this},wrap:function(w){w=u(w);if(m.is("fragment",w)){throw new Error("cannot call .wrap() with a fragment as the parent")}return this.each(function(A){var z,y;if((m.is("fragment",A))||!A.parentNode){return w.appendChild(A)}z=A.parentNode;y=document.createElement("dummy");w.appendChild(z.replaceChild(y,A));return z.replaceChild(w,y)})},unwrap:function(){return this.each(function(){if(this.parentNode&&this.parentNode.parentNode){return this.parentNode.parentNode.replaceChild(this,this.parentNode)}else{if(this.parentNode){return this.parentNode.removeChild(this)}}})},replace:function(C){var A,y,z,w,B;C=u(C);A=this.map(function(){return C.cloneNode(true)});for(y=z=0,w=A.length;z<w;y=z+=1){if((B=this[y].parentNode)!=null){B.replaceChild(A[y],this[y])}}return A},attr:function(w,y){switch(y){case void 0:return this.select("getAttribute").call(w,y);case null:return this.select("removeAttribute").call(w,y);default:this.select("setAttribute").call(w,y);return this}},data:function(y,w){return this.attr("data-"+(m.dashize(y)),w)},addClass:function(y){var w;w=function(z){return z!==""};return this.removeClass(y).each(function(){var z;z=this.className.split(" ").filter(w);z.push(y);return this.className=z.join(" ")})},removeClass:function(w){var y;y=function(z){return z!==w};return this.each(function(){var z;z=this.className.split(" ").filter(y).join(" ");if(z.length===0){return this.removeAttribute("class")}})},toggleClass:function(w){var y;y=function(z){return z!==w};return this.each(function(){var B,z,A;z=this.className.split(" ");A=m.not(m.isEmpty);if(z.indexOf(w)>-1){A=m.and(y,A)}else{z.push(w)}B=z.filter(A).join(" ");this.className=B;if(B.length===0){return this.removeAttribute("class")}})},hasClass:function(w){return this.select("className.split").call(" ").select("indexOf").call(w).map(function(y){return y>-1})},text:function(w){if(w!=null){return this.zap("textContent",w)}return this.select("textContent")},val:function(w){if(w!=null){return this.zap("value",w)}return this.select("value")},css:function(B,F){var E,D,w,G,y,A,C,z;if((F!=null)||m.is("object",B)){A=this.select("style.setProperty");if(m.is("object",B)){for(D in B){A.call(D,B[D],"")}}else{if(m.is("string",F)){A.call(B,F,"")}else{if(m.is("array",F)){for(D=C=0,z=w=Math.max(F.length,G=A.len());C<z;D=C+=1){A[D%G](B,F[D%w],"")}}}}return this}else{E=this.map(r(B));y=this.select("style").select(B);return y.weave(E).fold(function(H,I){return H||I})}},defaultCss:function(y,w){var z,B,A;B=this.selector;A="";if(m.is("string",y)){if(m.is("string",w)){A+=""+B+" { "+y+": "+w+" } "}else{throw Error("defaultCss requires a value with a string key")}}else{if(m.is("object",y)){for(z in y+"} "){A+=(""+B+" { ")+(""+z+": "+y[z]+"; ")}}}m("<style></style>").text(A).appendTo("head");return this},rect:function(){return this.select("getBoundingClientRect").call()},width:n("width"),height:n("height"),top:n("top"),left:n("left"),bottom:n("bottom"),right:n("right"),position:function(y,w){switch(true){case !(y!=null):return this.rect();case !(w!=null):return this.css("left",m.px(y));default:return this.css({top:m.px(w),left:m.px(y)})}},scrollToCenter:function(){document.body.scrollTop=this[0].offsetTop-(m.global.innerHeight/2);return this},child:function(w){return this.select("childNodes").map(function(){return this[w<0?w+this.length:w]})},parents:s("parentNode"),prev:s("previousSibling"),next:s("nextSibling"),remove:function(){return this.each(function(){var w;return(w=this.parentNode)!=null?w.removeChild(this):void 0})},find:function(w){return this.filter("*").map(function(){return m(w,this)}).flatten()},clone:function(w){if(w==null){w=true}return this.map(function(){if(m.is("node",this)){return this.cloneNode(w)}})},toFragment:function(){var w;if(this.length>1){w=document.createDocumentFragment();(this.map(u)).map(m.bound(w,w.appendChild));return w}return u(this[0])}}})}})(a);(function(m){return m.plugin({depends:"dom,function,core",provides:"event"},function(){var p,u,n,q,s,o,t,r;p=/,* +/;q=["mousemove","mousedown","mouseup","mouseover","mouseout","blur","focus","load","unload","reset","submit","keyup","keydown","change","abort","cut","copy","paste","selection","drag","drop","orientationchange","touchstart","touchmove","touchend","touchcancel","gesturestart","gestureend","gesturecancel","hashchange"];n=function(v){return function(w){return this.bind(v,w)(m.is("function",w)?void 0:this.trigger(v,w))}};s=function(v,y,w,A,z){return m(y).bind(w,z).each(function(){var B,C;return((B=((C=(this.__alive__||(this.__alive__={})))[v]||(C[v]={})))[w]||(B[w]={}))[A]=z})};r=function(v,w,A,z){var y;y=m(w);return y.each(function(){var C,B,D;C=(this.__alive__||(this.__alive__={}));B=(C[v]||(C[v]={}));D=(B[A]||(B[A]={}));y.unbind(A,D[z]);return delete D[z]})};t=m.once(function(){var v;m(document).trigger("ready").unbind("ready");if(typeof document.removeEventListener==="function"){document.removeEventListener("DOMContentLoaded",t,false)}return typeof(v=m.global).removeEventListener==="function"?v.removeEventListener("load",t,false):void 0});u=m.once(function(){var v;if(typeof document.addEventListener==="function"){document.addEventListener("DOMContentLoaded",t,false)}return typeof(v=m.global).addEventListener==="function"?v.addEventListener("load",t,false):void 0});u();o={bind:function(y,w){var z,v;z=(y||"").split(p);v=function(A){o=w.apply(this,arguments);if(o===false){A.preventAll()}return o};return this.each(function(){var C,D,B,A;A=[];for(D=0,B=z.length;D<B;D++){C=z[D];A.push(this.addEventListener(C,v,false))}return A})},unbind:function(w,v){var y;y=(w||"").split(p);return this.each(function(){var B,C,A,z;z=[];for(C=0,A=y.length;C<A;C++){B=y[C];z.push(this.removeEventListener(B,v,null))}return z})},trigger:function(y,z){var D,A,C,w,v;if(z==null){z={}}z=m.extend({bubbles:true,cancelable:true},z);v=(y||"").split(p);for(C=0,w=v.length;C<w;C++){A=v[C];if(A==="click"||A==="mousemove"||A==="mousedown"||A==="mouseup"||A==="mouseover"||A==="mouseout"){D=document.createEvent("MouseEvents");z=m.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:null},z);D.initMouseEvent(A,z.bubbles,z.cancelable,m.global,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.button,z.relatedTarget)}else{if(A==="blur"||A==="focus"||A==="reset"||A==="submit"||A==="abort"||A==="change"||A==="load"||A==="unload"){D=document.createEvent("UIEvents");D.initUIEvent(A,z.bubbles,z.cancelable,m.global,1)}else{if(A==="touchstart"||A==="touchmove"||A==="touchend"||A==="touchcancel"){D=document.createEvent("TouchEvents");z=m.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},z);D.initTouchEvent(A,z.bubbles,z.cancelable,m.global,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.touches,z.targetTouches,z.changedTouches,z.scale,z.rotation)}else{if(A==="gesturestart"||A==="gestureend"||A==="gesturecancel"){D=document.createEvent("GestureEvents");z=m.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,target:null,scale:1,rotation:0},z);D.initGestureEvent(A,z.bubbles,z.cancelable,m.global,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.target,z.scale,z.rotation)}else{D=document.createEvent("Events");D.initEvent(A,z.bubbles,z.cancelable);try{D=m.extend(D,z)}catch(B){}}}}}if(!D){continue}else{try{this.each(function(){return this.dispatchEvent(D)})}catch(B){m.log("dispatchEvent error:",B)}}}return this},live:function(A,z){var w,y,v;v=this.selector;w=this.context;y=function(B){return m(v,w).intersect(m(B.target).parents().first().union(m(B.target))).each(function(){return z.call(B.target=this,B)})};s(v,w,A,z,y);return this},die:function(w,v){m(this.context).unbind(w,r(this.selector,this.context,w,v));return this},click:function(w){var v;if(w==null){w={}}if((v=this.css("cursor"))==="auto"||v===""){this.css("cursor","pointer")}if(m.is("function",w)){this.bind("click",w)}else{this.trigger("click",w)}return this},ready:function(v){if(t.exhausted){return v.call(this)}return this.bind("ready",v)}};q.forEach(function(v){return o[v]=n(v)});return o})})(a);(function(m){return m.plugin(function(){return{$:{histogram:function(w,r,o){var q,u,y,A,C,p,F,B,z,E,v,t,D,s;if(r==null){r=1}if(o==null){o=80}q=m();A=0;for(v=0,D=w.length;v<D;v++){E=w[v];y=Math.floor(E/r);if((s=q[y])==null){q[y]=0}q[y]+=1;A=Math.max(A,y+1)}q.length=A;C=q.max();q=q.map(function(n){return n||0}).scale(1/C).scale(o);z=q.sum();B="";for(p=t=0;t<A;p=t+=1){u=(p+1)*r;F=(q[p]*100/z).toFixed(0);B+=m.padLeft(F+"%",3)+m.padRight(" < "+(u.toFixed(2)),10)+": "+m.repeat("#",q[p])+"\n"}return B}}}})})(a);(function(m){return m.plugin({depends:"dom",provides:"http"},function(){var n;n=function(q){var p,r;r=JSON.parse(JSON.stringify(q));return((function(){var o;o=[];for(p in r){o.push(""+p+"="+(escape(r[p])))}return o})()).join("&")};m.type.register("http",{match:function(p){return m.isType("XMLHttpRequest",p)},array:function(p){return[p]}});return{$:{http:function(o,p){var q;if(p==null){p={}}q=new XMLHttpRequest();if(m.is("function",p)){p={success:m.bound(q,p)}}p=m.extend({method:"GET",data:null,state:m.identity,success:m.identity,error:m.identity,async:true,asBlob:false,timeout:0,followRedirects:false,withCredentials:false},p);p.state=m.bound(q,p.state);p.success=m.bound(q,p.success);p.error=m.bound(q,p.error);if(p.data&&p.method==="GET"){o+="?"+n(p.data)}else{if(p.data&&p.method==="POST"){p.data=n(p.data)}}q.open(p.method,o,p.async);q=m.extend(q,{asBlob:p.asBlob,timeout:p.timeout,followRedirects:p.followRedirects,withCredentials:p.withCredentials,onreadystatechange:function(){if(typeof p.state==="function"){p.state()}if(q.readyState===4){if(q.status===200){return p.success(q.responseText)}else{return p.error(q.status,q.statusText)}}}});q.send(p.data);return m(q)},post:function(o,p){if(p==null){p={}}if(m.is("function",p)){p={success:p}}p.method="POST";return m.http(o,p)},get:function(o,p){if(p==null){p={}}if(m.is("function",p)){p={success:p}}p.method="GET";return m.http(o,p)}}}})})(a);(function(m){return m.plugin({depends:"dom",provides:"lazy"},function(){var n;n=function(o,p){return m("head").append(m.extend(document.createElement(o),p))};return{$:{script:function(o){return n("script",{src:o})},style:function(o){return n("link",{href:o,rel:"stylesheet"})}}}})})(a);(function(n){var o,m;o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");m=(function(){var t,q,p,s,r,v,u;t=new Array(624);r=0;v=function(y){var z,A,w;r=0;t[0]=y;w=[];for(z=A=1;A<=623;z=++A){w.push(t[z]=4294967295&(1812433253*(t[z-1]^(t[z-1]>>>30))+z))}return w};s=function(){var z,B,A,w;w=[];for(z=A=0;A<=623;z=++A){B=((t[z]&2147483648)>>>31)+(2147483647&t[(z+1)%624]);t[z]=t[(z+397)%624]^(B>>>1);if((B%2)===1){w.push(t[z]=t[z]^2567483615)}else{w.push(void 0)}}return w};q=Math.pow(2,31);p=q*2;u=function(){var w;if(r===0){s()}w=t[r]^(w>>>11)^((w<<7)&&2636928640)^((w<<15)&&4022730752)^(w>>>18);r=(r+1)%624;return(w+q)/p};n.defineProperty(u,"seed",{set:function(w){return v(w)}});u.seed=+new Date();return n.extend(u,{real:function(z,y){var w,A;if(!(z!=null)){w=[0,1],z=w[0],y=w[1]}if(!(y!=null)){A=[0,z],z=A[0],y=A[1]}return(n.random()*(y-z))+z},integer:function(y,w){return Math.floor(n.random.real(y,w))},string:function(w,y){if(y==null){y=""}while(y.length<w){y+=n.random.element(o)}return y},coin:function(w){if(w==null){w=0.5}return n.random()<=w},element:function(w){return w[n.random.integer(0,w.length)]},gaussian:function(z,C){var D,B,A,w,E;if(z==null){z=0.5}if(C==null){C=0.12}while(true){B=n.random();A=1.7156*(n.random()-0.5);w=B-0.449871;E=Math.abs(A)+0.386595;D=(w*w)+E*(0.196*E-0.25472*w);if(!(D>0.27597&&(D>0.27846||(A*A)>(-4*Math.log(B)*B*B)))){break}}return z+C*A/B}})})();return n.plugin({provides:"random"},function(){return{$:{random:m}}})})(a);(function(m){return m.plugin({provides:"sendgrid",depends:"config"},function(){var p,o;try{p=require("nodemailer")}catch(n){return}o=p.createTransport("SMTP",{service:"SendGrid",auth:{user:m.config.get("SENDGRID_USERNAME"),pass:m.config.get("SENDGRID_PASSWORD")}});return{$:{sendMail:function(r,u){var q,t,s;if((q=r.transport)==null){r.transport=o}if((t=r.from)==null){r.from=m.config.get("EMAILS_FROM")}if((s=r.bcc)==null){r.bcc=m.config.get("EMAILS_BCC")}if(m.config.get("SENDGRID_ENABLED","true")==="true"){return p.sendMail(r,u)}else{return u(false)}}}}})})(a);(function(m){m.plugin({provides:"StateMachine"},function(){var n;return{$:{StateMachine:n=(function(){function o(p){this.reset();this.table=p;Object.defineProperty(this,"modeline",{get:function(){return this.table[this._mode]}});Object.defineProperty(this,"mode",{set:function(q){var r;this._lastMode=this._mode;this._mode=q;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){r=this.modeline.enter.call(this);while(m.is("function",r)){r=r.call(this)}}return q},get:function(){return this._mode}})}o.prototype.reset=function(){this._mode=null;return this._lastMode=null};o.prototype.GO=function(p){return function(){return this.mode=p}};o.GO=function(p){return function(){return this.mode=p}};o.prototype.tick=function(r){var p,q;q=this.modeline;if(!(q!=null)){p=null}else{if(r in q){p=q[r]}else{if("def" in q){p=q.def}}}while(m.is("function",p)){p=p.call(this,r)}return p};o.prototype.run=function(r){var u,s,t,q,p;this.mode=0;for(t=0,q=r.length;t<q;t++){u=r[t];s=this.tick(u)}if(m.is("function",(p=this.modeline)!=null?p.eof:void 0)){s=this.modeline.eof.call(this)}while(m.is("function",s)){s=s.call(this)}this.reset();return this};return o})()}}});return m.plugin({provides:"synth",depends:"StateMachine"},function(){var n;n=(function(p){d(o,p);o.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':o.GO(6),"'":o.GO(7),"#":o.GO(2),".":o.GO(3),"[":o.GO(4)," ":o.GO(9),"+":o.GO(11),",":o.GO(10),def:function(q){return this.tag+=q},eof:o.GO(13)},{".":o.GO(3),"[":o.GO(4)," ":o.GO(9),"+":o.GO(11),",":o.GO(10),def:function(q){return this.id+=q},eof:o.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":o.GO(2),".":o.GO(3),"[":o.GO(4)," ":o.GO(9),"+":o.GO(11),",":o.GO(10),def:function(q){return this.cls+=q},eof:o.GO(13)},{"=":o.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(q){return this.attr+=q},eof:o.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(q){return this.val+=q},eof:o.GO(12)},{'"':o.GO(8),def:function(q){return this.text+=q},eof:o.GO(12)},{"'":o.GO(8),def:function(q){return this.text+=q},eof:o.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var q;this.emitNode();this.parent=(q=this.parent)!=null?q.parentNode:void 0;return this.GO(0)}},{enter:function(){return m.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function o(){o.__super__.constructor.call(this,o.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}o.prototype.emitNode=function(){var q,r;r=document.createElement(this.tag);r.id=this.id||null;r.className=this.cls||null;for(q in this.attrs){r.setAttribute(q,this.attrs[q])}this.parent.appendChild(r);return this.parent=r};o.prototype.emitText=function(){this.parent.appendChild(m.HTML.parse(this.text));return this.text=""};return o})(m.StateMachine);return{$:{synth:function(p){var o;o=new n();o.run(p);if(o.fragment.childNodes.length===1){return m(o.fragment.childNodes[0])}else{return m(o.fragment)}}}}})})(a);(function(o){var n,m;n={};o.plugin(function(){var p,q;p=null;n={};q={register_engine:function(r,s){n[r]=s;if(!(p!=null)){return p=r}},render:function(s,r){if(p in n){return n[p](s,r)}}};q.__defineSetter__("engine",function(r){if(!r in n){throw new Error("invalid template engine: "+r+" not one of "+(Object.Keys(n)))}else{return p=r}});q.__defineGetter__("engine",function(){return p});return{name:"Template",$:{template:q}}});o.template.register_engine("null",(function(){return function(q,p){return q}})());m=function(y,v,q,p,w){var u,s,z,r;if(w==null){w=-1}u=1;if(w<0){w=y.length+1+w}for(s=r=p;p<=w?r<w:r>w;s=p<=w?++r:--r){z=y[s];if(z===q){u+=1}else{if(z===v){u-=1}}if(u===0){return s}}return -1};o.template.register_engine("pythonic",(function(){var r,s,q,p;p=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;r=/%[\(\/]/;s=function(E){var B,v,z,y,D,A,u,t,C,w;B=E.split(r);u=B.length;C=[B[0]];y=1;for(z=w=1;1<=u?w<u:w>u;z=1<=u?++w:--w){v=m(B[z],")","(",0,-1);if(v===-1){return"Template syntax error: unmatched '%(' starting at: "+(B[z].substring(0,15))}D=B[z].substring(0,v);t=B[z].substring(v);A=p.exec(t);if(A===null){return"Template syntax error: invalid type specifier starting at '"+t+"'"}t=A[4];C[y++]=D;C[y++]=A[1]|0;C[y++]=A[2]|0;C[y++]=A[3];C[y++]=t}return C};s.cache={};q=function(J,I){var t,B,E,D,H,w,v,y,u,F,G,C,A,z;t=s.cache[J];if(!(t!=null)){t=s.cache[J]=s(J)}v=[t[0]];D=1;w=t.length;for(E=C=1,A=w-5;C<=A;E=C+=5){z=t.slice(E,(E+4)+1||9000000000),H=z[0],y=z[1],B=z[2],F=z[3],u=z[4];G=I[H];if(!(G!=null)){G="missing value: "+H}switch(F){case"d":v[D++]=""+parseInt(G,10);break;case"f":v[D++]=parseFloat(G).toFixed(B);break;case"s":v[D++]=""+G;break;default:v[D++]=""+G}if(y>0){v[D]=String.PadLeft(v[D],y)}v[D++]=u}return v.join("")};return q})());return o.template.register_engine("js-eval",(function(){var p;p=(function(r){d(q,r);function q(){return q.__super__.constructor.apply(this,arguments)}q.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return q})(o.StateMachine);return function(r,q){return r}})())})(a);(function(m){return m.plugin(function(){var p,o,n;n=function(v){var r,s,u,q,t;s=v.indexOf(":");if(s>0){q=parseInt(v.slice(0,s),10);u=v.slice(s+1,s+1+q);t=v[s+1+q];r=v.slice(s+q+2);u=(function(){switch(t){case"#":return Number(u);case"'":return String(u);case"!":return u==="true";case"~":return null;case"]":return p(u);case"}":return o(u)}})();return[u,r]}return void 0};p=function(r){var t,s,q;t=[];while(r.length>0){q=n(r),s=q[0],r=q[1];t.push(s)}return t};o=function(r){var u,s,t,q,v;u={};while(r.length>0){q=n(r),s=q[0],r=q[1];v=n(r),t=v[0],r=v[1];u[s]=t}return u};return{$:{TNET:{stringify:function(r){var t,s,u,q;q=(function(){switch(m.type(r)){case"number":return[String(r),"#"];case"string":return[r,"'"];case"function":return[String(r),"'"];case"boolean":return[String(!!r),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var y,w,v;v=[];for(y=0,w=r.length;y<w;y++){u=r[y];v.push(m.TNET.stringify(u))}return v})()).join(""),"]"];case"object":return[((function(){var v;v=[];for(u in r){v.push(m.TNET.stringify(u)+m.TNET.stringify(r[u]))}return v})()).join(""),"}"]}})(),t=q[0],s=q[1];return(t.length|0)+":"+t+s},parse:function(r){var q;return(q=n(r))!=null?q[0]:void 0}}}}})})(a);(function(m){return m.plugin({provides:"trace",depends:"function,type"},function(){m.type.extend({unknown:{trace:m.identity},object:{trace:function(u,s,r){var q,t,p,n;n=Object.keys(u);for(t=0,p=n.length;t<p;t++){q=n[t];u[q]=m.trace(u[q],""+s+"."+q,r)}return u}},array:{trace:function(t,q,p){var r,s,n;for(r=s=0,n=t.length;s<n;r=s+=1){t[r]=m.trace(t[r],""+q+"["+r+"]",p)}return t}},"function":{trace:function(q,o,n){var p;p=function(){var r;r=1<=arguments.length?i.call(arguments,0):[];n(""+(this.name||m.type(this))+"."+(o||q.name)+"(",r,")");return q.apply(this,r)};n("Trace: "+(o||q.name)+" created.");p.toString=q.toString;return p}}});return{$:{trace:function(q,p,n){if(n==null){n=m.log}return m.type.lookup(q).trace(q,p,n)}}}})})(a);(function(m){return m.plugin({depends:"dom"},function(){var r,n,p,v,s,q,u,t,o;r=", ";p={slow:700,medium:500,normal:300,fast:100,instant:0,now:0};n=/(?:scale(?:3d)*|translate(?:[XYZ]|3d)*|rotate(?:[XYZ]|3d)*)/;o=30;v=document.createElement("div").style;s="transform";u="transition-property";q="transition-duration";t="transition-timing-function";if("WebkitTransform" in v){s="-webkit-transform";u="-webkit-transition-property";q="-webkit-transition-duration";t="-webkit-transition-timing-function"}else{if("MozTransform" in v){s="-moz-transform";u="-moz-transition-property";q="-moz-transition-duration";t="-moz-transition-timing-function"}else{if("OTransform" in v){s="-o-transform";u="-o-transition-property";q="-o-transition-duration";t="-o-transition-timing-function"}}}return{$:{duration:function(w){var y;y=p[w];if(y!=null){return y}return parseFloat(w)}},transform:function(C,w,B,E){var A,y,z,F,D,G;if(m.is("function",w)){E=w;w=B=null}else{if(m.is("function",B)){E=B;B=null}}if(w==null){w="normal"}B||(B="ease");y=m.duration(w)+"ms";D=[];G="";A={};for(z in C){if(n.test(z)){F=C[z];if(F.join){F=m(F).px().join(r)}else{if(F.toString){F=F.toString()}}G+=" "+z+"("+F+")"}else{A[z]=C[z]}}for(z in A){D.push(z)}if(G){D.push(s)}A[u]=D.join(r);A[q]=D.map(function(){return y}).join(r);A[t]=D.map(function(){return B}).join(r);if(G){A[s]=G}this.css(A);return this.delay(y,E)},hide:function(w){return this.each(function(){if(this.style){this._display="";if(this.style.display===!"none"){this._display=this.syle.display}return this.style.display="none"}}).trigger("hide".delay(o,w))},show:function(w){return this.each(function(){if(this.style){this.style.display=this._display;return delete this._display}}).trigger("show".delay(o,w))},toggle:function(w){return this.weave(this.css("display")).fold(function(z,y){if(z==="none"){y.style.display=y._display||"";delete y._display;m(y).trigger("show")}else{y._display=z;y.style.display="none";m(y).trigger("hide")}return y}).delay(o,w)},fadeIn:function(w,y){return this.css("opacity","0.0").show(function(){return this.transform({opacity:"1.0",translate3d:[0,0,0]},w,y)})},fadeOut:function(z,B,w,A){if(w==null){w=0}if(A==null){A=0}return this.transform({opacity:"0.0",translate3d:[w,A,0]},z,function(){return this.hide(B)})},fadeLeft:function(w,y){return this.fadeOut(w,y,"-"+this.width().first(),0)},fadeRight:function(w,y){return this.fadeOut(w,y,this.width().first(),0)},fadeUp:function(w,y){return this.fadeOut(w,y,0,"-"+this.height().first())},fadeDown:function(w,y){return this.fadeOut(w,y,0,this.height().first())}}})})(a);(function(m){return m.plugin({provides:"unittest",depends:"core"},function(){var s,p,q,o,r,n;r=o=s=0;p=[];q=function(B,v,z){var u,A,t,y;if(!m.is("function",z)){return}y=function(C){return m.log(""+B+": "+v+"... "+C)};t=v.toLowerCase().indexOf("fail")!==-1;u=m.once(function(C){r--;if(!!C!==t){y("fail: "+C);s++;return p.push(v)}else{y("pass");o++;return m.provide(v)}});A=function(C){try{return z(C)}catch(D){return C(D)}finally{if(v.toLowerCase().indexOf("async")===-1){C()}}};r++;try{return A(u)}catch(w){return u(w)}};n=m.once(function(){return m.log("Passed: "+o+" Failed: "+s+" ["+p+"]")});return{$:{approx:function(u,t,v){if(v==null){v=0.1}return Math.abs(u-t)<v},assert:function(u,t){if(t==null){t="no message"}if(!u){throw new Error("Assertion failed: "+t)}},assertEqual:function(u,t,v){if(u!==t){throw Error(""+(v||"")+" ("+(u!=null?u.toString():void 0)+") should equal ("+(t!=null?t.toString():void 0)+")")}},assertArrayEqual:function(w,u,y){var z,B,t,v;v=[];for(z=B=0,t=w.length;0<=t?B<t:B>t;z=0<=t?++B:--B){try{v.push(m.assertEqual(w[z],u[z],y))}catch(A){throw Error(""+(y||"")+" "+(w!=null?w.toString():void 0)+" should equal "+(u!=null?u.toString():void 0))}}return v},testGroup:function(y,w){var z,v,u,t;v=setInterval((function(){if(r===0){clearInterval(v);return n()}}),50);t=[];for(u in w){z=w[u];t.push(q(y,u,z))}return t}},assertEqual:function(){var u,v,w,y,t,z=this;v=1<=arguments.length?i.call(arguments,0):[];if(v.length>1){v=v.map(function(A){if(m.is("function",A)){return A.call(z,z)}else{return A}});u=v[0];for(w=y=1,t=v.length;1<=t?y<t:y>t;w=1<=t?++y:--y){m.assertEqual(u,v[w])}}return this}}})})(a)}).call(this);