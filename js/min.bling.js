(function(){var m,t,r,k,s,o,j=Array.prototype.slice,w=Object.prototype.hasOwnProperty,y=Array.prototype.indexOf||function(d){for(var c=0,b=this.length;c<b;c++)if(w.call(this,c)&&this[c]===d)return c;return-1};s=function(){var d;d=1<=arguments.length?j.call(arguments,0):[];try{return console.log.apply(console,d)}catch(c){}return alert(d.join(", "))};null==Object.keys&&(Object.keys=function(d){var c,b;b=[];for(c in d)b.push(c);return b});if("undefined"===typeof extend||null===extend)extend=function(d,
c){var b,a,e,f,g;if(!c)return d;g=Object.keys(c);e=0;for(f=g.length;e<f;e++){b=g[e];a=c[b];a!=null&&(d[b]=a)}return d};t=function(d,c,b){return Object.defineProperty(d,c,extend({configurable:true,enumerable:true},b))};k=function(d,c){return c==null?d===c||d==="null"||d==="undefined":c.constructor===d||c.constructor.name===d||Object.prototype.toString.apply(c)==="[object "+d+"]"||k(d,c.__proto__)};r=function(d,c){if(typeof d==="function"){c.constructor=d;d=d.prototype}c.__proto__=d;return c};o=function(){var d,
c,b,a,e,f;c={};d={name:"unknown",match:function(){return true}};a=[];e=function(b,e){b in c||a.unshift(b);return c[e.name=b]=d!==e?r(d,e):e};f=function(a,b){var i,d;if(typeof a==="string"){c[a]==null&&(c[a]=e(a,{}));return c[a]=extend(c[a],b)}if(typeof a==="object"){d=[];for(i in a)d.push(f(i,a[i]));return d}};b=function(b){var e,i,d,f;i=0;for(d=a.length;i<d;i++){e=a[i];if((f=c[e])!=null&&f.match.call(b,b))return c[e]}};e("unknown",d);e("object",{match:function(){return typeof this==="object"}});
e("error",{match:function(){return k("Error",this)}});e("regexp",{match:function(){return k("RegExp",this)}});e("string",{match:function(){return typeof this==="string"||k(String,this)}});e("number",{match:function(){return k(Number,this)}});e("bool",{match:function(){var a;return typeof this==="boolean"||(a=""+this)==="true"||a==="false"}});e("array",{match:function(){return(typeof Array.isArray==="function"?Array.isArray(this):void 0)||k(Array,this)}});e("function",{match:function(){return typeof this===
"function"}});e("global",{match:function(){return typeof this==="object"&&"setInterval"in this}});e("undefined",{match:function(a){return a===void 0}});e("null",{match:function(a){return a===null}});return extend(function(a){return b(a).name},{register:e,lookup:b,extend:f,is:function(a,b){var i;return(i=c[a])!=null?i.match.call(b,b):void 0}})}();m=function(){function d(a,b){b==null&&(b=document||{});return r(d,extend(o.lookup(a).array(a,b),{selector:a,context:b}))}var c,b,a;d.plugin=function(a,b){var c,
d,i=this;if(b==null){b=a;a={}}if("depends"in a)return this.depends(a.depends,function(){return i.plugin({provides:a.provides},b)});try{if(d=b!=null?b.call(this,this):void 0){extend(this,d!=null?d.$:void 0);["$","name"].forEach(function(a){return delete d[a]});extend(this.prototype,d);for(c in d)this[c]||(this[c]=function(){var a;a=1<=arguments.length?j.call(arguments,0):[];return i.prototype[c].apply($(a[0]),a.slice(1))});a.provides!=null&&this.provide(a.provides)}}catch(q){s("failed to load plugin: "+
this.name+" '"+q.message+"'");throw q;}return this};a=[];c={};b=function(a){return(typeof a==="string"?a.split(","):a).filter(function(a){return!(a in c)})};d.depends=function(e,c){(e=b(e)).length===0?c():a.push(function(a){var b;return((b=e.indexOf(a))>-1?e.splice(b,1):void 0)&&e.length===0&&c});return c};d.provide=function(e){var d,g,h,i,q;q=b(e);h=0;for(i=q.length;h<i;h++){g=q[h];for(c[g]=d=0;d<a.length;)if(e=a[d](g)){a.splice(d,1);e()}else d++}return null};d.provides=function(a,b){return function(){var c;
c=1<=arguments.length?j.call(arguments,0):[];c=b.apply(null,c);d.provide(a);return c}};o.extend({unknown:{array:function(a){return[a]}},"null":{array:function(){return[]}},undefined:{array:function(){return[]}},array:{array:function(a){return a}},number:{array:function(a){return d.extend(Array(a),{length:0})}}});o.register("bling",{match:function(a){return k(d,a)},array:function(a){return a},hash:function(a){return a.map(d.hash).sum()},string:function(a){return d.symbol+"(["+a.map(d.toString).join(", ")+
"])"}});return d}();m.prototype=[];(function(d){d.plugin({provides:"type"},function(){return{$:{inherit:r,extend:extend,isType:k,type:o,is:o.is,isSimple:function(c){var b;return(b=o(c))==="string"||b==="number"||b==="bool"},isEmpty:function(c){return c===""||c===null||c===void 0}}}});d.plugin({provides:"symbol"},function(){var c,b,a;a=null;c={};(b=typeof window!=="undefined"&&window!==null?window:global).Bling=m;t(d,"symbol",{set:function(e){b[a]=c[a];c[a=e]=b[e];return b[e]=m},get:function(){return a}});
return{$:{symbol:"$"}}});d.plugin(function(){var c,b,a,e,d;(b=String.prototype).trimLeft||(b.trimLeft=function(){return this.replace(/^\s+/,"")});(a=String.prototype).split||(a.split=function(a){var b,i,e;b=[];for(i=0;(e=this.indexOf(a,i))>-1;){b.push(this.substring(i,e));i=e+1}return b});(e=String.prototype).lastIndexOf||(e.lastIndexOf=function(a,b,i){var e;i==null&&(i=-1);for(e=-1;(i=a.indexOf(b,i+1))>-1;)e=i;return e});(d=Array.prototype).join||(d.join=function(a){var b,i;a==null&&(a="");b=this.length;
if(b===0)return"";for(i=this[b-1];--b>0;)i=this[b-1]+a+i;return i});if(typeof Event!=="undefined"&&Event!==null)Event.prototype.preventAll=function(){this.preventDefault();this.stopPropagation();return this.cancelBubble=true};if(typeof Element!=="undefined"&&Element!==null){Element.prototype.matchesSelector=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.matchesSelector;if(Element.prototype.cloneNode.length===0){c=Element.prototype.cloneNode;Element.prototype.cloneNode=
function(a){var b,i,e,d;a==null&&(a=false);b=c.call(this);if(a){d=this.childNodes;i=0;for(e=d.length;i<e;i++){a=d[i];b.appendChild(a.cloneNode(true))}}return b}}}return{}});d.plugin({depends:"function",provides:"delay"},function(){return{$:{delay:function(){var c;c=d.extend([],function(){var b;b=function(){if(this.length)return this.shift()()};return{add:function(a,e){var c,g;a.order=e+d.now;c=0;for(g=this.length;0<=g?c<g:c>g;0<=g?c++:c--)if(this[c].order>a.order){this.splice(c,0,a);break}setTimeout(b,
e);return this},cancel:function(a){var b,c;b=0;for(c=this.length;0<=c?b<c:b>c;0<=c?b++:b--)if(this[b]===a){this.splice(b,1);break}return this}}}());return function(b,a){d.is("function",a)&&c.add(a,b);return{cancel:function(){return c.cancel(a)}}}}()},delay:function(c,b,a){a==null&&(a=this);return d.delay(c,d.bound(a,b))}}});d.plugin({provides:"core"},function(){var c;t(d,"now",{get:function(){return+new Date}});c=function(b,a){for(;b<0;)b=b+a.length;return Math.min(b,a.length)};return{$:{log:s,assert:function(b,
a){a==null&&(a="");if(!b)throw Error("assertion failed: "+a);},coalesce:function(){var b;b=1<=arguments.length?j.call(arguments,0):[];return d(b).coalesce()}},eq:function(b){return d([this[c(b,this)]])},each:function(b){var a,e,c;e=0;for(c=this.length;e<c;e++){a=this[e];b.call(a,a)}return this},map:function(b){var a,e,c,g;g=[];e=0;for(c=this.length;e<c;e++){a=this[e];g.push(b.call(a,a))}return d(g)},reduce:function(b,a){var e,c,d,h;e=this;if(a==null){a=this[0];e=this.skip(1)}d=0;for(h=e.length;d<
h;d++){c=e[d];a=b.call(c,a,c)}return a},union:function(b,a){var e,c,g,h;a==null&&(a=true);e=d();g=0;for(h=this.length;g<h;g++){c=this[g];e.contains(c,a)||e.push(c)}g=0;for(h=b.length;g<h;g++){c=b[g];e.contains(c,a)||e.push(c)}return e},distinct:function(b){b==null&&(b=true);return this.union(this,b)},intersect:function(b){var a,e,c,g;g=[];e=0;for(c=this.length;e<c;e++){a=this[e];y.call(b,a)>=0&&g.push(a)}return d(g)},contains:function(b,a){var e;a==null&&(a=true);return function(){var c,d,h;h=[];
c=0;for(d=this.length;c<d;c++){e=this[c];h.push(a&&e===b||!a&&e===b)}return h}.call(this).reduce(function(a,b){return a||b},false)},count:function(b,a){var c;a==null&&(a=true);return d(function(){var d,g,h;h=[];d=0;for(g=this.length;d<g;d++){c=this[d];(b===void 0||a&&c===b||!a&&c===b)&&h.push(1)}return h}.call(this)).sum()},coalesce:function(){var b,a,c,f;a=0;for(c=this.length;a<c;a++){b=this[a];if((f=d.type(b))==="array"||f==="bling")b=d(b).coalesce();if(b!=null)return b}return null},swap:function(b,
a){var e,b=c(b,this),a=c(a,this);if(b!==a){e=[this[a],this[b]];this[b]=e[0];this[a]=e[1]}return this},shuffle:function(){var b;for(b=this.length-1;b>=0;)this.swap(--b,Math.floor(Math.random()*b));return this},select:function(){var b;b=function(a){return function(){var b;return d.is("function",b=this[a])?d.bound(this,b):b}};return function(a){var c;return(c=a.indexOf("."))>-1?this.select(a.substr(0,c)).select(a.substr(c+1)):this.map(b(a))}}(),or:function(b){var a,c;a=0;for(c=this.length;0<=c?a<c:a>
c;0<=c?a++:a--)this[a]||(this[a]=b);return this},zap:function(b,a){var c,f,g;f=b.lastIndexOf(".");if(f>0){c=b.substr(0,f);g=b.substr(f+1);this.select(c).zap(g,a);return this}switch(d.type(a)){case "array":case "bling":this.each(function(){return this[b]=a[++f%a.length]});break;case "function":this.zap(b,this.select(b).map(a));break;default:this.each(function(){return this[b]=a})}return this},take:function(b){var a;b==null&&(b=1);var b=Math.min(b,this.length),c;c=[];for(a=0;0<=b?a<b:a>b;0<=b?a++:a--)c.push(this[a]);
return d(c)},skip:function(b){var a;b==null&&(b=0);a=Math.max(0,b|0);var c,f;f=[];b=a;for(c=this.length;a<=c?b<c:b>c;a<=c?b++:b--)f.push(this[b]);return d(f)},first:function(b){b==null&&(b=1);return b===1?this[0]:this.take(b)},last:function(b){b==null&&(b=1);return b===1?this[this.length-1]:this.skip(this.length-b)},slice:function(b,a){var e;b==null&&(b=0);if(a==null)a=this.length;var b=c(b,this),a=c(a,this),f;f=[];for(e=b;b<=a?e<a:e>a;b<=a?e++:e--)f.push(this[e]);return d(f)},extend:function(b){var a,
c,d;c=0;for(d=b.length;c<d;c++){a=b[c];this.push(a)}return this},push:function(b){Array.prototype.push.call(this,b);return this},filter:function(b){var a;a=function(){switch(d.type(b)){case "string":return function(a){return a.matchesSelector(b)};case "regexp":return function(a){return b.test(a)};case "function":return b;default:throw Error("unsupported type passed to filter: "+d.type(b));}}();return d(Array.prototype.filter.call(this,a))},matches:function(b){return this.select("matchesSelector").call(b)},
querySelectorAll:function(b){return this.filter("*").reduce(function(a,c){return a.extend(c.querySelectorAll(b))},d())},weave:function(b){var a,c,f;a=d();for(c=f=this.length-1;f<=0?c<=0:c>=0;f<=0?c++:c--)a[c*2+1]=this[c];c=0;for(f=b.length;0<=f?c<f:c>f;0<=f?c++:c--)a[c*2]=b[c];return a},fold:function(b){var a,c;c=this.length;var f,g;g=[];a=0;for(f=c-1;a<f;a=a+2)g.push(b.call(this,this[a],this[a+1]));a=d(g);c%2===1&&a.push(b.call(this,this[c-1],void 0));return a},flatten:function(){var b,a,c,f,g,h,
i;b=d();f=0;for(h=this.length;f<h;f++){a=this[f];g=0;for(i=a.length;g<i;g++){c=a[g];b.push(c)}}return b},call:function(){return this.apply(null,arguments)},apply:function(b,a){return this.map(function(){return d.is("function",this)?this.apply(b,a):this})},log:function(b){b?d.log(b,this,this.length+" items"):d.log(this,this.length+" items");return this},toArray:function(){this.__proto__=Array.prototype;return this}}});d.plugin({provides:"math"},function(){return{$:{range:function(c,b,a){var e;a==null&&
(a=1);b<c&&a>0&&(a=a*-1);var f;f=[];e=0;for(b=Math.ceil((b-c)/a);0<=b?e<b:e>b;0<=b?e++:e--)f.push(c+e*a);return d(f)},zeros:function(c){var b,a;a=[];for(b=0;0<=c?b<c:b>c;0<=c?b++:b--)a.push(0);return d(a)},ones:function(c){var b,a;a=[];for(b=0;0<=c?b<c:b>c;0<=c?b++:b--)a.push(1);return d(a)}},floats:function(){return this.map(parseFloat)},ints:function(){return this.map(function(){return parseInt(this,10)})},px:function(c){return this.ints().map(function(){return d.px(this,c)})},min:function(){return this.reduce(function(c){return Math.min(this,
c)})},max:function(){return this.reduce(function(c){return Math.max(this,c)})},mean:function(){return this.sum()/this.length},sum:function(){return this.reduce(function(c){return c+this})},squares:function(){return this.map(function(){return this*this})},magnitude:function(){return Math.sqrt(this.floats().squares().sum())},scale:function(c){return this.map(function(){return c*this})},add:function(c){var b;switch(d.type(c)){case "number":return this.map(function(){return c+this});case "bling":case "array":return d(function(){var a,
d;d=[];b=0;for(a=Math.min(this.length,c.length)-1;0<=a?b<a:b>a;0<=a?b++:b--)d.push(this[b]+c[b]);return d}.call(this))}},normalize:function(){return this.scale(1/this.magnitude())}}});d.plugin({depends:"function",provides:"string"},function(){d.type.extend({unknown:{string:function(c){var b;return(b=typeof c.toString==="function"?c.toString():void 0)!=null?b:""+c}},"null":{string:function(){return"null"}},undefined:{string:function(){return"undefined"}},string:{string:d.identity},array:{string:function(c){var b,
a,e,f;f=[];a=0;for(e=c.length;a<e;a++){b=c[a];f.push(d.toString(b))}return"["+f.join(",")+"]"}},object:{string:function(c){var b,a,e,f;f=[];a=0;for(e=c.length;a<e;a++){b=c[a];f.push(""+b+":"+d.toString(a))}return"{"+f.join(", ")+"}"}},number:{string:function(c){switch(true){case c.precision!=null:return c.toPrecision(c.precision);case c.fixed!=null:return c.toFixed(c.fixed);default:return""+c}}}});return{$:{toString:function(c){return d.type.lookup(c).string(c)},px:function(c,b){b==null&&(b=0);return c!=
null&&parseInt(c,10)+(b|0)+"px"},capitalize:function(c){return c.split(" ").map(function(b){return b[0].toUpperCase()+b.substring(1).toLowerCase()}).join(" ")},dashize:function(c){var b,a,d,f;d="";a=0;for(f=(c!=null?c.length:NaN)|0;0<=f?a<f:a>f;0<=f?a++:a--){b=c.charCodeAt(a);if(91>b&&b>64){b=b+32;d=d+"-"}d=d+String.fromCharCode(b)}return d},camelize:function(c){var b;for(c.split("-");(b=c!=null?c.indexOf("-"):void 0)>-1;)c=d.stringSplice(c,b,b+2,c[b+1].toUpperCase());return c},padLeft:function(c,
b,a){for(a==null&&(a=" ");c.length<b;)c=a+c;return c},padRight:function(c,b,a){for(a==null&&(a=" ");c.length<b;)c=c+a;return c},stringCount:function(c,b,a,e){var f;a==null&&(a=0);e==null&&(e=0);return(f=c.indexOf(b,a))>a-1?d.count(c,b,f+1,e+1):e},stringSplice:function(c,b,a,d){var f;f=c.length;a<0&&(a=a+f);b<0&&(b=b+f);return c.substring(0,b)+d+c.substring(a)},checksum:function(c){var b,a,d,f;b=1;d=a=0;for(f=c.length;0<=f?d<f:d>f;0<=f?d++:d--){b=(b+c.charCodeAt(d))%65521;a=(a+b)%65521}return a<<16|
b},stringBuilder:function(){var c,b=this;if(d.is("window",this))return new d.stringBuilder;c=[];this.length=0;this.append=function(a){c.push(a);return b.length=b.length+((a!=null?a.toString().length:NaN)|0)};this.prepend=function(a){c.splice(0,0,a);return b.length=b.length+((a!=null?a.toString().length:NaN)|0)};this.clear=function(){var a;a=b.toString();c=[];b.length=0;return a};this.toString=function(){return c.join("")};return this}},toString:function(){return d.toString(this)}}});d.plugin({provides:"function",
depends:"hash"},function(){return{$:{identity:function(c){return c},not:function(c){return function(){var b;b=1<=arguments.length?j.call(arguments,0):[];return!c.apply(this,b)}},compose:function(c,b){return function(a){return c.call(void 0,b.call(a,a))}},and:function(c,b){return function(a){return b.call(a,a)&&c.call(a,a)}},once:function(c,b){b==null&&(b=1);c.n=b;return function(){var a;a=1<=arguments.length?j.call(arguments,0):[];if(c.n-- >0)return c.apply(this,a)}},bound:function(c,b,a){var e;a==
null&&(a=[]);if(d.is("function",b.bind)){a.splice(0,0,c);e=b.bind.apply(b,a)}else e=function(){var d;d=1<=arguments.length?j.call(arguments,0):[];return b.apply(c,a(a.length?void 0:d))};return d.extend(e,{toString:function(){return"bound-method of "+c+"."+b.name}})},memoize:function(c){var b;b={};return function(){var a,e,f;a=1<=arguments.length?j.call(arguments,0):[];return(f=b[e=d.hash(a)])!=null?f:b[e]=c.apply(this,a)}}}}});d.plugin({provides:"trace",depends:"function,type"},function(){d.type.extend({unknown:{trace:d.identity},
object:{trace:function(c,b,a){var e,f,g,h;h=Object.keys(c);f=0;for(g=h.length;f<g;f++){e=h[f];c[e]=d.trace(c[e],""+b+"."+e,a)}return c}},array:{trace:function(c,b,a){var e,f;e=0;for(f=c.length;0<=f?e<f:e>f;0<=f?e++:e--)c[e]=d.trace(c[e],""+b+"["+e+"]",a);return c}},"function":{trace:function(c,b,a){var e;e=function(){var e;e=1<=arguments.length?j.call(arguments,0):[];a(""+(this.name||d.type(this))+"."+(b||c.name)+"(",e,")");return c.apply(this,e)};a("Trace: "+(b||c.name)+" created.");e.toString=c.toString;
return e}}});return{$:{trace:function(c,b,a){return d.type.lookup(c).trace(c,b,a)}},trace:function(c,b){return this.map(function(){return d.trace(this,c,b)})}}});d.plugin({provides:"hash",depends:"type"},function(){d.type.extend({unknown:{hash:function(c){return d.checksum(d.toString(c))}},object:{hash:function(c){var b,a;a=[];for(b in c)a.push(d.hash(c[b]));return a+d.hash(Object.keys(c))}},array:{hash:function(){var c;return function(){var b,a,e;e=[];b=0;for(a=x.length;b<a;b++){c=x[b];e.push(d.hash(c))}return e}().reduce(function(b,
a){return b+a})}},bool:{hash:function(c){return parseInt(c?1:void 0)}}});return{$:{hash:function(c){return d.type.lookup(c).hash(c)}},hash:function(){return d.hash(this)}}});d.plugin({provides:"pubsub"},function(){var c;c={};return{$:{publish:function(){var b,a,d,f,g;a=arguments[0];b=2<=arguments.length?j.call(arguments,1):[];g=c[a]||(c[a]=[]);d=0;for(f=g.length;d<f;d++){a=g[d];a.apply(null,b)}return this},subscribe:function(b,a){(c[b]||(c[b]=[])).push(a);return a},unsubscribe:function(b,a){var d,
f;if(a==null)return c[b]=[];d=c[b]||(c[b]=[]);if((f=d.indexOf(a))>-1)return d.splice(f,f)}}}});d.plugin({provides:"throttle",depends:"core"},function(){return{$:{throttle:function(c,b,a){b==null&&(b=250);a==null&&(a=0);return function(){var e,f;e=1<=arguments.length?j.call(arguments,0):[];f=d.now-a;if(f>b){a=a+f;return c.apply(this,e)}return null}},debounce:function(c,b,a){b==null&&(b=250);a==null&&(a=0);return function(){var e,f;e=1<=arguments.length?j.call(arguments,0):[];a=a+(f=d.now-a);return c.apply(this,
e(f>b?void 0:null))}}}}});d.plugin({provides:"EventEmitter"},function(){return{$:{EventEmitter:function(){function c(){this.__event={}}c.prototype.addListener=function(b,a){var c;((c=this.__event)[b]||(c[b]=[])).push(a);return this.emit("newListener",b,a)};c.prototype.on=function(b,a){return this.addListener(b,a)};c.prototype.once=function(b,a){var c;return this.addListener(b,c=function(){var b;b=1<=arguments.length?j.call(arguments,0):[];this.removeListener(c);return a.apply(null,b)})};c.prototype.removeListener=
function(b,a){var c,d;if((c=((d=this.__event)[b]||(d[b]=[])).indexOf(a))>-1)return this.__event[b].splice(c,1)};c.prototype.removeAllListeners=function(b){return this.__event[b]=[]};c.prototype.setMaxListeners=function(){};c.prototype.listeners=function(b){return this.__event[b]};c.prototype.emit=function(){var b,a,c,d,g;a=arguments[0];b=2<=arguments.length?j.call(arguments,1):[];a=(c=this.__event)[a]||(c[a]=[]);d=0;for(g=a.length;d<g;d++){c=a[d];c.apply(this,b)}return null};return c}()}}});(typeof window!==
"undefined"&&window!==null?window:global).document!=null&&d.plugin({depends:"function",provides:"dom"},function(){var c,b,a,e,f,g,h;d.type.register("nodelist",{match:function(a){return a!=null&&d.isType("NodeList",a)},hash:function(){var a;return d(function(){var b,c,e;e=[];b=0;for(c=x.length;b<c;b++){a=x[b];e.push(d.hash(a))}return e}()).sum()},array:d.identity,string:function(a){return"{nodelist:"+d(a).select("nodeName").join(",")+"}"},node:function(a){return d(a).toFragment()}});d.type.register("node",
{match:function(a){return(a!=null?a.nodeType:void 0)>0},hash:function(a){return d.checksum(a.nodeName)+d.hash(a.attributes)+d.checksum(a.innerHTML)},string:function(a){return a.toString()},node:d.identity});d.type.register("fragment",{match:function(a){return(a!=null?a.nodeType:void 0)===11},hash:function(a){var b;return d(function(){var c,e,f,h;f=a.childNodes;h=[];c=0;for(e=f.length;c<e;c++){b=f[c];h.push(d.hash(b))}return h}()).sum()},string:function(a){return a.toString()},node:d.identity});d.type.register("html",
{match:function(a){var b;return typeof a==="string"&&(b=a.trimLeft())[0]==="<"&&b[b.length-1]===">"},node:function(a){var b;return d.type.lookup(b=m.HTML.parse(a)).node(b)},array:function(a,b){var c;return d.type.lookup(c=m.HTML.parse(a)).array(c,b)}});d.type.extend({unknown:{node:function(){return null}},bling:{node:function(a){return a.toFragment()}},string:{node:function(a){return d(a).toFragment()},array:function(a,b){return typeof b.querySelectorAll==="function"?b.querySelectorAll(a):void 0}},
"function":{node:function(a){return d(a.toString()).toFragment()}}});g=function(a){var b;if(a.parentNode==null){b=document.createDocumentFragment();b.appendChild(a)}return a};b=function(a,b){return g(a).parentNode.insertBefore(b,a)};c=function(a,b){return g(a).parentNode.insertBefore(b,a.nextSibling)};h=function(a){return d.type.lookup(a).node(a)};e=null;a=function(a){return function(){return window.getComputedStyle(this,null).getPropertyValue(a)}};f=function(a){return function(b){return b!=null?
this.css(a,b):this.rect().select(a)}};return{$:{HTML:{parse:function(a){var b,c,d,e;(e=document.createElement("div")).innerHTML=a;if(d=(a=e.childNodes).length===1)return e.removeChild(a[0]);b=document.createDocumentFragment();for(c=0;0<=d?c<d:c>d;0<=d?c++:c--)b.appendChild(e.removeChild(a[0]));return b},stringify:function(a){var b,c;switch(d.type(a)){case "string":case "html":return a;case "node":case "fragment":b=document.createElement("div");b.appendChild(a=a.cloneNode(true));c=b.innerHTML;b.removeChild(a);
return c;default:return"HTML.stringify of unknown type: "+d.type(a)}},escape:function(a){e||(e=d("<div>&nbsp;</div>").child(0));a=e.zap("data",a).select("parentNode.innerHTML").first();e.zap("data","");return a}}},html:function(a){switch(d.type(a)){case "undefined":case "null":return this.select("innerHTML");case "string":return this.zap("innerHTML",a);case "bling":return this.html(a.toFragment());case "node":return this.each(function(){var b;this.replaceChild(this.childNodes[0],a);for(b=[];this.childNodes.length>
1;)b.push(this.removeChild(this.childNodes[1]));return b})}},append:function(a){a=h(a);return this.each(function(){return this.appendChild(a.cloneNode(true))})},appendTo:function(a){var b,c;b=this.map(function(){return this.cloneNode(true)});c=0;d(a).each(function(){return this.appendChild(b[c++])});return b},prepend:function(a){if(a!=null){a=h(a);this.take(1).each(function(){return b(this.childNodes[0],a)});this.skip(1).each(function(){return b(this.childNodes[0],a.cloneNode(true))})}return this},
prependTo:function(a){a!=null&&d(a).prepend(this);return this},before:function(a){if(a!=null){a=h(a);this.take(1).each(function(){return b(this,a)});this.skip(1).each(function(){return b(this,a.cloneNode(true))})}return this},after:function(a){if(a!=null){a=h(a);this.take(1).each(function(){return c(this,a)});this.skip(1).each(function(){return c(this,a.cloneNode(true))})}return this},wrap:function(a){a=h(a);if(d.is("fragment",a))throw Error("cannot wrap with a fragment");return this.each(function(b){var c,
e;switch(d.type(b)){case "fragment":return a.appendChild(b);case "node":if(e=b.parentNode){c=document.createElement("dummy");a.appendChild(e.replaceChild(c,b));return e.replaceChild(a,c)}return a.appendChild(b)}})},unwrap:function(){return this.each(function(){if(this.parentNode&&this.parentNode.parentNode)return this.parentNode.parentNode.replaceChild(this,this.parentNode);if(this.parentNode)return this.parentNode.removeChild(this)})},replace:function(a){var b,c,a=h(a);b=d();c=0;this.take(1).each(function(){var d;
(d=this.parentNode)!=null&&d.replaceChild(a,this);return b[c++]=a});this.skip(1).each(function(){var d,e;d=a.cloneNode(true);(e=this.parentNode)!=null&&e.replaceChild(d,this);return b[c++]=d});return b},attr:function(a,b){switch(b){case void 0:return this.select("getAttribute").call(a,b);case null:return this.select("removeAttribute").call(a,b);default:this.select("setAttribute").call(a,b);return this}},data:function(a,b){a="data-"+d.dashize(a);return this.attr(a,b)},addClass:function(a){return this.removeClass(a).each(function(){var b;
b=this.className.split(" ").filter(function(a){return a!==""});b.push(a);return this.className=b.join(" ")})},removeClass:function(a){var b;b=function(b){return b!==a};return this.each(function(){var a;if(((a=this.className)!=null?a.split(" ").filter(b).join(" "):void 0).length===0)return this.removeAttribute("class")})},toggleClass:function(a){var b;b=function(b){return b!==a};return this.each(function(){var c,e;c=this.className.split(" ");e=d.not(d.isEmpty);c.indexOf(a)>-1?e=d.and(b,e):c.push(a);
this.className=c=c.filter(e).join(" ");if(c.length===0)return this.removeAttribute("class")})},hasClass:function(a){return this.select("className.split").call(" ").select("indexOf").call(a).map(function(a){return a>-1})},text:function(a){return a!=null?this.zap("textContent",a):this.select("textContent")},val:function(a){return a!=null?this.zap("value",a):this.select("value")},css:function(b,c){var e,f,h,g,l;if(c!=null||d.is("object",b)){g=this.select("style.setProperty");if(d.is("object",b))for(e in b)g.call(e,
b[e],"");else if(d.is("string",c))g.call(b,c,"");else if(d.is("array",c)){e=0;for(l=f=Math.max(c.length,h=g.len());0<=l?e<l:e>l;0<=l?e++:e--)g[e%h](b,c[e%f],"")}return this}e=this.map(a(b));return this.select("style").select(b).weave(e).fold(function(a,b){return a||b})},defaultCss:function(a,b){var c,e,f;e=this.selector;f="";if(d.is("string",a))if(d.is("string",b))f=f+(""+e+" { "+a+": "+b+" } ");else throw Error("defaultCss requires a value with a string key");else if(d.is("object",a))for(c in a+
"} ")f=f+(""+e+" { "+(""+c+": "+a[c]+"; "));d("<style></style>").text(f).appendTo("head");return this},rect:function(){return this.select("getBoundingClientRect").call()},width:f("width"),height:f("height"),top:f("top"),left:f("left"),bottom:f("bottom"),right:f("right"),position:function(a,b){switch(true){case a==null:return this.rect();case b==null:return this.css("left",d.px(a));default:return this.css({top:d.px(b),left:d.px(a)})}},scrollToCenter:function(){document.body.scrollTop=this[0].offsetTop-
window.innerHeight/2;return this},child:function(a){return this.select("childNodes").map(function(){return this[a<0?a+this.length:a]})},parents:function(){return this.map(function(){var a;a=this;var b;for(b=[];a=a!=null?a.parentNode:void 0;)b.push(a);return d(b)})},prev:function(){return this.map(function(){var a;a=this;var b;for(b=[];a=a!=null?a.previousSibling:void 0;)b.push(a);return d(b)})},next:function(){return this.map(function(){var a;a=this;var b;for(b=[];a=a!=null?a.nextSibling:void 0;)b.push(a);
return d(b)})},remove:function(){return this.each(function(){var a;return(a=this.parentNode)!=null?a.removeChild(this):void 0})},find:function(a){return this.filter("*").map(function(){return d(a,this)}).flatten()},clone:function(a){a==null&&(a=true);return this.map(function(){if(d.is("node",this))return this.cloneNode(a)})},toFragment:function(){var a;if(this.length>1){a=document.createDocumentFragment();this.map(h).map(d.bound(a,a.appendChild));return a}return h(this[0])}}});d.plugin({depends:"dom"},
function(){var c,b,a,e,f,g,h;b={slow:700,medium:500,normal:300,fast:100,instant:0,now:0};c=/(?:scale(?:3d)*|translate(?:[XYZ]|3d)*|rotate(?:[XYZ]|3d)*)/;a=document.createElement("div").style;e="transform";g="transition-property";f="transition-duration";h="transition-timing-function";if("WebkitTransform"in a){e="-webkit-transform";g="-webkit-transition-property";f="-webkit-transition-duration";h="-webkit-transition-timing-function"}else if("MozTransform"in a){e="-moz-transform";g="-moz-transition-property";
f="-moz-transition-duration";h="-moz-transition-timing-function"}else if("OTransform"in a){e="-o-transform";g="-o-transition-property";f="-o-transition-duration";h="-o-transition-timing-function"}return{$:{duration:function(a){var c;c=b[a];return c!=null?c:parseFloat(a)}},transform:function(a,b,p,u){var v,n,l,j,k;if(d.is("function",b)){u=b;b=p=null}else if(d.is("function",p)){u=p;p=null}b==null&&(b="normal");p||(p="ease");v=d.duration(b)+"ms";j=[];k="";b={};for(n in a)if(c.test(n)){l=a[n];l.join?
l=d(l).px().join(", "):l.toString&&(l=l.toString());k=k+(" "+n+"("+l+")")}else b[n]=a[n];for(n in b)j.push(n);k&&j.push(e);b[g]=j.join(", ");b[f]=j.map(function(){return v}).join(", ");b[h]=j.map(function(){return p}).join(", ");k&&(b[e]=k);this.css(b);return this.delay(v,u)},hide:function(a){return this.each(function(){if(this.style){this._display="";if(this.style.display===false)this._display=this.syle.display;return this.style.display="none"}}).trigger("hide".delay(30,a))},show:function(a){return this.each(function(){if(this.style){this.style.display=
this._display;return delete this._display}}).trigger("show".delay(30,a))},toggle:function(a){return this.weave(this.css("display")).fold(function(a,b){if(a==="none"){b.style.display=b._display||"";delete b._display;d(b).trigger("show")}else{b._display=a;b.style.display="none";d(b).trigger("hide")}return b}).delay(30,a)},fadeIn:function(a,b){return this.css("opacity","0.0").show(function(){return this.transform({opacity:"1.0",translate3d:[0,0,0]},a,b)})},fadeOut:function(a,b,c,d){c==null&&(c=0);d==
null&&(d=0);return this.transform({opacity:"0.0",translate3d:[c,d,0]},a,function(){return this.hide(b)})},fadeLeft:function(a,b){return this.fadeOut(a,b,"-"+this.width().first(),0)},fadeRight:function(a,b){return this.fadeOut(a,b,this.width().first(),0)},fadeUp:function(a,b){return this.fadeOut(a,b,0,"-"+this.height().first())},fadeDown:function(a,b){return this.fadeOut(a,b,0,this.height().first())}}});d.plugin({depends:"dom"},function(){var c;c=function(b){var a,b=JSON.parse(JSON.stringify(b)),c;
c=[];for(a in b)c.push(""+a+"="+escape(b[a]));return c.join("&")};d.type.register("http",{match:function(b){return d.isType("XMLHttpRequest",b)},array:function(b){return[b]}});return{$:{http:function(b,a){var e;a==null&&(a={});e=new XMLHttpRequest;d.is("function",a)&&(a={success:d.bound(e,a)});a=d.extend({method:"GET",data:null,state:d.identity,success:d.identity,error:d.identity,async:true,asBlob:false,timeout:0,followRedirects:false,withCredentials:false},a);a.state=d.bound(e,a.state);a.success=
d.bound(e,a.success);a.error=d.bound(e,a.error);if(a.data&&a.method==="GET")b=b+("?"+c(a.data));else if(a.data&&a.method==="POST")a.data=c(a.data);e.open(a.method,b,a.async);e=d.extend(e,{asBlob:a.asBlob,timeout:a.timeout,followRedirects:a.followRedirects,withCredentials:a.withCredentials,onreadystatechange:function(){typeof a.state==="function"&&a.state();if(e.readyState===4)return e.status===200?a.success(e.responseText):a.error(e.status,e.statusText)}});e.send(a.data);return d(e)},post:function(b,
a){a==null&&(a={});d.is("function",a)&&(a={success:a});a.method="POST";return d.http(b,a)},get:function(b,a){a==null&&(a={});d.is("function",a)&&(a={success:a});a.method="GET";return d.http(b,a)}}}});d.plugin({depends:"dom,function,core",provides:"event"},function(){var c,b,a,e,f,g;c=/,* +/;b=function(a){return function(b){return this.bind(a,b)(d.is("function",b)?void 0:this.trigger(a,b))}};a=function(a,b,c,e,f){return d(b).bind(c,f).each(function(){var b,d;return((b=(d=this.__alive__||(this.__alive__=
{}))[a]||(d[a]={}))[c]||(b[c]={}))[e]=f})};g=function(a,b,c,e){var f;f=d(b);return f.each(function(){var b;b=this.__alive__||(this.__alive__={});b=b[a]||(b[a]={});b=b[c]||(b[c]={});f.unbind(c,b[e]);return delete b[e]})};f=d.once(function(){d(document).trigger("ready").unbind("ready");typeof document.removeEventListener==="function"&&document.removeEventListener("DOMContentLoaded",f,false);return typeof window.removeEventListener==="function"?window.removeEventListener("load",f,false):void 0});d.once(function(){typeof document.addEventListener===
"function"&&document.addEventListener("DOMContentLoaded",f,false);return typeof window.addEventListener==="function"?window.addEventListener("load",f,false):void 0})();e={bind:function(a,b){var d,f;d=(a||"").split(c);f=function(a){e=b.apply(this,arguments);e===false&&a.preventAll();return e};return this.each(function(){var a,b,c,e;e=[];b=0;for(c=d.length;b<c;b++){a=d[b];e.push(this.addEventListener(a,f,false))}return e})},unbind:function(a,b){var d;d=(a||"").split(c);return this.each(function(){var a,
c,e,f;f=[];c=0;for(e=d.length;c<e;c++){a=d[c];f.push(this.removeEventListener(a,b,null))}return f})},once:function(a,b){var d,e,f,g,j;d=(a||"").split(c);j=[];f=0;for(g=d.length;f<g;f++){e=d[f];j.push(this.bind(e,function(a){b.call(this,a);return this.removeEventListener(a.type,arguments.callee,null)}))}return j},cycle:function(){var a,b,d,e,f,g,k;a=arguments[0];d=2<=arguments.length?j.call(arguments,1):[];a=(a||"").split(c);f=d.length;b=function(a){a==null&&(a=-1);return function(b){return d[a=++a%
f].call(this,b)}};g=0;for(k=a.length;g<k;g++){e=a[g];this.bind(e,b())}return this},trigger:function(a,b){var e,f,g,j,k;b==null&&(b={});b=d.extend({bubbles:true,cancelable:true},b);k=(a||"").split(c);g=0;for(j=k.length;g<j;g++){f=k[g];if(f==="click"||f==="mousemove"||f==="mousedown"||f==="mouseup"||f==="mouseover"||f==="mouseout"){e=document.createEvent("MouseEvents");b=d.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:null},
b);e.initMouseEvent(f,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}else if(f==="blur"||f==="focus"||f==="reset"||f==="submit"||f==="abort"||f==="change"||f==="load"||f==="unload"){e=document.createEvent("UIEvents");e.initUIEvent(f,b.bubbles,b.cancelable,window,1)}else if(f==="touchstart"||f==="touchmove"||f==="touchend"||f==="touchcancel"){e=document.createEvent("TouchEvents");b=d.extend({detail:1,
screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},b);e.initTouchEvent(f,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.touches,b.targetTouches,b.changedTouches,b.scale,b.rotation)}else if(f==="gesturestart"||f==="gestureend"||f==="gesturecancel"){e=document.createEvent("GestureEvents");b=d.extend({detail:1,screenX:0,
screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,target:null,scale:1,rotation:0},b);e.initGestureEvent(f,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.target,b.scale,b.rotation)}else{e=document.createEvent("Events");e.initEvent(f,b.bubbles,b.cancelable);try{e=d.extend(e,b)}catch(l){}}if(e)try{this.each(function(){return this.dispatchEvent(e)})}catch(m){s("dispatchEvent error:",m)}}return this},
live:function(b,c){var e,f;f=this.selector;e=this.context;a(f,e,b,c,function(a){return d(f,e).intersect(d(a.target).parents().first().union(d(a.target))).each(function(){return c.call(a.target=this,a)})});return this},die:function(a,b){d(this.context).unbind(a,g(this.selector,this.context,a,b));return this},liveCycle:function(){var a,b,c,d;a=arguments[0];b=2<=arguments.length?j.call(arguments,1):[];c=-1;d=b.length;return this.live(a,function(a){return b[c=++c%d].call(this,a)})},click:function(a){var b;
a==null&&(a={});((b=this.css("cursor"))==="auto"||b==="")&&this.css("cursor","pointer");return d.is("function",a)?this.bind("click",a):this.trigger("click",a)},ready:function(a){return f.n<=0?a.call(this):this.bind("ready",a)}};["mousemove","mousedown","mouseup","mouseover","mouseout","blur","focus","load","unload","reset","submit","keyup","keydown","change","abort","cut","copy","paste","selection","drag","drop","orientationchange","touchstart","touchmove","touchend","touchcancel","gesturestart",
"gestureend","gesturecancel","hashchange"].forEach(function(a){return e[a]=b(a)});return e});return d.plugin({depends:"dom",provides:"lazy"},function(){var c;c=function(b,a){return d("head").append(d.extend(document.createElement(b),a))};return{$:{script:function(b){return c("script",{src:b})},style:function(b){return c("link",{href:b,rel:"stylesheet"})}}}})})(m)}).call(this);
