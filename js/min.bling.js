(function(){var m,v,E,t,o=Array.prototype.slice,G=Object.prototype.hasOwnProperty,H=function(a,g){function i(){this.constructor=a}for(var f in g)G.call(g,f)&&(a[f]=g[f]);i.prototype=g.prototype;a.prototype=new i;a.__super__=g.prototype;return a},F=function(a,g){return function(){return a.apply(g,arguments)}};!1 in document?alert("This browser is not supported"):(t=console&&console.log?function(){var a;a=1<=arguments.length?o.call(arguments,0):[];return console.log.apply(console,a)}:function(){var a;
a=1<=arguments.length?o.call(arguments,0):[];return alert(a.join(", "))},v=/,* +/,E=/\[object (\w+)\]/,m=function(a,g){var i;g==null&&(g=document);i=Object.Type(a);if(i==="node"||i==="window"||i==="function")i=[a];else if(i==="number")i=Array(a);else if(i==="string")if(a=a.trimLeft(),a[0]==="<")i=[m.HTML.parse(a)];else if(g.querySelectorAll)i=g.querySelectorAll(a);else throw Error("invalid context: "+g+" (type: "+Object.Type(g)+")");else if(i==="array"||i==="bling"||i==="nodelist")i=a;else if(i===
"undefined"||i==="null")i=[];else throw Error("invalid selector: "+a+" (type: "+Object.Type(a)+")");i.constructor=m;i.__proto__=m.fn;i.selector=a;i.context=g;i.length=i.len();return i},m.fn=[],Object.Keys=function(a,g){var i,f,e;g==null&&(g=!1);e=[];f=0;for(i in a)if(g||a.hasOwnProperty(i))e[f++]=i;return e},Object.Extend=function(a,g,i){var f,e,b;if(Object.prototype.toString.apply(i)==="[object Array]")for(f in i)g[i[f]]!==void 0&&(a[i[f]]=g[i[f]]);else{b=Object.Keys(g);for(i=0,e=b.length;i<e;i++)f=
b[i],a[f]=g[f]}return a},Object.Extend(Object,{Type:function(a){var g;switch(!0){case a===void 0:return"undefined";case a===null:return"null";case Object.IsString(a):return"string";case Object.IsType(a,m):return"bling";case Object.IsType(a,NodeList):return"nodelist";case Object.IsArray(a):return"array";case Object.IsNumber(a):return"number";case Object.IsFragment(a):return"fragment";case Object.IsNode(a):return"node";case Object.IsFunc(a):return"function";case Object.IsType(a,"RegExp"):return"regexp";
case (g=String(a))==="true"||g==="false":return"boolean";case Object.IsError(a):return"error";case Object.IsObject(a):return"setInterval"in a?"window":"object"}},IsType:function(a,g){return a===null?a===g:a.constructor===g?!0:typeof g==="string"?a.constructor.name===g||Object.prototype.toString.apply(a).replace(E,"$1")===g:Object.IsType(a.__proto__,g)},IsString:function(a){return a!=null&&(typeof a==="string"||Object.IsType(a,String))},IsNumber:function(a){return a!=null&&Object.IsType(a,Number)},
IsBoolean:function(a){return typeof a==="boolean"},IsFunc:function(a){return a!=null&&(typeof a==="function"||Object.IsType(a,Function))&&a.call!=null},IsNode:function(a){return a!=null&&a.nodeType>0},IsFragment:function(a){return a!=null&&a.nodeType===11},IsArray:function(a){return a!=null&&(Object.ToString(a)==="[object Array]"||Object.IsType(a,Array))},IsBling:function(a){return a!=null&&Object.IsType(a,m)},IsError:function(a){var g;return a!=null&&((g=a.constructor)!=null?g.name:void 0)==="Error"},
IsObject:function(a){return a!=null&&typeof a==="object"},IsDefined:function(a){return a!=null},Unbox:function(a){if(a!=null&&Object.IsObject(a)){if(Object.IsString(a))return a.toString();if(Object.IsNumber(a))return Number(a)}return a},ToString:function(a){return Object.prototype.toString.apply(a)}}),Object.Extend(Function,{Empty:function(){},Bound:function(a,g,i){var f;i==null&&(i=[]);"bind"in a?(i.splice(0,0,g),f=a.bind.apply(a,i)):f=function(){1<=arguments.length&&o.call(arguments,0);return a.apply(g,
i)};f.toString=function(){return"bound-method of "+g+"."+a.name};return f},Trace:function(a,g,i){var f;i==null&&(i=t);f=function(){var e;e=1<=arguments.length?o.call(arguments,0):[];i(""+(g||"")+(this.name||this)+"."+a.name+"(",e,")");return a.apply(this,e)};i("Function.Trace: "+(g||a.name)+" created.");f.toString=a.toString;return f},NotNull:function(a){return a!==null},IndexFound:function(a){return a>-1},ReduceAnd:function(a){return a&&this},UpperLimit:function(a){return function(g){return Math.min(a,
g)}},LowerLimit:function(a){return function(g){return Math.max(a,g)}},Px:function(a){return function(){return Number.Px(this,a)}}}),Object.Extend(Array,{Coalesce:function(){var a,g,i,f;a=1<=arguments.length?o.call(arguments,0):[];if(Object.IsArray(a[0]))return Array.Coalesce.apply(Array,a[0]);else for(i=0,f=a.length;i<f;i++)if(g=a[i],g!=null)return g},Extend:function(a,g){var i,f,e,b;f=a.length;for(e=0,b=g.length;e<b;e++)i=g[e],a[f++]=i;return a}}),Object.Extend(Number,{Px:function(a,g){g==null&&
(g=0);return a!=null&&parseInt(a,10)+(g|0)+"px"},AtLeast:function(a){return function(g){return Math.max(parseFloat(g||0),a)}},AtMost:function(a){return function(g){return Math.min(parseFloat(g||0),a)}}}),Object.Extend(String,{PadLeft:function(a,g,i){for(i==null&&(i=" ");a.length<g;)a=i+a;return a},PadRight:function(a,g,i){for(i==null&&(i=" ");a.length<g;)a+=i;return a},Splice:function(a,g,i,f){var e;e=a.length;i<0&&(i+=e);g<0&&(g+=e);return a.substring(0,g)+f+a.substring(i)},Checksum:function(a){var g,
i,f;i=0;for(g=0,f=a.length;0<=f?g<f:g>f;0<=f?g++:g--)i+=a.charCodeAt(g);return i}}),Object.Extend(Event,{Cancel:function(a){a.stopPropagation();a.preventDefault();a.cancelBubble=!0;return a.returnValue=!1},Prevent:function(a){return a.preventDefault()},Stop:function(a){a.stopPropagation();return a.cancelBubble=!0}}),function(a){a.plugins=[];a.plugin=function(g){var i,f;try{f=g.call(a,a);i=g.name||f.name;if(!i)throw Error("plugin requires a 'name'");a.plugins.push(i);a.plugins[i]=f;delete f.name;f[m.symbol]&&
(Object.Extend(m,f[m.symbol]),delete f[m.symbol]);return Object.Extend(m.fn,f)}catch(e){return console.log("failed to load plugin "+i)}};a.plugin(function(){var g;g=null;a.__defineSetter__("symbol",function(a){g in window&&delete window[g];g=a;return window[a]=m});a.__defineGetter__("symbol",function(){return g});a.symbol="$";window.Bling=m;return{name:"Symbol"}});a.plugin(function(){var a,i,f;a=/^\s+/;String.prototype.trimLeft=Array.Coalesce(String.prototype.trimLeft,function(){return this.replace(a,
"")});String.prototype.split=Array.Coalesce(String.prototype.split,function(a){var b,c,d,h;b=[];for(c=h=0;(d=this.indexOf(a,c))>-1;)b[h++]=this.substring(c+1,d+1),c=d+1;return b});Array.prototype.join=Array.Coalesce(Array.prototype.join,function(a){var b,c;a==null&&(a="");b=this.length;if(b===0)return"";for(c=this[b-1];--b>0;)c=this[b-1]+a+c;return c});Element.prototype.matchesSelector=Array.Coalesce(Element.prototype.webkitMatchesSelector,Element.prototype.mozMatchesSelector,Element.prototype.matchesSelector);
f=Element.prototype.toString;Element.prototype.toString=function(a){return a?(a=this.nodeName.toLowerCase(),this.id!=null?a+="#"+this.id:this.className!=null&&(a+="."+this.className.split(" ").join(".")),a):f.apply(this)};if(Element.prototype.cloneNode.length===0)i=Element.prototype.cloneNode,Element.prototype.cloneNode=function(a){var b,c,d,h;a==null&&(a=!1);b=i.call(this);if(a){h=this.childNodes;for(c=0,d=h.length;c<d;c++)a=h[c],b.appendChild(a.cloneNode(!0))}return b};return{name:"Compat"}});a.plugin(function(){var g,
i,f;i=new (function(){function a(){var e;e=F(function(){if(this.length>0)return this.shift()()},this);this.schedule=F(function(c,a){var h,j;if(!Object.IsFunc(c))throw Error("function expected, got: "+typeof c);j=this.length;c.order=a+(new Date).getTime();if(j===0||c.order>this[j-1].order)this[j]=c;else for(h=0;0<=j?h<j:h>j;0<=j?h++:h--)if(this[h].order>c.order){this.splice(h,0,c);break}setTimeout(e,a);return this},this)}H(a,Array);return a}());g=function(a){return function(){var b;b=this[a];return Object.IsFunc(b)?
Function.Bound(b,this):b}};f=function(a){var b;b=a.indexOf(".");return b>-1?this.zip(a.substr(0,b)).zip(a.substr(b+1)):this.map(g(a))};return{name:"Core",eq:function(e){var b;b=a([this[e]]);b.context=this;return b.selector=function(){return b.context.eq(e)}},each:function(a){var b,c,d;for(c=0,d=this.length;c<d;c++)b=this[c],a.call(b,b);return this},map:function(e){var b,c,d,h;b=a();b.context=this;b.selector=function(){return b.context.map(e)};d=this.len();for(c=0;0<=d?c<d:c>d;0<=d?c++:c--){h=this[c];
try{b[c]=e.call(h,h)}catch(j){b[c]=j}}return b},reduce:function(a,b){var c,d;c=b;d=this;b==null&&(c=this[0],d=this.skip(1));d.each(function(){return c=a.call(this,c,this)});return c},union:function(e,b){var c,d,h,j;h=a();j=c=d=0;h.context=this;for(h.selector=function(){return h.context.union(e,b)};j=this[d++];)h.contains(j,b)||(h[c++]=j);for(d=0;j=e[d++];)h.contains(j,b)||(h[c++]=j);return h},intersect:function(e){var b,c,d,h,j,n;n=a();d=0;h=this.len();j=Object.IsFunc(e.len)?e.len():e.length;n.context=
this;n.selector=function(){return n.context.intersect(e)};for(b=0;0<=h?b<h:b>h;0<=h?b++:b--)for(c=0;0<=j?c<j:c>j;0<=j?c++:c--)if(this[b]===e[c]){n[d++]=this[b];break}return n},distinct:function(a){return this.union(this,a)},contains:function(a,b){var c,d,h;for(d=0,h=this.length;d<h;d++)if(c=this[d],b&&c===a||!b&&c===a)return!0;return!1},count:function(a,b){var c;if(a===void 0)return this.len();c=0;this.each(function(d){if(b&&d===a||!b&&d===a)return c++});return c},zip:function(){var e,b,c,d,h,j,n,
g;e=1<=arguments.length?o.call(arguments,0):[];j=e.length;switch(j){case 0:return a();case 1:return f.call(this,e[0]);default:g={};n=this.len();h=a();for(b=c=0;0<=j?b<j:b>j;0<=j?b++:b--)g[e[b]]=f.call(this,e[b]);for(b=0;0<=n?b<n:b>n;0<=n?b++:b--){e={};for(d in g)e[d]=g[d].shift();h[c++]=e}return h}},zap:function(a,b){var c;c=a.indexOf(".");return c>-1?this.zip(a.substr(0,c)).zap(a.substr(c+1),b):Object.IsArray(b)?this.each(function(){return this[a]=b[++c%b.length]}):this.each(function(){return this[a]=
b})},zipzapmap:function(a,b){var c;c=this.zip(a);c=c.map(b);return this.zap(a,c)},take:function(e){var b,c,e=Math.min(e|0,this.len());b=a();b.context=this;b.selector=function(){return b.context.take(e)};for(c=0;0<=e?c<e:c>e;0<=e?c++:c--)b[c]=this[c];return b},skip:function(e){var b,c,d;e==null&&(e=0);e=Math.min(this.len(),Math.max(0,e|0));d=this.len()-e;b=a();b.context=this;b.selector=function(){return b.context.skip(e)};for(c=0;0<=d?c<d:c>d;0<=d?c++:c--)b[c]=this[c+e];return b},first:function(a){a==
null&&(a=1);return a===1?this[0]:this.take(a)},last:function(a){a==null&&(a=1);return a===1?this[this.len()-1]:this.skip(this.len()-a)},slice:function(e,b){var c,d,h;e==null&&(e=0);b==null&&(b=this.len());h=0;d=this.len();e<0&&(e+=d);b<0&&(b+=d);c=a();c.context=this;c.selector=function(){return c.context.slice(e,b)};for(d=e;e<=b?d<b:d>b;e<=b?d++:d--)c[h++]=this[d];return c},concat:function(a){var b,c,d;b=this.len()-1;c=-1;for(d=Object.IsFunc(a.len)?a.len():a.length;c<d-1;)this[++b]=a[++c];return this},
push:function(a){Array.prototype.push.call(this,a);return this},filter:function(e){var b,c,d,h,j,n;b=a();b.context=this;b.selector=function(){return b.context.filter(e)};switch(Object.Type(e)){case "string":c=function(c){return c.matchesSelector(e)};break;case "regexp":c=function(c){return e.test(c)};break;case "function":c=e;break;default:throw Error("unsupported type passed to filter: "+Object.Type(e));}h=0;for(j=0,n=this.length;j<n;j++)d=this[j],c.call(d,d)&&(b[h++]=d);return b},test:function(a){return this.map(function(){return a.test(this)})},
matches:function(a){return this.zip("matchesSelector").call(a)},querySelectorAll:function(e){return this.filter("*").reduce(function(a,c){return Array.Extend(a,c.querySelectorAll(e))},a())},weave:function(e){var b,c,d,h;h=this.len();d=e.len();c=h-1;b=a();b.context=this;b.selector=function(){return b.context.weave(e)};for(c=h-=1;h<=0?c<=0:c>=0;h<=0?c++:c--)b[c*2+1]=this[c];for(c=0;0<=d?c<d:c>d;0<=d?c++:c--)b[c*2]=e[c];return b},fold:function(e){var b,c,d,h,j;h=this.len();d=0;b=a();b.context=this;b.selector=
function(){return b.context.fold(e)};for(c=0,j=h-1;c<j;c+=2)b[d++]=e.call(this,this[c],this[c+1]);h%2===1&&(b[d++]=e.call(this,this[h-1],void 0));return b},flatten:function(){var e,b,c,d,h,j,n;e=a();n=this.len();j=0;e.context=this;e.selector=function(){return e.context.flatten()};for(d=0;0<=n?d<n:d>n;0<=n?d++:d--){b=this[d];c=Object.IsFunc(b.len)?b.len():b.length;for(h=0;0<=c?h<c:h>c;0<=c?h++:h--)e[j++]=b[h]}return e},call:function(){return this.apply(null,arguments)},apply:function(a,b){return this.map(function(){return Object.IsFunc(this)?
this.apply(a,b):this})},toString:function(){return a.symbol+"(["+this.map(function(){switch(this){case void 0:return"undefined";case null:return"null";case window:return"window";default:return this.toString().replace(_object_re_,"$1")}}).join(", ")+"])"},delay:function(a,b){b&&i.schedule(Function.Bound(b,this),a);return this},log:function(a){var b;b=this.len();a?t(a,this,b+" items"):t(this,b+" items");return this},len:function(){var a;for(a=this.length;this[a]!==void 0;)a++;for(;a>-1&&this[a]===void 0;)a--;
return a+1}}});a.plugin(function(){var g,i,f,e,b;i=function(c,a){return c.parentNode.insertBefore(a,c)};g=function(a,d){return a.parentNode.insertBefore(d,a.nextSibling)};b=function(c){switch(Object.Type(c)){case "fragment":return c;case "node":return c;case "bling":return c.toFragment();case "string":return a(c).toFragment();case "function":return a(c.toString()).toFragment();default:throw Error("toNode called with invalid argument: "+c+" (type: "+Object.Type(c)+")");}};f=null;e=function(a){return function(){return window.getComputedStyle(this,
null).getPropertyValue(a)}};dataNameToAttr(k)(function(){var a,d,h,j,b,e;b=[];a="A".charCodeAt(0);d="Z".chatCodeAt(0);for(j=0,e=k.length;0<=e?j<=e:j>=e;0<=e?j++:j--)h=k.charCodeAt(j),d>=h&&h>=a&&(h-=a,b.push("-")),b.push(String.fromCharCode(h));return b.join("")});return{name:"Html",$:{HTML:{parse:function(a){var d,h,j,b;b=document.createElement("div");b.innerHTML=a;a=b.childNodes;j=a.length;if(j===1)return b.removeChild(a[0]);d=document.createDocumentFragment();for(h=0;0<=j?h<j:h>j;0<=j?h++:h--)d.appendChild(b.removeChild(a[0]));
return d},stringify:function(a){var d,h;switch(Object.Type(a)){case "string":return a;case "node":return a=a.cloneNode(!0),d=document.createElement("div"),d.appendChild(a),h=d.innerHTML,d.removeChild(a),h}},escape:function(c){f||(f=a("<div>&nbsp;</div>").child(0));c=f.zap("data",c).zip("parentNode.innerHTML").first();f.zap("data","");return c}}},dataName:function(a){return dataNameToAttr(a)},html:function(a){switch(Object.Type(a)){case "undefined":return this.zip("innerHTML");case "string":return this.zap("innerHTML",
a);case "bling":return this.html(a.toFragment());case "node":return this.each(function(){var d;this.replaceChild(this.childNodes[0],a);for(d=[];this.childNodes.length>1;)d.push(this.removeChild(this.childNodes[1]));return d})}},append:function(a){var d,a=b(a);d=this.zip("appendChild");d.take(1).call(a);d.skip(1).each(function(h){return h(a.cloneNode(!0))});return this},appendTo:function(c){a(c).append(this);return this},prepend:function(a){a!=null&&(a=b(a),this.take(1).each(function(){return i(this.childNodes[0],
a)}),this.skip(1).each(function(){return i(this.childNodes[0],a.cloneNode(!0))}));return this},prependTo:function(c){c!=null&&a(c).prepend(this);return this},before:function(a){a!=null&&(a=b(a),this.take(1).each(function(){return i(this,a)}),this.skip(1).each(function(){return i(this,a.cloneNode(!0))}));return this},after:function(a){a!=null&&(a=b(a),this.take(1).each(function(){return g(this,a)}),this.skip(1).each(function(){return g(this,a.cloneNode(!0))}));return this},wrap:function(a){a=b(a);
if(Object.IsFragment(a))throw Error("cannot wrap with a fragment");return this.map(function(d){var h,j;if(Object.IsFragment(d))a.appendChild(d);else if(Object.IsNode(d))(j=d.parentNode)?(h=document.createElement("dummy"),a.appendChild(j.replaceChild(h,d)),j.replaceChild(a,h)):a.appendChild(d);return d})},unwrap:function(){return this.each(function(){if(this.parentNode&&this.parentNode.parentNode)return this.parentNode.parentNode.replaceChild(this,this.parentNode)})},replace:function(c){var d,h,c=
b(c);d=a();h=0;this.take(1).each(function(){if(this.parentNode)return this.parentNode.replaceChild(c,this),d[h++]=c});this.skip(1).each(function(){var a;if(this.parentNode)return a=c.cloneNode(!0),this.parentNode.replaceChild(a,this),d[h++]=a});return d},attr:function(a,d){switch(d){case void 0:return this.zip("getAttribute").call(a,d);case null:return this.zip("removeAttribute").call(a,d);default:return this.zip("setAttribute").call(a,d),this}},addClass:function(a){return this.removeClass(a).each(function(){var d;
d=this.className.split(" ").filter(function(a){return a!==""});d.push(a);return this.className=d.join(" ")})},removeClass:function(a){var d;d=function(h){return h!==a};return this.each(function(){return this.className=this.className.split(" ").filter(d).join(" ")})},toggleClass:function(a){var d;d=function(h){return h!==a};return this.each(function(){var h;h=this.className.split(" ");return h.indexOf(a)>-1?this.className=h.filter(d).join(" "):(h.push(a),this.className=h.join(" "))})},hasClass:function(a){return this.zip("className.split").call(" ").zip("indexOf").call(a).map(Function.IndexFound)},
text:function(a){return a!=null?this.zap("textContent",a):this.zip("textContent")},val:function(a){return a!=null?this.zap("value",a):this.zip("value")},css:function(a,d){var h,j,b,g;if(d!=null||Object.IsObject(a)){g=this.zip("style.setProperty");b=g.len();if(Object.IsObject(a))for(h in a)g.call(h,a[h],"");else if(Object.IsString(d))g.call(a,d,"");else if(Object.IsArray(d)){j=Math.max(d.length,b);for(h=0;0<=j?h<j:h>j;0<=j?h++:h--)g[h%b](a,d[h%j],"")}return this}else return h=this.map(e(a)),j=this.zip("style").zip(a),
j.weave(h).fold(function(a,c){return a||c})},defaultCss:function(c,d){var h,j,b;j=this.selector;b="";if(Object.IsString(c))if(Object.IsString(d))b+=""+j+" { "+c+": "+d+" } ";else throw Error("defaultCss requires a value with a string key");else if(Object.IsObject(c)){b+=""+j+" { ";for(h in c)b+=""+h+": "+c[h]+"; ";b+="} "}a.synth("style").text(b).appendTo("head");return this},empty:function(){return this.html("")},rect:function(){return this.zip("getBoundingClientRect").call()},width:function(a){return a===
null?this.rect().zip("width"):this.css("width",a)},height:function(a){return a===null?this.rect().zip("height"):this.css("height",a)},top:function(a){return a===null?this.rect().zip("top"):this.css("top",a)},left:function(a){return a===null?this.rect().zip("left"):this.css("left",a)},bottom:function(a){return a===null?this.rect().zip("bottom"):this.css("bottom",a)},right:function(a){return a===null?this.rect().zip("right"):this.css("right",a)},position:function(a,b){return a===null?this.rect():b===
null?this.css("left",Number.Px(a)):this.css({top:Number.Px(b),left:Number.Px(a)})},center:function(c){var b,h,j;c==null&&(c="viewport");b=document.body;h=b.scrollTop+b.clientHeight/2;j=b.scrollLeft+b.clientWidth/2;return this.each(function(){var b,d,e;d=a(this);b=d.height().floats().first();e=d.width().floats().first();e=c==="viewport"||c==="horizontal"?j-e/2:NaN;b=c==="viewport"||c==="vertical"?h-b/2:NaN;return d.css({position:"absolute",left:Number.Px(e),top:Number.Px(b)})})},scrollToCenter:function(){document.body.scrollTop=
this.zip("offsetTop")[0]-window.innerHeight/2;return this},child:function(a){return this.zip("childNodes").map(function(){var b;b=a;b<0&&(b+=this.length);return this[b]})},children:function(){return this.map(function(){return a(this.childNodes,this)})},parent:function(){return this.zip("parentNode")},parents:function(){return this.map(function(){var b,d,h;b=a();d=0;for(h=this;h=h.parentNode;)b[d++]=h;return b})},prev:function(){return this.map(function(){var b,d,h;b=a();d=0;for(h=this;h=h.previousSibling;)b[d++]=
h;return b})},next:function(){return this.map(function(){var b,d,h;b=a();d=0;for(h=this;h=h.nextSibling;)b[d++]=h;return b})},remove:function(){return this.each(function(){if(this.parentNode)return this.parentNode.removeChild(this)})},find:function(b){return this.filter("*").map(function(){return a(b,this)}).flatten()},clone:function(a){a==null&&(a=!0);return this.map(function(){return Object.IsNode(this)?this.cloneNode(a):null})},data:function(a,b){return b},toFragment:function(){var a,d;return this.len()>
1?(d=document.createDocumentFragment(),a=Function.Bound(d.appendChild,d),this.map(b).map(a),d):b(this[0])}}});a.plugin(function(){return{name:"Maths",floats:function(){return this.map(parseFloat)},ints:function(){return this.map(function(){return parseInt(this,10)})},px:function(a){a==null&&(a=0);return this.ints().map(Function.Px(a))},min:function(){return this.reduce(function(a){return Math.min(this,a)})},max:function(){return this.reduce(function(a){return Math.max(this,a)})},average:function(){return this.sum()/
this.len()},sum:function(){return this.reduce(function(a){return a+this})},squares:function(){return this.map(function(){return this*this})},magnitude:function(){return Math.sqrt(this.floats().squares().sum())},scale:function(a){return this.map(function(){return a*this})},normalize:function(){return this.scale(1/this.magnitude())}}});a.plugin(function(){var g,i,f,e,b,c,d;g=function(a){return function(b){b==null&&(b={});return Object.IsFunc(b)?this.bind(a,b):this.trigger(a,b)}};e=function(b,j,c,d,
e){return a(j).bind(c,e).each(function(){var a;a=this.__alive__||(this.__alive__={});a=a[b]||(a[b]={});return(a[c]||(a[c]={}))[d]=e})};d=function(b,j,c,d){var e;e=a(j);return e.each(function(){var a;a=this.__alive__||(this.__alive__={});a=a[b]||(a[b]={});a=a[c]||(a[c]={});e.unbind(c,a[d]);return delete a[d]})};i=f=0;c=function(){if(!f++)return a(document).trigger("ready").unbind("ready"),typeof document.removeEventListener==="function"&&document.removeEventListener("DOMContentLoaded",c,!1),typeof window.removeEventListener===
"function"?window.removeEventListener("load",c,!1):void 0};i++||(typeof document.addEventListener==="function"&&document.addEventListener("DOMContentLoaded",c,!1),typeof window.addEventListener==="function"&&window.addEventListener("load",c,!1));b={name:"Events",bind:function(a,j){var c,d;c=(a||"").split(v);d=function(a){b=j.apply(this,arguments);b===!1&&Event.Prevent(a);return b};return this.each(function(){var a,b,h,j;j=[];for(b=0,h=c.length;b<h;b++)a=c[b],j.push(this.addEventListener(a,d,!1));
return j})},unbind:function(a,b){var c;c=(a||"").split(v);return this.each(function(){var a,h,d,e;e=[];for(h=0,d=c.length;h<d;h++)a=c[h],e.push(this.removeEventListener(a,b,null));return e})},once:function(a,b){var c,d,e,f,g;c=(a||"").split(v);g=[];for(e=0,f=c.length;e<f;e++)d=c[e],g.push(this.bind(d,function(a){b.call(this,a);return this.removeEventListener(a.type,arguments.callee,null)}));return g},cycle:function(){var a,b,c,d,e,f,g;a=arguments[0];c=2<=arguments.length?o.call(arguments,1):[];a=
(a||"").split(v);e=c.length;b=function(){var a;a=0;return function(b){c[a].call(this,b);return a=++a%e}};for(f=0,g=a.length;f<g;f++)d=a[f],this.bind(d,b());return this},trigger:function(a,b){var c,d,e,f,g;b==null&&(b={});e=(a||"").split(v);b=Object.Extend({bubbles:!0,cancelable:!0},b);for(f=0,g=e.length;f<g;f++){d=e[f];if(d==="click"||d==="mousemove"||d==="mousedown"||d==="mouseup"||d==="mouseover"||d==="mouseout")c=document.createEvent("MouseEvents"),b=Object.Extend({detail:1,screenX:0,screenY:0,
clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null},b),c.initMouseEvent(d,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget);else if(d==="blur"||d==="focus"||d==="reset"||d==="submit"||d==="abort"||d==="change"||d==="load"||d==="unload")c=document.createEvent("UIEvents"),c.initUIEvent(d,b.bubbles,b.cancelable,window,1);else if(d==="touchstart"||d==="touchmove"||d===
"touchend"||d==="touchcancel")c=document.createEvent("TouchEvents"),b=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},b),c.initTouchEvent(d,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.touches,b.targetTouches,b.changedTouches,b.scale,b.rotation);else if(d==="gesturestart"||d==="gestureend"||d==="gesturecancel")c=
document.createEvent("GestureEvents"),b=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,target:null,scale:1,rotation:0},b),c.initGestureEvent(d,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.target,b.scale,b.rotation);else{c=document.createEvent("Events");c.initEvent(d,b.bubbles,b.cancelable);try{c=Object.Extend(c,b)}catch(i){}}if(c)try{this.each(function(){return this.dispatchEvent(c)})}catch(p){t("dispatchEvent error:",
p)}}return this},live:function(b,d){var c,f;f=this.selector;c=this.context;e(f,c,b,d,function(b){return a(f,c).intersect(a(b.target).parents().first().union(a(b.target))).each(function(){b.target=this;return d.call(this,b)})});return this},die:function(b,c){var e,f;f=this.selector;e=this.context;f=d(f,e,b,c);a(e).unbind(b,f);return this},liveCycle:function(){var a,b,c;a=arguments[0];b=2<=arguments.length?o.call(arguments,1):[];c=0;return this.live(a,function(a){b[c].call(this,a);return c=++c%b.length})},
click:function(a){a==null&&(a={});this.css("cursor").intersect(["auto",""]).len()>0&&this.css("cursor","pointer");return Object.IsFunc(a)?this.bind("click",a):this.trigger("click",a)},ready:function(a){a==null&&(a={});return Object.IsFunc(a)?f?a.call(this):this.bind("ready",a):this.trigger("ready",a)}};"mousemove,mousedown,mouseup,mouseover,mouseout,blur,focus,load,unload,reset,submit,keyup,keydown,change,abort,cut,copy,paste,selection,drag,drop,orientationchange,touchstart,touchmove,touchend,touchcancel,gesturestart,gestureend,gesturecancel,hashchange".split(",").forEach(function(a){return b[a]=
g(a)});return b});a.plugin(function(){var g,i,f,e,b,c,d;i={slow:700,medium:500,normal:300,fast:100,instant:0,now:0};g=/(?:scale(?:3d)*|translate(?:[XYZ]|3d)*|rotate(?:[XYZ]|3d)*)/;f=document.createElement("div").style;"WebkitTransform"in f?(e="-webkit-transform",c="-webkit-transition-property",b="-webkit-transition-duration",d="-webkit-transition-timing-function"):"MozTransform"in f?(e="-moz-transform",c="-moz-transition-property",b="-moz-transition-duration",d="-moz-transition-timing-function"):
"OTransform"in f&&(e="-o-transform",c="-o-transition-property",b="-o-transition-duration",d="-o-transition-timing-function");return{name:"Transform",$:{duration:function(a){var b;b=i[a];return b!=null?b:parseFloat(a)}},transform:function(h,f,i,C){var x,q,l,m,p,r;Object.IsFunc(f)?(C=f,i=f=null):Object.IsFunc(i)&&(C=i,i=null);f==null&&(f="normal");i||(i="ease");x=a.duration(f)+"ms";p=[];m=0;r="";f={};for(q in h)g.test(q)?(l=h[q],l.join?l=a(l).px().join(", "):l.toString&&(l=l.toString()),r+=" "+q+"("+
l+")"):f[q]=h[q];for(q in f)p[m++]=q;r&&(p[m++]=e);f[c]=p.join(", ");f[b]=p.map(function(){return x}).join(", ");f[d]=p.map(function(){return i}).join(", ");r&&(f[e]=r);this.css(f);return this.delay(x,C)},hide:function(a){return this.each(function(){if(this.style){this._display="";if(this.style.display===!1)this._display=this.syle.display;return this.style.display="none"}}).trigger("hide").delay(50,a)},show:function(a){return this.each(function(){if(this.style)return this.style.display=this._display,
delete this._display}).trigger("show").delay(50,a)},toggle:function(b){return this.weave(this.css("display")).fold(function(b,c){b==="none"?(c.style.display=c._display||"",delete c._display,a(c).trigger("show")):(c._display=b,c.style.display="none",a(c).trigger("hide"));return c}).delay(50,b)},fadeIn:function(a,b){return this.css("opacity","0.0").show(function(){return this.transform({opacity:"1.0",translate3d:[0,0,0]},a,b)})},fadeOut:function(a,b,c,d){c==null&&(c=0);d==null&&(d=0);return this.transform({opacity:"0.0",
translate3d:[c,d,0]},a,function(){return this.hide(b)})},fadeLeft:function(a,b){return this.fadeOut(a,b,"-"+this.width().first(),0)},fadeRight:function(a,b){return this.fadeOut(a,b,this.width().first(),0)},fadeUp:function(a,b){return this.fadeOut(a,b,0,"-"+this.height().first())},fadeDown:function(a,b){return this.fadeOut(a,b,0,this.height().first())}}});a.plugin(function(){var g;g=function(a){var f,e,b;b=[];e=0;a=JSON.parse(JSON.stringify(a));for(f in a)b[e++]=""+f+"="+escape(a[f]);return b.join("&")};
return{name:"Http",$:{http:function(i,f){var e;f==null&&(f={});e=new XMLHttpRequest;Object.IsFunc(f)&&(f={success:Function.Bound(f,e)});f=Object.Extend({method:"GET",data:null,state:Function.Empty,success:Function.Empty,error:Function.Empty,async:!0,timeout:0,withCredentials:!1,followRedirects:!1,asBlob:!1},f);f.state=Function.Bound(f.state,e);f.success=Function.Bound(f.success,e);f.error=Function.Bound(f.error,e);if(f.data&&f.method==="GET")i+="?"+g(f.data);else if(f.data&&f.method==="POST")f.data=
g(f.data);e.open(f.method,i,f.async);e.withCredentials=f.withCredentials;e.asBlob=f.asBlob;e.timeout=f.timeout;e.followRedirects=f.followRedirects;e.onreadystatechange=function(){f.state&&f.state();if(e.readyState===4)return e.status===200?f.success(e.responseText):f.error(e.status,e.statusText)};e.send(f.data);return a([e])},post:function(g,f){f==null&&(f={});Object.IsFunc(f)&&(f={success:f});f.method="POST";return a.http(g,f)},get:function(g,f){f==null&&(f={});Object.IsFunc(f)&&(f={success:f});
f.method="GET";return a.http(g,f)}}}});a.plugin(function(){var g,i,f,e,b,c;f=function(a,b,c,e,f){var g,i;g=1;if(f===null||f===-1)f=a.length;for(i=e;e<=f?i<f:i>f;e<=f?i++:i--)if(a[i]===c?g+=1:a[i]===b&&(g-=1),g===0)return i;return-1};c=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;g=/%[\(\/]/;i=function(a){var b,e,i,m,x,q,l,a=a.split(g);x=a.length;l=[a[0]];for(e=i=1;1<=x?e<x:e>x;1<=x?e++:e--){b=f(a[e],")","(",0,-1);if(b===-1)return"Template syntax error: unmatched '%(' starting at: "+
a[e].substring(0,15);m=a[e].substring(0,b);q=a[e].substring(b);b=c.exec(q);if(b===null)return"Template syntax error: invalid type specifier starting at '"+q+"'";q=b[4];l[i++]=m;l[i++]=b[1]|0;l[i++]=b[2]|0;l[i++]=b[3];l[i++]=q}return l};i.cache={};e=function(a,b){var c,e,f,g,m,l,D,p,r,s,o,u;c=i.cache[a];c===null&&(c=i.cache[a]=i(a));l=[c[0]];g=1;e=c.length;for(f=1,o=e-5;f<=o;f+=5){u=c.slice(f,f+4+1||9E9);m=u[0];D=u[1];e=u[2];r=u[3];p=u[4];s=b[m];s==null&&(s="missing value: "+m);switch(r){case "d":l[g++]=
""+parseInt(s,10);break;case "f":l[g++]=parseFloat(s).toFixed(e);break;case "s":l[g++]=""+s;break;default:l[g++]=""+s}D>0&&(l[g]=String.PadLeft(l[g],D));l[g++]=p}return l.join("")};b=function(b){var c,e,f,g,i,m,l,o,p,r,s,v,u,y,w,t,B,z,A;w=null;B=u=l=e=A=z="";f={};y=1;t=a([]);t.selector=b;s=function(){var b;b=a.HTML.parse(z);w?w.appendChild(b):t.push(b);z="";return 1};o=function(){var a,b;b=document.createElement(B);b.id=u||null;b.className=l||null;for(a in f)b.setAttribute(a,f[a]);w?w.appendChild(b):
t.push(b);w=b;B=u=l=e=A=z="";f={};return 1};p=function(){o();w=null;return 1};r=function(){o();if(w)w=w.parentNode;return 1};i=function(){l.length>0&&(l+=" ");return 3};g=function(){return 4};v=function(){f[e]=A;e=A="";return 1};m=function(){return 2};c=function(a){z+=a;return 1};i={TAGMODE:{'"':function(){return 6},"'":function(){return 7},"#":m,".":i,"[":g,"+":r," ":o,",":p,def:function(a){B+=a;return 1}},IDMODE:{".":i,"[":g,"+":r," ":o,",":p,def:function(a){u+=a;return 1}},CLSMODE:{"#":m,".":i,
"[":g,"+":r," ":o,",":p,def:function(a){l+=a;return 1}},ATTRMODE:{"=":function(){return 5},"]":v,def:function(a){e+=a;return 1}},VALMODE:{"]":v,def:function(a){A+=a;return 1}},DTEXTMODE:{'"':s,def:c},STEXTMODE:{"'":s,def:c}};for(g=0;c=b[g++];)y=i[y],y=c in y?y[c](c):y.def(c);tagname.length>0&&o();z.length>0&&s();return t};return{name:"Template",$:{render:e,synth:b},template:function(b){this.render=function(c){return e(this.map(a.HTML.stringify).join(""),Object.Extend(b,c))};return this.remove()},
render:function(b){return e(this.map(a.HTML.stringify).join(""),b)},synth:function(a){return b(a).appendTo(this)}}});return a}(m))}).call(this);
