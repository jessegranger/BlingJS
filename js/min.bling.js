(function(){var l,m,t,o,n=Array.prototype.slice,u=Object.prototype.hasOwnProperty,v=function(b,d){function a(){this.constructor=b}for(var c in d)u.call(d,c)&&(b[c]=d[c]);a.prototype=d.prototype;b.prototype=new a;b.__super__=d.prototype;return b};if(!(typeof document!=="undefined"&&document!==null)||!document.querySelectorAll)alert("This browser is not supported");else{o=typeof console!=="undefined"&&console!==null&&console.log?function(){var b;b=1<=arguments.length?n.call(arguments,0):[];return console.log.apply(console,
b)}:function(){var b;b=1<=arguments.length?n.call(arguments,0):[];return alert(b.join(", "))};m=/,* +/;t=/\[object (\w+)\]/;l=function(b,d){var a;d==null&&(d=document);a=Object.Type(b);if(a==="undefined"||a==="null")a=[];else if(a==="array"||a==="bling"||a==="nodelist")a=b;else if(a==="node"||a==="window"||a==="function")a=[b];else if(a==="number")a=Array(b);else if(a==="string")if(b=b.trimLeft(),b[0]==="<")a=[l.HTML.parse(b)];else if(d.querySelectorAll)a=d.querySelectorAll(b);else throw Error("invalid context: "+
d+" (type: "+Object.Type(d)+")");else throw Error("invalid selector: "+b+" (type: "+Object.Type(b)+")");a.constructor=l;a.__proto__=l.fn;a.selector=b;a.context=d;a.length=a.len();return a};l.fn=[];if(Object.Keys==null)Object.Keys=function(b,d){var a,c,e;d==null&&(d=false);e=[];c=0;for(a in b)if(d||b.hasOwnProperty(a))e[c++]=a;return e};if(Object.Extend==null)Object.Extend=function(b,d,a){var c,e,i;if(Object.prototype.toString.apply(a)==="[object Array]")for(c in a){if(d[a[c]]!==void 0&&b[e=a[c]]==
null)b[e]=d[a[c]]}else{i=Object.Keys(d);for(a=0,e=i.length;a<e;a++)c=i[a],b[c]==null&&(b[c]=d[c])}return b};Object.Extend(Object,{Type:function(b){var d;if(b===void 0)return"undefined";if(b===null)return"null";if(Object.IsString(b))return"string";if(Object.IsType(b,l))return"bling";if(Object.IsArray(b))return"array";if(Object.IsType(b,NodeList))return"nodelist";if(Object.IsNumber(b))return"number";if(Object.IsFragment(b))return"fragment";if(Object.IsNode(b))return"node";if(Object.IsFunc(b))return"function";
if(Object.IsType(b,"RegExp"))return"regexp";if((d=String(b))==="true"||d==="false")return"boolean";if(Object.IsError(b))return"error";if(Object.IsWindow(b))return"window";if(Object.IsObject(b))return"object"},IsType:function(b,d){return b===null?b===d:b.constructor===d?true:typeof d==="string"?b.constructor.name===d||Object.prototype.toString.apply(b).replace(t,"$1")===d:Object.IsType(b.__proto__,d)},IsString:function(b){return b!=null&&(typeof b==="string"||Object.IsType(b,String))},IsNumber:function(b){return b!=
null&&Object.IsType(b,Number)},IsBoolean:function(b){return typeof b==="boolean"},IsSimple:function(b){return Object.IsString(b)||Object.IsNumber(b)||Object.IsBoolean(b)},IsFunc:function(b){return b!=null&&(typeof b==="function"||Object.IsType(b,Function))&&b.call!=null},IsNode:function(b){return(b!=null?b.nodeType:void 0)>0},IsFragment:function(b){return(b!=null?b.nodeType:void 0)===11},IsWindow:function(b){return"setInterval"in b},IsArray:function(b){return b!=null&&(Object.ToString(b)==="[object Array]"||
Object.IsType(b,Array))},IsBling:function(b){return b!=null&&Object.IsType(b,l)},IsError:function(b){var d;return b!=null&&((d=b.constructor)!=null?d.name:void 0)==="Error"},IsObject:function(b){return b!=null&&typeof b==="object"},IsDefined:function(b){return b!=null},Unbox:function(b){if(b!=null&&Object.IsObject(b)){if(Object.IsString(b))return b.toString();if(Object.IsNumber(b))return Number(b)}return b},ToString:function(b){return Object.prototype.toString.apply(b)}});Object.Extend(Function,{Empty:function(){},
Bound:function(b,d,a){var c;a==null&&(a=[]);"bind"in b?(a.splice(0,0,d),c=b.bind.apply(b,a)):c=function(){1<=arguments.length&&n.call(arguments,0);return b.apply(d,a)};c.toString=function(){return"bound-method of "+d+"."+b.name};return c},Trace:function(b,d,a){var c;a==null&&(a=o);c=function(){var e;e=1<=arguments.length?n.call(arguments,0):[];a(""+(this.name||Object.Type(this))+"."+(d||b.name)+"(",e,")");return b.apply(this,e)};a("Function.Trace: "+(d||b.name)+" created.");c.toString=b.toString;
return c},NotNull:function(b){return b!==null},NotEmpty:function(b){return b!==""&&b!==null},IndexFound:function(b){return b>-1},ReduceAnd:function(b){return b&&this},UpperLimit:function(b){return function(d){return Math.min(b,d)}},LowerLimit:function(b){return function(d){return Math.max(b,d)}},Px:function(b){return function(){return Number.Px(this,b)}}});Object.Extend(String,{PadLeft:function(b,d,a){for(a==null&&(a=" ");b.length<d;)b=a+b;return b},PadRight:function(b,d,a){for(a==null&&(a=" ");b.length<
d;)b+=a;return b},Splice:function(b,d,a,c){var e;e=b.length;a<0&&(a+=e);d<0&&(d+=e);return b.substring(0,d)+c+b.substring(a)},Checksum:function(b){var d,a,c,e;d=1;a=0;for(c=0,e=b.length;0<=e?c<e:c>e;0<=e?c++:c--)d=(d+b.charCodeAt(c))%65521,a=(a+d)%65521;return a<<16|d},Builder:function(){var b,d=this;if(Object.IsWindow(this))return new String.Builder;b=[];this.length=0;this.append=function(a){b.push(a);return d.length+=(a!=null?a.toString().length:NaN)|0};this.prepend=function(a){b.splice(0,0,a);
return d.length+=(a!=null?a.toString().length:NaN)|0};this.clear=function(){b=[];return d.length=0};this.toString=function(){return b.join("")};return this}});Object.Extend(Array,{Coalesce:function(){var b,d,a,c;b=1<=arguments.length?n.call(arguments,0):[];if(Object.IsArray(b[0]))return Array.Coalesce.apply(Array,b[0]);for(a=0,c=b.length;a<c;a++)if(d=b[a],d!=null)return d},Extend:function(b,d){var a,c,e,i;c=b.length;for(e=0,i=d.length;e<i;e++)a=d[e],b[c++]=a;return b},Compact:function(b,d,a,c){var e,
i,k;d==null&&(d=new String.Builder);a==null&&(a=[]);c==null&&(c=true);if(!Object.IsArray(b))return b;for(i=0,k=b.length;i<k;i++)switch(e=b[i],true){case !Object.IsDefined(e):continue;case Object.IsSimple(e):d.append(e);break;case Object.IsArray(e):Array.Compact(e,d,a,false);break;default:d.length>0&&a.push(d.toString()),a.push(e),d.clear()}if(a.length===0)return d.toString();d.length>0&&c&&(a.push(d.toString()),d.clear());return a},Search:function(b,d,a,c){var e;d==null&&(d=function(){return true});
a==null&&(a=0);c==null&&(c=-1);if(Object.IsArray(b)){e=b.length;a<0&&(a+=e);c<0&&(c+=e);for(e=a;a<=c?e<=c:e>=c;a<=c?e++:e--)if(d(b[e]))return b[e];return null}}});Object.Extend(Number,{Px:function(b,d){d==null&&(d=0);return b!=null&&parseInt(b,10)+(d|0)+"px"},AtLeast:function(b){return function(d){return Math.max(parseFloat(d||0),b)}},AtMost:function(b){return function(d){return Math.min(parseFloat(d||0),b)}}});Object.Extend(Event,{Cancel:function(b){b.stopPropagation();b.preventDefault();b.cancelBubble=
true;return b.returnValue=false},Prevent:function(b){return b.preventDefault()},Stop:function(b){b.stopPropagation();return b.cancelBubble=true}});(function(b){b.plugins=[];b.plugin=function(d){var a,c;try{a=d.name;c=d.call(b,b);a=a||c.name;if(!a)throw Error("plugin requires a 'name'");b.plugins.push(a);b.plugins[a]=c;delete c.name;c[l.symbol]&&(Object.Extend(l,c[l.symbol]),delete c[l.symbol]);return Object.Extend(l.fn,c)}catch(e){throw o("failed to load plugin "+a),e;}};b.plugin(function(){var d,
a;a=null;d={};b.__defineSetter__("symbol",function(b){a in d&&(window[a]=d[a]);b in window&&(d[b]=window[b]);a=b;return window[b]=l});b.__defineGetter__("symbol",function(){return a});b.symbol="$";window.Bling=l;return{name:"Symbol"}});b.plugin(function(){var b,a,c;b=/^\s+/;String.prototype.trimLeft=Array.Coalesce(String.prototype.trimLeft,function(){return this.replace(b,"")});String.prototype.split=Array.Coalesce(String.prototype.split,function(e){var b,a,c,d;b=[];for(a=d=0;(c=this.indexOf(e,a))>
-1;)b[d++]=this.substring(a+1,c+1),a=c+1;return b});Array.prototype.join=Array.Coalesce(Array.prototype.join,function(e){var b,a;e==null&&(e="");b=this.length;if(b===0)return"";for(a=this[b-1];--b>0;)a=this[b-1]+e+a;return a});Element.prototype.matchesSelector=Array.Coalesce(Element.prototype.webkitMatchesSelector,Element.prototype.mozMatchesSelector,Element.prototype.matchesSelector);c=Element.prototype.toString;Element.prototype.toString=function(e){return e?(e=this.nodeName.toLowerCase(),this.id!=
null?e+="#"+this.id:this.className!=null&&(e+="."+this.className.split(" ").join(".")),e):c.apply(this)};if(Element.prototype.cloneNode.length===0)a=Element.prototype.cloneNode,Element.prototype.cloneNode=function(e){var b,c,d,h;e==null&&(e=false);b=a.call(this);if(e){h=this.childNodes;for(c=0,d=h.length;c<d;c++)e=h[c],b.appendChild(e.cloneNode(true))}return b};return{name:"Compat"}});b.plugin(function(){var d,a,c;a=new function(){var b,a,c=this;a=[];b=function(){if(a.length>0)return a.shift()()};
this.schedule=function(d,h){var g,j;if(!Object.IsFunc(d))throw Error("function expected, got: "+typeof d);j=a.length;d.order=h+(new Date).getTime();if(j===0||d.order>a[j-1].order)a.push(d);else for(g=0;0<=j?g<j:g>j;0<=j?g++:g--)if(a[g].order>d.order){a.splice(g,0,d);break}setTimeout(b,h);return c};this.cancel=function(b){var e,c,j;if(!Object.IsFunc(b))throw Error("function expected, got "+Object.Type(b));j=[];for(e=0,c=a.length;0<=c?e<c:e>c;0<=c?e++:e--)if(a[e]===b){a.splice(e,1);break}else j.push(void 0);
return j};return this};d=function(b){return function(){var a;a=this[b];return Object.IsFunc(a)?Function.Bound(a,this):a}};c=function(b){var a;a=b.indexOf(".");return a>-1?this.zip(b.substr(0,a)).zip(b.substr(a+1)):this.map(d(b))};return{name:"Core",$:{log:o,delay:function(b,c){c&&a.schedule(c,b);return{cancel:function(){return a.cancel(c)}}}},eq:function(e){var a;a=b([this[e]]);a.context=this;a.selector=function(){return a.context.eq(e)};return a},each:function(b){var a,c,d;for(c=0,d=this.length;c<
d;c++)a=this[c],b.call(a,a);return this},map:function(e){var a,c,d,h;a=b();a.context=this;a.selector=function(){return a.context.map(e)};d=this.len();for(c=0;0<=d?c<d:c>d;0<=d?c++:c--)h=this[c],a[c]=e.call(h,h);return a},reduce:function(b,a){var c,d;c=a;d=this;a==null&&(c=this[0],d=this.skip(1));d.each(function(){return c=b.call(this,c,this)});return c},union:function(e,a){var c,d,h,g;a==null&&(a=true);h=b();g=c=d=0;h.context=this;for(h.selector=function(){return h.context.union(e,a)};g=this[d++];)h.contains(g,
a)||(h[c++]=g);for(d=0;g=e[d++];)h.contains(g,a)||(h[c++]=g);return h},intersect:function(a){var c,d,f,h,g,j;j=b();f=0;h=this.len();g=Object.IsFunc(a.len)?a.len():a.length;j.context=this;j.selector=function(){return j.context.intersect(a)};for(c=0;0<=h?c<h:c>h;0<=h?c++:c--)for(d=0;0<=g?d<g:d>g;0<=g?d++:d--)if(this[c]===a[d]){j[f++]=this[c];break}return j},distinct:function(b){b==null&&(b=true);return this.union(this,b)},contains:function(b,a){var c,d,h;a==null&&(a=true);for(d=0,h=this.length;d<h;d++)if(c=
this[d],a&&c===b||!a&&c===b)return true;return false},count:function(b,a){var c;a==null&&(a=true);if(b===void 0)return this.len();c=0;this.each(function(d){if(a&&d===b||!a&&d===b)return c++});return c},zip:function(){var a,d,k,f,h,g,j,s;a=1<=arguments.length?n.call(arguments,0):[];g=a.length;switch(g){case 0:return b();case 1:return c.call(this,a[0]);default:s={};j=this.len();h=b();for(d=k=0;0<=g?d<g:d>g;0<=g?d++:d--)s[a[d]]=c.call(this,a[d]);for(d=0;0<=j?d<j:d>j;0<=j?d++:d--){a={};for(f in s)a[f]=
s[f].shift();h[k++]=a}return h}},zap:function(b,a){var c;c=b.indexOf(".");return c>-1?this.zip(b.substr(0,c)).zap(b.substr(c+1),a):Object.IsArray(a)?this.each(function(){return this[b]=a[++c%a.length]}):Object.IsFunc(a)?this.zap(b,this.zip(b).map(a)):this.each(function(){return this[b]=a})},take:function(a){var c,d,f,h,g;f=this.len();g=0;d=Math.min(a|0,f);a<0&&(g=Math.max(0,f+a),d=f);c=b();c.context=this;c.selector=function(){return c.context.take(a)};h=0;for(f=g;g<=d?f<d:f>d;g<=d?f++:f--)c[h++]=
this[f];return c},skip:function(a){var c,d,f,h,g;a==null&&(a=0);g=Math.max(0,a|0);d=this.len();c=b();c.context=this;c.selector=function(){return c.context.skip(a)};h=0;for(f=g;g<=d?f<d:f>d;g<=d?f++:f--)c[h++]=this[f];return c},first:function(b){b==null&&(b=1);return b===1?this[0]:this.take(b)},last:function(b){b==null&&(b=1);return b===1?this[this.len()-1]:this.skip(this.len()-b)},slice:function(a,c){var d,f,h;a==null&&(a=0);c==null&&(c=this.len());h=0;f=this.len();a<0&&(a+=f);c<0&&(c+=f);d=b();d.context=
this;d.selector=function(){return d.context.slice(a,c)};for(f=a;a<=c?f<c:f>c;a<=c?f++:f--)d[h++]=this[f];return d},concat:function(b){var a,c,d;a=this.len()-1;c=-1;for(d=Object.IsFunc(b.len)?b.len():b.length;c<d-1;)this[++a]=b[++c];return this},push:function(b){Array.prototype.push.call(this,b);return this},filter:function(a){var c,d,f,h,g,j;c=b();c.context=this;c.selector=function(){return c.context.filter(a)};switch(Object.Type(a)){case "string":d=function(b){return b.matchesSelector(a)};break;
case "regexp":d=function(b){return a.test(b)};break;case "function":d=a;break;default:throw Error("unsupported type passed to filter: "+Object.Type(a));}h=0;for(g=0,j=this.length;g<j;g++)f=this[g],d.call(f,f)&&(c[h++]=f);return c},test:function(b){return this.map(function(){return b.test(this)})},matches:function(b){return this.zip("matchesSelector").call(b)},querySelectorAll:function(a){return this.filter("*").reduce(function(b,c){return Array.Extend(b,c.querySelectorAll(a))},b())},weave:function(a){var c,
d,f,h;h=this.len();f=a.length;d=h-1;c=b();c.context=this;c.selector=function(){return c.context.weave(a)};for(d=h-=1;h<=0?d<=0:d>=0;h<=0?d++:d--)c[d*2+1]=this[d];for(d=0;0<=f?d<f:d>f;0<=f?d++:d--)c[d*2]=a[d];return c},fold:function(a){var c,d,f,h,g;h=this.len();f=0;c=b();c.context=this;c.selector=function(){return c.context.fold(a)};for(d=0,g=h-1;d<g;d+=2)c[f++]=a.call(this,this[d],this[d+1]);h%2===1&&(c[f++]=a.call(this,this[h-1],void 0));return c},flatten:function(){var a,c,d,f,h,g,j;a=b();a.context=
this;a.selector=function(){return a.context.flatten()};j=this.len();for(f=g=0;0<=j?f<j:f>j;0<=j?f++:f--){c=this[f];d=Object.IsFunc(c.len)?c.len():c.length;for(h=0;0<=d?h<d:h>d;0<=d?h++:h--)a[g++]=c[h]}return a},call:function(){return this.apply(null,arguments)},apply:function(a,b){return this.map(function(){return Object.IsFunc(this)?this.apply(a,b):this})},toString:function(){return b.symbol+"(["+this.map(function(){var a;a=Object.Type(this);return a==="undefined"||a==="null"||a==="window"?a:this.toString().replace(t,
"$1")}).join(", ")+"])"},delay:function(b,c){var d;if(Object.Type(c)==="function")d=Function.Bound(c,this),a.schedule(d,b),this.cancel=function(){return a.cancel(d)};return this},log:function(a){var b;b=this.len();a?o(a,this,b+" items"):o(this,b+" items");return this},len:function(){var a;for(a=this.length;this[a]!==void 0;)a++;for(;a>-1&&this[a]===void 0;)a--;return a+1}}});b.plugin(function(){var d,a,c,e,i,k,f,h,g;a=function(a,b){var c;a.parentNode==null&&(c=document.createDocumentFragment(),c.appendChild(a));
return a.parentNode.insertBefore(b,a)};d=function(a,b){var c;a.parentNode==null&&(c=document.createDocumentFragment(),c.appendChild(a));return a.parentNode.insertBefore(b,a.nextSibling)};g=function(a){switch(Object.Type(a)){case "fragment":return a;case "node":return a;case "bling":return a.toFragment();case "string":return b(a).toFragment();case "function":return b(a.toString()).toFragment();default:throw Error("toNode called with invalid argument: "+a+" (type: "+Object.Type(a)+")");}};e=null;i=
function(a){return function(){return window.getComputedStyle(this,null).getPropertyValue(a)}};k="A".charCodeAt(0);f="Z".charCodeAt(0);h="a".charCodeAt(0);c=function(a){var b,c,d,g;d="";for(c=0,g=(a!=null?a.length:NaN)|0;0<=g?c<g:c>g;0<=g?c++:c--)b=a.charCodeAt(c),f>=b&&b>=k&&(b=b-k+h,d+="-"),d+=String.fromCharCode(b);return d};return{name:"Html",$:{HTML:{parse:function(a){var b,c,d,g;g=document.createElement("div");g.innerHTML=a;a=g.childNodes;d=a.length;if(d===1)return g.removeChild(a[0]);b=document.createDocumentFragment();
for(c=0;0<=d?c<d:c>d;0<=d?c++:c--)b.appendChild(g.removeChild(a[0]));return b},stringify:function(a){var b,c;switch(Object.Type(a)){case "string":return a;case "node":return a=a.cloneNode(true),b=document.createElement("div"),b.appendChild(a),c=b.innerHTML,b.removeChild(a),c;default:return"unknown type: "+Object.Type(a)}},escape:function(a){e||(e=b("<div>&nbsp;</div>").child(0));a=e.zap("data",a).zip("parentNode.innerHTML").first();e.zap("data","");return a}},dashName:c,camelName:function(a){var b;
for(b=a!=null?a.indexOf("-"):void 0;b>-1;)a=String.Splice(a,b,b+2,a[b+1].toUpperCase()),b=a.indexOf("-");return a}},html:function(a){switch(Object.Type(a)){case "undefined":return this.zip("innerHTML");case "string":return this.zap("innerHTML",a);case "bling":return this.html(a.toFragment());case "node":return this.each(function(){var b;this.replaceChild(this.childNodes[0],a);for(b=[];this.childNodes.length>1;)b.push(this.removeChild(this.childNodes[1]));return b})}},append:function(a){var b,a=g(a);
b=this.zip("appendChild");b.take(1).call(a);b.skip(1).each(function(b){return b(a.cloneNode(true))});return this},appendTo:function(a){b(a).append(this);return this},prepend:function(b){b!=null&&(b=g(b),this.take(1).each(function(){return a(this.childNodes[0],b)}),this.skip(1).each(function(){return a(this.childNodes[0],b.cloneNode(true))}));return this},prependTo:function(a){a!=null&&b(a).prepend(this);return this},before:function(b){b!=null&&(b=g(b),this.take(1).each(function(){return a(this,b)}),
this.skip(1).each(function(){return a(this,b.cloneNode(true))}));return this},after:function(a){a!=null&&(a=g(a),this.take(1).each(function(){return d(this,a)}),this.skip(1).each(function(){return d(this,a.cloneNode(true))}));return this},wrap:function(a){a=g(a);if(Object.IsFragment(a))throw Error("cannot wrap with a fragment");return this.map(function(b){var c,d;if(Object.IsFragment(b))a.appendChild(b);else if(Object.IsNode(b))(d=b.parentNode)?(c=document.createElement("dummy"),a.appendChild(d.replaceChild(c,
b)),d.replaceChild(a,c)):a.appendChild(b);return b})},unwrap:function(){return this.each(function(){if(this.parentNode&&this.parentNode.parentNode)return this.parentNode.parentNode.replaceChild(this,this.parentNode);else if(this.parentNode)return this.parentNode.removeChild(this)})},replace:function(a){var c,d,a=g(a);c=b();d=0;this.take(1).each(function(){var b;(b=this.parentNode)!=null&&b.replaceChild(a,this);return c[d++]=a});this.skip(1).each(function(){var b,g;b=a.cloneNode(true);(g=this.parentNode)!=
null&&g.replaceChild(b,this);return c[d++]=b});return c},attr:function(a,b){switch(b){case void 0:return this.zip("getAttribute").call(a,b);case null:return this.zip("removeAttribute").call(a,b);default:return this.zip("setAttribute").call(a,b),this}},data:function(a,b){a="data-"+c(a);return this.attr(a,b)},addClass:function(a){return this.removeClass(a).each(function(){var b;b=this.className.split(" ").filter(function(a){return a!==""});b.push(a);return this.className=b.join(" ")})},removeClass:function(a){var b;
b=function(b){return b!==a};return this.each(function(){var a;if(((a=this.className)!=null?a.split(" ").filter(b).join(" "):void 0).length===0)return this.removeAttribute("class")})},toggleClass:function(a){var b;b=function(b){return b!==a};return this.each(function(){var c;c=this.className.split(" ");c.indexOf(a)>-1?c=c.filter(b).join(" "):(c.push(a),c=c.filter(Function.NotEmpty).join(" "));return c.length>0?this.className=c:this.removeAttribute("class")})},hasClass:function(a){return this.zip("className.split").call(" ").zip("indexOf").call(a).map(Function.IndexFound)},
text:function(a){return a!=null?this.zap("textContent",a):this.zip("textContent")},val:function(a){return a!=null?this.zap("value",a):this.zip("value")},css:function(a,b){var c,d,g,e;if(b!=null||Object.IsObject(a)){e=this.zip("style.setProperty");g=e.len();if(Object.IsObject(a))for(c in a)e.call(c,a[c],"");else if(Object.IsString(b))e.call(a,b,"");else if(Object.IsArray(b)){d=Math.max(b.length,g);for(c=0;0<=d?c<d:c>d;0<=d?c++:c--)e[c%g](a,b[c%d],"")}return this}else return c=this.map(i(a)),d=this.zip("style").zip(a),
d.weave(c).fold(function(a,b){return a||b})},defaultCss:function(a,c){var d,g,e;g=this.selector;e="";if(Object.IsString(a))if(Object.IsString(c))e+=""+g+" { "+a+": "+c+" } ";else throw Error("defaultCss requires a value with a string key");else if(Object.IsObject(a)){e+=""+g+" { ";for(d in a)e+=""+d+": "+a[d]+"; ";e+="} "}b.synth("style").text(e).appendTo("head");return this},empty:function(){return this.html("")},rect:function(){return this.zip("getBoundingClientRect").call()},width:function(a){return a===
null?this.rect().zip("width"):this.css("width",a)},height:function(a){return a===null?this.rect().zip("height"):this.css("height",a)},top:function(a){return a===null?this.rect().zip("top"):this.css("top",a)},left:function(a){return a===null?this.rect().zip("left"):this.css("left",a)},bottom:function(a){return a===null?this.rect().zip("bottom"):this.css("bottom",a)},right:function(a){return a===null?this.rect().zip("right"):this.css("right",a)},position:function(a,b){return a===null?this.rect():b===
null?this.css("left",Number.Px(a)):this.css({top:Number.Px(b),left:Number.Px(a)})},center:function(a){var c,d,g;a==null&&(a="viewport");c=document.body;d=c.scrollTop+c.clientHeight/2;g=c.scrollLeft+c.clientWidth/2;return this.each(function(){var c,e,h;e=b(this);c=e.height().floats().first();h=e.width().floats().first();h=a==="viewport"||a==="horizontal"?g-h/2:NaN;c=a==="viewport"||a==="vertical"?d-c/2:NaN;return e.css({position:"absolute",left:Number.Px(h),top:Number.Px(c)})})},scrollToCenter:function(){document.body.scrollTop=
this.zip("offsetTop")[0]-window.innerHeight/2;return this},child:function(a){return this.zip("childNodes").map(function(){var b;b=a;b<0&&(b+=this.length);return this[b]})},children:function(){return this.map(function(){return b(this.childNodes,this)})},parent:function(){return this.zip("parentNode")},parents:function(){return this.map(function(){var a,c,d;a=b();c=0;for(d=this;d=d.parentNode;)a[c++]=d;return a})},prev:function(){return this.map(function(){var a,c,d;a=b();c=0;for(d=this;d=d.previousSibling;)a[c++]=
d;return a})},next:function(){return this.map(function(){var a,c,d;a=b();c=0;for(d=this;d=d.nextSibling;)a[c++]=d;return a})},remove:function(){return this.each(function(){if(this.parentNode)return this.parentNode.removeChild(this)})},find:function(a){return this.filter("*").map(function(){return b(a,this)}).flatten()},clone:function(a){a==null&&(a=true);return this.map(function(){return Object.IsNode(this)?this.cloneNode(a):null})},toFragment:function(){var a,b;return this.len()>1?(b=document.createDocumentFragment(),
a=Function.Bound(b.appendChild,b),this.map(g).map(a),b):g(this[0])}}});b.plugin(function(){return{name:"Maths",$:{range:function(b,a,c){var e,i;c==null&&(c=1);a<b&&c>0&&(c*=-1);e=Math.ceil((a-b)/c);i=[];for(a=0;0<=e?a<e:a>e;0<=e?a++:a--)i.push(b+a*c);return i},zeros:function(b){var a,c;c=[];for(a=0;0<=b?a<b:a>b;0<=b?a++:a--)c.push(0);return c}},floats:function(){return this.map(parseFloat)},ints:function(){return this.map(function(){return parseInt(this,10)})},px:function(b){b==null&&(b=0);return this.ints().map(Function.Px(b))},
min:function(){return this.reduce(function(b){return Math.min(this,b)})},max:function(){return this.reduce(function(b){return Math.max(this,b)})},average:function(){return this.sum()/this.len()},sum:function(){return this.reduce(function(b){return b+this})},squares:function(){return this.map(function(){return this*this})},magnitude:function(){return Math.sqrt(this.floats().squares().sum())},scale:function(b){return this.map(function(){return b*this})},normalize:function(){return this.scale(1/this.magnitude())}}});
b.plugin(function(){var d,a,c,e,i,k,f;d=function(a){return function(b){b==null&&(b={});return Object.IsFunc(b)?this.bind(a,b):this.trigger(a,b)}};e=function(a,c,d,e,f){return b(c).bind(d,f).each(function(){var b;b=this.__alive__||(this.__alive__={});b=b[a]||(b[a]={});return(b[d]||(b[d]={}))[e]=f})};f=function(a,c,d,e){var f;f=b(c);return f.each(function(){var b;b=this.__alive__||(this.__alive__={});b=b[a]||(b[a]={});b=b[d]||(b[d]={});f.unbind(d,b[e]);return delete b[e]})};a=c=0;k=function(){if(!c++)return b(document).trigger("ready").unbind("ready"),
typeof document.removeEventListener==="function"&&document.removeEventListener("DOMContentLoaded",k,false),typeof window.removeEventListener==="function"?window.removeEventListener("load",k,false):void 0};a++||(typeof document.addEventListener==="function"&&document.addEventListener("DOMContentLoaded",k,false),typeof window.addEventListener==="function"&&window.addEventListener("load",k,false));i={name:"Events",bind:function(a,b){var c,d;c=(a||"").split(m);d=function(a){i=b.apply(this,arguments);
i===false&&Event.Prevent(a);return i};return this.each(function(){var a,b,g,e;e=[];for(b=0,g=c.length;b<g;b++)a=c[b],e.push(this.addEventListener(a,d,false));return e})},unbind:function(a,b){var c;c=(a||"").split(m);return this.each(function(){var a,d,e,h;h=[];for(d=0,e=c.length;d<e;d++)a=c[d],h.push(this.removeEventListener(a,b,null));return h})},once:function(a,b){var c,d,e,f,k;c=(a||"").split(m);k=[];for(e=0,f=c.length;e<f;e++)d=c[e],k.push(this.bind(d,function(a){b.call(this,a);return this.removeEventListener(a.type,
arguments.callee,null)}));return k},cycle:function(){var a,b,c,d,e,f,k;a=arguments[0];c=2<=arguments.length?n.call(arguments,1):[];a=(a||"").split(m);e=c.length;b=function(){var a;a=0;return function(b){c[a].call(this,b);return a=++a%e}};for(f=0,k=a.length;f<k;f++)d=a[f],this.bind(d,b());return this},trigger:function(a,b){var c,d,e,f,k;b==null&&(b={});e=(a||"").split(m);b=Object.Extend({bubbles:true,cancelable:true},b);for(f=0,k=e.length;f<k;f++){d=e[f];if(d==="click"||d==="mousemove"||d==="mousedown"||
d==="mouseup"||d==="mouseover"||d==="mouseout")c=document.createEvent("MouseEvents"),b=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:null},b),c.initMouseEvent(d,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget);else if(d==="blur"||d==="focus"||d==="reset"||d==="submit"||d==="abort"||d==="change"||d==="load"||
d==="unload")c=document.createEvent("UIEvents"),c.initUIEvent(d,b.bubbles,b.cancelable,window,1);else if(d==="touchstart"||d==="touchmove"||d==="touchend"||d==="touchcancel")c=document.createEvent("TouchEvents"),b=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},b),c.initTouchEvent(d,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,
b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.touches,b.targetTouches,b.changedTouches,b.scale,b.rotation);else if(d==="gesturestart"||d==="gestureend"||d==="gesturecancel")c=document.createEvent("GestureEvents"),b=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,target:null,scale:1,rotation:0},b),c.initGestureEvent(d,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,
b.target,b.scale,b.rotation);else{c=document.createEvent("Events");c.initEvent(d,b.bubbles,b.cancelable);try{c=Object.Extend(c,b)}catch(i){}}if(c)try{this.each(function(){return this.dispatchEvent(c)})}catch(l){o("dispatchEvent error:",l)}}return this},live:function(a,c){var d,f;f=this.selector;d=this.context;e(f,d,a,c,function(a){return b(f,d).intersect(b(a.target).parents().first().union(b(a.target))).each(function(){a.target=this;return c.call(this,a)})});return this},die:function(a,c){var d,e;
e=this.selector;d=this.context;e=f(e,d,a,c);b(d).unbind(a,e);return this},liveCycle:function(){var a,b,c;a=arguments[0];b=2<=arguments.length?n.call(arguments,1):[];c=0;return this.live(a,function(a){b[c].call(this,a);return c=++c%b.length})},click:function(a){a==null&&(a={});this.css("cursor").intersect(["auto",""]).len()>0&&this.css("cursor","pointer");return Object.IsFunc(a)?this.bind("click",a):this.trigger("click",a)},ready:function(a){a==null&&(a={});return Object.IsFunc(a)?c?a.call(this):this.bind("ready",
a):this.trigger("ready",a)}};"mousemove,mousedown,mouseup,mouseover,mouseout,blur,focus,load,unload,reset,submit,keyup,keydown,change,abort,cut,copy,paste,selection,drag,drop,orientationchange,touchstart,touchmove,touchend,touchcancel,gesturestart,gestureend,gesturecancel,hashchange".split(",").forEach(function(a){return i[a]=d(a)});return i});b.plugin(function(){var d,a,c,e,i,k,f;a={slow:700,medium:500,normal:300,fast:100,instant:0,now:0};d=/(?:scale(?:3d)*|translate(?:[XYZ]|3d)*|rotate(?:[XYZ]|3d)*)/;
c=document.createElement("div").style;e="transform";k="transition-property";i="transition-duration";f="transition-timing-function";"WebkitTransform"in c?(e="-webkit-transform",k="-webkit-transition-property",i="-webkit-transition-duration",f="-webkit-transition-timing-function"):"MozTransform"in c?(e="-moz-transform",k="-moz-transition-property",i="-moz-transition-duration",f="-moz-transition-timing-function"):"OTransform"in c&&(e="-o-transform",k="-o-transition-property",i="-o-transition-duration",
f="-o-transition-timing-function");return{name:"Transform",$:{duration:function(b){var c;c=a[b];return c!=null?c:parseFloat(b)}},transform:function(a,c,j,l){var n,p,q,o,m,r;Object.IsFunc(c)?(l=c,j=c=null):Object.IsFunc(j)&&(l=j,j=null);c==null&&(c="normal");j||(j="ease");n=b.duration(c)+"ms";m=[];o=0;r="";c={};for(p in a)d.test(p)?(q=a[p],q.join?q=b(q).px().join(", "):q.toString&&(q=q.toString()),r+=" "+p+"("+q+")"):c[p]=a[p];for(p in c)m[o++]=p;r&&(m[o++]=e);c[k]=m.join(", ");c[i]=m.map(function(){return n}).join(", ");
c[f]=m.map(function(){return j}).join(", ");r&&(c[e]=r);this.css(c);return this.delay(n,l)},hide:function(a){return this.each(function(){if(this.style){this._display="";if(this.style.display===false)this._display=this.syle.display;return this.style.display="none"}}).trigger("hide").delay(30,a)},show:function(a){return this.each(function(){if(this.style)return this.style.display=this._display,delete this._display}).trigger("show").delay(30,a)},toggle:function(a){return this.weave(this.css("display")).fold(function(a,
c){a==="none"?(c.style.display=c._display||"",delete c._display,b(c).trigger("show")):(c._display=a,c.style.display="none",b(c).trigger("hide"));return c}).delay(30,a)},fadeIn:function(a,b){return this.css("opacity","0.0").show(function(){return this.transform({opacity:"1.0",translate3d:[0,0,0]},a,b)})},fadeOut:function(a,b,c,d){c==null&&(c=0);d==null&&(d=0);return this.transform({opacity:"0.0",translate3d:[c,d,0]},a,function(){return this.hide(b)})},fadeLeft:function(a,b){return this.fadeOut(a,b,
"-"+this.width().first(),0)},fadeRight:function(a,b){return this.fadeOut(a,b,this.width().first(),0)},fadeUp:function(a,b){return this.fadeOut(a,b,0,"-"+this.height().first())},fadeDown:function(a,b){return this.fadeOut(a,b,0,this.height().first())}}});b.plugin(function(){var d;d=function(a){var b,d,i;i=[];d=0;a=JSON.parse(JSON.stringify(a));for(b in a)i[d++]=""+b+"="+escape(a[b]);return i.join("&")};return{name:"Http",$:{http:function(a,c){var e;c==null&&(c={});e=new XMLHttpRequest;Object.IsFunc(c)&&
(c={success:Function.Bound(c,e)});c=Object.Extend({method:"GET",data:null,state:Function.Empty,success:Function.Empty,error:Function.Empty,async:true,timeout:0,withCredentials:false,followRedirects:false,asBlob:false},c);c.state=Function.Bound(c.state,e);c.success=Function.Bound(c.success,e);c.error=Function.Bound(c.error,e);if(c.data&&c.method==="GET")a+="?"+d(c.data);else if(c.data&&c.method==="POST")c.data=d(c.data);e.open(c.method,a,c.async);e.withCredentials=c.withCredentials;e.asBlob=c.asBlob;
e.timeout=c.timeout;e.followRedirects=c.followRedirects;e.onreadystatechange=function(){c.state&&c.state();if(e.readyState===4)return e.status===200?c.success(e.responseText):c.error(e.status,e.statusText)};e.send(c.data);return b([e])},post:function(a,c){c==null&&(c={});Object.IsFunc(c)&&(c={success:c});c.method="POST";return b.http(a,c)},get:function(a,c){c==null&&(c={});Object.IsFunc(c)&&(c={success:c});c.method="GET";return b.http(a,c)}}}});b.plugin(function(){return{name:"Hash",$:{hash:function(d){var a,
c,e,i,k;a=0;k=[];for(e=0,i=d.length;e<i;e++)c=d[e],k.push(a+=function(){switch(Object.Type(c)){case "string":return String.Checksum(c);case "number":return String.Checksum(String(c));case "bling":return b.hash(c);case "array":return b.hash(c);case "nodelist":return b.hash(c);case "object":return String.Checksum(c.toString())}}());return k}}}});b.plugin(function(){return{name:"Memoize",$:{memoize:function(d){var a;a={};return function(){var c,e,i;c=1<=arguments.length?n.call(arguments,0):[];return(i=
a[e=b.hash(c)])!=null?i:a[e]=d.apply(this,c)}}}}});b.plugin(function(){return{name:"StateMachine",$:{StateMachine:function(){function b(a){this.reset();this.table=a;this.__defineGetter__("modeline",function(){return this.table[this._mode]});this.__defineSetter__("mode",function(a){var b;this._lastMode=this._mode;this._mode=a;if(this._mode!==this._lastMode&&"enter"in this.modeline){a=this.modeline.enter.call(this);for(b=[];Object.IsFunc(a);)b.push(a=a.call(this));return b}});this.__defineGetter__("mode",
function(){return this._mode})}b.prototype.reset=function(){return this._lastMode=this._mode=null};b.prototype.GO=function(a){return function(){return this.mode=a}};b.GO=function(a){return function(){return this.mode=a}};b.prototype.run=function(a){var b,d,i,k,f;this.mode=0;for(k=0,f=a.length;k<f;k++){b=a[k];i=this.modeline;b in i?d=i[b]:"def"in i&&(d=i.def);for(;Object.IsFunc(d);)d=d.call(this,b)}"eof"in this.modeline&&(d=this.modeline.eof.call(this));for(;Object.IsFunc(d);)d=d.call(this);this.reset();
return this};return b}()}}});b.plugin(function(){var d;d=function(){function a(){a.__super__.constructor.call(this,a.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}v(a,b.StateMachine);a.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':a.GO(6),"'":a.GO(7),"#":a.GO(2),".":a.GO(3),"[":a.GO(4)," ":a.GO(9),"+":a.GO(11),",":a.GO(10),def:function(a){return this.tag+=a},eof:a.GO(13)},{".":a.GO(3),"[":a.GO(4),
" ":a.GO(9),"+":a.GO(11),",":a.GO(10),def:function(a){return this.id+=a},eof:a.GO(13)},{enter:function(){if(this.cls.length>0)return this.cls+=" "},"#":a.GO(2),".":a.GO(3),"[":a.GO(4)," ":a.GO(9),"+":a.GO(11),",":a.GO(10),def:function(a){return this.cls+=a},eof:a.GO(13)},{"=":a.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(a){return this.attr+=a},eof:a.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(a){return this.val+=a},
eof:a.GO(12)},{'"':a.GO(8),def:function(a){return this.text+=a},eof:a.GO(12)},{"'":a.GO(8),def:function(a){return this.text+=a},eof:a.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var a;this.emitNode();this.parent=(a=this.parent)!=null?a.parentNode:void 0;return this.GO(0)}},{enter:function(){return b.log("Error in synth expression: "+this.input)}},
{enter:function(){this.tag.length&&this.emitNode();if(this.text.length)return this.emitText()}}];a.prototype.emitNode=function(){var a,b;b=document.createElement(this.tag);b.id=this.id||null;b.className=this.cls||null;for(a in this.attrs)b.setAttribute(a,this.attrs[a]);this.parent.appendChild(b);return this.parent=b};a.prototype.emitText=function(){this.parent.appendChild(b.HTML.parse(this.text));return this.text=""};return a}();return{name:"Synth",$:{synth:function(a){var c;c=new d;c.run(a);return c.fragment.childNodes.length===
1?b(c.fragment.childNodes[0]):b(c.fragment)}}}});b.plugin(function(){var b,a,c,e,i;i={};b={};a=1E3;c=100;e=function(e,f){var h,g,j,l;f==null&&(f=[]);b[e]==null&&(b[e]=[]);b[e].push(f);b[e].length>a&&b[e].splice(0,c);i[e]==null&&(i[e]=[]);l=i[e];for(g=0,j=l.length;g<j;g++)h=l[g],h.apply(null,f);return this};e.__defineSetter__("limit",function(e){var f;a=e;e=[];for(f in b)b[f].length>a?e.push(b[f].splice(0,c)):e.push(void 0);return e});e.__defineSetter__("trim",function(a){return c=a});return{name:"PubSub",
$:{publish:e,subscribe:function(a,c,e){var g,j;e==null&&(e=true);i[a]==null&&(i[a]=[]);i[a].push(c);if(e){b[a]==null&&(b[a]=[]);j=b[a];for(e=0,g=j.length;e<g;e++)a=j[e],c.apply(null,a)}return c},unsubscribe:function(a,b){var c;if(b==null)return i[a]=[];else if(i[a]==null&&(i[a]=[]),c=i[a].indexOf(b),c>-1)return i[a].splice(c,c)}}}});return b})(l)}}).call(this);
