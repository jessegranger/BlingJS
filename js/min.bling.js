(function(){var d,g,f,e=[].slice,c=[].indexOf||function(k){for(var j=0,h=this.length;j<h;j++){if(j in this&&this[j]===k){return j}}return -1},a={}.hasOwnProperty,b=function(k,i){for(var h in i){if(a.call(i,h)){k[h]=i[h]}}function j(){this.constructor=k}j.prototype=i.prototype;k.prototype=new j();k.__super__=i.prototype;return k};Object.keys||(Object.keys=function(j){var i,h;h=[];for(i in j){h.push(i)}return h});Object.values||(Object.values=function(j){var i,h;h=[];for(i in j){h.push(j[i])}return h});f=function(){var j,h,m,p,l,n,i;j=arguments[0],h=2<=arguments.length?e.call(arguments,1):[];for(n=0,i=h.length;n<i;n++){p=h[n];if(p){for(m in p){l=p[m];j[m]=l}}}return j};g=(function(){function h(){var i;i=1<=arguments.length?e.call(arguments,0):[];return h.hook("bling-init",i)}return h})();g.prototype=[];g.prototype.constructor=g;g.global=typeof window!=="undefined"&&window!==null?window:global;g.plugin=function(h,i){var r,l,q,j,p,k,m=this;if(!i){i=h;h={}}if("depends" in h){return this.depends(h.depends,function(){return m.plugin({provides:h.provides},i)})}try{if(typeof(l=i!=null?i.call(this,this):void 0)==="object"){((q=g.plugin)[p=(k=h.provides)!=null?k:""]||(q[p]=[])).push(l);f(this,l!=null?l.$:void 0);delete l.$;f(this.prototype,l);j=function(s){return m[s]||(m[s]=function(){var t;t=1<=arguments.length?e.call(arguments,0):[];return m.prototype[s].apply(g(t[0]),t.slice(1))})};for(r in l){j(r)}if(h.provides!=null){this.provide(h.provides)}}}catch(n){console.log("failed to load plugin: "+this.name+" "+n.message+": "+n.stack)}return this};f(g,(function(){var i,h,j;j=[];i={};h=function(k){return((typeof k)==="string"?k.split(/, */):k).filter(function(l){return !(l in i)})};return{depends:function(k,l){if((k=h(k)).length===0){l()}else{j.push(function(n){var m;if((m=k.indexOf(n))>-1){k.splice(m,1)}return k.length===0&&l})}return l},provide:function(m,s){var p,l,n,r,k,q;q=h(m);for(r=0,k=q.length;r<k;r++){n=q[r];i[n]=l=0;while(l<j.length){if((p=j[l](n))){j.splice(l,1);p(s);l=0}else{l++}}}return s}}})());d=g;d.plugin({provides:"EventEmitter",depends:"type,hook"},function(){return{$:{EventEmitter:d.hook("bling-init").append(function(j){var i,h;if(j==null){j=Object.create(null)}h=Object.create(null);i=function(k){return h[k]||(h[k]=[])};return d.inherit({emit:function(){var l,q,p,n,k,m;q=arguments[0],l=2<=arguments.length?e.call(arguments,1):[];m=i(q);for(n=0,k=m.length;n<k;n++){p=m[n];p.apply(this,l)}return this},addListener:function(q,p){var n,m,l;switch(d.type(q)){case"object":l=[];for(n in q){m=q[n];l.push(this.addListener(n,m))}return l;break;case"string":i(q).push(p);return this.emit("newListener",q,p)}},on:function(l,k){return this.addListener(l,k)},removeListener:function(p,n){var m,k;if((m=(k=i(p)).indexOf(n))>-1){return k.splice(m,1)}},removeAllListeners:function(k){return h[k]=[]},setMaxListeners:function(k){},listeners:function(k){return i(k).slice(0)}},j)})}}});d.plugin({depends:"core",provides:"async"},function(){return{series:function(n){var i,j,l,k,h,m=this;if(n==null){n=d.identity}k=d();h=this.length;if(!(h>0)){n.apply(k);return this}i=0;j=function(p){return function(){k[p]=arguments;if(++i>=h){return n.apply(k)}else{return l(i)}}};(l=function(p){return d.immediate(function(){return m[p](j(p))})})(0);return this},parallel:function(q){var k,l,n,m,h,p,j;m=d();h=this.length;if(!(h>0)){q.apply(m);return this}k=0;l=function(i){return function(){m[i]=arguments;if(++k>=h){return q.apply(m)}}};j=[];for(n=p=0;p<h;n=p+=1){j.push(this[n](l(n)))}return j}}});d.plugin({provides:"cartesian"},function(){return{$:{cartesian:function(){var j,k,h,i;i=1<=arguments.length?e.call(arguments,0):[];k=i.length;h=[];j=function(r,n){var l,q,m,p;if(++n>=k){return h.push(r)}p=i[n];for(q=0,m=p.length;q<m;q++){l=p[q];j(r.concat(l),n)}return null};j([],-1);return d(h)}}}});d.plugin(function(){var l,j,k,i,h;(j=String.prototype).trimLeft||(j.trimLeft=function(){return this.replace(/^\s+/,"")});(k=String.prototype).split||(k.split=function(p){var m,q,n;m=[];q=0;while((n=this.indexOf(p,q))>-1){m.push(this.substring(q,n));q=n+1}return m});(i=String.prototype).lastIndexOf||(i.lastIndexOf=function(p,q,n){var m;if(n==null){n=-1}m=-1;while((n=p.indexOf(q,n+1))>-1){m=n}return m});(h=Array.prototype).join||(h.join=function(m){var q,p;if(m==null){m=""}q=this.length;if(q===0){return""}p=this[q-1];while(--q>0){p=this[q-1]+m+p}return p});if(typeof Event!=="undefined"&&Event!==null){Event.prototype.preventAll=function(){this.preventDefault();this.stopPropagation();return this.cancelBubble=true}}if(typeof Element!=="undefined"&&Element!==null){Element.prototype.matchesSelector=Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.matchesSelector;if(Element.prototype.cloneNode.length===0){l=Element.prototype.cloneNode;Element.prototype.cloneNode=function(p){var q,t,s,m,r;if(p==null){p=false}t=l.call(this);if(p){r=this.childNodes;for(s=0,m=r.length;s<m;s++){q=r[s];t.appendChild(q.cloneNode(true))}}return t}}}return{}});d.plugin({provides:"config",depends:"type"},function(){var h,i;h=function(j,l){var k;return(k=process.env[j])!=null?k:l};i=function(j,k){return process.env[j]=k};return{$:{config:d.extend(h,{get:h,set:i})}}});d.plugin({provides:"core",depends:"string"},function(){var i,h;d.defineProperty(d,"now",{get:function(){return +(new Date)}});h=function(j,k){while(j<0){j+=k.length}return Math.min(j,k.length)};i=d.now;return{$:{log:d.extend(function(){var j,k;j=1<=arguments.length?e.call(arguments,0):[];k="+"+(d.padLeft(String(d.now-i),d.log.prefixSize,"0"))+":";if(k.length>d.log.prefixSize+2){k=""+(i=d.now)+":"}if(j.length&&d.is("string",j[0])){j[0]=""+k+" "+j[0]}else{j.unshift(k)}console.log.apply(console,j);if(j.length){return j[j.length-1]}},{prefixSize:5}),assert:function(k,j){if(j==null){j=""}if(!k){throw new Error("assertion failed: "+j)}},coalesce:function(){var j;j=1<=arguments.length?e.call(arguments,0):[];return d(j).coalesce()},keysOf:function(l){var j;return d((function(){var k;k=[];for(j in l){k.push(j)}return k})())},valuesOf:function(j){return d.keysOf(j).map(function(l){try{return j[l]}catch(m){return m}})}},eq:function(j){return d([this[h(j,this)]])},each:function(m){var k,l,j;for(l=0,j=this.length;l<j;l++){k=this[l];m.call(k,k)}return this},map:function(k){var j;return d((function(){var n,m,l;l=[];for(n=0,m=this.length;n<m;n++){j=this[n];l.push(k.call(j,j))}return l}).call(this))},filterMap:function(p){var j,m,l,n,k;j=d();for(n=0,k=this.length;n<k;n++){m=this[n];l=p.call(m,m);if(l!=null){j.push(l)}}return j},tap:function(j){return j.call(this,this)},replaceWith:function(n){var k,m,l,j;j=[];for(k=m=0,l=n.length;m<l;k=m+=1){j.push(this[k]=n[k])}return j},reduce:function(p,k){var l,q,j,m;l=0;q=this.length;if(k==null){k=this[l++]}for(j=m=l;m<q;j=m+=1){k=p.call(this[j],k,this[j])}return k},union:function(k,n){var p,j,r,q,m,l;if(n==null){n=true}p=d();for(r=0,m=this.length;r<m;r++){j=this[r];if(!p.contains(j,n)){p.push(j)}}for(q=0,l=k.length;q<l;q++){j=k[q];if(!p.contains(j,n)){p.push(j)}}return p},distinct:function(j){if(j==null){j=true}return this.union(this,j)},intersect:function(k){var j;return d((function(){var n,m,l;l=[];for(n=0,m=this.length;n<m;n++){j=this[n];if(c.call(k,j)>=0){l.push(j)}}return l}).call(this))},contains:function(l,j){var k;if(j==null){j=true}return((function(){var p,n,m;m=[];for(p=0,n=this.length;p<n;p++){k=this[p];m.push((j&&k===l)||(!j&&k==l))}return m}).call(this)).reduce((function(n,m){return n||m}),false)},count:function(l,j){var k;if(j==null){j=true}return d((function(){var p,n,m;m=[];for(p=0,n=this.length;p<n;p++){k=this[p];if((l===void 0)||(j&&k===l)||(!j&&k==l)){m.push(1)}}return m}).call(this)).sum()},coalesce:function(){var k,l,j;for(l=0,j=this.length;l<j;l++){k=this[l];if(d.is("array",k)||d.is("bling",k)){k=d(k).coalesce()}if(k!=null){return k}}return null},swap:function(l,k){var m;l=h(l,this);k=h(k,this);if(l!==k){m=[this[k],this[l]],this[l]=m[0],this[k]=m[1]}return this},shuffle:function(){var j;j=this.length-1;while(j>=0){this.swap(--j,Math.floor(Math.random()*j))}return this},select:(function(){var j,l,k;j=function(m){return function(){var n;if(d.is("function",n=this[m])){return d.bound(this,n)}else{return n}}};k=function(q){var m,n;switch(n=d.type(q)){case"regexp":return l.call(this,q);case"string":if((m=q.indexOf("."))>-1){return this.select(q.substr(0,m)).select(q.substr(m+1))}else{return this.map(j(q))}break;default:return d()}};l=function(){var z,v,A,w,r,q,t,s,y,m,u;z=1<=arguments.length?e.call(arguments,0):[];r=this.length;A=Object.create(null);for(t=0,y=z.length;t<y;t++){q=z[t];if(d.is("regexp",q)){u=d.keysOf(this.first()).filter(q);for(s=0,m=u.length;s<m;s++){w=u[s];A[w]=this.select(w)}}else{A[q]=this.select(q)}}v=0;return this.map(function(){var n;n=Object.create(null);for(q in A){n[d(q.split(".")).last()]=A[q][v]}v++;return n})};return function(){switch(arguments.length){case 1:return k.apply(this,arguments);case 2:return l.apply(this,arguments)}}})(),or:function(j){var k,m,l;for(k=m=0,l=this.length;0<=l?m<l:m>l;k=0<=l?++m:--m){this[k]||(this[k]=j)}return this},zap:function(r,l){var q,n,j,m;if((d.is("object",r))&&(l==null)){for(j in r){l=r[j];this.zap(j,l)}return this}n=r.lastIndexOf(".");if(n>0){q=r.substr(0,n);m=r.substr(n+1);this.select(q).zap(m,l);return this}switch(d.type(l)){case"array":case"bling":this.each(function(){return this[r]=l[++n%l.length]});break;case"function":this.zap(r,this.select(r).map(l));break;default:this.each(function(){return this[r]=l})}return this},clean:function(j){return this.each(function(){return delete this[j]})},take:function(l){var j,k;if(l==null){l=1}j=Math.min(l,this.length);return d((function(){var n,m;m=[];for(k=n=0;n<j;k=n+=1){m.push(this[k])}return m}).call(this))},skip:function(l){var j,k;if(l==null){l=0}k=Math.max(0,l|0);return d((function(){var p,n,m;m=[];for(j=p=k,n=this.length;p<n;j=p+=1){m.push(this[j])}return m}).call(this))},first:function(j){if(j==null){j=1}if(j===1){return this[0]}else{return this.take(j)}},last:function(j){if(j==null){j=1}if(j===1){return this[this.length-1]}else{return this.skip(this.length-j)}},slice:function(l,j){var k;if(l==null){l=0}if(j==null){j=this.length}l=h(l,this);j=h(j,this);return d((function(){var n,m;m=[];for(k=n=l;l<=j?n<j:n>j;k=l<=j?++n:--n){m.push(this[k])}return m}).call(this))},extend:function(j){var l,m,k;for(m=0,k=j.length;m<k;m++){l=j[m];this.push(l)}return this},push:function(j){Array.prototype.push.call(this,j);return this},filter:function(q,l){var k,n,m,p,j;if(l==null){l=this.length}n=(function(){switch(d.type(q)){case"string":return function(r){return r.matchesSelector(q)};case"regexp":return function(r){return q.test(r)};case"function":return q;default:throw new Error("unsupported argument to filter: "+(d.type(q)))}})();k=d();for(p=0,j=this.length;p<j;p++){m=this[p];if(n.call(m,m)){if(--l<0){break}k.push(m)}}return k},matches:function(j){switch(d.type(j)){case"string":return this.select("matchesSelector").call(j);case"regexp":return this.map(function(k){return j.test(k)});default:throw new Error("unsupported argument to matches: "+(d.type(j)))}},querySelectorAll:function(j){return this.filter("*").reduce(function(k,l){return k.extend(l.querySelectorAll(j))},d())},weave:function(k){var q,l,p,m,n,j;q=d();for(l=p=n=this.length-1;p>=0;l=p+=-1){q[(l*2)+1]=this[l]}for(l=m=0,j=k.length;m<j;l=m+=1){q[l*2]=k[l]}return q},fold:function(l){var j,k,m;m=this.length;j=d((function(){var q,p,n;n=[];for(k=q=0,p=m-1;q<p;k=q+=2){n.push(l.call(this,this[k],this[k+1]))}return n}).call(this));if((m%2)===1){j.push(l.call(this,this[m-1],void 0))}return j},flatten:function(){var k,p,n,r,q,m,l;k=d();for(r=0,m=this.length;r<m;r++){p=this[r];for(q=0,l=p.length;q<l;q++){n=p[q];k.push(n)}}return k},call:function(){return this.apply(null,arguments)},apply:function(k,j){return this.filterMap(function(){if(d.is("function",this)){return this.apply(k,j)}else{return null}})},log:function(j){if(j){d.log(j,this.toString(),this.length+" items")}else{d.log(this.toString(),this.length+" items")}return this},toArray:function(){this.__proto__=Array.prototype;return this}}});d.plugin({provides:"date",depends:"type"},function(){var j,t,p,q,u,n,k,i,v,w,y,r,l;l=[1,1000,1000*60,1000*60*60,1000*60*60*24],i=l[0],y=l[1],k=l[2],n=l[3],t=l[4];r={ms:i,s:y,m:k,h:n,d:t,sec:y,second:y,seconds:y,min:k,minute:k,minutes:k,hr:n,hour:n,hours:n,day:t,days:t};u={yyyy:Date.prototype.getUTCFullYear,mm:function(){return this.getUTCMonth()+1},dd:Date.prototype.getUTCDate,HH:Date.prototype.getUTCHours,MM:Date.prototype.getUTCMinutes,SS:Date.prototype.getUTCSeconds,MS:Date.prototype.getUTCMilliseconds};q=Object.keys(u).sort().reverse();w={yyyy:Date.prototype.setUTCFullYear,mm:function(h){return this.setUTCMonth(h-1)},dd:Date.prototype.setUTCDate,HH:Date.prototype.setUTCHours,MM:Date.prototype.setUTCMinutes,SS:Date.prototype.setUTCSeconds,MS:Date.prototype.setUTCMilliseconds};v=Object.keys(w).sort().reverse();p=Math.floor;d.type.register("date",{match:function(h){return d.isType(Date,h)},array:function(h){return[h]},string:function(s,h,m){return d.date.format(s,h,m)},number:function(m,h){return d.date.stamp(m,h)}});d.type.extend("string",{date:function(m,h){if(h==null){h=d.date.defaultFormat}return new Date(d.date.parse(m,h,"ms"))}});d.type.extend("number",{date:function(m,h){return d.date.unstamp(m,h)}});j=function(h){return function(s,A,z){var m;if(z==null){z=d.date.defaultUnit}m=d.date.unstamp(s,z);w[h].call(m,(u[h].call(m))+A);return d.date.stamp(m,z)}};return{$:{date:{defaultUnit:"s",defaultFormat:"yyyy-mm-dd HH:MM:SS",stamp:function(h,m){if(h==null){h=new Date}if(m==null){m=d.date.defaultUnit}return p(h/r[m])},unstamp:function(h,m){if(m==null){m=d.date.defaultUnit}return new Date(p(h*r[m]))},convert:function(h,s,m){if(s==null){s=d.date.defaultUnit}if(m==null){m=d.date.defaultUnit}if(d.is("date",h)){h=d.date.stamp(h,s)}return p(h*r[s]/r[m])},midnight:function(h,m){if(m==null){m=d.date.defaultUnit}return d.date.convert(d.date.convert(h,m,"d"),"d",m)},format:function(A,m,B){var z,s,C,h;if(m==null){m=d.date.defaultFormat}if(B==null){B=d.date.defaultUnit}if(d.is("date",A)){A=d.date.stamp(A,B)}z=d.date.unstamp(A,B);for(C=0,h=q.length;C<h;C++){s=q[C];m=m.replace(s,d.padLeft(""+u[s].call(z),s.length,"0"))}return m},parse:function(F,h,G){var m,D,B,C,A,E,z;if(h==null){h=d.date.defaultFormat}if(G==null){G=d.date.defaultUnit}m=new Date(0);for(D=C=0,z=h.length;C<z;D=C+=1){for(A=0,E=v.length;A<E;A++){B=v[A];if(h.indexOf(B,D)===D){try{w[B].call(m,parseInt(F.slice(D,D+B.length),10))}catch(s){throw new Error("Invalid date ('"+F+"') given format mask: "+h+" (failed at position "+D+")")}}}}return d.date.stamp(m,G)},addMilliseconds:j("MS"),addSeconds:j("SS"),addMinutes:j("MM"),addHours:j("HH"),addDays:j("dd"),addMonths:j("mm"),addYears:j("yyyy"),range:function(D,C,h,z,s){var A,B,m;if(h==null){h=1}if(z==null){z="dd"}if(s==null){s=d.date.defaultUnit}A=j(z);m=[D];while((B=m[m.length-1])<C){m.push(A(B,h,s))}return m}}},midnight:function(h){if(h==null){h=d.date.defaultUnit}return this.map(function(){return d.date.midnight(this,h)})},unstamp:function(h){if(h==null){h=d.date.defaultUnit}return this.map(function(){return d.date.unstamp(this,h)})},stamp:function(h){if(h==null){h=d.date.defaultUnit}return this.map(function(){return d.date.stamp(this,h)})},dateFormat:function(h,m){if(h==null){h=d.date.defaultFormat}if(m==null){m=d.date.defaultUnit}return this.map(function(){return d.date.format(this,h,m)})},dateParse:function(h,m){if(h==null){h=d.date.defaultFormat}if(m==null){m=d.date.defaultUnit}return this.map(function(){return d.date.parse(this,h,m)})}}});d.plugin({provides:"delay",depends:"function"},function(){return{$:{delay:(function(){var h;h=d.extend([],(function(){var i;i=function(j){return function(){if(j.length){return j.shift()()}}};return{add:function(m,p){var j,l,k;m.order=p+d.now;for(j=l=0,k=this.length;l<=k;j=l+=1){if(j===this.length||this[j].order>m.order){this.splice(j,0,m);break}}setTimeout(i(this),p);return this},cancel:function(m){var j,l,k;for(j=l=0,k=this.length;l<k;j=l+=1){if(this[j]===m){this.splice(j,1);break}}return this}}})());return function(j,i){if(d.is("function",i)){h.add(i,parseInt(j))}return{cancel:function(){return h.cancel(i)}}}})(),immediate:(function(){switch(true){case"setImmediate" in d.global:return d.global.setImmediate;case (typeof process!=="undefined"&&process!==null?process.nextTick:void 0)!=null:return process.nextTick;default:return function(h){return setTimeout(h,0)}}})(),interval:function(j,i){var h;return d.delay(j,h=function(){i();return d.delay(j,h)})}},delay:function(i,h){d.delay(i,h);return this}}});d.plugin({depends:"hook,synth,delay",provides:"dialog"},function(){var h,i,j;j=function(k,l){k=k.split(/, */);return["-webkit","-moz"].map(function(m){return""+m+"-transition-property: "+(k.join(", "))+"; "+m+"-transition-duration: "+(k.map(function(){return l}).join(", "))+";"}).join(" ")};i=function(){d("head style.dialog").remove();return d.synth(("style.dialog '			.dialog, .modal { position: absolute; }			.modal {				background: rgba(0,0,0,.3);				opacity: 0;			}			.dialog {				box-shadow: 8px 8px 4px rgba(0,0,0,.4);				border-radius: 8px;				background: white;				padding: 6px; "+(j("left",".15s"))+"			}			.dialog > .title {				text-align: center;				width: 100%;			}			.dialog > .content {				width: 100%;			}		'").replace(/\t+|\n+/g," ")).prependTo("head")};h=function(p){var k,l,n,m,q;p=d.extend(h.getDefaultOptions(),p);i();n="";m=d.synth("div.modal div.dialog#"+p.id+" div.title + div.content").appendTo("body").click(function(r){if(r.target===m[0]){d.log("dialog: Cancelling because the modal was clicked.");return p.cancel(m)}});l=m.find(".dialog",1);m.delegate(".cancel","click",function(r){return p.cancel(m)}).delegate(".ok","click",function(r){return p.ok(m)});k=l.find(".content",1);k.append(h.getContent(p.contentType,p.content));q=l.find(".title",1);q.append(h.getContent(p.titleType,p.title));d(p.target).bind("resize",function(r){m.fitOver(p.target).fadeIn(200);return l.centerOn(m).show()}).trigger("resize");return l};h.getDefaultOptions=function(){return{id:"dialog-"+d.random.string(4),target:"body",title:"Untitled Dialog",titleType:"text",content:"span 'Dialog Content'",contentType:"synth",ok:function(k){d.log("dialog: Closing from default ok");return k.emit("ok").fadeOut(200,function(){return k.remove()})},cancel:function(k){d.log("dialog: Closing from default cancel");return k.emit("cancel").fadeOut(200,function(){return k.remove()}).find(".dialog",1).css({left:0})}}};h.getContent=function(k,l){switch(k){case"synth":return d.synth(l);case"html":return d.HTML.parse(l);case"text":return document.createTextNode(l)}};return{$:{dialog:h},fitOver:function(l){var k;if(l==null){l=window}if(l===window){k={width:window.innerWidth,height:window.innerHeight,top:0,left:0}}else{k=d(l).rect().first()}return this.css({position:"absolute",width:d.px(k.width),height:d.px(k.height),top:d.px(k.top),left:d.px(k.left)})},centerOn:function(k){var n,m,l;if(k==null){k=window}if(k===window){m={width:window.innerWidth,height:window.innerHeight,top:0,left:0}}else{m=d(k).rect().first()}l=m.height/2;n=m.width/2;return this.each(function(){var p,q;p=d(this);q=p.rect().first();return p.css({top:d.px(l-(q.height/2)),left:d.px(n-(q.width/2))})})}}});d.plugin({depends:"core",provides:"diff"},function(){var p,h,m,k,j,i,n,l;n=Object.create(null);i=function(C,y,q,B,v,r){var A,z,w,u;return(w=n[A=[C,y,q,B,v,r]])!=null?w:n[A]=(u=n[z=[B,v,r,C,y,q]])!=null?u:n[z]=(function(){switch(true){case r<=0:return q;case q<=0:return r;default:return Math.min(1+i(C,y+1,q-1,B,v,r),1+i(C,y,q,B,v+1,r-1),(C[y]!==B[v])+i(C,y+1,q-1,B,v+1,r-1))}})()};p=function(q){return d.inherit({toHTML:function(){return this.reduce((function(s,r){return s+=(function(){switch(r.op){case"ins":return"<ins>"+r.v+"</ins>";case"del":return"<del>"+r.v+"</del>";case"sub":return"<del>"+r.v+"</del><ins>"+r.w+"</ins>";case"sav":return r.v}})()}),"")}},q.reduce((function(s,r){var t;if(r.op==="sub"&&r.v===r.w){r.op="sav";delete r.w}if(!s.length){s.push(r)}else{if((t=s.last()).op===r.op){t.v+=r.v;if(t.op==="sub"){t.w+=r.w}}else{s.push(r)}}return s}),d()))};k=Object.create(null);h=function(q){return{op:"del",v:q}};j=function(q){return{op:"ins",v:q}};l=function(r,q){return{op:"sub",v:r,w:q}};m=function(y,w,A,v,u,q){var r,z;return(z=k[r=[y,w,A,v,u,q]])!=null?z:k[r]=p((function(){var I,B,s,H,F,J,t,G,C,E,D;switch(true){case q<=0:G=y.substr(w,A);E=[];for(H=0,J=G.length;H<J;H++){I=G[H];E.push(h(I))}return E;case A<=0:C=v.substr(u,q);D=[];for(F=0,t=C.length;F<t;F++){I=C[F];D.push(j(I))}return D;default:B=y[w]!==v[u];s={del:1+i(y,w+1,A-1,v,u,q),ins:1+i(y,w,A,v,u+1,q-1),sub:B+i(y,w+1,A-1,v,u+1,q-1)};switch(Math.min(s.del,s.ins,s.sub)){case s.del:return d(h(y[w])).concat(m(y,w+1,A-1,v,u,q));case s.ins:return d(j(v[u])).concat(m(y,w,A,v,u+1,q-1));case s.sub:return d(l(y[w],v[u])).concat(m(y,w+1,A-1,v,u+1,q-1))}}})())};return{$:{stringDistance:function(r,q){return i(r,0,r.length,q,0,q.length)},stringDiff:function(r,q){return m(r,0,r.length,q,0,q.length)}}}});if(d.global.document!=null){d.plugin({depends:"function,type",provides:"dom"},function(){var j,q,r,l,n,h,i,m,k,p;q=false;d.type.register("nodelist",{match:function(s){return(s!=null)&&d.isType("NodeList",s)},hash:function(t){var s;return d((function(){var w,v,u;u=[];for(w=0,v=x.length;w<v;w++){s=x[w];u.push(d.hash(s))}return u})()).sum()},array:(function(){try{document.querySelectorAll("xxx").__proto__={};return d.identity}catch(s){q=true;return function(y){var v,w,u,t;t=[];for(w=0,u=y.length;w<u;w++){v=y[w];t.push(v)}return t}}})(),string:function(s){return"{Nodelist:["+d(s).select("nodeName").join(",")+"]}"},node:function(s){return d(s).toFragment()}});d.type.register("node",{match:function(s){return(s!=null?s.nodeType:void 0)>0},hash:function(s){return d.checksum(s.nodeName)+d.hash(s.attributes)+d.checksum(s.innerHTML)},string:function(s){return s.toString()},node:d.identity});d.type.register("fragment",{match:function(s){return(s!=null?s.nodeType:void 0)===11},hash:function(t){var s;return d((function(){var y,v,w,u;w=t.childNodes;u=[];for(y=0,v=w.length;y<v;y++){s=w[y];u.push(d.hash(s))}return u})()).sum()},string:function(s){return s.toString()},node:d.identity});d.type.register("html",{match:function(u){var t;return typeof u==="string"&&(t=u.trimLeft())[0]==="<"&&t[t.length-1]===">"},node:function(t){var y,w,s,z,u,v;(u=document.createElement("div")).innerHTML=t;if(z=(y=u.childNodes).length===1){return u.removeChild(y[0])}w=document.createDocumentFragment();for(s=v=0;v<z;s=v+=1){w.appendChild(u.removeChild(y[0]))}return w},array:function(t){var s;return d.type.lookup(s=g.HTML.parse(t)).array(s)},string:function(s){return"'"+s+"'"},repr:function(s){return'"'+s+'"'}});d.type.extend({unknown:{node:function(){return null}},bling:{node:function(s){return s.toFragment()}},node:{html:function(u){var t,s;t=document.createElement("div");t.appendChild((u=u.cloneNode(true)));s=t.innerHTML;t.removeChild(u);return s}},string:{node:function(s){return d(s).toFragment()},array:(function(){if(q){return function(t){var s;return d.type.lookup(s=document.querySelectorAll(t)).array(s)}}else{return function(s){return document.querySelectorAll(s)}}})()},"function":{node:function(s){return d(s.toString()).toFragment()}}});k=function(s){var t;if(s.parentNode==null){t=document.createDocumentFragment();t.appendChild(s)}return s};r=function(t,s){return k(t).parentNode.insertBefore(s,t)};j=function(t,s){return k(t).parentNode.insertBefore(s,t.nextSibling)};p=function(s){return d.type.lookup(s).node(s)};n=false;i=false;d.computeCSSProperty=l=function(s){return function(){return d.global.getComputedStyle(this,null).getPropertyValue(s)}};h=function(s){return function(t){if(t!=null){return this.css(s,t)}else{return this.rect().select(s)}}};m=function(s){return function(){return this.map(function(t){return d((function(){var u;u=[];while(t=t[s]){u.push(t)}return u})())})}};return{$:{HTML:{parse:function(s){return d.type.lookup(s).node(s)},stringify:function(s){return d.type.lookup(s).html(s)},escape:function(t){var s;n||(n=d("<div>&nbsp;</div>").child(0));s=n.zap("data",t).select("parentNode.innerHTML").first();n.zap("data","");return s}}},html:function(s){switch(d.type(s)){case"undefined":case"null":return this.select("innerHTML");case"string":case"html":return this.zap("innerHTML",s);case"bling":return this.html(s.toFragment());case"node":return this.each(function(){var t;this.replaceChild(this.childNodes[0],s);t=[];while(this.childNodes.length>1){t.push(this.removeChild(this.childNodes[1]))}return t})}},append:function(s){s=p(s);return this.each(function(){return this.appendChild(s.cloneNode(true))})},appendTo:function(s){var u,t;u=this.map(function(){return this.cloneNode(true)});t=0;d(s).each(function(){return this.appendChild(u[t++])});return u},prepend:function(s){if(s!=null){s=p(s);this.take(1).each(function(){return r(this.childNodes[0],s)});this.skip(1).each(function(){return r(this.childNodes[0],s.cloneNode(true))})}return this},prependTo:function(s){if(s!=null){d(s).prepend(this)}return this},before:function(s){if(s!=null){s=p(s);this.take(1).each(function(){return r(this,s)});this.skip(1).each(function(){return r(this,s.cloneNode(true))})}return this},after:function(s){if(s!=null){s=p(s);this.take(1).each(function(){return j(this,s)});this.skip(1).each(function(){return j(this,s.cloneNode(true))})}return this},wrap:function(s){s=p(s);if(d.is("fragment",s)){throw new Error("cannot call .wrap() with a fragment as the parent")}return this.each(function(v){var u,t;if((d.is("fragment",v))||!v.parentNode){return s.appendChild(v)}u=v.parentNode;t=document.createElement("dummy");s.appendChild(u.replaceChild(t,v));return u.replaceChild(s,t)})},unwrap:function(){return this.each(function(){if(this.parentNode&&this.parentNode.parentNode){return this.parentNode.parentNode.replaceChild(this,this.parentNode)}else{if(this.parentNode){return this.parentNode.removeChild(this)}}})},replace:function(y){var w,t,v,u,s;y=p(y);w=this.map(function(){return y.cloneNode(true)});for(t=v=0,u=w.length;v<u;t=v+=1){if((s=this[t].parentNode)!=null){s.replaceChild(w[t],this[t])}}return w},attr:function(s,t){switch(t){case void 0:return this.select("getAttribute").call(s,t);case null:return this.select("removeAttribute").call(s,t);default:this.select("setAttribute").call(s,t);return this}},data:function(t,s){return this.attr("data-"+(d.dashize(t)),s)},addClass:function(t){var s;s=function(u){return u!==""};return this.removeClass(t).each(function(){var u;u=this.className.split(" ").filter(s);u.push(t);return this.className=u.join(" ")})},removeClass:function(s){var t;t=function(u){return u!==s};return this.each(function(){var u;u=this.className.split(" ").filter(t).join(" ");if(u.length===0){return this.removeAttribute("class")}})},toggleClass:function(s){var t;t=function(u){return u!==s};return this.each(function(){var w,u,v;u=this.className.split(" ");v=d.not(d.isEmpty);if(u.indexOf(s)>-1){v=d.and(t,v)}else{u.push(s)}w=u.filter(v).join(" ");this.className=w;if(w.length===0){return this.removeAttribute("class")}})},hasClass:function(s){return this.select("className.split").call(" ").select("indexOf").call(s).map(function(t){return t>-1})},text:function(s){if(s!=null){return this.zap("textContent",s)}return this.select("textContent")},val:function(s){if(s!=null){return this.zap("value",s)}return this.select("value")},css:function(D,E){var B,A,w,t,F,u,C,s,y,z;if((E!=null)||d.is("object",D)){s=this.select("style.setProperty");if(d.is("object",D)){for(w in D){E=D[w];s.call(w,E,"")}}else{if(d.is("array",E)){for(A=y=0,z=t=Math.max(E.length,F=s.length);y<z;A=y+=1){s[A%F](D,E[A%t],"")}}else{s.call(D,E,"")}}return this}else{B=this.map(l(D));d.log("CV:",B);u=this.select("style").select(D);d.log("OV:",u);C=u.weave(B).fold(function(v,G){return v||G});d.log("RET:",C);return C}},defaultCss:function(t,s){var u,y,w;y=this.selector;w="";if(d.is("string",t)){if(d.is("string",s)){w+=""+y+" { "+t+": "+s+" } "}else{throw Error("defaultCss requires a value with a string key")}}else{if(d.is("object",t)){for(u in t+"} "){w+=(""+y+" { ")+(""+u+": "+t[u]+"; ")}}}d("<style></style>").text(w).appendTo("head");return this},rect:function(){return this.map(function(s){switch(s){case window:return{width:window.innerWidth,height:window.innerHeight,top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};default:return s.getBoundingClientRect()}})},width:h("width"),height:h("height"),top:h("top"),left:h("left"),bottom:h("bottom"),right:h("right"),position:function(t,s){switch(true){case t==null:return this.rect();case s==null:return this.css("left",d.px(t));default:return this.css({top:d.px(s),left:d.px(t)})}},scrollToCenter:function(){document.body.scrollTop=this[0].offsetTop-(d.global.innerHeight/2);return this},child:function(s){return this.select("childNodes").map(function(){return this[s<0?s+this.length:s]})},parents:m("parentNode"),prev:m("previousSibling"),next:m("nextSibling"),remove:function(){return this.each(function(){var s;return(s=this.parentNode)!=null?s.removeChild(this):void 0})},find:function(t,s){if(s==null){s=0}return this.filter("*").map((function(){switch(s){case 0:return function(){return this.querySelectorAll(t)};case 1:return function(){return d(this.querySelector(t))};default:return function(){return d(this.querySelectorAll(t)).take(s)}}})()).flatten()},clone:function(s){if(s==null){s=true}return this.map(function(){if(d.is("node",this)){return this.cloneNode(s)}})},toFragment:function(){var s;if(this.length>1){s=document.createDocumentFragment();(this.map(p)).map(d.bound(s,s.appendChild));return s}return p(this[0])}}})}d.plugin({depends:"dom,function,core",provides:"event"},function(){var j,p,h,k,m,i,n,l;j=/,* +/;k=["mousemove","mousedown","mouseup","mouseover","mouseout","blur","focus","load","unload","reset","submit","keyup","keydown","change","abort","cut","copy","paste","selection","drag","drop","orientationchange","touchstart","touchmove","touchend","touchcancel","gesturestart","gestureend","gesturecancel","hashchange"];h=function(q){return function(r){if(d.is("function",r)){return this.bind(q,r)}else{return this.trigger(q,r)}}};m=function(q,s,r,u,t){return d(s).bind(r,t).each(function(){var v,w;return((v=((w=(this.__alive__||(this.__alive__={})))[q]||(w[q]={})))[r]||(v[r]={}))[u]=t})};l=function(q,r,u,t){var s;s=d(r);return s.each(function(){var w,v,y;w=(this.__alive__||(this.__alive__={}));v=(w[q]||(w[q]={}));y=(v[u]||(v[u]={}));s.unbind(u,y[t]);return delete y[t]})};n=d.once(function(){var q;d(document).trigger("ready").unbind("ready");if(typeof document.removeEventListener==="function"){document.removeEventListener("DOMContentLoaded",n,false)}return typeof(q=d.global).removeEventListener==="function"?q.removeEventListener("load",n,false):void 0});p=d.once(function(){var q;if(typeof document.addEventListener==="function"){document.addEventListener("DOMContentLoaded",n,false)}return typeof(q=d.global).addEventListener==="function"?q.addEventListener("load",n,false):void 0});p();i={bind:function(s,r){var t,q;t=(s||"").split(j);q=function(u){i=r.apply(this,arguments);if(i===false){u.preventAll()}return i};return this.each(function(){var w,y,v,u;u=[];for(y=0,v=t.length;y<v;y++){w=t[y];u.push(this.addEventListener(w,q,false))}return u})},unbind:function(r,q){var s;s=(r||"").split(j);return this.each(function(){var v,w,u,t;t=[];for(w=0,u=s.length;w<u;w++){v=s[w];t.push(this.removeEventListener(v,q,null))}return t})},trigger:function(r,s){var y,t,w,q,v;if(s==null){s={}}s=d.extend({bubbles:true,cancelable:true},s);v=(r||"").split(j);for(w=0,q=v.length;w<q;w++){t=v[w];if(t==="click"||t==="mousemove"||t==="mousedown"||t==="mouseup"||t==="mouseover"||t==="mouseout"){y=document.createEvent("MouseEvents");s=d.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:null},s);y.initMouseEvent(t,s.bubbles,s.cancelable,d.global,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget)}else{if(t==="blur"||t==="focus"||t==="reset"||t==="submit"||t==="abort"||t==="change"||t==="load"||t==="unload"){y=document.createEvent("UIEvents");y.initUIEvent(t,s.bubbles,s.cancelable,d.global,1)}else{if(t==="touchstart"||t==="touchmove"||t==="touchend"||t==="touchcancel"){y=document.createEvent("TouchEvents");s=d.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},s);y.initTouchEvent(t,s.bubbles,s.cancelable,d.global,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.touches,s.targetTouches,s.changedTouches,s.scale,s.rotation)}else{if(t==="gesturestart"||t==="gestureend"||t==="gesturecancel"){y=document.createEvent("GestureEvents");s=d.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,target:null,scale:1,rotation:0},s);y.initGestureEvent(t,s.bubbles,s.cancelable,d.global,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.target,s.scale,s.rotation)}else{y=document.createEvent("Events");y.initEvent(t,s.bubbles,s.cancelable);try{y=d.extend(y,s)}catch(u){d.log("Error in dispatch: ",u)}}}}}if(!y){continue}else{try{this.each(function(){return this.dispatchEvent(y)})}catch(u){d.log("dispatchEvent error:",u)}}}return this},delegate:function(q,t,s){var r;r=this;return m(q,r,t,s,function(u){return r.find(q).intersect(d(u.target).parents().first().union(d(u.target))).each(function(){return s.call(u.target=this,u)})})},undelegate:function(q,s,r){return this.unbind(s,l(q,this,s,r))},click:function(r){var q;if(r==null){r={}}if((q=this.css("cursor"))==="auto"||q===""){this.css("cursor","pointer")}if(d.is("function",r)){this.bind("click",r)}else{this.trigger("click",r)}return this},ready:function(q){if(n.exhausted){return q.call(this)}return this.bind("ready",q)}};k.forEach(function(q){return i[q]=h(q)});return i});d.plugin({provides:"function",depends:"hash"},function(){return{$:{identity:function(h){return h},not:function(h){return function(){return !h.apply(this,arguments)}},compose:function(i,h){return function(j){var k;return i.call(k,(k=h.call(j,j)))}},and:function(i,h){return function(j){return h.call(this,j)&&i.call(this,j)}},once:function(h,i){if(i==null){i=1}return d.defineProperty((function(){if(i-->0){return h.apply(this,arguments)}}),"exhausted",{get:function(){return i<=0}})},cycle:function(){var j,h;j=1<=arguments.length?e.call(arguments,0):[];h=-1;return function(){return j[h=++h%j.length].apply(this,arguments)}},bound:function(i,k,h){var j;if(h==null){h=[]}if(d.is("function",k.bind)){h.splice(0,0,i);j=k.bind.apply(k,h)}else{j=function(){var l;l=1<=arguments.length?e.call(arguments,0):[];return k.apply(i,h(h.length?void 0:l))}}return d.extend(j,{toString:function(){return"bound-method of "+i+"."+k.name}})},partial:function(){var h,i;i=arguments[0],h=2<=arguments.length?e.call(arguments,1):[];return function(){var j;j=1<=arguments.length?e.call(arguments,0):[];return i.apply(null,e.call(h).concat(e.call(j)))}}},partial:function(){var h;h=1<=arguments.length?e.call(arguments,0):[];return this.map(function(i){return d.partial.apply(d,[i].concat(e.call(h)))})}}});d.plugin({provides:"groupBy"},function(){return{groupBy:function(i){var h;h={};switch(d.type(i)){case"array":case"bling":this.each(function(){var l,j;l=((function(){var n,m,k;k=[];for(n=0,m=i.length;n<m;n++){j=i[n];k.push(this[j])}return k}).call(this)).join(",");return(h[l]||(h[l]=d())).push(this)});break;default:this.each(function(){var j;return(h[j=this[i]]||(h[j]=d())).push(this)})}return d.valuesOf(h)}}});d.plugin({provides:"hash",depends:"type"},function(){var h;h=Math.pow(2,32);d.type.extend({unknown:{hash:function(i){return d.checksum(d.toString(i))}},object:{hash:function(l){var j,i;return d.hash(Object)+d((function(){var k;k=[];for(j in l){i=l[j];k.push(d.hash(j)+d.hash(i))}return k})()).sum()}},array:{hash:function(i){return d.hash(Array)+d(i.map(d.hash)).reduce((function(k,j){return((k*k)+(j|0))%h}),1)}},bool:{hash:function(i){return parseInt(i?1:void 0)}}});return{$:{hash:function(i){return d.type.lookup(i).hash(i)}},hash:function(){return d.hash(this)}}});d.plugin(function(){return{$:{histogram:function(F,B,C){var r,p,y,A,t,w,z,u,s,l,v,E,k,G,q,j,h,D;if(B==null){B=1}if(C==null){C=60}r=d();A=0;u=Infinity;z=0;w=0;G=0;for(j=0,D=F.length;j<D;j++){q=F[j];u=Math.min(q,u);w=Math.max(q,w);G+=q;y=Math.floor(q/B);if(y in r){r[y]+=1}else{r[y]=1}A=Math.max(A,y+1)}r.length=A;z=G/F.length;t=r.max();r=r.or(0).scale(1/t).scale(C);k=r.sum();E="";v=0;for(s=h=0;h<A;s=h+=1){p=(s+1)*B;l=r[s]*100/k;v+=l;E+=d.padLeft(v.toFixed(2)+"%",7)+d.padRight(" < "+(p.toFixed(2)),10)+": "+d.repeat("#",r[s])+"\n"}return E+("N: "+F.length+" Min: "+(u.toFixed(2))+" Max: "+(w.toFixed(2))+" Mean: "+(z.toFixed(2)))}},histogram:function(){return d.histogram(this)}}});d.plugin({provides:"hook",depends:"type"},function(){var i,h;h={};i=function(l,k){var m,q,n,j;q=(h[l]||(h[l]=[]));if(!k){return{prepend:function(p){q.unshift(p);return p},append:function(p){q.push(p);return p}}}for(n=0,j=q.length;n<j;n++){m=q[n];k=m.call(this,k)}return k};i("bling-init").prepend(function(k){var j,l;if(k.length===1){k=d.type.lookup(k[0]).array(k[0])}j=d.inherit(g,k);if(k.length===0&&k[0]!==void 0){l=0;while(k[l]!==void 0){l++}j.length=l}return j});return{$:{hook:i}}});d.plugin({depends:"dom",provides:"http"},function(){var h;h=function(k){var j,l;l=JSON.parse(JSON.stringify(k));return((function(){var i;i=[];for(j in l){i.push(""+j+"="+(escape(l[j])))}return i})()).join("&")};d.type.register("http",{match:function(i){return d.isType("XMLHttpRequest",i)},array:function(i){return[i]}});return{$:{http:function(i,j){var k;if(j==null){j={}}k=new XMLHttpRequest();if(d.is("function",j)){j={success:d.bound(k,j)}}j=d.extend({method:"GET",data:null,state:d.identity,success:d.identity,error:d.identity,async:true,asBlob:false,timeout:0,followRedirects:false,withCredentials:false},j);j.state=d.bound(k,j.state);j.success=d.bound(k,j.success);j.error=d.bound(k,j.error);if(j.data&&j.method==="GET"){i+="?"+h(j.data)}else{if(j.data&&j.method==="POST"){j.data=h(j.data)}}k.open(j.method,i,j.async);k=d.extend(k,{asBlob:j.asBlob,timeout:j.timeout,followRedirects:j.followRedirects,withCredentials:j.withCredentials,onreadystatechange:function(){if(typeof j.state==="function"){j.state()}if(k.readyState===4){if(k.status===200){return j.success(k.responseText)}else{return j.error(k.status,k.statusText)}}}});k.send(j.data);return d(k)},post:function(i,j){if(j==null){j={}}if(d.is("function",j)){j={success:j}}j.method="POST";return d.http(i,j)},get:function(i,j){if(j==null){j={}}if(d.is("function",j)){j={success:j}}j.method="GET";return d.http(i,j)}}}});d.depends("hook",function(){return d.hook("bling-init").append(function(j){var h,i;i=Object.create(null);h=[];return d.inherit({index:function(k){if(h.indexOf(k)===-1){h.push(k);i[k]=Object.create(null)}return this.each(function(l){return i[k][k(l)]=l})},query:function(p){var m,l,n,k;for(n=0,k=h.length;n<k;n++){l=h[n];m=l(p);if(m in i[l]){return i[l][m]}}return null}},j)})});d.plugin({depends:"dom",provides:"lazy"},function(){var h;h=function(i,j){return d("head").append(d.extend(document.createElement(i),j))};return{$:{script:function(i){return h("script",{src:i})},style:function(i){return h("link",{href:i,rel:"stylesheet"})}}}});d.plugin({provides:"math",depends:"core"},function(){var k,h,j,i;d.type.extend({bool:{number:function(l){if(l){return 1}else{return 0}}},number:{bool:function(l){return !!l}}});i=function(l){return function(p){var n,m;n=(function(){switch(d.type(p)){case"string":return function(q){return q[p]};case"function":return p;default:throw new Error(".maxBy first argument should be a string or function")}})();m=this.first();this.skip(1).each(function(){if(l(n(this),n(m))){return m=this}});return m}};return{$:{range:function(p,l,n){var m;if(n==null){n=1}if(l==null){l=p;p=0}if(l<p&&n>0){n*=-1}return d((function(){var s,r,q;q=[];for(m=s=0,r=Math.ceil((l-p)/n);0<=r?s<r:s>r;m=0<=r?++s:--s){q.push(p+(m*n))}return q})())},zeros:function(m){var l;return d((function(){var p,n;n=[];for(l=p=0;0<=m?p<m:p>m;l=0<=m?++p:--p){n.push(0)}return n})())},ones:function(m){var l;return d((function(){var p,n;n=[];for(l=p=0;0<=m?p<m:p>m;l=0<=m?++p:--p){n.push(1)}return n})())},deg2rad:function(l){return l*Math.PI/180},rad2deg:function(l){return l*180/Math.PI}},floats:function(){return this.map(parseFloat)},ints:function(){return this.map(function(){return parseInt(this,10)})},px:function(l){return this.ints().map(function(){return d.px(this,l)})},min:function(){return this.filter(isFinite).reduce(Math.min)},max:function(){return this.filter(isFinite).reduce(Math.max)},maxBy:i(function(m,l){return m>l}),minBy:i(function(m,l){return m<l}),mean:h=function(){if(!this.length){return 0}else{return this.sum()/this.length}},avg:h,sum:function(){return this.filter(isFinite).reduce((function(l){return l+this}),0)},product:function(){return this.filter(isFinite).reduce(function(l){return l*this})},squares:function(){return this.pow(2)},pow:function(l){return this.map(function(){return Math.pow(this,l)})},magnitude:function(){return Math.sqrt(this.floats().squares().sum())},scale:function(l){return this.map(function(){return l*this})},add:k=function(m){var l;switch(d.type(m)){case"number":return this.map(function(){return m+this});case"bling":case"array":return d((function(){var q,p,n;n=[];for(l=q=0,p=Math.min(this.length,m.length);0<=p?q<p:q>p;l=0<=p?++q:--q){n.push(this[l]+m[l])}return n}).call(this))}},plus:k,sub:j=function(m){var l;switch(d.type(m)){case"number":return this.map(function(){return this-m});case"bling":case"array":return d((function(){var q,p,n;n=[];for(l=q=0,p=Math.min(this.length,m.length);0<=p?q<p:q>p;l=0<=p?++q:--q){n.push(this[l]-m[l])}return n}).call(this))}},minus:j,dot:function(l){var m;return d.sum((function(){var q,p,n;n=[];for(m=q=0,p=Math.min(this.length,l.length);0<=p?q<p:q>p;m=0<=p?++q:--q){n.push(this[m]*l[m])}return n}).call(this))},angle:function(l){return Math.acos(this.dot(l)/(this.magnitude()*l.magnitude()))},cross:function(l){return d(this[1]*l[2]-this[2]*l[1],this[2]*l[0]-this[0]*l[2],this[0]*l[1]-this[1]*l[0])},normalize:function(){return this.scale(1/this.magnitude())},deg2rad:function(){return this.filter(isFinite).map(function(){return this*Math.PI/180})},rad2deg:function(){return this.filter(isFinite).map(function(){return this*180/Math.PI})}}});d.plugin({depends:"function",provides:"memoize"},function(){return{$:{memoize:function(h){if(d.is("function",h)){h={f:h}}if(!d.is("object",h)){throw new Error("Argument Error: memoize requires either a function or object as first argument")}h.cache||(h.cache=Object.create(null));h.hash||(h.hash=d.identity);return function(){var j,i,k;return(k=(j=h.cache)[i=h.hash(arguments)])!=null?k:j[i]=h.f.apply(this,arguments)}}}}});d.plugin({depends:"core",provides:"pubsub"},function(){var h;h=(function(){function i(){this.listeners={}}i.prototype.publish=function(){var k,m,q,l,p,j,n;m=arguments[0],k=2<=arguments.length?e.call(arguments,1):[];n=((l=this.listeners)[m]||(l[m]=[]));for(p=0,j=n.length;p<j;p++){q=n[p];q.apply(null,k)}return k};i.prototype.publisher=function(l,k){var j;j=this;return function(){return j.publish(l,k.apply(this,arguments))}};i.prototype.subscribe=function(l,k){var j;((j=this.listeners)[l]||(j[l]=[])).push(k);return k};i.prototype.unsubscribe=function(n,m){var j,k,l;if(m==null){return this.listeners[n]=[]}else{j=((l=this.listeners)[n]||(l[n]=[]));if((k=j.indexOf(m))>-1){return j.splice(k,k)}}};return i})();return{$:d.extend(new h(),{Hub:h})}});d.plugin({provides:"random",depends:"type"},function(){var h;h="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return{$:{random:(function(){var p,t,r,w,v,u,i,q,n,j,l,k,s,m;p=new Array(624);n=0;j=function(z){var A,B,y;n=0;p[0]=z;y=[];for(A=B=1;B<=623;A=++B){y.push(p[A]=4294967295&(1812433253*(p[A-1]^(p[A-1]>>>30))+A))}return y};q=function(){var A,C,B,z;z=[];for(A=B=0;B<=623;A=++B){C=((p[A]&2147483648)>>>31)+(2147483647&p[(A+1)%624]);p[A]=p[(A+397)%624]^(C>>>1);if((C%2)===1){z.push(p[A]=p[A]^2567483615)}else{z.push(void 0)}}return z};t=Math.pow(2,31);r=t*2;k=function(){var z;if(n===0){q()}z=p[n]^(z>>>11)^((z<<7)&&2636928640)^((z<<15)&&4022730752)^(z>>>18);n=(n+1)%624;return(z+t)/r};d.defineProperty(k,"seed",{set:function(y){return j(y)}});k.seed=+new Date();return d.extend(k,{real:s=function(A,z){var B,y;if(A==null){B=[0,1],A=B[0],z=B[1]}if(z==null){y=[0,A],A=y[0],z=y[1]}return(d.random()*(z-A))+A},integer:l=function(z,y){return Math.floor(d.random.real(z,y))},string:m=function(y,z){if(z==null){z=""}while(z.length<y){z+=d.random.element(h)}return z},coin:w=function(y){if(y==null){y=0.5}return d.random()<=y},element:function(B,F){var A,H,y,D,C,G,z,E;if(F!=null){G=d(F);G=G.scale(1/G.sum());A=0;D=d(B).map(function(I){return{v:I,w:G[A++]}}).sortBy(function(I){return -I.w});y=d.random.real(0.00001,0.999999);C=0;for(z=0,E=D.length;z<E;z++){H=D[z];if((C+=H.w)>=y){return H.v}}}return B[d.random.integer(0,B.length)]},gaussian:i=function(A,D){var E,C,B,z,F;if(A==null){A=0.5}if(D==null){D=0.12}while(true){C=d.random();B=1.7156*(d.random()-0.5);z=C-0.449871;F=Math.abs(B)+0.386595;E=(z*z)+F*(0.196*F-0.25472*z);if(!(E>0.27597&&(E>0.27846||(B*B)>(-4*Math.log(C)*C*C)))){break}}return A+D*B/C},dice:v=function(A,y){var z;return d((function(){var C,B;B=[];for(z=C=0;C<A;z=C+=1){B.push(u(y))}return B})())},die:u=function(y){return d.random.integer(1,y+1)}})})()}}});d.plugin({depends:"core",provides:"request-queue"},function(){var h;return{$:{RequestQueue:h=(function(){var i;function j(k){this.requester=(function(){if(k!=null){return k}else{try{return require("request")}catch(l){}}})();this.interval=null;this.queue=[]}j.prototype.tick=function(){var l,q,p,m,k;k=[];for(l=p=0,m=q=Math.min(this.queue.length,this.perTick);p<m;l=p+=1){k.push(this.requester.apply(this,this.queue.shift()))}return k};j.prototype.start=function(k,l){var m=this;this.perTick=k!=null?k:1;if(l==null){l=100}if(this.interval!=null){this.stop()}this.interval=setInterval((function(){return m.tick()}),l);return this};j.prototype.stop=i=function(){clearInterval(this.interval);this.interval=null;return this};j.prototype.close=i;j.prototype.request=function(){var k;k=1<=arguments.length?e.call(arguments,0):[];this.queue.push(k);return this};j.prototype.post=function(k,l){if(l==null){l=d.identity}this.queue.push([d.extend(k,{method:"POST"}),l]);return this};j.prototype.get=function(k,l){if(l==null){l=d.identity}this.queue.push([d.extend(k,{method:"GET"}),l]);return this};return j})()}}});d.plugin({provides:"sendgrid",depends:"config"},function(){var j,l,h,k;try{l=require("nodemailer")}catch(i){return}k=null;h=function(){return k||(k=l.createTransport("SMTP",{service:"SendGrid",auth:{user:d.config.get("SENDGRID_USERNAME"),pass:d.config.get("SENDGRID_PASSWORD")}}))};j=function(){if(k!=null){k.close()}return k=null};return{$:{sendMail:function(n,r){var p,m,q;if((p=n.transport)==null){n.transport=h()}if((m=n.from)==null){n.from=d.config.get("EMAILS_FROM")}if((q=n.bcc)==null){n.bcc=d.config.get("EMAILS_BCC")}if(d.config.get("SENDGRID_ENABLED","true")==="true"){return l.sendMail(n,function(s){if(n.close){j()}return r(s)})}else{if(n.close){j()}return r(false)}}}}});d.plugin({provides:"sortBy,sortedIndex"},function(){return{$:{sortedIndex:function(n,m,k){var l,i,j,h;l=(function(){switch(d.type(k)){case"string":return function(q,p){return q[k]-p[k]};case"function":return function(q,p){return k(q)-k(p)};default:return function(q,p){return q-p}}})();i=n.length;j=0;while(j<i){h=(i+j)>>>1;if(l(n[h],m)<0){j=h+1}else{i=h}}return j}},sortBy:function(j){var i,k,m,l,h;i=d();for(l=0,h=this.length;l<h;l++){k=this[l];m=d.sortedIndex(i,k,j);i.splice(m,0,k)}return i},sortedInsert:function(i,h){this.splice(d.sortedIndex(this,i,h),0,i);return this}}});d.plugin({provides:"string",depends:"function"},function(){var h;h=function(i){return function(){var j;j=1<=arguments.length?e.call(arguments,0):[];try{return i.apply(null,j)}catch(k){return"[Error: "+k.message+"]"}}};d.type.extend({unknown:{string:h(function(j){var i;return(i=typeof j.toString==="function"?j.toString():void 0)!=null?i:String(j)}),repr:h(function(i){return d.type.lookup(i).string(i)}),number:h(function(i){return parseFloat(String(i))})},"null":{string:function(){return"null"}},undefined:{string:function(){return"undefined"}},string:{number:h(parseFloat),repr:function(i){return"'"+i+"'"}},array:{string:h(function(j){var i;return"["+((function(){var m,l,k;k=[];for(m=0,l=j.length;m<l;m++){i=j[m];k.push(d.toString(i))}return k})()).join(",")+"]"})},object:{string:h(function(n){var j,l,i;l=[];for(j in n){try{i=n[j]}catch(m){i="[Error: "+m.message+"]"}l.push(""+j+":"+(d.toString(i)))}return"{"+l.join(", ")+"}"})},"function":{string:function(i){return i.toString().replace(/^([^{]*){(?:.|\n|\r)*}$/,"$1{ ... }")}},number:{repr:function(i){return String(i)},string:h(function(i){switch(true){case i.precision!=null:return i.toPrecision(i.precision);case i.fixed!=null:return i.toFixed(i.fixed);default:return String(i)}})}});return{$:{toString:function(i){if(i==null){return"function Bling(selector, context) { [ ... ] }"}else{try{return d.type.lookup(i).string(i)}catch(j){return"[Error: "+j.message+"]"}}},toRepr:function(i){return d.type.lookup(i).repr(i)},px:function(i,j){if(j==null){j=0}return(i!=null)&&(parseInt(i,10)+(parseInt(j)|0))+"px"},capitalize:function(i){return(i.split(" ").map(function(j){return j[0].toUpperCase()+j.substring(1).toLowerCase()})).join(" ")},dashize:function(k){var p,l,j,n,m;j="";for(l=n=0,m=(k!=null?k.length:void 0)|0;0<=m?n<m:n>m;l=0<=m?++n:--n){p=k.charCodeAt(l);if((91>p&&p>64)){p+=32;j+="-"}j+=String.fromCharCode(p)}return j},camelize:function(j){var k;j.split("-");while((k=j!=null?j.indexOf("-"):void 0)>-1){j=d.stringSplice(j,k,k+2,j[k+1].toUpperCase())}return j},padLeft:function(i,k,j){if(j==null){j=" "}while(i.length<k){i=j+i}return i},padRight:function(i,k,j){if(j==null){j=" "}while(i.length<k){i=i+j}return i},stringTruncate:function(j,m,l){var k,i;if(l==null){l="..."}j=j.split(" ");k=[];while(m>0){i=j.shift();m-=i.length;if(m>=0){k.push(i)}}return k.join("")+l},stringCount:function(p,k,m,q){var l;if(m==null){m=0}if(q==null){q=0}if((l=p.indexOf(k,m))>m-1){return d.stringCount(p,k,l+1,q+1)}else{return q}},stringSplice:function(p,m,l,t){var k,r,q;r=p.length;k=l;if(k<0){k+=r}q=m;if(q<0){q+=r}return p.substring(0,q)+t+p.substring(k)},checksum:function(m){var k,j,l,p,n;k=1;j=0;for(l=p=0,n=m.length;0<=n?p<n:p>n;l=0<=n?++p:--p){k=(k+m.charCodeAt(l))%65521;j=(j+k)%65521}return(j<<16)|k},repeat:function(i,j){if(j==null){j=2}switch(true){case j===1:return i;case j<1:return"";case d.is("string",i):return d.zeros(j).map(function(){return i}).join("");default:return d.zeros(j).map(function(){return i})}},stringBuilder:function(){var i,j=this;if(d.is("global",this)){return new d.stringBuilder()}i=[];this.length=0;this.append=function(k){i.push(k);return j.length+=(k!=null?k.toString().length:void 0)|0};this.prepend=function(k){i.splice(0,0,k);return j.length+=(k!=null?k.toString().length:void 0)|0};this.clear=function(){var k;k=j.toString();i=[];j.length=0;return k};this.toString=function(){return i.join("")};return this}},toString:function(){return d.toString(this)},toRepr:function(){return d.toRepr(this)}}});d.plugin({provides:"symbol",depends:"type"},function(){var h,i,j;j=null;h={};i=d.global;i.Bling=g;if(typeof module!=="undefined"&&module!==null){module.exports=g}d.defineProperty(d,"symbol",{set:function(k){i[j]=h[j];h[j=k]=i[k];return i[k]=g},get:function(){return j}});return{$:{symbol:"$",noConflict:function(){g.symbol="Bling";return g}}}});d.plugin({provides:"StateMachine"},function(){var h;return{$:{StateMachine:h=(function(){function i(j){this.debug=false;this.reset();this.table=j;Object.defineProperty(this,"modeline",{get:function(){return this.table[this._mode]}});Object.defineProperty(this,"mode",{set:function(k){var l;this._lastMode=this._mode;this._mode=k;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){l=this.modeline.enter.call(this);while(d.is("function",l)){l=l.call(this)}}return k},get:function(){return this._mode}})}i.prototype.reset=function(){this._mode=null;return this._lastMode=null};i.prototype.GO=function(j){return function(){return this.mode=j}};i.GO=function(j){return function(){return this.mode=j}};i.prototype.tick=function(l){var j,k;k=this.modeline;if(k==null){j=null}else{if(l in k){j=k[l]}else{if("def" in k){j=k.def}}}while(d.is("function",j)){j=j.call(this,l)}return j};i.prototype.run=function(k){var p,l,n,j,m;this.mode=0;for(n=0,j=k.length;n<j;n++){p=k[n];l=this.tick(p)}if(d.is("function",(m=this.modeline)!=null?m.eof:void 0)){l=this.modeline.eof.call(this)}while(d.is("function",l)){l=l.call(this)}this.reset();return this};return i})()}}});d.plugin({provides:"synth",depends:"StateMachine, type"},function(){var h;h=(function(k){var i;b(j,k);i={"#":j.GO(2),".":j.GO(3),"[":j.GO(4),'"':j.GO(6),"'":j.GO(7)," ":j.GO(8),",":j.GO(10),"+":j.GO(11),eof:j.GO(13)};j.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},d.extend({def:function(l){return this.tag+=l}},i),d.extend({def:function(l){return this.id+=l}},i),d.extend({enter:function(){if(this.cls.length>0){return this.cls+=" "}},def:function(l){return this.cls+=l}},i),{"=":j.GO(5),"]":function(){this.attrs[this.attr]=this.val;this.attr=this.val="";return this.GO(1)},def:function(l){return this.attr+=l},eof:j.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;this.attr=this.val="";return this.GO(1)},def:function(l){return this.val+=l},eof:j.GO(12)},{'"':j.GO(8),def:function(l){return this.text+=l},eof:j.GO(12)},{"'":j.GO(8),def:function(l){return this.text+=l},eof:j.GO(12)},{enter:function(){if(this.tag){this.emitNode()}if(this.text){this.emitText()}return this.GO(0)}},{},{enter:function(){this.emitNode();this.cursor=null;return this.GO(0)}},{enter:function(){var l;this.emitNode();this.cursor=(l=this.cursor)!=null?l.parentNode:void 0;return this.GO(0)}},{enter:function(){throw new Error("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag){this.emitNode()}if(this.text){return this.emitText()}}}];function j(){j.__super__.constructor.call(this,j.STATE_TABLE);this.fragment=this.cursor=document.createDocumentFragment()}j.prototype.emitNode=function(){var l,m;if(this.tag){m=document.createElement(this.tag);m.id=this.id||null;m.className=this.cls||null;for(l in this.attrs){m.setAttribute(l,this.attrs[l])}this.cursor.appendChild(m);return this.cursor=m}};j.prototype.emitText=function(){this.cursor.appendChild(d.type.lookup("<html>").node(this.text));return this.text=""};return j})(d.StateMachine);return{$:{synth:function(j){var i;i=new h();i.run(j);if(i.fragment.childNodes.length===1){return d(i.fragment.childNodes[0])}else{return d(i.fragment)}}}}});(function(i){var h;i.plugin(function(){var j,l,k;j=null;l={};k={register_engine:function(m,n){l[m]=n;if(j==null){return j=m}},render:function(n,m){if(j in l){return l[j](n,m)}}};k.__defineSetter__("engine",function(m){if(!m in l){throw new Error("invalid template engine: "+m+" not one of "+(Object.Keys(l)))}else{return j=m}});k.__defineGetter__("engine",function(){return j});return{name:"Template",$:{template:k}}});i.template.register_engine("null",(function(){return function(k,j){return k}})());h=function(r,p,k,j,q){var n,m,s,l;if(q==null){q=-1}n=1;if(q<0){q=r.length+1+q}for(m=l=j;l<q;m=l+=1){s=r[m];if(s===k){n+=1}else{if(s===p){n-=1}}if(n===0){return m}}return -1};i.template.register_engine("pythonic",(function(){var l,m,k,j;j=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;l=/%[\(\/]/;m=function(A){var w,r,u,t,z,v,q,p,y,s;w=A.split(l);q=w.length;y=[w[0]];t=1;for(u=s=1;s<q;u=s+=1){r=h(w[u],")","(",0,-1);if(r===-1){return"Template syntax error: unmatched '%(' starting at: "+(w[u].substring(0,15))}z=w[u].substring(0,r);p=w[u].substring(r);v=j.exec(p);if(v===null){return"Template syntax error: invalid type specifier starting at '"+p+"'"}p=v[4];y[t++]=z;y[t++]=v[1]|0;y[t++]=v[2]|0;y[t++]=v[3];y[t++]=p}return y};m.cache={};k=function(F,E){var p,v,A,y,D,s,r,t,q,B,C,w,z,u;p=m.cache[F];if(p==null){p=m.cache[F]=m(F)}r=[p[0]];y=1;s=p.length;for(A=w=1,z=s-5;w<=z;A=w+=5){u=p.slice(A,+(A+4)+1||9000000000),D=u[0],t=u[1],v=u[2],B=u[3],q=u[4];C=E[D];if(C==null){C="missing value: "+D}switch(B){case"d":r[y++]=""+parseInt(C,10);break;case"f":r[y++]=parseFloat(C).toFixed(v);break;case"s":r[y++]=""+C;break;default:r[y++]=""+C}if(t>0){r[y]=String.PadLeft(r[y],t)}r[y++]=q}return r.join("")};return k})());return i.template.register_engine("js-eval",(function(){var j;j=(function(l){b(k,l);function k(){k.__super__.constructor.apply(this,arguments)}k.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return k})(i.StateMachine);return function(l,k){return l}})())})(g);d.plugin({provides:"throttle",depends:"core"},function(){return{$:{throttle:function(h,j){var i;i=0;return function(){var k,l;k=1<=arguments.length?e.call(arguments,0):[];l=d.now-i;if(l>h){i+=l;return j.apply(this,k)}return null}},debounce:function(h,j){var i;i=null;return function(){var k,l=this;k=1<=arguments.length?e.call(arguments,0):[];clearTimeout(i);return setTimeout((function(){return j.apply(l,arguments)}),h)}}}}});d.plugin({depends:"type",provides:"TNET"},function(){var j,i,h;h=function(q){var l,m,p,k,n;m=q.indexOf(":");if(m>0){k=parseInt(q.slice(0,m),10);p=q.slice(m+1,m+1+k);n=q[m+1+k];l=q.slice(m+k+2);p=(function(){switch(n){case"#":return Number(p);case"'":return String(p);case"!":return p==="true";case"~":return null;case"]":return j(p);case"}":return i(p)}})();return[p,l]}return void 0};j=function(k){var n,l,m;n=[];while(k.length>0){m=h(k),l=m[0],k=m[1];n.push(l)}return n};i=function(l){var q,m,p,n,k;q={};while(l.length>0){n=h(l),m=n[0],l=n[1];k=h(l),p=k[0],l=k[1];q[m]=p}return q};return{$:{TNET:{stringify:function(k){var n,l,p,m;m=(function(){switch(d.type(k)){case"number":return[String(k),"#"];case"string":return[k,"'"];case"function":return[String(k),"'"];case"boolean":return[String(!!k),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var s,r,q;q=[];for(s=0,r=k.length;s<r;s++){p=k[s];q.push(d.TNET.stringify(p))}return q})()).join(""),"]"];case"object":return[((function(){var q;q=[];for(p in k){q.push(d.TNET.stringify(p)+d.TNET.stringify(k[p]))}return q})()).join(""),"}"]}})(),n=m[0],l=m[1];return(n.length|0)+":"+n+l},parse:function(k){var l;return(l=h(k))!=null?l[0]:void 0}}}}});d.plugin({provides:"trace",depends:"function,type"},function(){d.type.extend({unknown:{trace:d.identity},object:{trace:function(l,p,j){var i,n,h,m;m=Object.keys(p);for(n=0,h=m.length;n<h;n++){i=m[n];p[i]=d.trace(p[i],""+l+"."+i,j)}return p}},array:{trace:function(j,n,h){var k,m,l;for(k=m=0,l=n.length;m<l;k=m+=1){n[k]=d.trace(n[k],""+j+"["+k+"]",h)}return n}},"function":{trace:function(i,k,h){var j;i||(i=k.name);j=function(){var l;l=1<=arguments.length?e.call(arguments,0):[];h(""+(this.name||d.type(this))+"."+i+"("+(d(l).map(d.toRepr).join(","))+")");return k.apply(this,l)};j.toString=function(){return"{Trace '"+i+"' of "+(k.toString())};return j}}});return{$:{trace:function(i,k,h){var j;if(!d.is("string",i)){j=[k,i],h=j[0],k=j[1]}h||(h=d.log);i||(i="");return d.type.lookup(k).trace(i,k,h)}}}});d.plugin({depends:"dom"},function(){var l,h,j,q,m,k,p,n,i;l=", ";j={slow:700,medium:500,normal:300,fast:100,instant:0,now:0};h=/(?:scale(?:3d)*|translate(?:[XYZ]|3d)*|rotate(?:[XYZ]|3d)*)/;i=30;q=document.createElement("div").style;m="transform";p="transition-property";k="transition-duration";n="transition-timing-function";if("WebkitTransform" in q){m="-webkit-transform";p="-webkit-transition-property";k="-webkit-transition-duration";n="-webkit-transition-timing-function"}else{if("MozTransform" in q){m="-moz-transform";p="-moz-transition-property";k="-moz-transition-duration";n="-moz-transition-timing-function"}else{if("OTransform" in q){m="-o-transform";p="-o-transition-property";k="-o-transition-duration";n="-o-transition-timing-function"}}}return{$:{duration:function(r){var s;s=j[r];if(s!=null){return s}return parseFloat(r)}},transform:function(w,r,v,z){var u,s,t,A,y,B;if(d.is("function",r)){z=r;r=v=null}else{if(d.is("function",v)){z=v;v=null}}if(r==null){r="normal"}v||(v="ease");s=d.duration(r)+"ms";y=[];B="";u={};for(t in w){if(h.test(t)){A=w[t];if(A.join){A=d(A).px().join(l)}else{if(A.toString){A=A.toString()}}B+=" "+t+"("+A+")"}else{u[t]=w[t]}}for(t in u){y.push(t)}if(B){y.push(m)}u[p]=y.join(l);u[k]=y.map(function(){return s}).join(l);u[n]=y.map(function(){return v}).join(l);if(B){u[m]=B}this.css(u);if(z){return this.delay(s,z)}},hide:function(r){this.each(function(){if(this.style){this._display="";if(this.style.display===!"none"){this._display=this.syle.display}return this.style.display="none"}}).trigger("hide");if(r){this.delay(i,r)}return this},show:function(r){this.each(function(){if(this.style){this.style.display=this._display;return delete this._display}}).trigger("show");if(r){this.delay(i,r)}return this},toggle:function(r){return this.weave(this.css("display")).fold(function(t,s){if(t==="none"){s.style.display=s._display||"";delete s._display;d(s).trigger("show")}else{s._display=t;s.style.display="none";d(s).trigger("hide")}return s}).delay(i,r)},fadeIn:function(r,s){return this.css("opacity","0.0").show(function(){return this.transform({opacity:"1.0",translate3d:[0,0,0]},r,s)})},fadeOut:function(s,u,r,t){if(r==null){r=0}if(t==null){t=0}return this.transform({opacity:"0.0",translate3d:[r,t,0]},s,function(){return this.hide(u)})},fadeLeft:function(r,s){return this.fadeOut(r,s,"-"+this.width().first(),0)},fadeRight:function(r,s){return this.fadeOut(r,s,this.width().first(),0)},fadeUp:function(r,s){return this.fadeOut(r,s,0,"-"+this.height().first())},fadeDown:function(r,s){return this.fadeOut(r,s,0,this.height().first())}}});d.plugin({provides:"type"},function(){var j,k,i,h;k=function(l,m){if(m==null){return l===m||l==="null"||l==="undefined"}else{return((m.constructor!=null)&&(m.constructor===l||m.constructor.name===l))||Object.prototype.toString.apply(m)===("[object "+l+"]")||k(l,m.__proto__)}};j=function(l,m){if(typeof l==="function"){l=l.prototype}if(l.__proto__===Object.prototype){l.__proto__=m.__proto__}m.__proto__=l;return m};h=(function(){var q,m,r,l,p,n;m={};q={name:"unknown",match:function(s){return true}};l=[];p=function(s,t){if(!(s in m)){l.unshift(s)}m[t.name=s]=q!==t?j(q,t):t;return m[s][s]=function(u){return u}};n=function(u,w){var t,v,s;if(typeof u==="string"){if((v=m[u])==null){m[u]=p(u,{})}return m[u]=f(m[u],w)}else{if(typeof u==="object"){s=[];for(t in u){s.push(n(t,u[t]))}return s}}};r=function(w){var t,v,s,u;for(v=0,s=l.length;v<s;v++){t=l[v];if((u=m[t])!=null?u.match.call(w,w):void 0){return m[t]}}};p("unknown",q);p("object",{match:function(s){return typeof s==="object"}});p("error",{match:function(s){return k("Error",s)}});p("regexp",{match:function(s){return k("RegExp",s)}});p("string",{match:function(s){return typeof s==="string"||k(String,s)}});p("number",{match:function(s){return(k(Number,s))&&s!==NaN}});p("bool",{match:function(s){return typeof s==="boolean"||(function(){var t;try{return(t=String(s))==="true"||t==="false"}catch(u){}})()}});p("array",{match:Array.isArray||function(){return k(Array,o)}});p("function",{match:function(s){return typeof s==="function"}});p("global",{match:function(s){return typeof s==="object"&&"setInterval" in this}});p("arguments",{match:function(s){return"callee" in s&&"length" in s}});p("undefined",{match:function(s){return s===void 0}});p("null",{match:function(s){return s===null}});return f((function(s){return r(s).name}),{register:p,lookup:r,extend:n,is:function(s,v){var u;return(u=m[s])!=null?u.match.call(v,v):void 0},as:function(){var w,v,s,u;s=arguments[0],w=arguments[1],v=3<=arguments.length?e.call(arguments,2):[];return typeof(u=r(w))[s]==="function"?u[s].apply(u,[w].concat(e.call(v))):void 0}})})();h.extend({unknown:{array:function(l){return[l]}},"null":{array:function(l){return[]}},undefined:{array:function(l){return[]}},array:{array:function(l){return l}},number:{array:function(l){return g.extend(new Array(l),{length:0})}},"arguments":{array:function(l){return Array.prototype.slice.apply(l)}}});i=Math.pow(2,32);h.register("bling",{match:function(l){return l&&k(g,l)},array:function(l){return l.toArray()},hash:function(l){return l.map(g.hash).reduce(function(n,m){return((n*n)+m)%i})},string:function(l){return g.symbol+"(["+l.map(function(m){return d.type.lookup(m).string(m)}).join(", ")+"])"},repr:function(l){return g.symbol+"(["+l.map(function(m){return d.type.lookup(m).repr(m)}).join(", ")+"])"}});return{$:{inherit:j,extend:f,defineProperty:function(n,l,m){Object.defineProperty(n,l,f({configurable:true,enumerable:true},m));return n},isType:k,type:h,is:h.is,as:h.as,isSimple:function(m){var l;return(l=h(m))==="string"||l==="number"||l==="bool"},isEmpty:function(l){return(l===""||l===null||l===(void 0))||l.length===0||(typeof l==="object"&&Object.keys(l).length===0)}},defineProperty:function(l,m){return this.each(function(){return d.defineProperty(this,l,m)})}}});d.plugin({depends:"math",provides:"units"},function(){var r,q,k,h,l,p,n,i,j,m;m=d(["px","pt","pc","em","%","in","cm","mm","ex","lb","kg","yd","ft","m",""]);r=null;(n=function(){var s;s=m.filter(/.+/).join("|");return r=new RegExp("(\\d+\\.*\\d*)((?:"+s+")/*(?:"+s+")*)")})();i=function(t){if(r.test(t)){return r.exec(t)[2]}return""};q=function(w,u){var v,t,A,z,y,s;y=w.split("/"),A=y[0],v=y[1];s=u.split("/"),z=s[0],t=s[1];if((v!=null)&&(t!=null)){return q(t,v)*q(A,z)}if(w in q){if(u in q[w]){return q[w][u]()}}return 0};p=function(s){return function(){return s}};h=function(){};j=function(u,t,s){q[u]||(q[u]={});q[u][t]=s;if(m.indexOf(u)===-1){m.push(u)}if(m.indexOf(t)===-1){m.push(t)}n();return h()};l=function(){j("pc","pt",function(){return 12});j("in","pt",function(){return 72});j("in","px",function(){return 96});j("in","cm",function(){return 2.54});j("m","ft",function(){return 3.281});j("yd","ft",function(){return 3});j("cm","mm",function(){return 10});j("m","cm",function(){return 100});j("m","meter",function(){return 1});j("m","meters",function(){return 1});j("ft","feet",function(){return 1});j("km","m",function(){return 1000});j("em","px",function(){var t,s;t=0;try{s=d("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body");t=s.width().first();s.remove()}catch(u){}return t});j("ex","px",function(){var t,s;t=0;try{s=d("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body");t=s.width().first();s.remove()}catch(u){}return t});j("ex","em",function(){return 2});j("rad","deg",function(){return 57.3});j("s","sec",function(){return 1});j("s","ms",function(){return 1000});j("ms","ns",function(){return 1000000});j("min","sec",function(){return 60});j("hr","min",function(){return 60});j("hr","hour",function(){return 1});j("hr","hours",function(){return 1});j("day","hr",function(){return 24});j("day","days",function(){return 1});j("y","year",function(){return 1});j("y","years",function(){return 1});j("y","d",function(){return 365.25});j("g","gram",function(){return 1});j("g","grams",function(){return 1});j("kg","g",function(){return 1000});j("lb","g",function(){return 453.6});j("lb","oz",function(){return 16});j("f","frame",function(){return 1});j("f","frames",function(){return 1});j("sec","f",function(){return 60});(h=function(){var F,D,B,C,A,z,y,w,v,E,u,t,s;q[""]={};A=p(1);for(z=0,E=m.length;z<E;z++){F=m[z];q[F]||(q[F]={});q[F][F]=q[F][""]=q[""][F]=A}C=1;while(C>0){C=0;for(y=0,u=m.length;y<u;y++){F=m[y];if(!(F!=="")){continue}q[F]||(q[F]={});for(w=0,t=m.length;w<t;w++){D=m[w];if(!(D!=="")){continue}if((!q(F,D))&&(q(D,F))){q[F][D]=p(1/q(D,F));C+=1}for(v=0,s=m.length;v<s;v++){B=m[v];if(B!==""){if((q(F,D))&&(q(D,B))&&(!q(F,B))){q[F][B]=p(q(F,D)*q(D,B));C+=1}}}}}}return null})();return d.units.enable=function(){}};k=function(v,t){var y,w,s;w=parseFloat(v);s=i(v);y=q(s,t);if(!(isFinite(y)&&isFinite(w))){return v}return""+(w*y)+t};d.type.register("units",{match:function(s){return typeof s==="string"&&r.test(s)},number:function(s){return parseFloat(s)},string:function(s){return"'"+s+"'"}});return{$:{units:{enable:l,set:j,get:q,convertTo:function(s,t){return k(t,s)}}},convertTo:function(s){return this.map(function(t){return k(t,s)})},unitMap:function(s){return this.map(function(t){var u;return s.call((u=parseFloat(t)),u)+i(t)})}}});d.plugin({provides:"unittest",depends:"core,function"},function(){var m,j,k,i,l,h;l=i=m=0;j=[];k=function(v,q,t){var p,u,n,s;if(!d.is("function",t)){return}s=function(w){return d.log(""+v+": "+q+"... "+w)};n=q.toLowerCase().indexOf("fail")!==-1;p=d.once(function(w){l--;if(!!w!==n){s("fail: "+w);m++;return j.push(q)}else{s("pass");i++;return d.provide(q)}});u=function(w){try{return t(w)}catch(y){return w(y)}finally{if(q.toLowerCase().indexOf("async")===-1){w()}}};l++;try{return u(p)}catch(r){return p(r)}};h=d.once(function(){d.log("Passed: "+i+" Failed: "+m+" ["+j+"]");if(m>0){try{return process.exit(m)}catch(n){}}});return{$:{approx:function(p,n,q){if(q==null){q=0.1}return Math.abs(p-n)<q},assert:function(p,n){if(n==null){n="no message"}if(!p){throw new Error("Assertion failed: "+n)}},assertEqual:function(p,n,q){if(p!==n){throw Error(""+(q||"")+" ("+(p!=null?p.toString():void 0)+") should equal ("+(n!=null?n.toString():void 0)+")")}},assertArrayEqual:function(q,n,r){var s,v,u,p;p=[];for(s=v=0,u=q.length;v<u;s=v+=1){try{p.push(d.assertEqual(q[s],n[s],r))}catch(t){throw Error(""+(r||"")+" "+(q!=null?q.toString():void 0)+" should equal "+(n!=null?n.toString():void 0))}}return p},testGroup:function(s,r){var t,q,p,n;q=setInterval((function(){if(l===0){clearInterval(q);return h()}}),50);n=[];for(p in r){t=r[p];n.push(k(s,p,t))}return n}},assertEqual:function(){var n,p,q,s,r,t=this;p=1<=arguments.length?e.call(arguments,0):[];if(p.length>1){p=p.map(function(u){if(d.is("function",u)){return u.call(t,t)}else{return u}});n=p[0];for(q=s=1,r=p.length;1<=r?s<r:s>r;q=1<=r?++s:--s){d.assertEqual(n,p[q])}}return this}}});d.plugin({depends:"dialog",provides:"wizard"},function(){return{$:{wizard:function(){var p,q,h,s,n,j,i,l,r,m,k;i=1<=arguments.length?e.call(arguments,0):[];if(i.length===1&&((m=d.type(i[0]))==="array"||m==="bling")){i=i[0]}p=0;s=d.dialog(i[0]).select("parentNode");h=[];j=function(t){if(!i.length){return d.identity}return function(){var v,y,z,u,w;u=(p+t)%i.length;while(u<0){u+=i.length}if(u===p){return}v=d(h[p]);y=d(h[u]);w=v.width()[0];z=t<0?window.innerWidth-w:0;v.removeClass("wiz-active").css({left:d.px(z)}).fadeOut();y.addClass("wiz-active").centerOn(s).fadeIn();return p=u}};s.delegate(".wiz-next","click",j(+1));s.delegate(".wiz-back","click",j(-1));k=i.slice(1);for(l=0,r=k.length;l<r;l++){n=k[l];q=d.synth("div.dialog div.title + div.content").css({left:d.px(window.innerWidth+100)}).hide().appendTo(s);n=d.extend(d.dialog.getDefaultOptions(),n);q.find(".title").append(d.dialog.getContent(n.titleType,n.title));q.find(".content").append(d.dialog.getContent(n.contentType,n.content))}h=s.find(".dialog");h.take(1).show();return s}}}})}).call(this);