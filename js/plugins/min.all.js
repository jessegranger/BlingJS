(function(){(function(a){return a.plugin(function(){var d,e,c,b;e={};c=function(g,h){return e[g]=h};d=function(g){return e[obj.t]};b=[];Object.Type.extend(null,{compact:function(f){return Object.String(f)}});Object.Type.extend("undefined",{compact:function(f){return""}});Object.Type.extend("null",{compact:function(f){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(g){var f;return((function(){var j,i,h;h=[];for(j=0,i=g.length;j<i;j++){f=g[j];h.push(Object.Compact(f))}return h})()).join("")}});Object.Type.extend("bling",{compact:function(f){return f.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(g){var f;return Object.Compact((f=d(g))!=null?f.call(g,g):void 0)}});Object.Compact=function(g){var f;b.push(g);if((f=Object.Type.lookup(g))!=null){f.compact(g)}return b.pop()};Object.Extend(Object.Compact,{register:c,lookup:d});c("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});c("text",function(){return this.EN});c("link",function(){var g,h,j,f,i;g=a(["<a"]);i=["href","name","target"];for(j=0,f=i.length;j<f;j++){h=i[j];if(h in this){g.extend(" ",h,"='",this[h],"'")}}return g.extend(">",node.content,"</a>")});a.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var b,c;b=function(d,e){return Object.Extend(document.createElement(d),e)};c=function(d,e){var g,h,f;g=f=null;h=b(d,Object.Extend(e,{"onload!":function(){if(f!=null){return a.publish(f)}}}));a("head").delay(10,function(){var i=this;if(g!=null){return a.subscribe(g,function(){return i.append(h)})}else{return this.append(h)}});h=a(h);return Object.Extend(h,{depends:function(i){g=d+"-"+i;return h},provides:function(i){f=d+"-"+i;return h}})};return{name:"LazyLoader",$:{script:function(d){return c("script",{"src!":d})},style:function(d){return c("link",{"href!":d,"rel!":"stylesheet"})}}}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var g,f,h,a;f={};h=function(d,c){return f[d]=c};g=function(c){return f[obj.t]};a=[];Object.Type.extend(null,{compact:function(c){return Object.String(c)}});Object.Type.extend("undefined",{compact:function(c){return""}});Object.Type.extend("null",{compact:function(c){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(c){var d;return((function(){var e,k,l;l=[];for(e=0,k=c.length;e<k;e++){d=c[e];l.push(Object.Compact(d))}return l})()).join("")}});Object.Type.extend("bling",{compact:function(c){return c.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(c){var d;return Object.Compact((d=g(c))!=null?d.call(c,c):void 0)}});Object.Compact=function(c){var d;a.push(c);if((d=Object.Type.lookup(c))!=null){d.compact(c)}return a.pop()};Object.Extend(Object.Compact,{register:h,lookup:g});h("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});h("text",function(){return this.EN});h("link",function(){var k,e,c,l,d;k=b(["<a"]);d=["href","name","target"];for(c=0,l=d.length;c<l;c++){e=d[c];if(e in this){k.extend(" ",e,"='",this[e],"'")}}return k.extend(">",node.content,"</a>")});b.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var a,d;a=function(f,c){return Object.Extend(document.createElement(f),c)};d=function(l,k){var i,c,j;i=j=null;c=a(l,Object.Extend(k,{"onload!":function(){if(j!=null){return b.publish(j)}}}));b("head").delay(10,function(){var e=this;if(i!=null){return b.subscribe(i,function(){return e.append(c)})}else{return this.append(c)}});c=b(c);return Object.Extend(c,{depends:function(e){i=l+"-"+e;return c},provides:function(e){j=l+"-"+e;return c}})};return{name:"LazyLoader",$:{script:function(c){return d("script",{"src!":c})},style:function(c){return d("link",{"href!":c,"rel!":"stylesheet"})}}}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var a,G,F,E,D,L,C,P,O,M,J,B,y,K,A,z,I,w,N,H,x;A=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;K="<span class='opr'>$&</span>";J=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;M="<span class='kwd'>$&</span>";a=/\d+\.*\d*/g;y="<span class='num'>$&</span>";F=/\$(\(|\.)/g;G="<span class='bln'>$$</span>$1";x=/\t/g;H="&nbsp;&nbsp;";I=/\/\/.*?(?:\n|$)/;B=/\/\*(?:.|\n)*?\*\//;D=function(c){if(c){return"<span class='com'>"+c+"</span>"}else{return""}};z=function(c){if(c){return"<span class='str'>"+c+"</span>"}else{return""}};C=function(e,f){var c,d;c=e.indexOf('"',f);d=e.indexOf("'",f);if(c===-1){c=e.length}if(d===-1){d=e.length}if(c===d){return[null,-1]}if(c<d){return['"',c]}return["'",d]};E=function(c,d,e){var f;f=c.indexOf(e,d);while(c.charAt(f-1)==="\\"&&(0<f&&f<c.length)){f=c.indexOf(e,f+1)}return f};N=function(d){var g,i,e,f,h,c;g=0;f=d.length;c=[];if(!Object.IsString(d)){if(!Object.IsFunction(d.toString)){throw TypeError("invalid string argument to split_quoted")}else{d=d.toString();f=d.length}}while(g<f){h=C(d,g);i=h[1];if(i===-1){c.push(d.substring(g));break}c.push(d.substring(g,i));e=E(d,i+1,h[0]);if(e===-1){throw Error("unclosed quote: "+h[0]+" starting at "+i)}c.push(d.substring(i,e+1));g=e+1}return c};L=function(e){var c,d;c=e.match(I);d=e.match(B);if(c===d){return[-1,null]}if(c===null&&d!==null){return[d.index,d[0]]}if(c!==null&&d===null){return[c.index,c[0]]}if(d.index<c.index){return[d.index,d[0]]}return[c.index,c[0]]};w=function(d){var g,c,f,i,e,h;e=[];g=0;f=d.length;while(g<f){h=d.substring(g);i=L(h);c=i[0];if(c>-1){e.push(h.substring(0,c));e.push(i[1]);g+=c+i[1].length}else{e.push(h);break}}return e};P=function(c,d){return c.replace(A,K).replace(a,y).replace(J,M).replace(F,G).replace(x,H)+z(d)};O=function(d,c){return b(N(d)).fold(P).join("")+D(c)};return{name:"PrettyPrint",$:{prettyPrint:function(d,c){var e,f,g;if(Object.IsFunction(d)){d=d.toString()}if(!Object.IsString(d)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(d)+"'")}if(b("style#prettyPrint").length===0){f="code.pp .bln { font-size: 17px; } ";c=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},c);for(e in c){f+="code.pp ."+e+" { color: "+c[e]+"; } "}b.synth("style#prettyPrint").text(f).appendTo("head")}return g="<code class='pp'>"+(b(w(d)).fold(O).join(""))+"</code>"}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b();a.__super__=g.prototype;return a};(function(a){a.plugin({provides:"StateMachine"},function(){var b;return{$:{StateMachine:b=(function(){function f(e){this.reset();this.table=e;Object.defineProperty(this,"modeline",{get:function(){return this.table[this._mode]}});Object.defineProperty(this,"mode",{set:function(j){var i;this._lastMode=this._mode;this._mode=j;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){i=this.modeline.enter.call(this);while(a.is("function",i)){i=i.call(this)}}return j},get:function(){return this._mode}})}f.prototype.reset=function(){this._mode=null;return this._lastMode=null};f.prototype.GO=function(e){return function(){return this.mode=e}};f.GO=function(e){return function(){return this.mode=e}};f.prototype.tick=function(e){var j,i;i=this.modeline;if(!(i!=null)){j=null}else{if(e in i){j=i[e]}else{if("def" in i){j=i.def}}}while(a.is("function",j)){j=j.call(this,e)}return j};f.prototype.run=function(o){var e,n,l,p,m;this.mode=0;for(l=0,p=o.length;l<p;l++){e=o[l];n=this.tick(e)}if(a.is("function",(m=this.modeline)!=null?m.eof:void 0)){n=this.modeline.eof.call(this)}while(a.is("function",n)){n=n.call(this)}this.reset();return this};return f})()}}});return a.plugin({provides:"synth",depends:"StateMachine"},function(){var b;b=(function(g){c(h,g);h.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':h.GO(6),"'":h.GO(7),"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.tag+=e},eof:h.GO(13)},{".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.id+=e},eof:h.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.cls+=e},eof:h.GO(13)},{"=":h.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.attr+=e},eof:h.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.val+=e},eof:h.GO(12)},{'"':h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{"'":h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var e;this.emitNode();this.parent=(e=this.parent)!=null?e.parentNode:void 0;return this.GO(0)}},{enter:function(){return a.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function h(){h.__super__.constructor.call(this,h.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}h.prototype.emitNode=function(){var f,e;e=document.createElement(this.tag);e.id=this.id||null;e.className=this.cls||null;for(f in this.attrs){e.setAttribute(f,this.attrs[f])}this.parent.appendChild(e);return this.parent=e};h.prototype.emitText=function(){this.parent.appendChild(a.HTML.parse(this.text));return this.text=""};return h})(a.StateMachine);return{$:{synth:function(g){var h;h=new b();h.run(g);if(h.fragment.childNodes.length===1){return a(h.fragment.childNodes[0])}else{return a(h.fragment)}}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b();a.__super__=g.prototype;return a};(function(a){var b,f;b={};a.plugin(function(){var h,e;h=null;b={};e={register_engine:function(j,g){b[j]=g;if(!(h!=null)){return h=j}},render:function(g,j){if(h in b){return b[h](g,j)}}};e.__defineSetter__("engine",function(g){if(!g in b){throw new Error("invalid template engine: "+g+" not one of "+(Object.Keys(b)))}else{return h=g}});e.__defineGetter__("engine",function(){return h});return{name:"Template",$:{template:e}}});a.template.register_engine("null",(function(){return function(e,h){return e}})());f=function(i,q,u,v,p){var r,s,e,t;if(p==null){p=-1}r=1;if(p<0){p=i.length+1+p}for(s=t=v;v<=p?t<p:t>p;s=v<=p?++t:--t){e=i[s];if(e===u){r+=1}else{if(e===q){r-=1}}if(r===0){return s}}return -1};a.template.register_engine("pythonic",(function(){var j,e,k,l;l=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;j=/%[\(\/]/;e=function(z){var C,w,h,i,A,g,x,y,B,n;C=z.split(j);x=C.length;B=[C[0]];i=1;for(h=n=1;1<=x?n<x:n>x;h=1<=x?++n:--n){w=f(C[h],")","(",0,-1);if(w===-1){return"Template syntax error: unmatched '%(' starting at: "+(C[h].substring(0,15))}A=C[h].substring(0,w);y=C[h].substring(w);g=l.exec(y);if(g===null){return"Template syntax error: invalid type specifier starting at '"+y+"'"}y=g[4];B[i++]=A;B[i++]=g[1]|0;B[i++]=g[2]|0;B[i++]=g[3];B[i++]=y}return B};e.cache={};k=function(B,F){var E,g,J,L,G,n,C,i,D,I,H,M,K,h;E=e.cache[B];if(!(E!=null)){E=e.cache[B]=e(B)}C=[E[0]];L=1;n=E.length;for(J=M=1,K=n-5;M<=K;J=M+=5){h=E.slice(J,(J+4)+1||9000000000),G=h[0],i=h[1],g=h[2],I=h[3],D=h[4];H=F[G];if(!(H!=null)){H="missing value: "+G}switch(I){case"d":C[L++]=""+parseInt(H,10);break;case"f":C[L++]=parseFloat(H).toFixed(g);break;case"s":C[L++]=""+H;break;default:C[L++]=""+H}if(i>0){C[L]=String.PadLeft(C[L],i)}C[L++]=D}return C.join("")};return k})());return a.template.register_engine("js-eval",(function(){var e;e=(function(i){c(j,i);function j(){return j.__super__.constructor.apply(this,arguments)}j.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return j})(a.StateMachine);return function(i,j){return i}})())})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var e,f,a;a=function(c){var m,l,d,n,i;l=c.indexOf(":");if(l>0){n=parseInt(c.slice(0,l),10);d=c.slice(l+1,l+1+n);i=c[l+1+n];m=c.slice(l+n+2);d=(function(){switch(i){case"#":return Number(d);case"'":return String(d);case"!":return d==="true";case"~":return null;case"]":return e(d);case"}":return f(d)}})();return[d,m]}return void 0};e=function(j){var c,i,d;c=[];while(j.length>0){d=a(j),i=d[0],j=d[1];c.push(i)}return c};f=function(m){var c,l,d,k,n;c={};while(m.length>0){k=a(m),l=k[0],m=k[1];n=a(m),d=n[0],m=n[1];c[l]=d}return c};return{name:"TNET",$:{TNET:{stringify:function(l){var d,k,c,j;j=(function(){switch(Object.Type(l)){case"number":return[String(l),"#"];case"string":return[l,"'"];case"function":return[String(l),"'"];case"boolean":return[String(!!l),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var g,h,i;i=[];for(g=0,h=l.length;g<h;g++){c=l[g];i.push(b.TNET.stringify(c))}return i})()).join(""),"]"];case"object":return[((function(){var g;g=[];for(c in l){g.push(b.TNET.stringify(c)+b.TNET.stringify(l[c]))}return g})()).join(""),"}"]}})(),d=j[0],k=j[1];return(d.length|0)+":"+d+k},parse:function(d){var c;return(c=a(d))!=null?c[0]:void 0}}}}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var k,h,l,i,j,a;h=function(e,c){var d;c=Object.Extend({autoOpen:false,draggable:true},c);d=b(e).addClass("dialog");if(c.draggable){d.draggable()}if(c.autoOpen){d.show().center()}d.find("button.close, .close-button").bind("click touchstart",function(){d.hide();return false});return d};l=function(f,d){var p,c,g,e,o;d=Object.Extend({handleCSS:{}},d);d.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},d.handleCSS);p=b(f);g=false;e=o=0;c=b.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(d.handleCSS.bind("mousedown, touchstart",function(m){g=true;e||(e=m.pageX);o||(o=m.pageY);return false})));b(document.bind("mousemove, touchmove",function(m){var n,r;if(g){n=m.pageX-e;r=m.pageY-o;p.transform({translate:[n,r]},0).trigger("drag",{dragObject:p});return false}})).bind("mouseup, touchend",function(n){var m;if(g){g=false;m=c.position()[0];return b(document.elementFromPoint(m.left,m.top-1).trigger("drop",{dropObject:p}))}});return p.addClass("draggable").css({position:"relative","padding-top":p.css("padding-top").map(Number.AtLeast(parseInt(d.handleCSS.height,10))).px().first()}.append(c))};i=function(n,e){var f,c,d,g;e=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},e);f=b(n).addClass("progress-bar");g=0;if(e.reset){c=f.css("background").first();d=f.css("color").first()}return f.zap("updateProgress",function(m){while(m>1){m/=100}g=m;if(m===1&&e.reset){f.css("background",c).css("color",d)}else{f.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(m*100)+"% 0, color-stop(0, "+e.barColor+"), color-stop(0.98, "+e.barColor+"), color-stop(1.0, "+e.backgroundColor+"))",color:e.textColor})}if(Object.IsFunc(e.change)){return e.change(g)}})};k=function(g,d){var f,e,c;d=Object.Extend({exclusive:false,sticky:false},d);e=b(g).addClass("accordion");c=null;f=function(s){var v,n,u,t;u=b(s).children().first().filter("*");if(u.len()!==2){throw Exception("accordion row requires 2 elements, not "+(u.len()))}t=u.eq(0).addClass("title");v=u.eq(1).addClass("body").hide();n=false;return t.click(function(){if(d.exclusive){e.find(".body").hide()}if(n){if(!d.sticky){v.hide().removeClass("visible");t.removeClass("selected").trigger("deselect");return n=false}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}})};e.bind("DOMNodeInserted",function(p){var q,r;q=e.children().first().filter("*");r=b(p.target).parents().first();return f(r.intersect(q))});e.children().first().filter("*").map(f);return e};a=function(g,d){var p,f,e,q,c;f=b(g).css({position:"relative",top:"0px",left:"0px"}.hide().map(b));p=0;f[p].show();f.next=function(){f[p].hide();p=++p%nn;return f[p].show()};f.activate=function(m){f[p].hide();p=m;return f[m].show()};for(e=q=0,c=f.len();0<=c?q<c:q>c;e=0<=c?++q:--q){f[e].zap("_viewIndex",e.zap("activate",function(){return f.activate(this._viewIndex)}))}return f};j=function(g,f){var d,o,e,c;e=b(g);f=b(f).viewStack();o=e.len();for(d=c=0;0<=o?c<=o:c>=o;d=0<=o?++c:--c){e._tabIndex=d}b(e[0]).addClass("active");return e.click(function(){e.removeClass("active");f.activate(this._tabIndex);return b(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:l,ProgressBar:i,ViewStack:a,Tabs:j,Accordion:k}},dialog:function(c){return h(this,c)},progressBar:function(c){return i(this,c)},viewStack:function(c){return a(this,c)},tabs:function(c){return j(this,c)},accordion:function(c){return k(this,c)},draggable:function(c){return l(this,c)}}})})(Bling)}).call(this);(function(){var b=[].slice;$.plugin(function(){var a,w,y,s,B,A,E,F,t,v,u,z,C,D,x,G;z=["px","pt","pc","em","%","in","cm","mm","ex",""];a=/(\d+\.*\d*)(px|pt|pc|em|%|in|cm|mm|ex)/;F=function(c){return a.exec(c)[2](a.test(c)?void 0:"")};s=function(c,d){return s[c][d]()};t=function(c){return function(){return c}};for(C=0,x=z.length;C<x;C++){w=z[C];for(D=0,G=z.length;D<G;D++){y=z[D];(s[w]||(s[w]={}))[y]=t(+(w===y||w===""||y===""))}}s["in"].pt=function(){return 72};s["in"].px=function(){return 96};s["in"].cm=function(){return 2.54};s.pc.pt=function(){return 12};s.cm.mm=function(){return 10};s.em.px=function(){var d,c;c=$("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body");d=c.width().first();c.remove();return d};s.ex.px=function(){var d,c;c=$("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body");d=c.width().first();c.remove();return d};s.ex.em=function(){return 2};E=function(){var d,e,c,f;f=[];for(e=0,c=z.length;e<c;e++){w=z[e];f.push((function(){var h,g,i;i=[];for(h=0,g=z.length;h<g;h++){y=z[h];if(!s(w,y)&&s(y,w)){console.log("found inverse: "+w+"."+y);s[w][y]=t(1/s(y,w))}i.push((function(){var j,k,l;l=[];for(k=0,j=z.length;k<j;k++){d=z[k];if(!s(w,d)&&s(w,y)&&s(y,d)){console.log("found induction: "+w+"."+d);l.push(s[w][d]=t(s(w,y)*s(y,d)))}else{l.push(void 0)}}return l})())}return i})())}return f};E();E();A=function(d,c){return parseFloat(d)*s[F(d)][c]()+c};$.assert(A("300px","cm")==="10cm");B=function(d,h){var g,f,e,c;c=[];for(g=f=0,e=h.length;0<=e?f<e:f>e;g=0<=e?++f:--f){c.push(h[g]=convertTo(d,h[g]))}return c};Object.Type.register("units",{match:function(c){return a.test(c)}});v=function(c){return function(){var e,d;e=1<=arguments.length?b.call(arguments,0):[];B(d=F(this[0]),this);return(c.apply(this,e))+d}};u=function(c){return function(){var e,d;e=1<=arguments.length?b.call(arguments,0):[];d=this.map(F);return c.apply(this.floats(),e).map(function(){})}};return{min:v(function(){return this.reduce(function(c){return Math.min(parseFloat(this),c)})}),max:v(function(){return this.reduce(function(c){return Math.max(parseFloat(this),c)})}),sum:v(function(){return this.reduce(function(c){return parseFloat(this)+c})}),mean:v(function(){return parseFloat(this.sum())/this.length}),magnitude:v(function(){return Math.sqrt(this.floats().squares().sum())}),squares:function(){return this.map(function(){var c;return(c=parseFloat(this))*c})},scale:function(c){return this.map(function(){return c*parseFloat(this)})},add:function(c){return this.map(function(){return c+this})},normalize:function(){return this.scale(1/this.magnitude())}}})}).call(this);(function(){$.plugin(function(){var l,i,j,g,h,k;i=function(){return"EOF"};l=function(a){a=extend({item:function(){return i},action:Function.Identity,latency:10},a);return extend(new $.EventEmitter(),{run:function(){var c,b=this;c=function(){var d;if((d=a.action(a.item()))!==i){b.emit("data",d);return setTimeout(c,a.latency)}};return setTimeout(c,a.latency)}})};for(h=k=0;k<1000;h=++k){j=h}g=0;return l({item:function(){return j[g++](g<j.length?void 0:i)},action:function(a){return(a*a)-1},latency:10}).on("data",function(a){return console.log("data:",a.on("error",function(b){return console.log("error:",b.run())}))})})}).call(this);(function(){(function(b){return b.plugin(function(){var g,f,h,a;f={};h=function(d,c){return f[d]=c};g=function(c){return f[obj.t]};a=[];Object.Type.extend(null,{compact:function(c){return Object.String(c)}});Object.Type.extend("undefined",{compact:function(c){return""}});Object.Type.extend("null",{compact:function(c){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(c){var d;return((function(){var e,k,l;l=[];for(e=0,k=c.length;e<k;e++){d=c[e];l.push(Object.Compact(d))}return l})()).join("")}});Object.Type.extend("bling",{compact:function(c){return c.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(c){var d;return Object.Compact((d=g(c))!=null?d.call(c,c):void 0)}});Object.Compact=function(c){var d;a.push(c);if((d=Object.Type.lookup(c))!=null){d.compact(c)}return a.pop()};Object.Extend(Object.Compact,{register:h,lookup:g});h("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});h("text",function(){return this.EN});h("link",function(){var k,e,c,l,d;k=b(["<a"]);d=["href","name","target"];for(c=0,l=d.length;c<l;c++){e=d[c];if(e in this){k.extend(" ",e,"='",this[e],"'")}}return k.extend(">",node.content,"</a>")});b.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var a,G,F,E,D,L,C,P,O,M,J,B,y,K,A,z,I,w,N,H,x;A=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;K="<span class='opr'>$&</span>";J=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;M="<span class='kwd'>$&</span>";a=/\d+\.*\d*/g;y="<span class='num'>$&</span>";F=/\$(\(|\.)/g;G="<span class='bln'>$$</span>$1";x=/\t/g;H="&nbsp;&nbsp;";I=/\/\/.*?(?:\n|$)/;B=/\/\*(?:.|\n)*?\*\//;D=function(c){if(c){return"<span class='com'>"+c+"</span>"}else{return""}};z=function(c){if(c){return"<span class='str'>"+c+"</span>"}else{return""}};C=function(e,f){var c,d;c=e.indexOf('"',f);d=e.indexOf("'",f);if(c===-1){c=e.length}if(d===-1){d=e.length}if(c===d){return[null,-1]}if(c<d){return['"',c]}return["'",d]};E=function(c,d,e){var f;f=c.indexOf(e,d);while(c.charAt(f-1)==="\\"&&(0<f&&f<c.length)){f=c.indexOf(e,f+1)}return f};N=function(d){var g,i,e,f,h,c;g=0;f=d.length;c=[];if(!Object.IsString(d)){if(!Object.IsFunction(d.toString)){throw TypeError("invalid string argument to split_quoted")}else{d=d.toString();f=d.length}}while(g<f){h=C(d,g);i=h[1];if(i===-1){c.push(d.substring(g));break}c.push(d.substring(g,i));e=E(d,i+1,h[0]);if(e===-1){throw Error("unclosed quote: "+h[0]+" starting at "+i)}c.push(d.substring(i,e+1));g=e+1}return c};L=function(e){var c,d;c=e.match(I);d=e.match(B);if(c===d){return[-1,null]}if(c===null&&d!==null){return[d.index,d[0]]}if(c!==null&&d===null){return[c.index,c[0]]}if(d.index<c.index){return[d.index,d[0]]}return[c.index,c[0]]};w=function(d){var g,c,f,i,e,h;e=[];g=0;f=d.length;while(g<f){h=d.substring(g);i=L(h);c=i[0];if(c>-1){e.push(h.substring(0,c));e.push(i[1]);g+=c+i[1].length}else{e.push(h);break}}return e};P=function(c,d){return c.replace(A,K).replace(a,y).replace(J,M).replace(F,G).replace(x,H)+z(d)};O=function(d,c){return b(N(d)).fold(P).join("")+D(c)};return{name:"PrettyPrint",$:{prettyPrint:function(d,c){var e,f,g;if(Object.IsFunction(d)){d=d.toString()}if(!Object.IsString(d)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(d)+"'")}if(b("style#prettyPrint").length===0){f="code.pp .bln { font-size: 17px; } ";c=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},c);for(e in c){f+="code.pp ."+e+" { color: "+c[e]+"; } "}b.synth("style#prettyPrint").text(f).appendTo("head")}return g="<code class='pp'>"+(b(w(d)).fold(O).join(""))+"</code>"}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b();a.__super__=g.prototype;return a};(function(a){a.plugin({provides:"StateMachine"},function(){var b;return{$:{StateMachine:b=(function(){function f(e){this.reset();this.table=e;Object.defineProperty(this,"modeline",{get:function(){return this.table[this._mode]}});Object.defineProperty(this,"mode",{set:function(j){var i;this._lastMode=this._mode;this._mode=j;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){i=this.modeline.enter.call(this);while(a.is("function",i)){i=i.call(this)}}return j},get:function(){return this._mode}})}f.prototype.reset=function(){this._mode=null;return this._lastMode=null};f.prototype.GO=function(e){return function(){return this.mode=e}};f.GO=function(e){return function(){return this.mode=e}};f.prototype.tick=function(e){var j,i;i=this.modeline;if(!(i!=null)){j=null}else{if(e in i){j=i[e]}else{if("def" in i){j=i.def}}}while(a.is("function",j)){j=j.call(this,e)}return j};f.prototype.run=function(o){var e,n,l,p,m;this.mode=0;for(l=0,p=o.length;l<p;l++){e=o[l];n=this.tick(e)}if(a.is("function",(m=this.modeline)!=null?m.eof:void 0)){n=this.modeline.eof.call(this)}while(a.is("function",n)){n=n.call(this)}this.reset();return this};return f})()}}});return a.plugin({provides:"synth",depends:"StateMachine"},function(){var b;b=(function(g){c(h,g);h.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':h.GO(6),"'":h.GO(7),"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.tag+=e},eof:h.GO(13)},{".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.id+=e},eof:h.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.cls+=e},eof:h.GO(13)},{"=":h.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.attr+=e},eof:h.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.val+=e},eof:h.GO(12)},{'"':h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{"'":h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var e;this.emitNode();this.parent=(e=this.parent)!=null?e.parentNode:void 0;return this.GO(0)}},{enter:function(){return a.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function h(){h.__super__.constructor.call(this,h.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}h.prototype.emitNode=function(){var f,e;e=document.createElement(this.tag);e.id=this.id||null;e.className=this.cls||null;for(f in this.attrs){e.setAttribute(f,this.attrs[f])}this.parent.appendChild(e);return this.parent=e};h.prototype.emitText=function(){this.parent.appendChild(a.HTML.parse(this.text));return this.text=""};return h})(a.StateMachine);return{$:{synth:function(g){var h;h=new b();h.run(g);if(h.fragment.childNodes.length===1){return a(h.fragment.childNodes[0])}else{return a(h.fragment)}}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b();a.__super__=g.prototype;return a};(function(a){var b,f;b={};a.plugin(function(){var h,e;h=null;b={};e={register_engine:function(j,g){b[j]=g;if(!(h!=null)){return h=j}},render:function(g,j){if(h in b){return b[h](g,j)}}};e.__defineSetter__("engine",function(g){if(!g in b){throw new Error("invalid template engine: "+g+" not one of "+(Object.Keys(b)))}else{return h=g}});e.__defineGetter__("engine",function(){return h});return{name:"Template",$:{template:e}}});a.template.register_engine("null",(function(){return function(e,h){return e}})());f=function(i,q,u,v,p){var r,s,e,t;if(p==null){p=-1}r=1;if(p<0){p=i.length+1+p}for(s=t=v;v<=p?t<p:t>p;s=v<=p?++t:--t){e=i[s];if(e===u){r+=1}else{if(e===q){r-=1}}if(r===0){return s}}return -1};a.template.register_engine("pythonic",(function(){var j,e,k,l;l=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;j=/%[\(\/]/;e=function(z){var C,w,h,i,A,g,x,y,B,n;C=z.split(j);x=C.length;B=[C[0]];i=1;for(h=n=1;1<=x?n<x:n>x;h=1<=x?++n:--n){w=f(C[h],")","(",0,-1);if(w===-1){return"Template syntax error: unmatched '%(' starting at: "+(C[h].substring(0,15))}A=C[h].substring(0,w);y=C[h].substring(w);g=l.exec(y);if(g===null){return"Template syntax error: invalid type specifier starting at '"+y+"'"}y=g[4];B[i++]=A;B[i++]=g[1]|0;B[i++]=g[2]|0;B[i++]=g[3];B[i++]=y}return B};e.cache={};k=function(B,F){var E,g,J,L,G,n,C,i,D,I,H,M,K,h;E=e.cache[B];if(!(E!=null)){E=e.cache[B]=e(B)}C=[E[0]];L=1;n=E.length;for(J=M=1,K=n-5;M<=K;J=M+=5){h=E.slice(J,(J+4)+1||9000000000),G=h[0],i=h[1],g=h[2],I=h[3],D=h[4];H=F[G];if(!(H!=null)){H="missing value: "+G}switch(I){case"d":C[L++]=""+parseInt(H,10);break;case"f":C[L++]=parseFloat(H).toFixed(g);break;case"s":C[L++]=""+H;break;default:C[L++]=""+H}if(i>0){C[L]=String.PadLeft(C[L],i)}C[L++]=D}return C.join("")};return k})());return a.template.register_engine("js-eval",(function(){var e;e=(function(i){c(j,i);function j(){return j.__super__.constructor.apply(this,arguments)}j.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return j})(a.StateMachine);return function(i,j){return i}})())})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var e,f,a;a=function(c){var m,l,d,n,i;l=c.indexOf(":");if(l>0){n=parseInt(c.slice(0,l),10);d=c.slice(l+1,l+1+n);i=c[l+1+n];m=c.slice(l+n+2);d=(function(){switch(i){case"#":return Number(d);case"'":return String(d);case"!":return d==="true";case"~":return null;case"]":return e(d);case"}":return f(d)}})();return[d,m]}return void 0};e=function(j){var c,i,d;c=[];while(j.length>0){d=a(j),i=d[0],j=d[1];c.push(i)}return c};f=function(m){var c,l,d,k,n;c={};while(m.length>0){k=a(m),l=k[0],m=k[1];n=a(m),d=n[0],m=n[1];c[l]=d}return c};return{name:"TNET",$:{TNET:{stringify:function(l){var d,k,c,j;j=(function(){switch(Object.Type(l)){case"number":return[String(l),"#"];case"string":return[l,"'"];case"function":return[String(l),"'"];case"boolean":return[String(!!l),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var g,h,i;i=[];for(g=0,h=l.length;g<h;g++){c=l[g];i.push(b.TNET.stringify(c))}return i})()).join(""),"]"];case"object":return[((function(){var g;g=[];for(c in l){g.push(b.TNET.stringify(c)+b.TNET.stringify(l[c]))}return g})()).join(""),"}"]}})(),d=j[0],k=j[1];return(d.length|0)+":"+d+k},parse:function(d){var c;return(c=a(d))!=null?c[0]:void 0}}}}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var k,h,l,i,j,a;h=function(e,c){var d;c=Object.Extend({autoOpen:false,draggable:true},c);d=b(e).addClass("dialog");if(c.draggable){d.draggable()}if(c.autoOpen){d.show().center()}d.find("button.close, .close-button").bind("click touchstart",function(){d.hide();return false});return d};l=function(f,d){var p,c,g,e,o;d=Object.Extend({handleCSS:{}},d);d.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},d.handleCSS);p=b(f);g=false;e=o=0;c=b.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(d.handleCSS.bind("mousedown, touchstart",function(m){g=true;e||(e=m.pageX);o||(o=m.pageY);return false})));b(document.bind("mousemove, touchmove",function(m){var n,r;if(g){n=m.pageX-e;r=m.pageY-o;p.transform({translate:[n,r]},0).trigger("drag",{dragObject:p});return false}})).bind("mouseup, touchend",function(n){var m;if(g){g=false;m=c.position()[0];return b(document.elementFromPoint(m.left,m.top-1).trigger("drop",{dropObject:p}))}});return p.addClass("draggable").css({position:"relative","padding-top":p.css("padding-top").map(Number.AtLeast(parseInt(d.handleCSS.height,10))).px().first()}.append(c))};i=function(n,e){var f,c,d,g;e=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},e);f=b(n).addClass("progress-bar");g=0;if(e.reset){c=f.css("background").first();d=f.css("color").first()}return f.zap("updateProgress",function(m){while(m>1){m/=100}g=m;if(m===1&&e.reset){f.css("background",c).css("color",d)}else{f.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(m*100)+"% 0, color-stop(0, "+e.barColor+"), color-stop(0.98, "+e.barColor+"), color-stop(1.0, "+e.backgroundColor+"))",color:e.textColor})}if(Object.IsFunc(e.change)){return e.change(g)}})};k=function(g,d){var f,e,c;d=Object.Extend({exclusive:false,sticky:false},d);e=b(g).addClass("accordion");c=null;f=function(s){var v,n,u,t;u=b(s).children().first().filter("*");if(u.len()!==2){throw Exception("accordion row requires 2 elements, not "+(u.len()))}t=u.eq(0).addClass("title");v=u.eq(1).addClass("body").hide();n=false;return t.click(function(){if(d.exclusive){e.find(".body").hide()}if(n){if(!d.sticky){v.hide().removeClass("visible");t.removeClass("selected").trigger("deselect");return n=false}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}})};e.bind("DOMNodeInserted",function(p){var q,r;q=e.children().first().filter("*");r=b(p.target).parents().first();return f(r.intersect(q))});e.children().first().filter("*").map(f);return e};a=function(g,d){var p,f,e,q,c;f=b(g).css({position:"relative",top:"0px",left:"0px"}.hide().map(b));p=0;f[p].show();f.next=function(){f[p].hide();p=++p%nn;return f[p].show()};f.activate=function(m){f[p].hide();p=m;return f[m].show()};for(e=q=0,c=f.len();0<=c?q<c:q>c;e=0<=c?++q:--q){f[e].zap("_viewIndex",e.zap("activate",function(){return f.activate(this._viewIndex)}))}return f};j=function(g,f){var d,o,e,c;e=b(g);f=b(f).viewStack();o=e.len();for(d=c=0;0<=o?c<=o:c>=o;d=0<=o?++c:--c){e._tabIndex=d}b(e[0]).addClass("active");return e.click(function(){e.removeClass("active");f.activate(this._tabIndex);return b(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:l,ProgressBar:i,ViewStack:a,Tabs:j,Accordion:k}},dialog:function(c){return h(this,c)},progressBar:function(c){return i(this,c)},viewStack:function(c){return a(this,c)},tabs:function(c){return j(this,c)},accordion:function(c){return k(this,c)},draggable:function(c){return l(this,c)}}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var v,k,l,m,n,f,o,b,c,e,h,p,s,g,q,r,i,u,d,j,t;q=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;g="<span class='opr'>$&</span>";h=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;e="<span class='kwd'>$&</span>";v=/\d+\.*\d*/g;s="<span class='num'>$&</span>";l=/\$(\(|\.)/g;k="<span class='bln'>$$</span>$1";t=/\t/g;j="&nbsp;&nbsp;";i=/\/\/.*?(?:\n|$)/;p=/\/\*(?:.|\n)*?\*\//;n=function(w){if(w){return"<span class='com'>"+w+"</span>"}else{return""}};r=function(w){if(w){return"<span class='str'>"+w+"</span>"}else{return""}};o=function(z,y){var x,w;x=z.indexOf('"',y);w=z.indexOf("'",y);if(x===-1){x=z.length}if(w===-1){w=z.length}if(x===w){return[null,-1]}if(x<w){return['"',x]}return["'",w]};m=function(x,w,z){var y;y=x.indexOf(z,w);while(x.charAt(y-1)==="\\"&&(0<y&&y<x.length)){y=x.indexOf(z,y+1)}return y};d=function(A){var z,y,w,C,B,x;z=0;C=A.length;x=[];if(!Object.IsString(A)){if(!Object.IsFunction(A.toString)){throw TypeError("invalid string argument to split_quoted")}else{A=A.toString();C=A.length}}while(z<C){B=o(A,z);y=B[1];if(y===-1){x.push(A.substring(z));break}x.push(A.substring(z,y));w=m(A,y+1,B[0]);if(w===-1){throw Error("unclosed quote: "+B[0]+" starting at "+y)}x.push(A.substring(y,w+1));z=w+1}return x};f=function(y){var x,w;x=y.match(i);w=y.match(p);if(x===w){return[-1,null]}if(x===null&&w!==null){return[w.index,w[0]]}if(x!==null&&w===null){return[x.index,x[0]]}if(w.index<x.index){return[w.index,w[0]]}return[x.index,x[0]]};u=function(A){var z,x,C,B,w,y;w=[];z=0;C=A.length;while(z<C){y=A.substring(z);B=f(y);x=B[0];if(x>-1){w.push(y.substring(0,x));w.push(B[1]);z+=x+B[1].length}else{w.push(y);break}}return w};b=function(x,w){return x.replace(q,g).replace(v,s).replace(h,e).replace(l,k).replace(t,j)+r(w)};c=function(w,x){return a(d(w)).fold(b).join("")+n(x)};return{name:"PrettyPrint",$:{prettyPrint:function(A,x){var w,z,y;if(Object.IsFunction(A)){A=A.toString()}if(!Object.IsString(A)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(A)+"'")}if(a("style#prettyPrint").length===0){z="code.pp .bln { font-size: 17px; } ";x=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},x);for(w in x){z+="code.pp ."+w+" { color: "+x[w]+"; } "}a.synth("style#prettyPrint").text(z).appendTo("head")}return y="<code class='pp'>"+(a(u(A)).fold(c).join(""))+"</code>"}}}})})(Bling)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};(function(c){c.plugin({provides:"StateMachine"},function(){var d;return{$:{StateMachine:d=(function(){function e(f){this.reset();this.table=f;Object.defineProperty(this,"modeline",{get:function(){return this.table[this._mode]}});Object.defineProperty(this,"mode",{set:function(g){var h;this._lastMode=this._mode;this._mode=g;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){h=this.modeline.enter.call(this);while(c.is("function",h)){h=h.call(this)}}return g},get:function(){return this._mode}})}e.prototype.reset=function(){this._mode=null;return this._lastMode=null};e.prototype.GO=function(f){return function(){return this.mode=f}};e.GO=function(f){return function(){return this.mode=f}};e.prototype.tick=function(h){var f,g;g=this.modeline;if(!(g!=null)){f=null}else{if(h in g){f=g[h]}else{if("def" in g){f=g.def}}}while(c.is("function",f)){f=f.call(this,h)}return f};e.prototype.run=function(g){var k,h,j,f,i;this.mode=0;for(j=0,f=g.length;j<f;j++){k=g[j];h=this.tick(k)}if(c.is("function",(i=this.modeline)!=null?i.eof:void 0)){h=this.modeline.eof.call(this)}while(c.is("function",h)){h=h.call(this)}this.reset();return this};return e})()}}});return c.plugin({provides:"synth",depends:"StateMachine"},function(){var d;d=(function(f){b(e,f);e.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':e.GO(6),"'":e.GO(7),"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.tag+=g},eof:e.GO(13)},{".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.id+=g},eof:e.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.cls+=g},eof:e.GO(13)},{"=":e.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(g){return this.attr+=g},eof:e.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(g){return this.val+=g},eof:e.GO(12)},{'"':e.GO(8),def:function(g){return this.text+=g},eof:e.GO(12)},{"'":e.GO(8),def:function(g){return this.text+=g},eof:e.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var g;this.emitNode();this.parent=(g=this.parent)!=null?g.parentNode:void 0;return this.GO(0)}},{enter:function(){return c.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function e(){e.__super__.constructor.call(this,e.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}e.prototype.emitNode=function(){var g,h;h=document.createElement(this.tag);h.id=this.id||null;h.className=this.cls||null;for(g in this.attrs){h.setAttribute(g,this.attrs[g])}this.parent.appendChild(h);return this.parent=h};e.prototype.emitText=function(){this.parent.appendChild(c.HTML.parse(this.text));return this.text=""};return e})(c.StateMachine);return{$:{synth:function(f){var e;e=new d();e.run(f);if(e.fragment.childNodes.length===1){return c(e.fragment.childNodes[0])}else{return c(e.fragment)}}}}})})(Bling)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};(function(e){var d,c;d={};e.plugin(function(){var f,g;f=null;d={};g={register_engine:function(h,i){d[h]=i;if(!(f!=null)){return f=h}},render:function(i,h){if(f in d){return d[f](i,h)}}};g.__defineSetter__("engine",function(h){if(!h in d){throw new Error("invalid template engine: "+h+" not one of "+(Object.Keys(d)))}else{return f=h}});g.__defineGetter__("engine",function(){return f});return{name:"Template",$:{template:g}}});e.template.register_engine("null",(function(){return function(g,f){return g}})());c=function(n,l,g,f,m){var k,j,o,h;if(m==null){m=-1}k=1;if(m<0){m=n.length+1+m}for(j=h=f;f<=m?h<m:h>m;j=f<=m?++h:--h){o=n[j];if(o===g){k+=1}else{if(o===l){k-=1}}if(k===0){return j}}return -1};e.template.register_engine("pythonic",(function(){var h,i,g,f;f=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;h=/%[\(\/]/;i=function(v){var s,m,q,p,u,r,l,k,t,o;s=v.split(h);l=s.length;t=[s[0]];p=1;for(q=o=1;1<=l?o<l:o>l;q=1<=l?++o:--o){m=c(s[q],")","(",0,-1);if(m===-1){return"Template syntax error: unmatched '%(' starting at: "+(s[q].substring(0,15))}u=s[q].substring(0,m);k=s[q].substring(m);r=f.exec(k);if(r===null){return"Template syntax error: invalid type specifier starting at '"+k+"'"}k=r[4];t[p++]=u;t[p++]=r[1]|0;t[p++]=r[2]|0;t[p++]=r[3];t[p++]=k}return t};i.cache={};g=function(A,z){var k,r,v,t,y,o,m,p,l,w,x,s,u,q;k=i.cache[A];if(!(k!=null)){k=i.cache[A]=i(A)}m=[k[0]];t=1;o=k.length;for(v=s=1,u=o-5;s<=u;v=s+=5){q=k.slice(v,(v+4)+1||9000000000),y=q[0],p=q[1],r=q[2],w=q[3],l=q[4];x=z[y];if(!(x!=null)){x="missing value: "+y}switch(w){case"d":m[t++]=""+parseInt(x,10);break;case"f":m[t++]=parseFloat(x).toFixed(r);break;case"s":m[t++]=""+x;break;default:m[t++]=""+x}if(p>0){m[t]=String.PadLeft(m[t],p)}m[t++]=l}return m.join("")};return g})());return e.template.register_engine("js-eval",(function(){var f;f=(function(h){b(g,h);function g(){return g.__super__.constructor.apply(this,arguments)}g.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return g})(e.StateMachine);return function(h,g){return h}})())})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var d,c,b;b=function(k){var f,g,j,e,h;g=k.indexOf(":");if(g>0){e=parseInt(k.slice(0,g),10);j=k.slice(g+1,g+1+e);h=k[g+1+e];f=k.slice(g+e+2);j=(function(){switch(h){case"#":return Number(j);case"'":return String(j);case"!":return j==="true";case"~":return null;case"]":return d(j);case"}":return c(j)}})();return[j,f]}return void 0};d=function(e){var h,f,g;h=[];while(e.length>0){g=b(e),f=g[0],e=g[1];h.push(f)}return h};c=function(f){var j,g,i,h,e;j={};while(f.length>0){h=b(f),g=h[0],f=h[1];e=b(f),i=e[0],f=e[1];j[g]=i}return j};return{name:"TNET",$:{TNET:{stringify:function(e){var h,f,i,g;g=(function(){switch(Object.Type(e)){case"number":return[String(e),"#"];case"string":return[e,"'"];case"function":return[String(e),"'"];case"boolean":return[String(!!e),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var l,k,j;j=[];for(l=0,k=e.length;l<k;l++){i=e[l];j.push(a.TNET.stringify(i))}return j})()).join(""),"]"];case"object":return[((function(){var j;j=[];for(i in e){j.push(a.TNET.stringify(i)+a.TNET.stringify(e[i]))}return j})()).join(""),"}"]}})(),h=g[0],f=g[1];return(h.length|0)+":"+h+f},parse:function(e){var f;return(f=b(e))!=null?f[0]:void 0}}}}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var d,g,c,f,e,b;g=function(h,j){var i;j=Object.Extend({autoOpen:false,draggable:true},j);i=a(h).addClass("dialog");if(j.draggable){i.draggable()}if(j.autoOpen){i.show().center()}i.find("button.close, .close-button").bind("click touchstart",function(){i.hide();return false});return i};c=function(j,l){var n,m,i,k,h;l=Object.Extend({handleCSS:{}},l);l.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},l.handleCSS);n=a(j);i=false;k=h=0;m=a.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(l.handleCSS.bind("mousedown, touchstart",function(o){i=true;k||(k=o.pageX);h||(h=o.pageY);return false})));a(document.bind("mousemove, touchmove",function(q){var p,o;if(i){p=q.pageX-k;o=q.pageY-h;n.transform({translate:[p,o]},0).trigger("drag",{dragObject:n});return false}})).bind("mouseup, touchend",function(o){var p;if(i){i=false;p=m.position()[0];return a(document.elementFromPoint(p.left,p.top-1).trigger("drop",{dropObject:n}))}});return n.addClass("draggable").css({position:"relative","padding-top":n.css("padding-top").map(Number.AtLeast(parseInt(l.handleCSS.height,10))).px().first()}.append(m))};f=function(h,k){var j,m,l,i;k=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},k);j=a(h).addClass("progress-bar");i=0;if(k.reset){m=j.css("background").first();l=j.css("color").first()}return j.zap("updateProgress",function(n){while(n>1){n/=100}i=n;if(n===1&&k.reset){j.css("background",m).css("color",l)}else{j.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(n*100)+"% 0, color-stop(0, "+k.barColor+"), color-stop(0.98, "+k.barColor+"), color-stop(1.0, "+k.backgroundColor+"))",color:k.textColor})}if(Object.IsFunc(k.change)){return k.change(i)}})};d=function(h,k){var i,j,l;k=Object.Extend({exclusive:false,sticky:false},k);j=a(h).addClass("accordion");l=null;i=function(r){var o,m,p,q;p=a(r).children().first().filter("*");if(p.len()!==2){throw Exception("accordion row requires 2 elements, not "+(p.len()))}q=p.eq(0).addClass("title");o=p.eq(1).addClass("body").hide();m=false;return q.click(function(){if(k.exclusive){j.find(".body").hide()}if(m){if(!k.sticky){o.hide().removeClass("visible");q.removeClass("selected").trigger("deselect");return m=false}else{o.show().addClass("visible");q.addClass("selected").trigger("select");return m=true}}else{o.show().addClass("visible");q.addClass("selected").trigger("select");return m=true}})};j.bind("DOMNodeInserted",function(m){var o,n;o=j.children().first().filter("*");n=a(m.target).parents().first();return i(n.intersect(o))});j.children().first().filter("*").map(i);return j};b=function(h,l){var o,i,k,n,m;i=a(h).css({position:"relative",top:"0px",left:"0px"}.hide().map(a));o=0;i[o].show();i.next=function(){i[o].hide();o=++o%nn;return i[o].show()};i.activate=function(j){i[o].hide();o=j;return i[j].show()};for(k=n=0,m=i.len();0<=m?n<m:n>m;k=0<=m?++n:--n){i[k].zap("_viewIndex",k.zap("activate",function(){return i.activate(this._viewIndex)}))}return i};e=function(h,j){var l,n,k,m;k=a(h);j=a(j).viewStack();n=k.len();for(l=m=0;0<=n?m<=n:m>=n;l=0<=n?++m:--m){k._tabIndex=l}a(k[0]).addClass("active");return k.click(function(){k.removeClass("active");j.activate(this._tabIndex);return a(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:c,ProgressBar:f,ViewStack:b,Tabs:e,Accordion:d}},dialog:function(h){return g(this,h)},progressBar:function(h){return f(this,h)},viewStack:function(h){return b(this,h)},tabs:function(h){return e(this,h)},accordion:function(h){return d(this,h)},draggable:function(h){return c(this,h)}}})})(Bling)}).call(this);(function(){var a=[].slice;$.plugin(function(){var r,m,k,q,h,i,e,d,p,n,o,j,g,f,l,c;j=["px","pt","pc","em","%","in","cm","mm","ex",""];r=/(\d+\.*\d*)(px|pt|pc|em|%|in|cm|mm|ex)/;d=function(b){return r.exec(b)[2](r.test(b)?void 0:"")};q=function(t,s){return q[t][s]()};p=function(b){return function(){return b}};for(g=0,l=j.length;g<l;g++){m=j[g];for(f=0,c=j.length;f<c;f++){k=j[f];(q[m]||(q[m]={}))[k]=p(+(m===k||m===""||k===""))}}q["in"].pt=function(){return 72};q["in"].px=function(){return 96};q["in"].cm=function(){return 2.54};q.pc.pt=function(){return 12};q.cm.mm=function(){return 10};q.em.px=function(){var s,b;b=$("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body");s=b.width().first();b.remove();return s};q.ex.px=function(){var s,b;b=$("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body");s=b.width().first();b.remove();return s};q.ex.em=function(){return 2};e=function(){var u,t,b,s;s=[];for(t=0,b=j.length;t<b;t++){m=j[t];s.push((function(){var w,x,v;v=[];for(w=0,x=j.length;w<x;w++){k=j[w];if(!q(m,k)&&q(k,m)){console.log("found inverse: "+m+"."+k);q[m][k]=p(1/q(k,m))}v.push((function(){var A,z,y;y=[];for(z=0,A=j.length;z<A;z++){u=j[z];if(!q(m,u)&&q(m,k)&&q(k,u)){console.log("found induction: "+m+"."+u);y.push(q[m][u]=p(q(m,k)*q(k,u)))}else{y.push(void 0)}}return y})())}return v})())}return s};e();e();i=function(s,b){return parseFloat(s)*q[d(s)][b]()+b};$.assert(i("300px","cm")==="10cm");h=function(w,s){var t,u,v,b;b=[];for(t=u=0,v=s.length;0<=v?u<v:u>v;t=0<=v?++u:--u){b.push(s[t]=convertTo(w,s[t]))}return b};Object.Type.register("units",{match:function(b){return r.test(b)}});n=function(b){return function(){var s,t;s=1<=arguments.length?a.call(arguments,0):[];h(t=d(this[0]),this);return(b.apply(this,s))+t}};o=function(b){return function(){var s,t;s=1<=arguments.length?a.call(arguments,0):[];t=this.map(d);return b.apply(this.floats(),s).map(function(){})}};return{min:n(function(){return this.reduce(function(b){return Math.min(parseFloat(this),b)})}),max:n(function(){return this.reduce(function(b){return Math.max(parseFloat(this),b)})}),sum:n(function(){return this.reduce(function(b){return parseFloat(this)+b})}),mean:n(function(){return parseFloat(this.sum())/this.length}),magnitude:n(function(){return Math.sqrt(this.floats().squares().sum())}),squares:function(){return this.map(function(){var b;return(b=parseFloat(this))*b})},scale:function(b){return this.map(function(){return b*parseFloat(this)})},add:function(b){return this.map(function(){return b+this})},normalize:function(){return this.scale(1/this.magnitude())}}})}).call(this);(function(){$.plugin(function(){var c,f,e,b,a,d;f=function(){return"EOF"};c=function(g){g=extend({item:function(){return f},action:Function.Identity,latency:10},g);return extend(new $.EventEmitter(),{run:function(){var h,i=this;h=function(){var j;if((j=g.action(g.item()))!==f){i.emit("data",j);return setTimeout(h,g.latency)}};return setTimeout(h,g.latency)}})};for(a=d=0;d<1000;a=++d){e=a}b=0;return c({item:function(){return e[b++](b<e.length?void 0:f)},action:function(g){return(g*g)-1},latency:10}).on("data",function(g){return console.log("data:",g.on("error",function(h){return console.log("error:",h.run())}))})})}).call(this);