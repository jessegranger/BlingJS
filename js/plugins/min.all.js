(function(a){return a.plugin(function(){var d,e,c,b;e={};c=function(g,h){return e[g]=h};d=function(g){return e[obj.t]};b=[];Object.Type.extend(null,{compact:function(f){return Object.String(f)}});Object.Type.extend("undefined",{compact:function(f){return""}});Object.Type.extend("null",{compact:function(f){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(g){var f;return((function(){var j,i,h;h=[];for(j=0,i=g.length;j<i;j++){f=g[j];h.push(Object.Compact(f))}return h})()).join("")}});Object.Type.extend("bling",{compact:function(f){return f.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(g){var f;return Object.Compact((f=d(g))!=null?f.call(g,g):void 0)}});Object.Compact=function(g){var f;b.push(g);if((f=Object.Type.lookup(g))!=null){f.compact(g)}return b.pop()};Object.Extend(Object.Compact,{register:c,lookup:d});c("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});c("text",function(){return this.EN});c("link",function(){var g,h,j,f,i;g=a(["<a"]);i=["href","name","target"];for(j=0,f=i.length;j<f;j++){h=i[j];if(h in this){g.extend(" ",h,"='",this[h],"'")}}return g.extend(">",node.content,"</a>")});a.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling);(function(a){return a.plugin(function(){var b,c;b=function(d,e){return Object.Extend(document.createElement(d),e)};c=function(d,e){var g,h,f;g=f=null;h=b(d,Object.Extend(e,{"onload!":function(){if(f!=null){return a.publish(f)}}}));a("head").delay(10,function(){var i=this;if(g!=null){return a.subscribe(g,function(){return i.append(h)})}else{return this.append(h)}});h=a(h);return Object.Extend(h,{depends:function(i){g=d+"-"+i;return h},provides:function(i){f=d+"-"+i;return h}})};return{name:"LazyLoader",$:{script:function(d){return c("script",{"src!":d})},style:function(d){return c("link",{"href!":d,"rel!":"stylesheet"})}}}})})(Bling);(function(b){return b.plugin(function(){var g,f,h,a;f={};h=function(d,c){return f[d]=c};g=function(c){return f[obj.t]};a=[];Object.Type.extend(null,{compact:function(c){return Object.String(c)}});Object.Type.extend("undefined",{compact:function(c){return""}});Object.Type.extend("null",{compact:function(c){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(c){var d;return((function(){var e,k,l;l=[];for(e=0,k=c.length;e<k;e++){d=c[e];l.push(Object.Compact(d))}return l})()).join("")}});Object.Type.extend("bling",{compact:function(c){return c.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(c){var d;return Object.Compact((d=g(c))!=null?d.call(c,c):void 0)}});Object.Compact=function(c){var d;a.push(c);if((d=Object.Type.lookup(c))!=null){d.compact(c)}return a.pop()};Object.Extend(Object.Compact,{register:h,lookup:g});h("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});h("text",function(){return this.EN});h("link",function(){var k,e,c,l,d;k=b(["<a"]);d=["href","name","target"];for(c=0,l=d.length;c<l;c++){e=d[c];if(e in this){k.extend(" ",e,"='",this[e],"'")}}return k.extend(">",node.content,"</a>")});b.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling);(function(b){return b.plugin(function(){var a,d;a=function(f,c){return Object.Extend(document.createElement(f),c)};d=function(l,k){var i,c,j;i=j=null;c=a(l,Object.Extend(k,{"onload!":function(){if(j!=null){return b.publish(j)}}}));b("head").delay(10,function(){var e=this;if(i!=null){return b.subscribe(i,function(){return e.append(c)})}else{return this.append(c)}});c=b(c);return Object.Extend(c,{depends:function(e){i=l+"-"+e;return c},provides:function(e){j=l+"-"+e;return c}})};return{name:"LazyLoader",$:{script:function(c){return d("script",{"src!":c})},style:function(c){return d("link",{"href!":c,"rel!":"stylesheet"})}}}})})(Bling);(function(b){return b.plugin(function(){var a,G,F,E,D,L,C,P,O,M,J,B,y,K,A,z,I,w,N,H,x;A=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;K="<span class='opr'>$&</span>";J=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;M="<span class='kwd'>$&</span>";a=/\d+\.*\d*/g;y="<span class='num'>$&</span>";F=/\$(\(|\.)/g;G="<span class='bln'>$$</span>$1";x=/\t/g;H="&nbsp;&nbsp;";I=/\/\/.*?(?:\n|$)/;B=/\/\*(?:.|\n)*?\*\//;D=function(c){if(c){return"<span class='com'>"+c+"</span>"}else{return""}};z=function(c){if(c){return"<span class='str'>"+c+"</span>"}else{return""}};C=function(e,f){var c,d;c=e.indexOf('"',f);d=e.indexOf("'",f);if(c===-1){c=e.length}if(d===-1){d=e.length}if(c===d){return[null,-1]}if(c<d){return['"',c]}return["'",d]};E=function(c,d,e){var f;f=c.indexOf(e,d);while(c.charAt(f-1)==="\\"&&(0<f&&f<c.length)){f=c.indexOf(e,f+1)}return f};N=function(d){var g,i,e,f,h,c;g=0;f=d.length;c=[];if(!Object.IsString(d)){if(!Object.IsFunction(d.toString)){throw TypeError("invalid string argument to split_quoted")}else{d=d.toString();f=d.length}}while(g<f){h=C(d,g);i=h[1];if(i===-1){c.push(d.substring(g));break}c.push(d.substring(g,i));e=E(d,i+1,h[0]);if(e===-1){throw Error("unclosed quote: "+h[0]+" starting at "+i)}c.push(d.substring(i,e+1));g=e+1}return c};L=function(e){var c,d;c=e.match(I);d=e.match(B);if(c===d){return[-1,null]}if(c===null&&d!==null){return[d.index,d[0]]}if(c!==null&&d===null){return[c.index,c[0]]}if(d.index<c.index){return[d.index,d[0]]}return[c.index,c[0]]};w=function(d){var g,c,f,i,e,h;e=[];g=0;f=d.length;while(g<f){h=d.substring(g);i=L(h);c=i[0];if(c>-1){e.push(h.substring(0,c));e.push(i[1]);g+=c+i[1].length}else{e.push(h);break}}return e};P=function(c,d){return c.replace(A,K).replace(a,y).replace(J,M).replace(F,G).replace(x,H)+z(d)};O=function(d,c){return b(N(d)).fold(P).join("")+D(c)};return{name:"PrettyPrint",$:{prettyPrint:function(d,c){var e,f,g;if(Object.IsFunction(d)){d=d.toString()}if(!Object.IsString(d)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(d)+"'")}if(b("style#prettyPrint").length===0){f="code.pp .bln { font-size: 17px; } ";c=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},c);for(e in c){f+="code.pp ."+e+" { color: "+c[e]+"; } "}b.synth("style#prettyPrint").text(f).appendTo("head")}return g="<code class='pp'>"+(b(w(d)).fold(O).join(""))+"</code>"}}}})})(Bling);(function(){var d=Object.prototype.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b;a.__super__=g.prototype;return a};(function(a){a.plugin(function(){var b;b=(function(){function f(e){this.reset();this.table=e;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(j){var i;this._lastMode=this._mode;this._mode=j;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){i=this.modeline.enter.call(this);while(Object.IsFunction(i)){i=i.call(this)}}return j},get:function(){return this._mode}})}f.prototype.reset=function(){this._mode=null;return this._lastMode=null};f.prototype.GO=function(e){return function(){return this.mode=e}};f.GO=function(e){return function(){return this.mode=e}};f.prototype.run=function(q){var e,p,m,n,r,o;this.mode=0;for(n=0,r=q.length;n<r;n++){e=q[n];m=this.modeline;if(!(m!=null)){p=null}else{if(e in m){p=m[e]}else{if("def" in m){p=m.def}}}while(Object.IsFunction(p)){p=p.call(this,e)}}if(Object.IsFunction((o=this.modeline)!=null?o.eof:void 0)){p=this.modeline.eof.call(this)}while(Object.IsFunction(p)){p=p.call(this)}this.reset();return this};return f})();return{name:"StateMachine",$:{StateMachine:b}}});return a.plugin(function(){var b;b=(function(){c(f,a.StateMachine);f.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':f.GO(6),"'":f.GO(7),"#":f.GO(2),".":f.GO(3),"[":f.GO(4)," ":f.GO(9),"+":f.GO(11),",":f.GO(10),def:function(e){return this.tag+=e},eof:f.GO(13)},{".":f.GO(3),"[":f.GO(4)," ":f.GO(9),"+":f.GO(11),",":f.GO(10),def:function(e){return this.id+=e},eof:f.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":f.GO(2),".":f.GO(3),"[":f.GO(4)," ":f.GO(9),"+":f.GO(11),",":f.GO(10),def:function(e){return this.cls+=e},eof:f.GO(13)},{"=":f.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.attr+=e},eof:f.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.val+=e},eof:f.GO(12)},{'"':f.GO(8),def:function(e){return this.text+=e},eof:f.GO(12)},{"'":f.GO(8),def:function(e){return this.text+=e},eof:f.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var e;this.emitNode();this.parent=(e=this.parent)!=null?e.parentNode:void 0;return this.GO(0)}},{enter:function(){return a.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function f(){f.__super__.constructor.call(this,f.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}f.prototype.emitNode=function(){var h,e;e=document.createElement(this.tag);e.id=this.id||null;e.className=this.cls||null;for(h in this.attrs){e.setAttribute(h,this.attrs[h])}this.parent.appendChild(e);return this.parent=e};f.prototype.emitText=function(){this.parent.appendChild(a.HTML.parse(this.text));return this.text=""};return f})();return{name:"Synth",$:{synth:function(g){var h;h=new b();h.run(g);if(h.fragment.childNodes.length===1){return a(h.fragment.childNodes[0])}else{return a(h.fragment)}}}}})})(Bling)}).call(this);(function(){var d=Object.prototype.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b;a.__super__=g.prototype;return a};(function(a){var b,f;b={};a.plugin(function(){var h,e;h=null;b={};e={register_engine:function(j,g){b[j]=g;if(!(h!=null)){return h=j}},render:function(g,j){if(h in b){return b[h](g,j)}}};e.__defineSetter__("engine",function(g){if(!g in b){throw new Error("invalid template engine: "+g+" not one of "+(Object.Keys(b)))}else{return h=g}});e.__defineGetter__("engine",function(){return h});return{name:"Template",$:{template:e}}});a.template.register_engine("null",(function(){return function(e,h){return e}})());f=function(e,i,s,t,p){var o,q,r;if(p==null){p=-1}o=1;if(p<0){p=e.length+1+p}for(q=t;t<=p?q<p:q>p;t<=p?q++:q--){r=e[q];if(r===s){o+=1}else{if(r===i){o-=1}}if(o===0){return q}}return -1};a.template.register_engine("pythonic",(function(){var j,e,k,l;l=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;j=/%[\(\/]/;e=function(y){var g,v,i,n,z,h,w,x,A;g=y.split(j);w=g.length;A=[g[0]];n=1;for(i=1;1<=w?i<w:i>w;1<=w?i++:i--){v=f(g[i],")","(",0,-1);if(v===-1){return"Template syntax error: unmatched '%(' starting at: "+(g[i].substring(0,15))}z=g[i].substring(0,v);x=g[i].substring(v);h=l.exec(x);if(h===null){return"Template syntax error: invalid type specifier starting at '"+x+"'"}x=h[4];A[n++]=z;A[n++]=h[1]|0;A[n++]=h[2]|0;A[n++]=h[3];A[n++]=x}return A};e.cache={};k=function(D,E){var C,g,I,K,F,n,A,i,B,H,G,J,h;C=e.cache[D];if(!(C!=null)){C=e.cache[D]=e(D)}A=[C[0]];K=1;n=C.length;for(I=1,J=n-5;I<=J;I+=5){h=C.slice(I,(I+4)+1||9000000000),F=h[0],i=h[1],g=h[2],H=h[3],B=h[4];G=E[F];if(!(G!=null)){G="missing value: "+F}switch(H){case"d":A[K++]=""+parseInt(G,10);break;case"f":A[K++]=parseFloat(G).toFixed(g);break;case"s":A[K++]=""+G;break;default:A[K++]=""+G}if(i>0){A[K]=String.PadLeft(A[K],i)}A[K++]=B}return A.join("")};return k})());return a.template.register_engine("js-eval",(function(){var e;e=(function(){c(h,a.StateMachine);function h(){h.__super__.constructor.apply(this,arguments)}h.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return h})();return function(i,j){return i}})())})(Bling)}).call(this);(function(b){return b.plugin(function(){var e,f,a;a=function(c){var m,l,d,n,i;l=c.indexOf(":");if(l>0){n=parseInt(c.slice(0,l),10);d=c.slice(l+1,(l+1+n));i=c[l+1+n];m=c.slice(l+n+2);d=(function(){switch(i){case"#":return Number(d);case"'":return String(d);case"!":return d==="true";case"~":return null;case"]":return e(d);case"}":return f(d)}})();return[d,m]}};e=function(j){var c,i,d;c=[];while(j.length>0){d=a(j),i=d[0],j=d[1];c.push(i)}return c};f=function(n){var d,m,k,l,c;d={};while(n.length>0){l=a(n),m=l[0],n=l[1];c=a(n),k=c[0],n=c[1];d[m]=k}return d};return{name:"TNET",$:{TNET:{stringify:function(l){var d,k,c,j;j=(function(){switch(Object.Type(l)){case"number":return[String(l),"#"];case"string":return[l,"'"];case"function":return[String(l),"'"];case"boolean":return[String(!!l),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var g,h,i;i=[];for(g=0,h=l.length;g<h;g++){c=l[g];i.push(b.TNET.stringify(c))}return i})()).join(""),"]"];case"object":return[((function(){var g;g=[];for(c in l){g.push(b.TNET.stringify(c)+b.TNET.stringify(l[c]))}return g})()).join(""),"}"]}})(),d=j[0],k=j[1];return(d.length|0)+":"+d+k},parse:function(d){var c;return(c=a(d))!=null?c[0]:void 0}}}}})})(Bling);(function(b){return b.plugin(function(){var k,h,l,i,j,a;h=function(e,c){var d;c=Object.Extend({autoOpen:false,draggable:true},c);d=b(e).addClass("dialog");if(c.draggable){d.draggable()}if(c.autoOpen){d.show().center()}d.find("button.close, .close-button").bind("click touchstart",function(){d.hide();return false});return d};l=function(f,d){var p,c,g,e,o;d=Object.Extend({handleCSS:{}},d);d.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},d.handleCSS);p=b(f);g=false;e=o=0;c=b.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(d.handleCSS.bind("mousedown, touchstart",function(m){g=true;e||(e=m.pageX);o||(o=m.pageY);return false})));b(document.bind("mousemove, touchmove",function(m){var n,r;if(g){n=m.pageX-e;r=m.pageY-o;p.transform({translate:[n,r]},0).trigger("drag",{dragObject:p});return false}})).bind("mouseup, touchend",function(n){var m;if(g){g=false;m=c.position()[0];return b(document.elementFromPoint(m.left,m.top-1).trigger("drop",{dropObject:p}))}});return p.addClass("draggable").css({position:"relative","padding-top":p.css("padding-top").map(Number.AtLeast(parseInt(d.handleCSS.height,10))).px().first()}.append(c))};i=function(n,e){var f,c,d,g;e=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},e);f=b(n).addClass("progress-bar");g=0;if(e.reset){c=f.css("background").first();d=f.css("color").first()}return f.zap("updateProgress",function(m){while(m>1){m/=100}g=m;if(m===1&&e.reset){f.css("background",c).css("color",d)}else{f.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(m*100)+"% 0, color-stop(0, "+e.barColor+"), color-stop(0.98, "+e.barColor+"), color-stop(1.0, "+e.backgroundColor+"))",color:e.textColor})}if(Object.IsFunc(e.change)){return e.change(g)}})};k=function(g,d){var f,e,c;d=Object.Extend({exclusive:false,sticky:false},d);e=b(g).addClass("accordion");c=null;f=function(s){var v,n,u,t;u=b(s).children().first().filter("*");if(u.len()!==2){throw Exception("accordion row requires 2 elements, not "+(u.len()))}t=u.eq(0).addClass("title");v=u.eq(1).addClass("body").hide();n=false;return t.click(function(){if(d.exclusive){e.find(".body").hide()}if(n){if(!d.sticky){v.hide().removeClass("visible");t.removeClass("selected").trigger("deselect");return n=false}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}})};e.bind("DOMNodeInserted",function(p){var q,r;q=e.children().first().filter("*");r=b(p.target).parents().first();return f(r.intersect(q))});e.children().first().filter("*").map(f);return e};a=function(g,d){var o,f,e,c;f=b(g).css({position:"relative",top:"0px",left:"0px"}.hide().map(b));o=0;f[o].show();f.next=function(){f[o].hide();o=++o%nn;return f[o].show()};f.activate=function(m){f[o].hide();o=m;return f[m].show()};for(e=0,c=f.len();0<=c?e<c:e>c;0<=c?e++:e--){f[e].zap("_viewIndex",e.zap("activate",function(){return f.activate(this._viewIndex)}))}return f};j=function(g,f){var d,c,e;e=b(g);f=b(f).viewStack();c=e.len();for(d=0;0<=c?d<=c:d>=c;0<=c?d++:d--){e._tabIndex=d}b(e[0]).addClass("active");return e.click(function(){e.removeClass("active");f.activate(this._tabIndex);return b(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:l,ProgressBar:i,ViewStack:a,Tabs:j,Accordion:k}},dialog:function(c){return h(this,c)},progressBar:function(c){return i(this,c)},viewStack:function(c){return a(this,c)},tabs:function(c){return j(this,c)},accordion:function(c){return k(this,c)},draggable:function(c){return l(this,c)}}})})(Bling);(function(){var b=Array.prototype.slice;$.plugin(function(){var a,w,y,s,B,A,E,F,t,v,u,z,C,D,x,G;z=["px","pt","pc","em","%","in","cm","mm","ex",""];a=/(\d+\.*\d*)(px|pt|pc|em|%|in|cm|mm|ex)/;F=function(c){return a.exec(c)[2](a.test(c)?void 0:"")};s=function(c,d){return s[c][d]()};t=function(c){return function(){return c}};for(C=0,x=z.length;C<x;C++){w=z[C];for(D=0,G=z.length;D<G;D++){y=z[D];(s[w]||(s[w]={}))[y]=t(+(w===y||w===""||y===""))}}s["in"].pt=function(){return 72};s["in"].px=function(){return 96};s["in"].cm=function(){return 2.54};s.pc.pt=function(){return 12};s.cm.mm=function(){return 10};s.em.px=function(){var d,c;c=$("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body");d=c.width().first();c.remove();return d};s.ex.px=function(){var d,c;c=$("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body");d=c.width().first();c.remove();return d};s.ex.em=function(){return 2};E=function(){var f,h,c,e,d,g;g=[];for(e=0,d=z.length;e<d;e++){f=z[e];g.push((function(){var k,j,i;i=[];for(k=0,j=z.length;k<j;k++){h=z[k];if(!s(f,h)&&s(h,f)){console.log("found inverse: "+f+"."+h);s[f][h]=t(1/s(h,f))}i.push((function(){var m,n,l;l=[];for(n=0,m=z.length;n<m;n++){c=z[n];if(!s(f,c)&&s(f,h)&&s(h,c)){console.log("found induction: "+f+"."+c);l.push(s[f][c]=t(s(f,h)*s(h,c)))}else{l.push(void 0)}}return l})())}return i})())}return g};E();E();A=function(d,c){return parseFloat(d)*s[F(d)][c]()+c};$.assert(A("300px","cm")==="10cm");B=function(d,g){var f,e,c;c=[];for(f=0,e=g.length;0<=e?f<e:f>e;0<=e?f++:f--){c.push(g[f]=convertTo(d,g[f]))}return c};Object.Type.register("units",{match:function(c){return a.test(c)}});v=function(c){return function(){var e,d;e=1<=arguments.length?b.call(arguments,0):[];B(d=F(this[0]),this);return(c.apply(this,e))+d}};u=function(c){return function(){var e,d;e=1<=arguments.length?b.call(arguments,0):[];d=this.map(F);return c.apply(this.floats(),e).map(function(){})}};return{min:v(function(){return this.reduce(function(c){return Math.min(parseFloat(this),c)})}),max:v(function(){return this.reduce(function(c){return Math.max(parseFloat(this),c)})}),sum:v(function(){return this.reduce(function(c){return parseFloat(this)+c})}),mean:v(function(){return parseFloat(this.sum())/this.length}),magnitude:v(function(){return Math.sqrt(this.floats().squares().sum())}),squares:function(){return this.map(function(){var c;return(c=parseFloat(this))*c})},scale:function(c){return this.map(function(){return c*parseFloat(this)})},add:function(c){return this.map(function(){return c+this})},normalize:function(){return this.scale(1/this.magnitude())}}})}).call(this);$.plugin(function(){var j,h,i,f,g;h=function(){return"EOF"};j=function(a){a=extend({item:function(){return h},action:Function.Identity,latency:10},a);return extend(new $.EventEmitter(),{run:function(){var c;var b=this;c=function(){var d;if((d=a.action(a.item()))!==h){b.emit("data",d);return setTimeout(c,a.latency)}};return setTimeout(c,a.latency)}})};for(g=0;g<1000;g++){i=g}f=0;return j({item:function(){return i[f++](f<i.length?void 0:h)},action:function(a){return(a*a)-1},latency:10}).on("data",function(a){return console.log("data:",a.on("error",function(b){return console.log("error:",b.run())}))})});(function(b){return b.plugin(function(){var g,f,h,a;f={};h=function(d,c){return f[d]=c};g=function(c){return f[obj.t]};a=[];Object.Type.extend(null,{compact:function(c){return Object.String(c)}});Object.Type.extend("undefined",{compact:function(c){return""}});Object.Type.extend("null",{compact:function(c){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(c){var d;return((function(){var e,k,l;l=[];for(e=0,k=c.length;e<k;e++){d=c[e];l.push(Object.Compact(d))}return l})()).join("")}});Object.Type.extend("bling",{compact:function(c){return c.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(c){var d;return Object.Compact((d=g(c))!=null?d.call(c,c):void 0)}});Object.Compact=function(c){var d;a.push(c);if((d=Object.Type.lookup(c))!=null){d.compact(c)}return a.pop()};Object.Extend(Object.Compact,{register:h,lookup:g});h("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});h("text",function(){return this.EN});h("link",function(){var k,e,c,l,d;k=b(["<a"]);d=["href","name","target"];for(c=0,l=d.length;c<l;c++){e=d[c];if(e in this){k.extend(" ",e,"='",this[e],"'")}}return k.extend(">",node.content,"</a>")});b.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling);(function(b){return b.plugin(function(){var a,G,F,E,D,L,C,P,O,M,J,B,y,K,A,z,I,w,N,H,x;A=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;K="<span class='opr'>$&</span>";J=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;M="<span class='kwd'>$&</span>";a=/\d+\.*\d*/g;y="<span class='num'>$&</span>";F=/\$(\(|\.)/g;G="<span class='bln'>$$</span>$1";x=/\t/g;H="&nbsp;&nbsp;";I=/\/\/.*?(?:\n|$)/;B=/\/\*(?:.|\n)*?\*\//;D=function(c){if(c){return"<span class='com'>"+c+"</span>"}else{return""}};z=function(c){if(c){return"<span class='str'>"+c+"</span>"}else{return""}};C=function(e,f){var c,d;c=e.indexOf('"',f);d=e.indexOf("'",f);if(c===-1){c=e.length}if(d===-1){d=e.length}if(c===d){return[null,-1]}if(c<d){return['"',c]}return["'",d]};E=function(c,d,e){var f;f=c.indexOf(e,d);while(c.charAt(f-1)==="\\"&&(0<f&&f<c.length)){f=c.indexOf(e,f+1)}return f};N=function(d){var g,i,e,f,h,c;g=0;f=d.length;c=[];if(!Object.IsString(d)){if(!Object.IsFunction(d.toString)){throw TypeError("invalid string argument to split_quoted")}else{d=d.toString();f=d.length}}while(g<f){h=C(d,g);i=h[1];if(i===-1){c.push(d.substring(g));break}c.push(d.substring(g,i));e=E(d,i+1,h[0]);if(e===-1){throw Error("unclosed quote: "+h[0]+" starting at "+i)}c.push(d.substring(i,e+1));g=e+1}return c};L=function(e){var c,d;c=e.match(I);d=e.match(B);if(c===d){return[-1,null]}if(c===null&&d!==null){return[d.index,d[0]]}if(c!==null&&d===null){return[c.index,c[0]]}if(d.index<c.index){return[d.index,d[0]]}return[c.index,c[0]]};w=function(d){var g,c,f,i,e,h;e=[];g=0;f=d.length;while(g<f){h=d.substring(g);i=L(h);c=i[0];if(c>-1){e.push(h.substring(0,c));e.push(i[1]);g+=c+i[1].length}else{e.push(h);break}}return e};P=function(c,d){return c.replace(A,K).replace(a,y).replace(J,M).replace(F,G).replace(x,H)+z(d)};O=function(d,c){return b(N(d)).fold(P).join("")+D(c)};return{name:"PrettyPrint",$:{prettyPrint:function(d,c){var e,f,g;if(Object.IsFunction(d)){d=d.toString()}if(!Object.IsString(d)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(d)+"'")}if(b("style#prettyPrint").length===0){f="code.pp .bln { font-size: 17px; } ";c=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},c);for(e in c){f+="code.pp ."+e+" { color: "+c[e]+"; } "}b.synth("style#prettyPrint").text(f).appendTo("head")}return g="<code class='pp'>"+(b(w(d)).fold(O).join(""))+"</code>"}}}})})(Bling);(function(){var d=Object.prototype.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b;a.__super__=g.prototype;return a};(function(a){a.plugin(function(){var b;b=(function(){function f(e){this.reset();this.table=e;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(j){var i;this._lastMode=this._mode;this._mode=j;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){i=this.modeline.enter.call(this);while(Object.IsFunction(i)){i=i.call(this)}}return j},get:function(){return this._mode}})}f.prototype.reset=function(){this._mode=null;return this._lastMode=null};f.prototype.GO=function(e){return function(){return this.mode=e}};f.GO=function(e){return function(){return this.mode=e}};f.prototype.run=function(q){var e,p,m,n,r,o;this.mode=0;for(n=0,r=q.length;n<r;n++){e=q[n];m=this.modeline;if(!(m!=null)){p=null}else{if(e in m){p=m[e]}else{if("def" in m){p=m.def}}}while(Object.IsFunction(p)){p=p.call(this,e)}}if(Object.IsFunction((o=this.modeline)!=null?o.eof:void 0)){p=this.modeline.eof.call(this)}while(Object.IsFunction(p)){p=p.call(this)}this.reset();return this};return f})();return{name:"StateMachine",$:{StateMachine:b}}});return a.plugin(function(){var b;b=(function(){c(f,a.StateMachine);f.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':f.GO(6),"'":f.GO(7),"#":f.GO(2),".":f.GO(3),"[":f.GO(4)," ":f.GO(9),"+":f.GO(11),",":f.GO(10),def:function(e){return this.tag+=e},eof:f.GO(13)},{".":f.GO(3),"[":f.GO(4)," ":f.GO(9),"+":f.GO(11),",":f.GO(10),def:function(e){return this.id+=e},eof:f.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":f.GO(2),".":f.GO(3),"[":f.GO(4)," ":f.GO(9),"+":f.GO(11),",":f.GO(10),def:function(e){return this.cls+=e},eof:f.GO(13)},{"=":f.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.attr+=e},eof:f.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.val+=e},eof:f.GO(12)},{'"':f.GO(8),def:function(e){return this.text+=e},eof:f.GO(12)},{"'":f.GO(8),def:function(e){return this.text+=e},eof:f.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var e;this.emitNode();this.parent=(e=this.parent)!=null?e.parentNode:void 0;return this.GO(0)}},{enter:function(){return a.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function f(){f.__super__.constructor.call(this,f.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}f.prototype.emitNode=function(){var h,e;e=document.createElement(this.tag);e.id=this.id||null;e.className=this.cls||null;for(h in this.attrs){e.setAttribute(h,this.attrs[h])}this.parent.appendChild(e);return this.parent=e};f.prototype.emitText=function(){this.parent.appendChild(a.HTML.parse(this.text));return this.text=""};return f})();return{name:"Synth",$:{synth:function(g){var h;h=new b();h.run(g);if(h.fragment.childNodes.length===1){return a(h.fragment.childNodes[0])}else{return a(h.fragment)}}}}})})(Bling)}).call(this);(function(){var d=Object.prototype.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b;a.__super__=g.prototype;return a};(function(a){var b,f;b={};a.plugin(function(){var h,e;h=null;b={};e={register_engine:function(j,g){b[j]=g;if(!(h!=null)){return h=j}},render:function(g,j){if(h in b){return b[h](g,j)}}};e.__defineSetter__("engine",function(g){if(!g in b){throw new Error("invalid template engine: "+g+" not one of "+(Object.Keys(b)))}else{return h=g}});e.__defineGetter__("engine",function(){return h});return{name:"Template",$:{template:e}}});a.template.register_engine("null",(function(){return function(e,h){return e}})());f=function(e,i,s,t,p){var o,q,r;if(p==null){p=-1}o=1;if(p<0){p=e.length+1+p}for(q=t;t<=p?q<p:q>p;t<=p?q++:q--){r=e[q];if(r===s){o+=1}else{if(r===i){o-=1}}if(o===0){return q}}return -1};a.template.register_engine("pythonic",(function(){var j,e,k,l;l=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;j=/%[\(\/]/;e=function(y){var g,v,i,n,z,h,w,x,A;g=y.split(j);w=g.length;A=[g[0]];n=1;for(i=1;1<=w?i<w:i>w;1<=w?i++:i--){v=f(g[i],")","(",0,-1);if(v===-1){return"Template syntax error: unmatched '%(' starting at: "+(g[i].substring(0,15))}z=g[i].substring(0,v);x=g[i].substring(v);h=l.exec(x);if(h===null){return"Template syntax error: invalid type specifier starting at '"+x+"'"}x=h[4];A[n++]=z;A[n++]=h[1]|0;A[n++]=h[2]|0;A[n++]=h[3];A[n++]=x}return A};e.cache={};k=function(D,E){var C,g,I,K,F,n,A,i,B,H,G,J,h;C=e.cache[D];if(!(C!=null)){C=e.cache[D]=e(D)}A=[C[0]];K=1;n=C.length;for(I=1,J=n-5;I<=J;I+=5){h=C.slice(I,(I+4)+1||9000000000),F=h[0],i=h[1],g=h[2],H=h[3],B=h[4];G=E[F];if(!(G!=null)){G="missing value: "+F}switch(H){case"d":A[K++]=""+parseInt(G,10);break;case"f":A[K++]=parseFloat(G).toFixed(g);break;case"s":A[K++]=""+G;break;default:A[K++]=""+G}if(i>0){A[K]=String.PadLeft(A[K],i)}A[K++]=B}return A.join("")};return k})());return a.template.register_engine("js-eval",(function(){var e;e=(function(){c(h,a.StateMachine);function h(){h.__super__.constructor.apply(this,arguments)}h.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return h})();return function(i,j){return i}})())})(Bling)}).call(this);(function(b){return b.plugin(function(){var e,f,a;a=function(c){var m,l,d,n,i;l=c.indexOf(":");if(l>0){n=parseInt(c.slice(0,l),10);d=c.slice(l+1,(l+1+n));i=c[l+1+n];m=c.slice(l+n+2);d=(function(){switch(i){case"#":return Number(d);case"'":return String(d);case"!":return d==="true";case"~":return null;case"]":return e(d);case"}":return f(d)}})();return[d,m]}};e=function(j){var c,i,d;c=[];while(j.length>0){d=a(j),i=d[0],j=d[1];c.push(i)}return c};f=function(n){var d,m,k,l,c;d={};while(n.length>0){l=a(n),m=l[0],n=l[1];c=a(n),k=c[0],n=c[1];d[m]=k}return d};return{name:"TNET",$:{TNET:{stringify:function(l){var d,k,c,j;j=(function(){switch(Object.Type(l)){case"number":return[String(l),"#"];case"string":return[l,"'"];case"function":return[String(l),"'"];case"boolean":return[String(!!l),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var g,h,i;i=[];for(g=0,h=l.length;g<h;g++){c=l[g];i.push(b.TNET.stringify(c))}return i})()).join(""),"]"];case"object":return[((function(){var g;g=[];for(c in l){g.push(b.TNET.stringify(c)+b.TNET.stringify(l[c]))}return g})()).join(""),"}"]}})(),d=j[0],k=j[1];return(d.length|0)+":"+d+k},parse:function(d){var c;return(c=a(d))!=null?c[0]:void 0}}}}})})(Bling);(function(b){return b.plugin(function(){var k,h,l,i,j,a;h=function(e,c){var d;c=Object.Extend({autoOpen:false,draggable:true},c);d=b(e).addClass("dialog");if(c.draggable){d.draggable()}if(c.autoOpen){d.show().center()}d.find("button.close, .close-button").bind("click touchstart",function(){d.hide();return false});return d};l=function(f,d){var p,c,g,e,o;d=Object.Extend({handleCSS:{}},d);d.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},d.handleCSS);p=b(f);g=false;e=o=0;c=b.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(d.handleCSS.bind("mousedown, touchstart",function(m){g=true;e||(e=m.pageX);o||(o=m.pageY);return false})));b(document.bind("mousemove, touchmove",function(m){var n,r;if(g){n=m.pageX-e;r=m.pageY-o;p.transform({translate:[n,r]},0).trigger("drag",{dragObject:p});return false}})).bind("mouseup, touchend",function(n){var m;if(g){g=false;m=c.position()[0];return b(document.elementFromPoint(m.left,m.top-1).trigger("drop",{dropObject:p}))}});return p.addClass("draggable").css({position:"relative","padding-top":p.css("padding-top").map(Number.AtLeast(parseInt(d.handleCSS.height,10))).px().first()}.append(c))};i=function(n,e){var f,c,d,g;e=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},e);f=b(n).addClass("progress-bar");g=0;if(e.reset){c=f.css("background").first();d=f.css("color").first()}return f.zap("updateProgress",function(m){while(m>1){m/=100}g=m;if(m===1&&e.reset){f.css("background",c).css("color",d)}else{f.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(m*100)+"% 0, color-stop(0, "+e.barColor+"), color-stop(0.98, "+e.barColor+"), color-stop(1.0, "+e.backgroundColor+"))",color:e.textColor})}if(Object.IsFunc(e.change)){return e.change(g)}})};k=function(g,d){var f,e,c;d=Object.Extend({exclusive:false,sticky:false},d);e=b(g).addClass("accordion");c=null;f=function(s){var v,n,u,t;u=b(s).children().first().filter("*");if(u.len()!==2){throw Exception("accordion row requires 2 elements, not "+(u.len()))}t=u.eq(0).addClass("title");v=u.eq(1).addClass("body").hide();n=false;return t.click(function(){if(d.exclusive){e.find(".body").hide()}if(n){if(!d.sticky){v.hide().removeClass("visible");t.removeClass("selected").trigger("deselect");return n=false}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}})};e.bind("DOMNodeInserted",function(p){var q,r;q=e.children().first().filter("*");r=b(p.target).parents().first();return f(r.intersect(q))});e.children().first().filter("*").map(f);return e};a=function(g,d){var o,f,e,c;f=b(g).css({position:"relative",top:"0px",left:"0px"}.hide().map(b));o=0;f[o].show();f.next=function(){f[o].hide();o=++o%nn;return f[o].show()};f.activate=function(m){f[o].hide();o=m;return f[m].show()};for(e=0,c=f.len();0<=c?e<c:e>c;0<=c?e++:e--){f[e].zap("_viewIndex",e.zap("activate",function(){return f.activate(this._viewIndex)}))}return f};j=function(g,f){var d,c,e;e=b(g);f=b(f).viewStack();c=e.len();for(d=0;0<=c?d<=c:d>=c;0<=c?d++:d--){e._tabIndex=d}b(e[0]).addClass("active");return e.click(function(){e.removeClass("active");f.activate(this._tabIndex);return b(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:l,ProgressBar:i,ViewStack:a,Tabs:j,Accordion:k}},dialog:function(c){return h(this,c)},progressBar:function(c){return i(this,c)},viewStack:function(c){return a(this,c)},tabs:function(c){return j(this,c)},accordion:function(c){return k(this,c)},draggable:function(c){return l(this,c)}}})})(Bling);(function(a){return a.plugin(function(){var v,k,l,m,n,f,o,b,c,e,h,p,s,g,q,r,i,u,d,j,t;q=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;g="<span class='opr'>$&</span>";h=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;e="<span class='kwd'>$&</span>";v=/\d+\.*\d*/g;s="<span class='num'>$&</span>";l=/\$(\(|\.)/g;k="<span class='bln'>$$</span>$1";t=/\t/g;j="&nbsp;&nbsp;";i=/\/\/.*?(?:\n|$)/;p=/\/\*(?:.|\n)*?\*\//;n=function(w){if(w){return"<span class='com'>"+w+"</span>"}else{return""}};r=function(w){if(w){return"<span class='str'>"+w+"</span>"}else{return""}};o=function(z,y){var x,w;x=z.indexOf('"',y);w=z.indexOf("'",y);if(x===-1){x=z.length}if(w===-1){w=z.length}if(x===w){return[null,-1]}if(x<w){return['"',x]}return["'",w]};m=function(x,w,z){var y;y=x.indexOf(z,w);while(x.charAt(y-1)==="\\"&&(0<y&&y<x.length)){y=x.indexOf(z,y+1)}return y};d=function(A){var z,y,w,C,B,x;z=0;C=A.length;x=[];if(!Object.IsString(A)){if(!Object.IsFunction(A.toString)){throw TypeError("invalid string argument to split_quoted")}else{A=A.toString();C=A.length}}while(z<C){B=o(A,z);y=B[1];if(y===-1){x.push(A.substring(z));break}x.push(A.substring(z,y));w=m(A,y+1,B[0]);if(w===-1){throw Error("unclosed quote: "+B[0]+" starting at "+y)}x.push(A.substring(y,w+1));z=w+1}return x};f=function(y){var x,w;x=y.match(i);w=y.match(p);if(x===w){return[-1,null]}if(x===null&&w!==null){return[w.index,w[0]]}if(x!==null&&w===null){return[x.index,x[0]]}if(w.index<x.index){return[w.index,w[0]]}return[x.index,x[0]]};u=function(A){var z,x,C,B,w,y;w=[];z=0;C=A.length;while(z<C){y=A.substring(z);B=f(y);x=B[0];if(x>-1){w.push(y.substring(0,x));w.push(B[1]);z+=x+B[1].length}else{w.push(y);break}}return w};b=function(x,w){return x.replace(q,g).replace(v,s).replace(h,e).replace(l,k).replace(t,j)+r(w)};c=function(w,x){return a(d(w)).fold(b).join("")+n(x)};return{name:"PrettyPrint",$:{prettyPrint:function(A,x){var w,z,y;if(Object.IsFunction(A)){A=A.toString()}if(!Object.IsString(A)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(A)+"'")}if(a("style#prettyPrint").length===0){z="code.pp .bln { font-size: 17px; } ";x=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},x);for(w in x){z+="code.pp ."+w+" { color: "+x[w]+"; } "}a.synth("style#prettyPrint").text(z).appendTo("head")}return y="<code class='pp'>"+(a(u(A)).fold(c).join(""))+"</code>"}}}})})(Bling);(function(){var a=Object.prototype.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e;f.__super__=d.prototype;return f};(function(c){c.plugin(function(){var d;d=(function(){function e(f){this.reset();this.table=f;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(g){var h;this._lastMode=this._mode;this._mode=g;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){h=this.modeline.enter.call(this);while(Object.IsFunction(h)){h=h.call(this)}}return g},get:function(){return this._mode}})}e.prototype.reset=function(){this._mode=null;return this._lastMode=null};e.prototype.GO=function(f){return function(){return this.mode=f}};e.GO=function(f){return function(){return this.mode=f}};e.prototype.run=function(g){var l,h,k,j,f,i;this.mode=0;for(j=0,f=g.length;j<f;j++){l=g[j];k=this.modeline;if(!(k!=null)){h=null}else{if(l in k){h=k[l]}else{if("def" in k){h=k.def}}}while(Object.IsFunction(h)){h=h.call(this,l)}}if(Object.IsFunction((i=this.modeline)!=null?i.eof:void 0)){h=this.modeline.eof.call(this)}while(Object.IsFunction(h)){h=h.call(this)}this.reset();return this};return e})();return{name:"StateMachine",$:{StateMachine:d}}});return c.plugin(function(){var d;d=(function(){b(e,c.StateMachine);e.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':e.GO(6),"'":e.GO(7),"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(f){return this.tag+=f},eof:e.GO(13)},{".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(f){return this.id+=f},eof:e.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(f){return this.cls+=f},eof:e.GO(13)},{"=":e.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(f){return this.attr+=f},eof:e.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(f){return this.val+=f},eof:e.GO(12)},{'"':e.GO(8),def:function(f){return this.text+=f},eof:e.GO(12)},{"'":e.GO(8),def:function(f){return this.text+=f},eof:e.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var f;this.emitNode();this.parent=(f=this.parent)!=null?f.parentNode:void 0;return this.GO(0)}},{enter:function(){return c.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function e(){e.__super__.constructor.call(this,e.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}e.prototype.emitNode=function(){var f,g;g=document.createElement(this.tag);g.id=this.id||null;g.className=this.cls||null;for(f in this.attrs){g.setAttribute(f,this.attrs[f])}this.parent.appendChild(g);return this.parent=g};e.prototype.emitText=function(){this.parent.appendChild(c.HTML.parse(this.text));return this.text=""};return e})();return{name:"Synth",$:{synth:function(f){var e;e=new d();e.run(f);if(e.fragment.childNodes.length===1){return c(e.fragment.childNodes[0])}else{return c(e.fragment)}}}}})})(Bling)}).call(this);(function(){var a=Object.prototype.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e;f.__super__=d.prototype;return f};(function(e){var d,c;d={};e.plugin(function(){var f,g;f=null;d={};g={register_engine:function(h,i){d[h]=i;if(!(f!=null)){return f=h}},render:function(i,h){if(f in d){return d[f](i,h)}}};g.__defineSetter__("engine",function(h){if(!h in d){throw new Error("invalid template engine: "+h+" not one of "+(Object.Keys(d)))}else{return f=h}});g.__defineGetter__("engine",function(){return f});return{name:"Template",$:{template:g}}});e.template.register_engine("null",(function(){return function(g,f){return g}})());c=function(m,l,f,n,j){var k,h,g;if(j==null){j=-1}k=1;if(j<0){j=m.length+1+j}for(h=n;n<=j?h<j:h>j;n<=j?h++:h--){g=m[h];if(g===f){k+=1}else{if(g===l){k-=1}}if(k===0){return h}}return -1};e.template.register_engine("pythonic",(function(){var h,i,g,f;f=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;h=/%[\(\/]/;i=function(u){var r,m,p,o,t,q,l,k,s;r=u.split(h);l=r.length;s=[r[0]];o=1;for(p=1;1<=l?p<l:p>l;1<=l?p++:p--){m=c(r[p],")","(",0,-1);if(m===-1){return"Template syntax error: unmatched '%(' starting at: "+(r[p].substring(0,15))}t=r[p].substring(0,m);k=r[p].substring(m);q=f.exec(k);if(q===null){return"Template syntax error: invalid type specifier starting at '"+k+"'"}k=q[4];s[o++]=t;s[o++]=q[1]|0;s[o++]=q[2]|0;s[o++]=q[3];s[o++]=k}return s};i.cache={};g=function(z,y){var k,r,u,s,x,o,m,p,l,v,w,t,q;k=i.cache[z];if(!(k!=null)){k=i.cache[z]=i(z)}m=[k[0]];s=1;o=k.length;for(u=1,t=o-5;u<=t;u+=5){q=k.slice(u,(u+4)+1||9000000000),x=q[0],p=q[1],r=q[2],v=q[3],l=q[4];w=y[x];if(!(w!=null)){w="missing value: "+x}switch(v){case"d":m[s++]=""+parseInt(w,10);break;case"f":m[s++]=parseFloat(w).toFixed(r);break;case"s":m[s++]=""+w;break;default:m[s++]=""+w}if(p>0){m[s]=String.PadLeft(m[s],p)}m[s++]=l}return m.join("")};return g})());return e.template.register_engine("js-eval",(function(){var f;f=(function(){b(g,e.StateMachine);function g(){g.__super__.constructor.apply(this,arguments)}g.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return g})();return function(h,g){return h}})())})(Bling)}).call(this);(function(a){return a.plugin(function(){var d,c,b;b=function(k){var f,g,j,e,h;g=k.indexOf(":");if(g>0){e=parseInt(k.slice(0,g),10);j=k.slice(g+1,(g+1+e));h=k[g+1+e];f=k.slice(g+e+2);j=(function(){switch(h){case"#":return Number(j);case"'":return String(j);case"!":return j==="true";case"~":return null;case"]":return d(j);case"}":return c(j)}})();return[j,f]}};d=function(e){var h,f,g;h=[];while(e.length>0){g=b(e),f=g[0],e=g[1];h.push(f)}return h};c=function(e){var i,f,h,g,j;i={};while(e.length>0){g=b(e),f=g[0],e=g[1];j=b(e),h=j[0],e=j[1];i[f]=h}return i};return{name:"TNET",$:{TNET:{stringify:function(e){var h,f,i,g;g=(function(){switch(Object.Type(e)){case"number":return[String(e),"#"];case"string":return[e,"'"];case"function":return[String(e),"'"];case"boolean":return[String(!!e),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var l,k,j;j=[];for(l=0,k=e.length;l<k;l++){i=e[l];j.push(a.TNET.stringify(i))}return j})()).join(""),"]"];case"object":return[((function(){var j;j=[];for(i in e){j.push(a.TNET.stringify(i)+a.TNET.stringify(e[i]))}return j})()).join(""),"}"]}})(),h=g[0],f=g[1];return(h.length|0)+":"+h+f},parse:function(e){var f;return(f=b(e))!=null?f[0]:void 0}}}}})})(Bling);(function(a){return a.plugin(function(){var d,g,c,f,e,b;g=function(h,j){var i;j=Object.Extend({autoOpen:false,draggable:true},j);i=a(h).addClass("dialog");if(j.draggable){i.draggable()}if(j.autoOpen){i.show().center()}i.find("button.close, .close-button").bind("click touchstart",function(){i.hide();return false});return i};c=function(j,l){var n,m,i,k,h;l=Object.Extend({handleCSS:{}},l);l.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},l.handleCSS);n=a(j);i=false;k=h=0;m=a.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(l.handleCSS.bind("mousedown, touchstart",function(o){i=true;k||(k=o.pageX);h||(h=o.pageY);return false})));a(document.bind("mousemove, touchmove",function(q){var p,o;if(i){p=q.pageX-k;o=q.pageY-h;n.transform({translate:[p,o]},0).trigger("drag",{dragObject:n});return false}})).bind("mouseup, touchend",function(o){var p;if(i){i=false;p=m.position()[0];return a(document.elementFromPoint(p.left,p.top-1).trigger("drop",{dropObject:n}))}});return n.addClass("draggable").css({position:"relative","padding-top":n.css("padding-top").map(Number.AtLeast(parseInt(l.handleCSS.height,10))).px().first()}.append(m))};f=function(h,k){var j,m,l,i;k=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},k);j=a(h).addClass("progress-bar");i=0;if(k.reset){m=j.css("background").first();l=j.css("color").first()}return j.zap("updateProgress",function(n){while(n>1){n/=100}i=n;if(n===1&&k.reset){j.css("background",m).css("color",l)}else{j.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(n*100)+"% 0, color-stop(0, "+k.barColor+"), color-stop(0.98, "+k.barColor+"), color-stop(1.0, "+k.backgroundColor+"))",color:k.textColor})}if(Object.IsFunc(k.change)){return k.change(i)}})};d=function(h,k){var i,j,l;k=Object.Extend({exclusive:false,sticky:false},k);j=a(h).addClass("accordion");l=null;i=function(r){var o,m,p,q;p=a(r).children().first().filter("*");if(p.len()!==2){throw Exception("accordion row requires 2 elements, not "+(p.len()))}q=p.eq(0).addClass("title");o=p.eq(1).addClass("body").hide();m=false;return q.click(function(){if(k.exclusive){j.find(".body").hide()}if(m){if(!k.sticky){o.hide().removeClass("visible");q.removeClass("selected").trigger("deselect");return m=false}else{o.show().addClass("visible");q.addClass("selected").trigger("select");return m=true}}else{o.show().addClass("visible");q.addClass("selected").trigger("select");return m=true}})};j.bind("DOMNodeInserted",function(m){var o,n;o=j.children().first().filter("*");n=a(m.target).parents().first();return i(n.intersect(o))});j.children().first().filter("*").map(i);return j};b=function(h,l){var n,i,k,m;i=a(h).css({position:"relative",top:"0px",left:"0px"}.hide().map(a));n=0;i[n].show();i.next=function(){i[n].hide();n=++n%nn;return i[n].show()};i.activate=function(j){i[n].hide();n=j;return i[j].show()};for(k=0,m=i.len();0<=m?k<m:k>m;0<=m?k++:k--){i[k].zap("_viewIndex",k.zap("activate",function(){return i.activate(this._viewIndex)}))}return i};e=function(h,j){var l,m,k;k=a(h);j=a(j).viewStack();m=k.len();for(l=0;0<=m?l<=m:l>=m;0<=m?l++:l--){k._tabIndex=l}a(k[0]).addClass("active");return k.click(function(){k.removeClass("active");j.activate(this._tabIndex);return a(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:c,ProgressBar:f,ViewStack:b,Tabs:e,Accordion:d}},dialog:function(h){return g(this,h)},progressBar:function(h){return f(this,h)},viewStack:function(h){return b(this,h)},tabs:function(h){return e(this,h)},accordion:function(h){return d(this,h)},draggable:function(h){return c(this,h)}}})})(Bling);(function(){var a=Array.prototype.slice;$.plugin(function(){var r,m,k,q,h,i,e,d,p,n,o,j,g,f,l,c;j=["px","pt","pc","em","%","in","cm","mm","ex",""];r=/(\d+\.*\d*)(px|pt|pc|em|%|in|cm|mm|ex)/;d=function(b){return r.exec(b)[2](r.test(b)?void 0:"")};q=function(t,s){return q[t][s]()};p=function(b){return function(){return b}};for(g=0,l=j.length;g<l;g++){m=j[g];for(f=0,c=j.length;f<c;f++){k=j[f];(q[m]||(q[m]={}))[k]=p(+(m===k||m===""||k===""))}}q["in"].pt=function(){return 72};q["in"].px=function(){return 96};q["in"].cm=function(){return 2.54};q.pc.pt=function(){return 12};q.cm.mm=function(){return 10};q.em.px=function(){var s,b;b=$("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body");s=b.width().first();b.remove();return s};q.ex.px=function(){var s,b;b=$("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body");s=b.width().first();b.remove();return s};q.ex.em=function(){return 2};e=function(){var u,s,x,v,w,t;t=[];for(v=0,w=j.length;v<w;v++){u=j[v];t.push((function(){var y,z,b;b=[];for(y=0,z=j.length;y<z;y++){s=j[y];if(!q(u,s)&&q(s,u)){console.log("found inverse: "+u+"."+s);q[u][s]=p(1/q(s,u))}b.push((function(){var C,B,A;A=[];for(B=0,C=j.length;B<C;B++){x=j[B];if(!q(u,x)&&q(u,s)&&q(s,x)){console.log("found induction: "+u+"."+x);A.push(q[u][x]=p(q(u,s)*q(s,x)))}else{A.push(void 0)}}return A})())}return b})())}return t};e();e();i=function(s,b){return parseFloat(s)*q[d(s)][b]()+b};$.assert(i("300px","cm")==="10cm");h=function(v,s){var t,u,b;b=[];for(t=0,u=s.length;0<=u?t<u:t>u;0<=u?t++:t--){b.push(s[t]=convertTo(v,s[t]))}return b};Object.Type.register("units",{match:function(b){return r.test(b)}});n=function(b){return function(){var s,t;s=1<=arguments.length?a.call(arguments,0):[];h(t=d(this[0]),this);return(b.apply(this,s))+t}};o=function(b){return function(){var s,t;s=1<=arguments.length?a.call(arguments,0):[];t=this.map(d);return b.apply(this.floats(),s).map(function(){})}};return{min:n(function(){return this.reduce(function(b){return Math.min(parseFloat(this),b)})}),max:n(function(){return this.reduce(function(b){return Math.max(parseFloat(this),b)})}),sum:n(function(){return this.reduce(function(b){return parseFloat(this)+b})}),mean:n(function(){return parseFloat(this.sum())/this.length}),magnitude:n(function(){return Math.sqrt(this.floats().squares().sum())}),squares:function(){return this.map(function(){var b;return(b=parseFloat(this))*b})},scale:function(b){return this.map(function(){return b*parseFloat(this)})},add:function(b){return this.map(function(){return b+this})},normalize:function(){return this.scale(1/this.magnitude())}}})}).call(this);$.plugin(function(){var c,e,d,b,a;e=function(){return"EOF"};c=function(f){f=extend({item:function(){return e},action:Function.Identity,latency:10},f);return extend(new $.EventEmitter(),{run:function(){var g;var h=this;g=function(){var i;if((i=f.action(f.item()))!==e){h.emit("data",i);return setTimeout(g,f.latency)}};return setTimeout(g,f.latency)}})};for(a=0;a<1000;a++){d=a}b=0;return c({item:function(){return d[b++](b<d.length?void 0:e)},action:function(f){return(f*f)-1},latency:10}).on("data",function(f){return console.log("data:",f.on("error",function(g){return console.log("error:",g.run())}))})});