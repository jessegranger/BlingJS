// Generated by CoffeeScript 1.3.3
(function() {

  (function($) {
    return $.plugin(function() {
      var lookup, pruners, register, stack;
      pruners = {};
      register = function(type, f) {
        return pruners[type] = f;
      };
      lookup = function(f) {
        return pruners[obj.t];
      };
      stack = [];
      Object.Type.extend(null, {
        compact: function(o) {
          return Object.String(o);
        }
      });
      Object.Type.extend("undefined", {
        compact: function(o) {
          return "";
        }
      });
      Object.Type.extend("null", {
        compact: function(o) {
          return "";
        }
      });
      Object.Type.extend("string", {
        compact: Function.Identity
      });
      Object.Type.extend("array", {
        compact: function(o) {
          var x;
          return ((function() {
            var _i, _len, _results;
            _results = [];
            for (_i = 0, _len = o.length; _i < _len; _i++) {
              x = o[_i];
              _results.push(Object.Compact(x));
            }
            return _results;
          })()).join("");
        }
      });
      Object.Type.extend("bling", {
        compact: function(o) {
          return o.map(Object.Compact).join("");
        }
      });
      Object.Type.extend("object", {
        compact: function(o) {
          var _ref;
          return Object.Compact((_ref = lookup(o)) != null ? _ref.call(o, o) : void 0);
        }
      });
      Object.Compact = function(o) {
        var _ref;
        stack.push(o);
        if ((_ref = Object.Type.lookup(o)) != null) {
          _ref.compact(o);
        }
        return stack.pop();
      };
      Object.Extend(Object.Compact, {
        register: register,
        lookup: lookup
      });
      register('page', function() {
        return ["<!DOCTYPE html><html><head>", this.head, "</head><body>", this.body, "</body></html>"];
      });
      register('text', function() {
        return this.EN;
      });
      register('link', function() {
        var a, k, _i, _len, _ref;
        a = $(["<a"]);
        _ref = ["href", "name", "target"];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          k = _ref[_i];
          if (k in this) {
            a.extend(" ", k, "='", this[k], "'");
          }
        }
        return a.extend(">", node.content, "</a>");
      });
      $.assert(Object.Compact({
        t: "page",
        head: [],
        body: {
          type: "text",
          EN: "Hello World"
        }
      }) === "<!DOCTYPE html><html><head></head><body>Hello World</body></html>");
      return {
        name: "Compact"
      };
    });
  })(Bling);

}).call(this);
// Generated by CoffeeScript 1.3.3
(function() {

  (function($) {
    return $.plugin(function() {
      var create, lazy_load;
      create = function(elementName, props) {
        return Object.Extend(document.createElement(elementName), props);
      };
      lazy_load = function(elementName, props) {
        var depends, n, provides;
        depends = provides = null;
        n = create(elementName, Object.Extend(props, {
          "onload!": function() {
            if (provides != null) {
              return $.publish(provides);
            }
          }
        }));
        $("head").delay(10, function() {
          var _this = this;
          if (depends != null) {
            return $.subscribe(depends, function() {
              return _this.append(n);
            });
          } else {
            return this.append(n);
          }
        });
        n = $(n);
        return Object.Extend(n, {
          depends: function(tag) {
            depends = elementName + "-" + tag;
            return n;
          },
          provides: function(tag) {
            provides = elementName + "-" + tag;
            return n;
          }
        });
      };
      return {
        name: "LazyLoader",
        $: {
          script: function(src) {
            return lazy_load("script", {
              "src!": src
            });
          },
          style: function(src) {
            return lazy_load("link", {
              "href!": src,
              "rel!": "stylesheet"
            });
          }
        }
      };
    });
  })(Bling);

}).call(this);
(function(){(function(a){return a.plugin(function(){var d,e,c,b;e={};c=function(g,h){return e[g]=h};d=function(g){return e[obj.t]};b=[];Object.Type.extend(null,{compact:function(f){return Object.String(f)}});Object.Type.extend("undefined",{compact:function(f){return""}});Object.Type.extend("null",{compact:function(f){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(g){var f;return((function(){var j,i,h;h=[];for(j=0,i=g.length;j<i;j++){f=g[j];h.push(Object.Compact(f))}return h})()).join("")}});Object.Type.extend("bling",{compact:function(f){return f.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(g){var f;return Object.Compact((f=d(g))!=null?f.call(g,g):void 0)}});Object.Compact=function(g){var f;b.push(g);if((f=Object.Type.lookup(g))!=null){f.compact(g)}return b.pop()};Object.Extend(Object.Compact,{register:c,lookup:d});c("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});c("text",function(){return this.EN});c("link",function(){var g,h,j,f,i;g=a(["<a"]);i=["href","name","target"];for(j=0,f=i.length;j<f;j++){h=i[j];if(h in this){g.extend(" ",h,"='",this[h],"'")}}return g.extend(">",node.content,"</a>")});a.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var b,c;b=function(d,e){return Object.Extend(document.createElement(d),e)};c=function(d,e){var g,h,f;g=f=null;h=b(d,Object.Extend(e,{"onload!":function(){if(f!=null){return a.publish(f)}}}));a("head").delay(10,function(){var i=this;if(g!=null){return a.subscribe(g,function(){return i.append(h)})}else{return this.append(h)}});h=a(h);return Object.Extend(h,{depends:function(i){g=d+"-"+i;return h},provides:function(i){f=d+"-"+i;return h}})};return{name:"LazyLoader",$:{script:function(d){return c("script",{"src!":d})},style:function(d){return c("link",{"href!":d,"rel!":"stylesheet"})}}}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var g,f,h,a;f={};h=function(d,c){return f[d]=c};g=function(c){return f[obj.t]};a=[];Object.Type.extend(null,{compact:function(c){return Object.String(c)}});Object.Type.extend("undefined",{compact:function(c){return""}});Object.Type.extend("null",{compact:function(c){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(c){var d;return((function(){var e,k,l;l=[];for(e=0,k=c.length;e<k;e++){d=c[e];l.push(Object.Compact(d))}return l})()).join("")}});Object.Type.extend("bling",{compact:function(c){return c.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(c){var d;return Object.Compact((d=g(c))!=null?d.call(c,c):void 0)}});Object.Compact=function(c){var d;a.push(c);if((d=Object.Type.lookup(c))!=null){d.compact(c)}return a.pop()};Object.Extend(Object.Compact,{register:h,lookup:g});h("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});h("text",function(){return this.EN});h("link",function(){var k,e,c,l,d;k=b(["<a"]);d=["href","name","target"];for(c=0,l=d.length;c<l;c++){e=d[c];if(e in this){k.extend(" ",e,"='",this[e],"'")}}return k.extend(">",node.content,"</a>")});b.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var a,d;a=function(f,c){return Object.Extend(document.createElement(f),c)};d=function(l,k){var i,c,j;i=j=null;c=a(l,Object.Extend(k,{"onload!":function(){if(j!=null){return b.publish(j)}}}));b("head").delay(10,function(){var e=this;if(i!=null){return b.subscribe(i,function(){return e.append(c)})}else{return this.append(c)}});c=b(c);return Object.Extend(c,{depends:function(e){i=l+"-"+e;return c},provides:function(e){j=l+"-"+e;return c}})};return{name:"LazyLoader",$:{script:function(c){return d("script",{"src!":c})},style:function(c){return d("link",{"href!":c,"rel!":"stylesheet"})}}}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var d,e,c,b;e={};c=function(f,g){return e[f]=g};d=function(f){return e[obj.t]};b=[];Object.Type.extend(null,{compact:function(f){return Object.String(f)}});Object.Type.extend("undefined",{compact:function(f){return""}});Object.Type.extend("null",{compact:function(f){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(g){var f;return((function(){var j,i,h;h=[];for(j=0,i=g.length;j<i;j++){f=g[j];h.push(Object.Compact(f))}return h})()).join("")}});Object.Type.extend("bling",{compact:function(f){return f.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(g){var f;return Object.Compact((f=d(g))!=null?f.call(g,g):void 0)}});Object.Compact=function(g){var f;b.push(g);if((f=Object.Type.lookup(g))!=null){f.compact(g)}return b.pop()};Object.Extend(Object.Compact,{register:c,lookup:d});c("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});c("text",function(){return this.EN});c("link",function(){var g,h,j,f,i;g=a(["<a"]);i=["href","name","target"];for(j=0,f=i.length;j<f;j++){h=i[j];if(h in this){g.extend(" ",h,"='",this[h],"'")}}return g.extend(">",node.content,"</a>")});a.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var b,c;b=function(d,e){return Object.Extend(document.createElement(d),e)};c=function(d,e){var g,h,f;g=f=null;h=b(d,Object.Extend(e,{"onload!":function(){if(f!=null){return a.publish(f)}}}));a("head").delay(10,function(){var i=this;if(g!=null){return a.subscribe(g,function(){return i.append(h)})}else{return this.append(h)}});h=a(h);return Object.Extend(h,{depends:function(i){g=d+"-"+i;return h},provides:function(i){f=d+"-"+i;return h}})};return{name:"LazyLoader",$:{script:function(d){return c("script",{"src!":d})},style:function(d){return c("link",{"href!":d,"rel!":"stylesheet"})}}}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var g,f,h,a;f={};h=function(d,c){return f[d]=c};g=function(c){return f[obj.t]};a=[];Object.Type.extend(null,{compact:function(c){return Object.String(c)}});Object.Type.extend("undefined",{compact:function(c){return""}});Object.Type.extend("null",{compact:function(c){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(c){var d;return((function(){var e,k,l;l=[];for(e=0,k=c.length;e<k;e++){d=c[e];l.push(Object.Compact(d))}return l})()).join("")}});Object.Type.extend("bling",{compact:function(c){return c.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(c){var d;return Object.Compact((d=g(c))!=null?d.call(c,c):void 0)}});Object.Compact=function(c){var d;a.push(c);if((d=Object.Type.lookup(c))!=null){d.compact(c)}return a.pop()};Object.Extend(Object.Compact,{register:h,lookup:g});h("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});h("text",function(){return this.EN});h("link",function(){var k,e,c,l,d;k=b(["<a"]);d=["href","name","target"];for(c=0,l=d.length;c<l;c++){e=d[c];if(e in this){k.extend(" ",e,"='",this[e],"'")}}return k.extend(">",node.content,"</a>")});b.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var a,d;a=function(f,c){return Object.Extend(document.createElement(f),c)};d=function(l,k){var i,c,j;i=j=null;c=a(l,Object.Extend(k,{"onload!":function(){if(j!=null){return b.publish(j)}}}));b("head").delay(10,function(){var e=this;if(i!=null){return b.subscribe(i,function(){return e.append(c)})}else{return this.append(c)}});c=b(c);return Object.Extend(c,{depends:function(e){i=l+"-"+e;return c},provides:function(e){j=l+"-"+e;return c}})};return{name:"LazyLoader",$:{script:function(c){return d("script",{"src!":c})},style:function(c){return d("link",{"href!":c,"rel!":"stylesheet"})}}}})})(Bling)}).call(this);(function(a){return a.plugin(function(){var d,e,c,b;e={};c=function(f,g){return e[f]=g};d=function(f){return e[obj.t]};b=[];Object.Type.extend(null,{compact:function(f){return Object.String(f)}});Object.Type.extend("undefined",{compact:function(f){return""}});Object.Type.extend("null",{compact:function(f){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(g){var f;return((function(){var j,i,h;h=[];for(j=0,i=g.length;j<i;j++){f=g[j];h.push(Object.Compact(f))}return h})()).join("")}});Object.Type.extend("bling",{compact:function(f){return f.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(g){var f;return Object.Compact((f=d(g))!=null?f.call(g,g):void 0)}});Object.Compact=function(g){var f;b.push(g);if((f=Object.Type.lookup(g))!=null){f.compact(g)}return b.pop()};Object.Extend(Object.Compact,{register:c,lookup:d});c("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});c("text",function(){return this.EN});c("link",function(){var g,h,j,f,i;g=a(["<a"]);i=["href","name","target"];for(j=0,f=i.length;j<f;j++){h=i[j];if(h in this){g.extend(" ",h,"='",this[h],"'")}}return g.extend(">",node.content,"</a>")});a.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling);(function(a){return a.plugin(function(){var b,c;b=function(d,e){return Object.Extend(document.createElement(d),e)};c=function(d,e){var g,h,f;g=f=null;h=b(d,Object.Extend(e,{"onload!":function(){if(f!=null){return a.publish(f)}}}));a("head").delay(10,function(){var i=this;if(g!=null){return a.subscribe(g,function(){return i.append(h)})}else{return this.append(h)}});h=a(h);return Object.Extend(h,{depends:function(i){g=d+"-"+i;return h},provides:function(i){f=d+"-"+i;return h}})};return{name:"LazyLoader",$:{script:function(d){return c("script",{"src!":d})},style:function(d){return c("link",{"href!":d,"rel!":"stylesheet"})}}}})})(Bling);(function(a){return a.plugin(function(){var v,s,t,u,h,f,j,b,c,e,k,l,m,g,n,i,p,r,d,q,o;n=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;g="<span class='opr'>$&</span>";k=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;e="<span class='kwd'>$&</span>";v=/\d+\.*\d*/g;m="<span class='num'>$&</span>";t=/\$(\(|\.)/g;s="<span class='bln'>$$</span>$1";o=/\t/g;q="&nbsp;&nbsp;";p=/\/\/.*?(?:\n|$)/;l=/\/\*(?:.|\n)*?\*\//;h=function(w){if(w){return"<span class='com'>"+w+"</span>"}else{return""}};i=function(w){if(w){return"<span class='str'>"+w+"</span>"}else{return""}};j=function(z,y){var x,w;x=z.indexOf('"',y);w=z.indexOf("'",y);if(x===-1){x=z.length}if(w===-1){w=z.length}if(x===w){return[null,-1]}if(x<w){return['"',x]}return["'",w]};u=function(x,w,z){var y;y=x.indexOf(z,w);while(x.charAt(y-1)==="\\"&&(0<y&&y<x.length)){y=x.indexOf(z,y+1)}return y};d=function(w){var x,A,B,y,C,z;x=0;y=w.length;z=[];if(!Object.IsString(w)){if(!Object.IsFunction(w.toString)){throw TypeError("invalid string argument to split_quoted")}else{w=w.toString();y=w.length}}while(x<y){C=j(w,x);A=C[1];if(A===-1){z.push(w.substring(x));break}z.push(w.substring(x,A));B=u(w,A+1,C[0]);if(B===-1){throw Error("unclosed quote: "+C[0]+" starting at "+A)}z.push(w.substring(A,B+1));x=B+1}return z};f=function(x){var w,y;w=x.match(p);y=x.match(l);if(w===y){return[-1,null]}if(w===null&&y!==null){return[y.index,y[0]]}if(w!==null&&y===null){return[w.index,w[0]]}if(y.index<w.index){return[y.index,y[0]]}return[w.index,w[0]]};r=function(w){var x,y,z,A,B,C;B=[];x=0;z=w.length;while(x<z){C=w.substring(x);A=f(C);y=A[0];if(y>-1){B.push(C.substring(0,y));B.push(A[1]);x+=y+A[1].length}else{B.push(C);break}}return B};b=function(x,w){return x.replace(n,g).replace(v,m).replace(k,e).replace(t,s).replace(o,q)+i(w)};c=function(w,x){return a(d(w)).fold(b).join("")+h(x)};return{name:"PrettyPrint",$:{prettyPrint:function(x,z){var w,A,y;if(Object.IsFunction(x)){x=x.toString()}if(!Object.IsString(x)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(x)+"'")}if(a("style#prettyPrint").length===0){A="code.pp .bln { font-size: 17px; } ";z=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},z);for(w in z){A+="code.pp ."+w+" { color: "+z[w]+"; } "}a.synth("style#prettyPrint").text(A).appendTo("head")}return y="<code class='pp'>"+(a(r(x)).fold(c).join(""))+"</code>"}}}})})(Bling);(function(){var a=Object.prototype.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e;f.__super__=d.prototype;return f};(function(c){c.plugin(function(){var d;d=(function(){function e(f){this.reset();this.table=f;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(g){var h;this._lastMode=this._mode;this._mode=g;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){h=this.modeline.enter.call(this);while(Object.IsFunction(h)){h=h.call(this)}}return g},get:function(){return this._mode}})}e.prototype.reset=function(){this._mode=null;return this._lastMode=null};e.prototype.GO=function(f){return function(){return this.mode=f}};e.GO=function(f){return function(){return this.mode=f}};e.prototype.run=function(j){var l,k,g,i,h,f;this.mode=0;for(i=0,h=j.length;i<h;i++){l=j[i];g=this.modeline;if(!(g!=null)){k=null}else{if(l in g){k=g[l]}else{if("def" in g){k=g.def}}}while(Object.IsFunction(k)){k=k.call(this,l)}}if(Object.IsFunction((f=this.modeline)!=null?f.eof:void 0)){k=this.modeline.eof.call(this)}while(Object.IsFunction(k)){k=k.call(this)}this.reset();return this};return e})();return{name:"StateMachine",$:{StateMachine:d}}});return c.plugin(function(){var d;d=(function(){b(e,c.StateMachine);e.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':e.GO(6),"'":e.GO(7),"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(f){return this.tag+=f},eof:e.GO(13)},{".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(f){return this.id+=f},eof:e.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(f){return this.cls+=f},eof:e.GO(13)},{"=":e.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(f){return this.attr+=f},eof:e.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(f){return this.val+=f},eof:e.GO(12)},{'"':e.GO(8),def:function(f){return this.text+=f},eof:e.GO(12)},{"'":e.GO(8),def:function(f){return this.text+=f},eof:e.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var f;this.emitNode();this.parent=(f=this.parent)!=null?f.parentNode:void 0;return this.GO(0)}},{enter:function(){return c.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function e(){e.__super__.constructor.call(this,e.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}e.prototype.emitNode=function(){var f,g;g=document.createElement(this.tag);g.id=this.id||null;g.className=this.cls||null;for(f in this.attrs){g.setAttribute(f,this.attrs[f])}this.parent.appendChild(g);return this.parent=g};e.prototype.emitText=function(){this.parent.appendChild(c.HTML.parse(this.text));return this.text=""};return e})();return{name:"Synth",$:{synth:function(f){var e;e=new d();e.run(f);if(e.fragment.childNodes.length===1){return c(e.fragment.childNodes[0])}else{return c(e.fragment)}}}}})})(Bling)}).call(this);(function(){var a=Object.prototype.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e;f.__super__=d.prototype;return f};(function(c){var e,d;e={};c.plugin(function(){var f,g;f=null;e={};g={register_engine:function(h,i){e[h]=i;if(!(f!=null)){return f=h}},render:function(i,h){if(f in e){return e[f](i,h)}}};g.__defineSetter__("engine",function(h){if(!h in e){throw new Error("invalid template engine: "+h+" not one of "+(Object.Keys(e)))}else{return f=h}});g.__defineGetter__("engine",function(){return f});return{name:"Template",$:{template:g}}});c.template.register_engine("null",(function(){return function(g,f){return g}})());d=function(m,j,k,h,g){var f,n,l;if(g==null){g=-1}f=1;if(g<0){g=m.length+1+g}for(n=h;h<=g?n<g:n>g;h<=g?n++:n--){l=m[n];if(l===k){f+=1}else{if(l===j){f-=1}}if(f===0){return n}}return -1};c.template.register_engine("pythonic",(function(){var h,i,g,f;f=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;h=/%[\(\/]/;i=function(l){var j,p,s,r,k,t,o,m,q;j=l.split(h);o=j.length;q=[j[0]];r=1;for(s=1;1<=o?s<o:s>o;1<=o?s++:s--){p=d(j[s],")","(",0,-1);if(p===-1){return"Template syntax error: unmatched '%(' starting at: "+(j[s].substring(0,15))}k=j[s].substring(0,p);m=j[s].substring(p);t=f.exec(m);if(t===null){return"Template syntax error: invalid type specifier starting at '"+m+"'"}m=t[4];q[r++]=k;q[r++]=t[1]|0;q[r++]=t[2]|0;q[r++]=t[3];q[r++]=m}return q};i.cache={};g=function(k,j){var l,r,v,t,y,o,s,p,m,w,x,u,q;l=i.cache[k];if(!(l!=null)){l=i.cache[k]=i(k)}s=[l[0]];t=1;o=l.length;for(v=1,u=o-5;v<=u;v+=5){q=l.slice(v,(v+4)+1||9000000000),y=q[0],p=q[1],r=q[2],w=q[3],m=q[4];x=j[y];if(!(x!=null)){x="missing value: "+y}switch(w){case"d":s[t++]=""+parseInt(x,10);break;case"f":s[t++]=parseFloat(x).toFixed(r);break;case"s":s[t++]=""+x;break;default:s[t++]=""+x}if(p>0){s[t]=String.PadLeft(s[t],p)}s[t++]=m}return s.join("")};return g})());return c.template.register_engine("js-eval",(function(){var f;f=(function(){b(g,c.StateMachine);function g(){g.__super__.constructor.apply(this,arguments)}g.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return g})();return function(h,g){return h}})())})(Bling)}).call(this);(function(a){return a.plugin(function(){var d,c,b;b=function(k){var j,e,g,h,f;e=k.indexOf(":");if(e>0){h=parseInt(k.slice(0,e),10);g=k.slice(e+1,(e+1+h));f=k[e+1+h];j=k.slice(e+h+2);g=(function(){switch(f){case"#":return Number(g);case"'":return String(g);case"!":return g==="true";case"~":return null;case"]":return d(g);case"}":return c(g)}})();return[g,j]}};d=function(e){var h,f,g;h=[];while(e.length>0){g=b(e),f=g[0],e=g[1];h.push(f)}return h};c=function(j){var g,i,f,e,h;g={};while(j.length>0){e=b(j),i=e[0],j=e[1];h=b(j),f=h[0],j=h[1];g[i]=f}return g};return{name:"TNET",$:{TNET:{stringify:function(e){var h,f,i,g;g=(function(){switch(Object.Type(e)){case"number":return[String(e),"#"];case"string":return[e,"'"];case"function":return[String(e),"'"];case"boolean":return[String(!!e),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var l,k,j;j=[];for(l=0,k=e.length;l<k;l++){i=e[l];j.push(a.TNET.stringify(i))}return j})()).join(""),"]"];case"object":return[((function(){var j;j=[];for(i in e){j.push(a.TNET.stringify(i)+a.TNET.stringify(e[i]))}return j})()).join(""),"}"]}})(),h=g[0],f=g[1];return(h.length|0)+":"+h+f},parse:function(e){var f;return(f=b(e))!=null?f[0]:void 0}}}}})})(Bling);(function(a){return a.plugin(function(){var d,g,c,f,e,b;g=function(h,j){var i;j=Object.Extend({autoOpen:false,draggable:true},j);i=a(h).addClass("dialog");if(j.draggable){i.draggable()}if(j.autoOpen){i.show().center()}i.find("button.close, .close-button").bind("click touchstart",function(){i.hide();return false});return i};c=function(h,n){var k,j,m,i,l;n=Object.Extend({handleCSS:{}},n);n.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},n.handleCSS);k=a(h);m=false;i=l=0;j=a.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(n.handleCSS.bind("mousedown, touchstart",function(o){m=true;i||(i=o.pageX);l||(l=o.pageY);return false})));a(document.bind("mousemove, touchmove",function(p){var o,q;if(m){o=p.pageX-i;q=p.pageY-l;k.transform({translate:[o,q]},0).trigger("drag",{dragObject:k});return false}})).bind("mouseup, touchend",function(o){var p;if(m){m=false;p=j.position()[0];return a(document.elementFromPoint(p.left,p.top-1).trigger("drop",{dropObject:k}))}});return k.addClass("draggable").css({position:"relative","padding-top":k.css("padding-top").map(Number.AtLeast(parseInt(n.handleCSS.height,10))).px().first()}.append(j))};f=function(m,i){var h,k,j,l;i=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},i);h=a(m).addClass("progress-bar");l=0;if(i.reset){k=h.css("background").first();j=h.css("color").first()}return h.zap("updateProgress",function(n){while(n>1){n/=100}l=n;if(n===1&&i.reset){h.css("background",k).css("color",j)}else{h.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(n*100)+"% 0, color-stop(0, "+i.barColor+"), color-stop(0.98, "+i.barColor+"), color-stop(1.0, "+i.backgroundColor+"))",color:i.textColor})}if(Object.IsFunc(i.change)){return i.change(l)}})};d=function(h,k){var i,j,l;k=Object.Extend({exclusive:false,sticky:false},k);j=a(h).addClass("accordion");l=null;i=function(p){var r,q,m,o;m=a(p).children().first().filter("*");if(m.len()!==2){throw Exception("accordion row requires 2 elements, not "+(m.len()))}o=m.eq(0).addClass("title");r=m.eq(1).addClass("body").hide();q=false;return o.click(function(){if(k.exclusive){j.find(".body").hide()}if(q){if(!k.sticky){r.hide().removeClass("visible");o.removeClass("selected").trigger("deselect");return q=false}else{r.show().addClass("visible");o.addClass("selected").trigger("select");return q=true}}else{r.show().addClass("visible");o.addClass("selected").trigger("select");return q=true}})};j.bind("DOMNodeInserted",function(n){var m,o;m=j.children().first().filter("*");o=a(n.target).parents().first();return i(o.intersect(m))});j.children().first().filter("*").map(i);return j};b=function(m,k){var j,h,i,l;h=a(m).css({position:"relative",top:"0px",left:"0px"}.hide().map(a));j=0;h[j].show();h.next=function(){h[j].hide();j=++j%nn;return h[j].show()};h.activate=function(n){h[j].hide();j=n;return h[n].show()};for(i=0,l=h.len();0<=l?i<l:i>l;0<=l?i++:i--){h[i].zap("_viewIndex",i.zap("activate",function(){return h.activate(this._viewIndex)}))}return h};e=function(h,i){var k,l,j;j=a(h);i=a(i).viewStack();l=j.len();for(k=0;0<=l?k<=l:k>=l;0<=l?k++:k--){j._tabIndex=k}a(j[0]).addClass("active");return j.click(function(){j.removeClass("active");i.activate(this._tabIndex);return a(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:c,ProgressBar:f,ViewStack:b,Tabs:e,Accordion:d}},dialog:function(h){return g(this,h)},progressBar:function(h){return f(this,h)},viewStack:function(h){return b(this,h)},tabs:function(h){return e(this,h)},accordion:function(h){return d(this,h)},draggable:function(h){return c(this,h)}}})})(Bling);(function(){var a=Array.prototype.slice;$.plugin(function(){var h,j,f,i,b,d,c,q,o,k,m,e,p,n,g,l;e=["px","pt","pc","em","%","in","cm","mm","ex",""];h=/(\d+\.*\d*)(px|pt|pc|em|%|in|cm|mm|ex)/;q=function(r){return h.exec(r)[2](h.test(r)?void 0:"")};i=function(s,r){return i[s][r]()};o=function(r){return function(){return r}};for(p=0,g=e.length;p<g;p++){j=e[p];for(n=0,l=e.length;n<l;n++){f=e[n];(i[j]||(i[j]={}))[f]=o(+(j===f||j===""||f===""))}}i["in"].pt=function(){return 72};i["in"].px=function(){return 96};i["in"].cm=function(){return 2.54};i.pc.pt=function(){return 12};i.cm.mm=function(){return 10};i.em.px=function(){var r,s;s=$("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body");r=s.width().first();s.remove();return r};i.ex.px=function(){var r,s;s=$("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body");r=s.width().first();s.remove();return r};i.ex.em=function(){return 2};c=function(){var t,r,w,u,v,s;s=[];for(u=0,v=e.length;u<v;u++){t=e[u];s.push((function(){var z,x,y;y=[];for(z=0,x=e.length;z<x;z++){r=e[z];if(!i(t,r)&&i(r,t)){console.log("found inverse: "+t+"."+r);i[t][r]=o(1/i(r,t))}y.push((function(){var B,A,C;C=[];for(A=0,B=e.length;A<B;A++){w=e[A];if(!i(t,w)&&i(t,r)&&i(r,w)){console.log("found induction: "+t+"."+w);C.push(i[t][w]=o(i(t,r)*i(r,w)))}else{C.push(void 0)}}return C})())}return y})())}return s};c();c();d=function(r,s){return parseFloat(r)*i[q(r)][s]()+s};$.assert(d("300px","cm")==="10cm");b=function(u,r){var s,t,v;v=[];for(s=0,t=r.length;0<=t?s<t:s>t;0<=t?s++:s--){v.push(r[s]=convertTo(u,r[s]))}return v};Object.Type.register("units",{match:function(r){return h.test(r)}});k=function(r){return function(){var s,t;s=1<=arguments.length?a.call(arguments,0):[];b(t=q(this[0]),this);return(r.apply(this,s))+t}};m=function(r){return function(){var s,t;s=1<=arguments.length?a.call(arguments,0):[];t=this.map(q);return r.apply(this.floats(),s).map(function(){})}};return{min:k(function(){return this.reduce(function(r){return Math.min(parseFloat(this),r)})}),max:k(function(){return this.reduce(function(r){return Math.max(parseFloat(this),r)})}),sum:k(function(){return this.reduce(function(r){return parseFloat(this)+r})}),mean:k(function(){return parseFloat(this.sum())/this.length}),magnitude:k(function(){return Math.sqrt(this.floats().squares().sum())}),squares:function(){return this.map(function(){var r;return(r=parseFloat(this))*r})},scale:function(r){return this.map(function(){return r*parseFloat(this)})},add:function(r){return this.map(function(){return r+this})},normalize:function(){return this.scale(1/this.magnitude())}}})}).call(this);$.plugin(function(){var d,a,e,c,b;a=function(){return"EOF"};d=function(f){f=extend({item:function(){return a},action:Function.Identity,latency:10},f);return extend(new $.EventEmitter(),{run:function(){var g;var h=this;g=function(){var i;if((i=f.action(f.item()))!==a){h.emit("data",i);return setTimeout(g,f.latency)}};return setTimeout(g,f.latency)}})};for(b=0;b<1000;b++){e=b}c=0;return d({item:function(){return e[c++](c<e.length?void 0:a)},action:function(f){return(f*f)-1},latency:10}).on("data",function(f){return console.log("data:",f.on("error",function(g){return console.log("error:",g.run())}))})});(function(a){return a.plugin(function(){var d,e,c,b;e={};c=function(f,g){return e[f]=g};d=function(f){return e[obj.t]};b=[];Object.Type.extend(null,{compact:function(f){return Object.String(f)}});Object.Type.extend("undefined",{compact:function(f){return""}});Object.Type.extend("null",{compact:function(f){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(g){var f;return((function(){var j,i,h;h=[];for(j=0,i=g.length;j<i;j++){f=g[j];h.push(Object.Compact(f))}return h})()).join("")}});Object.Type.extend("bling",{compact:function(f){return f.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(g){var f;return Object.Compact((f=d(g))!=null?f.call(g,g):void 0)}});Object.Compact=function(g){var f;b.push(g);if((f=Object.Type.lookup(g))!=null){f.compact(g)}return b.pop()};Object.Extend(Object.Compact,{register:c,lookup:d});c("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});c("text",function(){return this.EN});c("link",function(){var g,h,j,f,i;g=a(["<a"]);i=["href","name","target"];for(j=0,f=i.length;j<f;j++){h=i[j];if(h in this){g.extend(" ",h,"='",this[h],"'")}}return g.extend(">",node.content,"</a>")});a.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling);(function(a){return a.plugin(function(){var v,s,t,u,h,f,j,b,c,e,k,l,m,g,n,i,p,r,d,q,o;n=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;g="<span class='opr'>$&</span>";k=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;e="<span class='kwd'>$&</span>";v=/\d+\.*\d*/g;m="<span class='num'>$&</span>";t=/\$(\(|\.)/g;s="<span class='bln'>$$</span>$1";o=/\t/g;q="&nbsp;&nbsp;";p=/\/\/.*?(?:\n|$)/;l=/\/\*(?:.|\n)*?\*\//;h=function(w){if(w){return"<span class='com'>"+w+"</span>"}else{return""}};i=function(w){if(w){return"<span class='str'>"+w+"</span>"}else{return""}};j=function(z,y){var x,w;x=z.indexOf('"',y);w=z.indexOf("'",y);if(x===-1){x=z.length}if(w===-1){w=z.length}if(x===w){return[null,-1]}if(x<w){return['"',x]}return["'",w]};u=function(x,w,z){var y;y=x.indexOf(z,w);while(x.charAt(y-1)==="\\"&&(0<y&&y<x.length)){y=x.indexOf(z,y+1)}return y};d=function(w){var x,A,B,y,C,z;x=0;y=w.length;z=[];if(!Object.IsString(w)){if(!Object.IsFunction(w.toString)){throw TypeError("invalid string argument to split_quoted")}else{w=w.toString();y=w.length}}while(x<y){C=j(w,x);A=C[1];if(A===-1){z.push(w.substring(x));break}z.push(w.substring(x,A));B=u(w,A+1,C[0]);if(B===-1){throw Error("unclosed quote: "+C[0]+" starting at "+A)}z.push(w.substring(A,B+1));x=B+1}return z};f=function(x){var w,y;w=x.match(p);y=x.match(l);if(w===y){return[-1,null]}if(w===null&&y!==null){return[y.index,y[0]]}if(w!==null&&y===null){return[w.index,w[0]]}if(y.index<w.index){return[y.index,y[0]]}return[w.index,w[0]]};r=function(w){var x,y,z,A,B,C;B=[];x=0;z=w.length;while(x<z){C=w.substring(x);A=f(C);y=A[0];if(y>-1){B.push(C.substring(0,y));B.push(A[1]);x+=y+A[1].length}else{B.push(C);break}}return B};b=function(x,w){return x.replace(n,g).replace(v,m).replace(k,e).replace(t,s).replace(o,q)+i(w)};c=function(w,x){return a(d(w)).fold(b).join("")+h(x)};return{name:"PrettyPrint",$:{prettyPrint:function(x,z){var w,A,y;if(Object.IsFunction(x)){x=x.toString()}if(!Object.IsString(x)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(x)+"'")}if(a("style#prettyPrint").length===0){A="code.pp .bln { font-size: 17px; } ";z=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},z);for(w in z){A+="code.pp ."+w+" { color: "+z[w]+"; } "}a.synth("style#prettyPrint").text(A).appendTo("head")}return y="<code class='pp'>"+(a(r(x)).fold(c).join(""))+"</code>"}}}})})(Bling);(function(){var a=Object.prototype.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e;f.__super__=d.prototype;return f};(function(c){c.plugin(function(){var d;d=(function(){function e(f){this.reset();this.table=f;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(g){var h;this._lastMode=this._mode;this._mode=g;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){h=this.modeline.enter.call(this);while(Object.IsFunction(h)){h=h.call(this)}}return g},get:function(){return this._mode}})}e.prototype.reset=function(){this._mode=null;return this._lastMode=null};e.prototype.GO=function(f){return function(){return this.mode=f}};e.GO=function(f){return function(){return this.mode=f}};e.prototype.run=function(j){var l,k,g,i,h,f;this.mode=0;for(i=0,h=j.length;i<h;i++){l=j[i];g=this.modeline;if(!(g!=null)){k=null}else{if(l in g){k=g[l]}else{if("def" in g){k=g.def}}}while(Object.IsFunction(k)){k=k.call(this,l)}}if(Object.IsFunction((f=this.modeline)!=null?f.eof:void 0)){k=this.modeline.eof.call(this)}while(Object.IsFunction(k)){k=k.call(this)}this.reset();return this};return e})();return{name:"StateMachine",$:{StateMachine:d}}});return c.plugin(function(){var d;d=(function(){b(e,c.StateMachine);e.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':e.GO(6),"'":e.GO(7),"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(f){return this.tag+=f},eof:e.GO(13)},{".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(f){return this.id+=f},eof:e.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(f){return this.cls+=f},eof:e.GO(13)},{"=":e.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(f){return this.attr+=f},eof:e.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(f){return this.val+=f},eof:e.GO(12)},{'"':e.GO(8),def:function(f){return this.text+=f},eof:e.GO(12)},{"'":e.GO(8),def:function(f){return this.text+=f},eof:e.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var f;this.emitNode();this.parent=(f=this.parent)!=null?f.parentNode:void 0;return this.GO(0)}},{enter:function(){return c.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function e(){e.__super__.constructor.call(this,e.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}e.prototype.emitNode=function(){var f,g;g=document.createElement(this.tag);g.id=this.id||null;g.className=this.cls||null;for(f in this.attrs){g.setAttribute(f,this.attrs[f])}this.parent.appendChild(g);return this.parent=g};e.prototype.emitText=function(){this.parent.appendChild(c.HTML.parse(this.text));return this.text=""};return e})();return{name:"Synth",$:{synth:function(f){var e;e=new d();e.run(f);if(e.fragment.childNodes.length===1){return c(e.fragment.childNodes[0])}else{return c(e.fragment)}}}}})})(Bling)}).call(this);(function(){var a=Object.prototype.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e;f.__super__=d.prototype;return f};(function(c){var e,d;e={};c.plugin(function(){var f,g;f=null;e={};g={register_engine:function(h,i){e[h]=i;if(!(f!=null)){return f=h}},render:function(i,h){if(f in e){return e[f](i,h)}}};g.__defineSetter__("engine",function(h){if(!h in e){throw new Error("invalid template engine: "+h+" not one of "+(Object.Keys(e)))}else{return f=h}});g.__defineGetter__("engine",function(){return f});return{name:"Template",$:{template:g}}});c.template.register_engine("null",(function(){return function(g,f){return g}})());d=function(m,j,k,h,g){var f,n,l;if(g==null){g=-1}f=1;if(g<0){g=m.length+1+g}for(n=h;h<=g?n<g:n>g;h<=g?n++:n--){l=m[n];if(l===k){f+=1}else{if(l===j){f-=1}}if(f===0){return n}}return -1};c.template.register_engine("pythonic",(function(){var h,i,g,f;f=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;h=/%[\(\/]/;i=function(l){var j,p,s,r,k,t,o,m,q;j=l.split(h);o=j.length;q=[j[0]];r=1;for(s=1;1<=o?s<o:s>o;1<=o?s++:s--){p=d(j[s],")","(",0,-1);if(p===-1){return"Template syntax error: unmatched '%(' starting at: "+(j[s].substring(0,15))}k=j[s].substring(0,p);m=j[s].substring(p);t=f.exec(m);if(t===null){return"Template syntax error: invalid type specifier starting at '"+m+"'"}m=t[4];q[r++]=k;q[r++]=t[1]|0;q[r++]=t[2]|0;q[r++]=t[3];q[r++]=m}return q};i.cache={};g=function(k,j){var l,r,v,t,y,o,s,p,m,w,x,u,q;l=i.cache[k];if(!(l!=null)){l=i.cache[k]=i(k)}s=[l[0]];t=1;o=l.length;for(v=1,u=o-5;v<=u;v+=5){q=l.slice(v,(v+4)+1||9000000000),y=q[0],p=q[1],r=q[2],w=q[3],m=q[4];x=j[y];if(!(x!=null)){x="missing value: "+y}switch(w){case"d":s[t++]=""+parseInt(x,10);break;case"f":s[t++]=parseFloat(x).toFixed(r);break;case"s":s[t++]=""+x;break;default:s[t++]=""+x}if(p>0){s[t]=String.PadLeft(s[t],p)}s[t++]=m}return s.join("")};return g})());return c.template.register_engine("js-eval",(function(){var f;f=(function(){b(g,c.StateMachine);function g(){g.__super__.constructor.apply(this,arguments)}g.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return g})();return function(h,g){return h}})())})(Bling)}).call(this);(function(a){return a.plugin(function(){var d,c,b;b=function(k){var j,e,g,h,f;e=k.indexOf(":");if(e>0){h=parseInt(k.slice(0,e),10);g=k.slice(e+1,(e+1+h));f=k[e+1+h];j=k.slice(e+h+2);g=(function(){switch(f){case"#":return Number(g);case"'":return String(g);case"!":return g==="true";case"~":return null;case"]":return d(g);case"}":return c(g)}})();return[g,j]}};d=function(e){var h,f,g;h=[];while(e.length>0){g=b(e),f=g[0],e=g[1];h.push(f)}return h};c=function(j){var g,i,f,e,h;g={};while(j.length>0){e=b(j),i=e[0],j=e[1];h=b(j),f=h[0],j=h[1];g[i]=f}return g};return{name:"TNET",$:{TNET:{stringify:function(e){var h,f,i,g;g=(function(){switch(Object.Type(e)){case"number":return[String(e),"#"];case"string":return[e,"'"];case"function":return[String(e),"'"];case"boolean":return[String(!!e),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var l,k,j;j=[];for(l=0,k=e.length;l<k;l++){i=e[l];j.push(a.TNET.stringify(i))}return j})()).join(""),"]"];case"object":return[((function(){var j;j=[];for(i in e){j.push(a.TNET.stringify(i)+a.TNET.stringify(e[i]))}return j})()).join(""),"}"]}})(),h=g[0],f=g[1];return(h.length|0)+":"+h+f},parse:function(e){var f;return(f=b(e))!=null?f[0]:void 0}}}}})})(Bling);(function(a){return a.plugin(function(){var d,g,c,f,e,b;g=function(h,j){var i;j=Object.Extend({autoOpen:false,draggable:true},j);i=a(h).addClass("dialog");if(j.draggable){i.draggable()}if(j.autoOpen){i.show().center()}i.find("button.close, .close-button").bind("click touchstart",function(){i.hide();return false});return i};c=function(h,n){var k,j,m,i,l;n=Object.Extend({handleCSS:{}},n);n.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},n.handleCSS);k=a(h);m=false;i=l=0;j=a.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(n.handleCSS.bind("mousedown, touchstart",function(o){m=true;i||(i=o.pageX);l||(l=o.pageY);return false})));a(document.bind("mousemove, touchmove",function(p){var o,q;if(m){o=p.pageX-i;q=p.pageY-l;k.transform({translate:[o,q]},0).trigger("drag",{dragObject:k});return false}})).bind("mouseup, touchend",function(o){var p;if(m){m=false;p=j.position()[0];return a(document.elementFromPoint(p.left,p.top-1).trigger("drop",{dropObject:k}))}});return k.addClass("draggable").css({position:"relative","padding-top":k.css("padding-top").map(Number.AtLeast(parseInt(n.handleCSS.height,10))).px().first()}.append(j))};f=function(m,i){var h,k,j,l;i=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},i);h=a(m).addClass("progress-bar");l=0;if(i.reset){k=h.css("background").first();j=h.css("color").first()}return h.zap("updateProgress",function(n){while(n>1){n/=100}l=n;if(n===1&&i.reset){h.css("background",k).css("color",j)}else{h.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(n*100)+"% 0, color-stop(0, "+i.barColor+"), color-stop(0.98, "+i.barColor+"), color-stop(1.0, "+i.backgroundColor+"))",color:i.textColor})}if(Object.IsFunc(i.change)){return i.change(l)}})};d=function(h,k){var i,j,l;k=Object.Extend({exclusive:false,sticky:false},k);j=a(h).addClass("accordion");l=null;i=function(p){var r,q,m,o;m=a(p).children().first().filter("*");if(m.len()!==2){throw Exception("accordion row requires 2 elements, not "+(m.len()))}o=m.eq(0).addClass("title");r=m.eq(1).addClass("body").hide();q=false;return o.click(function(){if(k.exclusive){j.find(".body").hide()}if(q){if(!k.sticky){r.hide().removeClass("visible");o.removeClass("selected").trigger("deselect");return q=false}else{r.show().addClass("visible");o.addClass("selected").trigger("select");return q=true}}else{r.show().addClass("visible");o.addClass("selected").trigger("select");return q=true}})};j.bind("DOMNodeInserted",function(n){var m,o;m=j.children().first().filter("*");o=a(n.target).parents().first();return i(o.intersect(m))});j.children().first().filter("*").map(i);return j};b=function(m,k){var j,h,i,l;h=a(m).css({position:"relative",top:"0px",left:"0px"}.hide().map(a));j=0;h[j].show();h.next=function(){h[j].hide();j=++j%nn;return h[j].show()};h.activate=function(n){h[j].hide();j=n;return h[n].show()};for(i=0,l=h.len();0<=l?i<l:i>l;0<=l?i++:i--){h[i].zap("_viewIndex",i.zap("activate",function(){return h.activate(this._viewIndex)}))}return h};e=function(h,i){var k,l,j;j=a(h);i=a(i).viewStack();l=j.len();for(k=0;0<=l?k<=l:k>=l;0<=l?k++:k--){j._tabIndex=k}a(j[0]).addClass("active");return j.click(function(){j.removeClass("active");i.activate(this._tabIndex);return a(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:c,ProgressBar:f,ViewStack:b,Tabs:e,Accordion:d}},dialog:function(h){return g(this,h)},progressBar:function(h){return f(this,h)},viewStack:function(h){return b(this,h)},tabs:function(h){return e(this,h)},accordion:function(h){return d(this,h)},draggable:function(h){return c(this,h)}}})})(Bling);(function(){(function(b){return b.plugin(function(){var a,C,B,A,z,L,y,P,O,M,I,x,H,K,w,J,F,D,N,E,G;w=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;K="<span class='opr'>$&</span>";I=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;M="<span class='kwd'>$&</span>";a=/\d+\.*\d*/g;H="<span class='num'>$&</span>";B=/\$(\(|\.)/g;C="<span class='bln'>$$</span>$1";G=/\t/g;E="&nbsp;&nbsp;";F=/\/\/.*?(?:\n|$)/;x=/\/\*(?:.|\n)*?\*\//;z=function(c){if(c){return"<span class='com'>"+c+"</span>"}else{return""}};J=function(c){if(c){return"<span class='str'>"+c+"</span>"}else{return""}};y=function(c,d){var e,f;e=c.indexOf('"',d);f=c.indexOf("'",d);if(e===-1){e=c.length}if(f===-1){f=c.length}if(e===f){return[null,-1]}if(e<f){return['"',e]}return["'",f]};A=function(e,f,c){var d;d=e.indexOf(c,f);while(e.charAt(d-1)==="\\"&&(0<d&&d<e.length)){d=e.indexOf(c,d+1)}return d};N=function(i){var h,e,d,g,c,f;h=0;g=i.length;f=[];if(!Object.IsString(i)){if(!Object.IsFunction(i.toString)){throw TypeError("invalid string argument to split_quoted")}else{i=i.toString();g=i.length}}while(h<g){c=y(i,h);e=c[1];if(e===-1){f.push(i.substring(h));break}f.push(i.substring(h,e));d=A(i,e+1,c[0]);if(d===-1){throw Error("unclosed quote: "+c[0]+" starting at "+e)}f.push(i.substring(e,d+1));h=d+1}return f};L=function(d){var e,c;e=d.match(F);c=d.match(x);if(e===c){return[-1,null]}if(e===null&&c!==null){return[c.index,c[0]]}if(e!==null&&c===null){return[e.index,e[0]]}if(c.index<e.index){return[c.index,c[0]]}return[e.index,e[0]]};D=function(i){var h,g,f,e,d,c;d=[];h=0;f=i.length;while(h<f){c=i.substring(h);e=L(c);g=e[0];if(g>-1){d.push(c.substring(0,g));d.push(e[1]);h+=g+e[1].length}else{d.push(c);break}}return d};P=function(c,d){return c.replace(w,K).replace(a,H).replace(I,M).replace(B,C).replace(G,E)+J(d)};O=function(d,c){return b(N(d)).fold(P).join("")+z(c)};return{name:"PrettyPrint",$:{prettyPrint:function(f,d){var g,c,e;if(Object.IsFunction(f)){f=f.toString()}if(!Object.IsString(f)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(f)+"'")}if(b("style#prettyPrint").length===0){c="code.pp .bln { font-size: 17px; } ";d=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},d);for(g in d){c+="code.pp ."+g+" { color: "+d[g]+"; } "}b.synth("style#prettyPrint").text(c).appendTo("head")}return e="<code class='pp'>"+(b(D(f)).fold(O).join(""))+"</code>"}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(g,a){for(var b in a){if(d.call(a,b)){g[b]=a[b]}}function h(){this.constructor=g}h.prototype=a.prototype;g.prototype=new h();g.__super__=a.prototype;return g};(function(a){a.plugin(function(){var b;b=(function(){function f(e){this.reset();this.table=e;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(j){var i;this._lastMode=this._mode;this._mode=j;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){i=this.modeline.enter.call(this);while(Object.IsFunction(i)){i=i.call(this)}}return j},get:function(){return this._mode}})}f.prototype.reset=function(){this._mode=null;return this._lastMode=null};f.prototype.GO=function(e){return function(){return this.mode=e}};f.GO=function(e){return function(){return this.mode=e}};f.prototype.run=function(p){var n,o,r,e,q,m;this.mode=0;for(e=0,q=p.length;e<q;e++){n=p[e];r=this.modeline;if(!(r!=null)){o=null}else{if(n in r){o=r[n]}else{if("def" in r){o=r.def}}}while(Object.IsFunction(o)){o=o.call(this,n)}}if(Object.IsFunction((m=this.modeline)!=null?m.eof:void 0)){o=this.modeline.eof.call(this)}while(Object.IsFunction(o)){o=o.call(this)}this.reset();return this};return f})();return{name:"StateMachine",$:{StateMachine:b}}});return a.plugin(function(){var b;b=(function(g){c(h,g);h.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':h.GO(6),"'":h.GO(7),"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.tag+=e},eof:h.GO(13)},{".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.id+=e},eof:h.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.cls+=e},eof:h.GO(13)},{"=":h.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.attr+=e},eof:h.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.val+=e},eof:h.GO(12)},{'"':h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{"'":h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var e;this.emitNode();this.parent=(e=this.parent)!=null?e.parentNode:void 0;return this.GO(0)}},{enter:function(){return a.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function h(){h.__super__.constructor.call(this,h.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}h.prototype.emitNode=function(){var f,e;e=document.createElement(this.tag);e.id=this.id||null;e.className=this.cls||null;for(f in this.attrs){e.setAttribute(f,this.attrs[f])}this.parent.appendChild(e);return this.parent=e};h.prototype.emitText=function(){this.parent.appendChild(a.HTML.parse(this.text));return this.text=""};return h})(a.StateMachine);return{name:"Synth",$:{synth:function(g){var h;h=new b();h.run(g);if(h.fragment.childNodes.length===1){return a(h.fragment.childNodes[0])}else{return a(h.fragment)}}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(g,a){for(var b in a){if(d.call(a,b)){g[b]=a[b]}}function h(){this.constructor=g}h.prototype=a.prototype;g.prototype=new h();g.__super__=a.prototype;return g};(function(b){var f,a;f={};b.plugin(function(){var h,e;h=null;f={};e={register_engine:function(j,g){f[j]=g;if(!(h!=null)){return h=j}},render:function(g,j){if(h in f){return f[h](g,j)}}};e.__defineSetter__("engine",function(g){if(!g in f){throw new Error("invalid template engine: "+g+" not one of "+(Object.Keys(f)))}else{return h=g}});e.__defineGetter__("engine",function(){return h});return{name:"Template",$:{template:e}}});b.template.register_engine("null",(function(){return function(e,h){return e}})());a=function(s,u,p,q,t){var v,e,r,i;if(t==null){t=-1}v=1;if(t<0){t=s.length+1+t}for(e=i=q;q<=t?i<t:i>t;e=q<=t?++i:--i){r=s[e];if(r===p){v+=1}else{if(r===u){v-=1}}if(v===0){return e}}return -1};b.template.register_engine("pythonic",(function(){var j,e,k,l;l=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;j=/%[\(\/]/;e=function(g){var y,z,i,n,w,h,A,B,x,v;y=g.split(j);A=y.length;x=[y[0]];n=1;for(i=v=1;1<=A?v<A:v>A;i=1<=A?++v:--v){z=a(y[i],")","(",0,-1);if(z===-1){return"Template syntax error: unmatched '%(' starting at: "+(y[i].substring(0,15))}w=y[i].substring(0,z);B=y[i].substring(z);h=l.exec(B);if(h===null){return"Template syntax error: invalid type specifier starting at '"+B+"'"}B=h[4];x[n++]=w;x[n++]=h[1]|0;x[n++]=h[2]|0;x[n++]=h[3];x[n++]=B}return x};e.cache={};k=function(B,F){var E,h,J,L,G,A,C,n,D,I,H,g,K,i;E=e.cache[B];if(!(E!=null)){E=e.cache[B]=e(B)}C=[E[0]];L=1;A=E.length;for(J=g=1,K=A-5;g<=K;J=g+=5){i=E.slice(J,(J+4)+1||9000000000),G=i[0],n=i[1],h=i[2],I=i[3],D=i[4];H=F[G];if(!(H!=null)){H="missing value: "+G}switch(I){case"d":C[L++]=""+parseInt(H,10);break;case"f":C[L++]=parseFloat(H).toFixed(h);break;case"s":C[L++]=""+H;break;default:C[L++]=""+H}if(n>0){C[L]=String.PadLeft(C[L],n)}C[L++]=D}return C.join("")};return k})());return b.template.register_engine("js-eval",(function(){var e;e=(function(i){c(j,i);function j(){return j.__super__.constructor.apply(this,arguments)}j.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return j})(b.StateMachine);return function(i,j){return i}})())})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var e,f,a;a=function(c){var n,m,i,d,l;m=c.indexOf(":");if(m>0){d=parseInt(c.slice(0,m),10);i=c.slice(m+1,m+1+d);l=c[m+1+d];n=c.slice(m+d+2);i=(function(){switch(l){case"#":return Number(i);case"'":return String(i);case"!":return i==="true";case"~":return null;case"]":return e(i);case"}":return f(i)}})();return[i,n]}return void 0};e=function(j){var c,i,d;c=[];while(j.length>0){d=a(j),i=d[0],j=d[1];c.push(i)}return c};f=function(n){var c,m,k,l,d;c={};while(n.length>0){l=a(n),m=l[0],n=l[1];d=a(n),k=d[0],n=d[1];c[m]=k}return c};return{name:"TNET",$:{TNET:{stringify:function(l){var d,k,c,j;j=(function(){switch(Object.Type(l)){case"number":return[String(l),"#"];case"string":return[l,"'"];case"function":return[String(l),"'"];case"boolean":return[String(!!l),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var g,h,i;i=[];for(g=0,h=l.length;g<h;g++){c=l[g];i.push(b.TNET.stringify(c))}return i})()).join(""),"]"];case"object":return[((function(){var g;g=[];for(c in l){g.push(b.TNET.stringify(c)+b.TNET.stringify(l[c]))}return g})()).join(""),"}"]}})(),d=j[0],k=j[1];return(d.length|0)+":"+d+k},parse:function(d){var c;return(c=a(d))!=null?c[0]:void 0}}}}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var k,h,l,i,j,a;h=function(e,c){var d;c=Object.Extend({autoOpen:false,draggable:true},c);d=b(e).addClass("dialog");if(c.draggable){d.draggable()}if(c.autoOpen){d.show().center()}d.find("button.close, .close-button").bind("click touchstart",function(){d.hide();return false});return d};l=function(g,c){var e,p,o,f,d;c=Object.Extend({handleCSS:{}},c);c.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},c.handleCSS);e=b(g);o=false;f=d=0;p=b.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(c.handleCSS.bind("mousedown, touchstart",function(m){o=true;f||(f=m.pageX);d||(d=m.pageY);return false})));b(document.bind("mousemove, touchmove",function(r){var m,n;if(o){m=r.pageX-f;n=r.pageY-d;e.transform({translate:[m,n]},0).trigger("drag",{dragObject:e});return false}})).bind("mouseup, touchend",function(m){var n;if(o){o=false;n=p.position()[0];return b(document.elementFromPoint(n.left,n.top-1).trigger("drop",{dropObject:e}))}});return e.addClass("draggable").css({position:"relative","padding-top":e.css("padding-top").map(Number.AtLeast(parseInt(c.handleCSS.height,10))).px().first()}.append(p))};i=function(c,f){var g,d,e,n;f=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},f);g=b(c).addClass("progress-bar");n=0;if(f.reset){d=g.css("background").first();e=g.css("color").first()}return g.zap("updateProgress",function(m){while(m>1){m/=100}n=m;if(m===1&&f.reset){g.css("background",d).css("color",e)}else{g.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(m*100)+"% 0, color-stop(0, "+f.barColor+"), color-stop(0.98, "+f.barColor+"), color-stop(1.0, "+f.backgroundColor+"))",color:f.textColor})}if(Object.IsFunc(f.change)){return f.change(n)}})};k=function(g,d){var f,e,c;d=Object.Extend({exclusive:false,sticky:false},d);e=b(g).addClass("accordion");c=null;f=function(t){var n,s,v,u;v=b(t).children().first().filter("*");if(v.len()!==2){throw Exception("accordion row requires 2 elements, not "+(v.len()))}u=v.eq(0).addClass("title");n=v.eq(1).addClass("body").hide();s=false;return u.click(function(){if(d.exclusive){e.find(".body").hide()}if(s){if(!d.sticky){n.hide().removeClass("visible");u.removeClass("selected").trigger("deselect");return s=false}else{n.show().addClass("visible");u.addClass("selected").trigger("select");return s=true}}else{n.show().addClass("visible");u.addClass("selected").trigger("select");return s=true}})};e.bind("DOMNodeInserted",function(q){var r,p;r=e.children().first().filter("*");p=b(q.target).parents().first();return f(p.intersect(r))});e.children().first().filter("*").map(f);return e};a=function(o,c){var d,f,e,g,p;f=b(o).css({position:"relative",top:"0px",left:"0px"}.hide().map(b));d=0;f[d].show();f.next=function(){f[d].hide();d=++d%nn;return f[d].show()};f.activate=function(m){f[d].hide();d=m;return f[m].show()};for(e=g=0,p=f.len();0<=p?g<p:g>p;e=0<=p?++g:--g){f[e].zap("_viewIndex",e.zap("activate",function(){return f.activate(this._viewIndex)}))}return f};j=function(n,g){var d,e,f,c;f=b(n);g=b(g).viewStack();e=f.len();for(d=c=0;0<=e?c<=e:c>=e;d=0<=e?++c:--c){f._tabIndex=d}b(f[0]).addClass("active");return f.click(function(){f.removeClass("active");g.activate(this._tabIndex);return b(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:l,ProgressBar:i,ViewStack:a,Tabs:j,Accordion:k}},dialog:function(c){return h(this,c)},progressBar:function(c){return i(this,c)},viewStack:function(c){return a(this,c)},tabs:function(c){return j(this,c)},accordion:function(c){return k(this,c)},draggable:function(c){return l(this,c)}}})})(Bling)}).call(this);(function(){var b=[].slice;$.plugin(function(){var y,x,A,a,D,C,r,s,t,w,u,B,E,F,z,v;B=["px","pt","pc","em","%","in","cm","mm","ex",""];y=/(\d+\.*\d*)(px|pt|pc|em|%|in|cm|mm|ex)/;s=function(c){return y.exec(c)[2](y.test(c)?void 0:"")};a=function(c,d){return a[c][d]()};t=function(c){return function(){return c}};for(E=0,z=B.length;E<z;E++){x=B[E];for(F=0,v=B.length;F<v;F++){A=B[F];(a[x]||(a[x]={}))[A]=t(+(x===A||x===""||A===""))}}a["in"].pt=function(){return 72};a["in"].px=function(){return 96};a["in"].cm=function(){return 2.54};a.pc.pt=function(){return 12};a.cm.mm=function(){return 10};a.em.px=function(){var d,c;c=$("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body");d=c.width().first();c.remove();return d};a.ex.px=function(){var d,c;c=$("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body");d=c.width().first();c.remove();return d};a.ex.em=function(){return 2};r=function(){var d,e,c,f;f=[];for(e=0,c=B.length;e<c;e++){x=B[e];f.push((function(){var h,g,i;i=[];for(h=0,g=B.length;h<g;h++){A=B[h];if(!a(x,A)&&a(A,x)){console.log("found inverse: "+x+"."+A);a[x][A]=t(1/a(A,x))}i.push((function(){var j,k,l;l=[];for(k=0,j=B.length;k<j;k++){d=B[k];if(!a(x,d)&&a(x,A)&&a(A,d)){console.log("found induction: "+x+"."+d);l.push(a[x][d]=t(a(x,A)*a(A,d)))}else{l.push(void 0)}}return l})())}return i})())}return f};r();r();C=function(d,c){return parseFloat(d)*a[s(d)][c]()+c};$.assert(C("300px","cm")==="10cm");D=function(d,h){var g,f,e,c;c=[];for(g=f=0,e=h.length;0<=e?f<e:f>e;g=0<=e?++f:--f){c.push(h[g]=convertTo(d,h[g]))}return c};Object.Type.register("units",{match:function(c){return y.test(c)}});w=function(c){return function(){var e,d;e=1<=arguments.length?b.call(arguments,0):[];D(d=s(this[0]),this);return(c.apply(this,e))+d}};u=function(c){return function(){var e,d;e=1<=arguments.length?b.call(arguments,0):[];d=this.map(s);return c.apply(this.floats(),e).map(function(){})}};return{min:w(function(){return this.reduce(function(c){return Math.min(parseFloat(this),c)})}),max:w(function(){return this.reduce(function(c){return Math.max(parseFloat(this),c)})}),sum:w(function(){return this.reduce(function(c){return parseFloat(this)+c})}),mean:w(function(){return parseFloat(this.sum())/this.length}),magnitude:w(function(){return Math.sqrt(this.floats().squares().sum())}),squares:function(){return this.map(function(){var c;return(c=parseFloat(this))*c})},scale:function(c){return this.map(function(){return c*parseFloat(this)})},add:function(c){return this.map(function(){return c+this})},normalize:function(){return this.scale(1/this.magnitude())}}})}).call(this);(function(){$.plugin(function(){var h,k,l,i,j,g;k=function(){return"EOF"};h=function(a){a=extend({item:function(){return k},action:Function.Identity,latency:10},a);return extend(new $.EventEmitter(),{run:function(){var b,c=this;b=function(){var d;if((d=a.action(a.item()))!==k){c.emit("data",d);return setTimeout(b,a.latency)}};return setTimeout(b,a.latency)}})};for(j=g=0;g<1000;j=++g){l=j}i=0;return h({item:function(){return l[i++](i<l.length?void 0:k)},action:function(a){return(a*a)-1},latency:10}).on("data",function(a){return console.log("data:",a.on("error",function(b){return console.log("error:",b.run())}))})})}).call(this);(function(){(function(b){return b.plugin(function(){var g,f,h,a;f={};h=function(d,c){return f[d]=c};g=function(c){return f[obj.t]};a=[];Object.Type.extend(null,{compact:function(c){return Object.String(c)}});Object.Type.extend("undefined",{compact:function(c){return""}});Object.Type.extend("null",{compact:function(c){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(c){var d;return((function(){var e,k,l;l=[];for(e=0,k=c.length;e<k;e++){d=c[e];l.push(Object.Compact(d))}return l})()).join("")}});Object.Type.extend("bling",{compact:function(c){return c.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(c){var d;return Object.Compact((d=g(c))!=null?d.call(c,c):void 0)}});Object.Compact=function(c){var d;a.push(c);if((d=Object.Type.lookup(c))!=null){d.compact(c)}return a.pop()};Object.Extend(Object.Compact,{register:h,lookup:g});h("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});h("text",function(){return this.EN});h("link",function(){var k,e,c,l,d;k=b(["<a"]);d=["href","name","target"];for(c=0,l=d.length;c<l;c++){e=d[c];if(e in this){k.extend(" ",e,"='",this[e],"'")}}return k.extend(">",node.content,"</a>")});b.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var a,C,B,A,z,L,y,P,O,M,I,x,H,K,w,J,F,D,N,E,G;w=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;K="<span class='opr'>$&</span>";I=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;M="<span class='kwd'>$&</span>";a=/\d+\.*\d*/g;H="<span class='num'>$&</span>";B=/\$(\(|\.)/g;C="<span class='bln'>$$</span>$1";G=/\t/g;E="&nbsp;&nbsp;";F=/\/\/.*?(?:\n|$)/;x=/\/\*(?:.|\n)*?\*\//;z=function(c){if(c){return"<span class='com'>"+c+"</span>"}else{return""}};J=function(c){if(c){return"<span class='str'>"+c+"</span>"}else{return""}};y=function(c,d){var e,f;e=c.indexOf('"',d);f=c.indexOf("'",d);if(e===-1){e=c.length}if(f===-1){f=c.length}if(e===f){return[null,-1]}if(e<f){return['"',e]}return["'",f]};A=function(e,f,c){var d;d=e.indexOf(c,f);while(e.charAt(d-1)==="\\"&&(0<d&&d<e.length)){d=e.indexOf(c,d+1)}return d};N=function(i){var h,e,d,g,c,f;h=0;g=i.length;f=[];if(!Object.IsString(i)){if(!Object.IsFunction(i.toString)){throw TypeError("invalid string argument to split_quoted")}else{i=i.toString();g=i.length}}while(h<g){c=y(i,h);e=c[1];if(e===-1){f.push(i.substring(h));break}f.push(i.substring(h,e));d=A(i,e+1,c[0]);if(d===-1){throw Error("unclosed quote: "+c[0]+" starting at "+e)}f.push(i.substring(e,d+1));h=d+1}return f};L=function(d){var e,c;e=d.match(F);c=d.match(x);if(e===c){return[-1,null]}if(e===null&&c!==null){return[c.index,c[0]]}if(e!==null&&c===null){return[e.index,e[0]]}if(c.index<e.index){return[c.index,c[0]]}return[e.index,e[0]]};D=function(i){var h,g,f,e,d,c;d=[];h=0;f=i.length;while(h<f){c=i.substring(h);e=L(c);g=e[0];if(g>-1){d.push(c.substring(0,g));d.push(e[1]);h+=g+e[1].length}else{d.push(c);break}}return d};P=function(c,d){return c.replace(w,K).replace(a,H).replace(I,M).replace(B,C).replace(G,E)+J(d)};O=function(d,c){return b(N(d)).fold(P).join("")+z(c)};return{name:"PrettyPrint",$:{prettyPrint:function(f,d){var g,c,e;if(Object.IsFunction(f)){f=f.toString()}if(!Object.IsString(f)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(f)+"'")}if(b("style#prettyPrint").length===0){c="code.pp .bln { font-size: 17px; } ";d=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},d);for(g in d){c+="code.pp ."+g+" { color: "+d[g]+"; } "}b.synth("style#prettyPrint").text(c).appendTo("head")}return e="<code class='pp'>"+(b(D(f)).fold(O).join(""))+"</code>"}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(g,a){for(var b in a){if(d.call(a,b)){g[b]=a[b]}}function h(){this.constructor=g}h.prototype=a.prototype;g.prototype=new h();g.__super__=a.prototype;return g};(function(a){a.plugin(function(){var b;b=(function(){function f(e){this.reset();this.table=e;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(j){var i;this._lastMode=this._mode;this._mode=j;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){i=this.modeline.enter.call(this);while(Object.IsFunction(i)){i=i.call(this)}}return j},get:function(){return this._mode}})}f.prototype.reset=function(){this._mode=null;return this._lastMode=null};f.prototype.GO=function(e){return function(){return this.mode=e}};f.GO=function(e){return function(){return this.mode=e}};f.prototype.run=function(p){var n,o,r,e,q,m;this.mode=0;for(e=0,q=p.length;e<q;e++){n=p[e];r=this.modeline;if(!(r!=null)){o=null}else{if(n in r){o=r[n]}else{if("def" in r){o=r.def}}}while(Object.IsFunction(o)){o=o.call(this,n)}}if(Object.IsFunction((m=this.modeline)!=null?m.eof:void 0)){o=this.modeline.eof.call(this)}while(Object.IsFunction(o)){o=o.call(this)}this.reset();return this};return f})();return{name:"StateMachine",$:{StateMachine:b}}});return a.plugin(function(){var b;b=(function(g){c(h,g);h.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':h.GO(6),"'":h.GO(7),"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.tag+=e},eof:h.GO(13)},{".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.id+=e},eof:h.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.cls+=e},eof:h.GO(13)},{"=":h.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.attr+=e},eof:h.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.val+=e},eof:h.GO(12)},{'"':h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{"'":h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var e;this.emitNode();this.parent=(e=this.parent)!=null?e.parentNode:void 0;return this.GO(0)}},{enter:function(){return a.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function h(){h.__super__.constructor.call(this,h.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}h.prototype.emitNode=function(){var f,e;e=document.createElement(this.tag);e.id=this.id||null;e.className=this.cls||null;for(f in this.attrs){e.setAttribute(f,this.attrs[f])}this.parent.appendChild(e);return this.parent=e};h.prototype.emitText=function(){this.parent.appendChild(a.HTML.parse(this.text));return this.text=""};return h})(a.StateMachine);return{name:"Synth",$:{synth:function(g){var h;h=new b();h.run(g);if(h.fragment.childNodes.length===1){return a(h.fragment.childNodes[0])}else{return a(h.fragment)}}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(g,a){for(var b in a){if(d.call(a,b)){g[b]=a[b]}}function h(){this.constructor=g}h.prototype=a.prototype;g.prototype=new h();g.__super__=a.prototype;return g};(function(b){var f,a;f={};b.plugin(function(){var h,e;h=null;f={};e={register_engine:function(j,g){f[j]=g;if(!(h!=null)){return h=j}},render:function(g,j){if(h in f){return f[h](g,j)}}};e.__defineSetter__("engine",function(g){if(!g in f){throw new Error("invalid template engine: "+g+" not one of "+(Object.Keys(f)))}else{return h=g}});e.__defineGetter__("engine",function(){return h});return{name:"Template",$:{template:e}}});b.template.register_engine("null",(function(){return function(e,h){return e}})());a=function(s,u,p,q,t){var v,e,r,i;if(t==null){t=-1}v=1;if(t<0){t=s.length+1+t}for(e=i=q;q<=t?i<t:i>t;e=q<=t?++i:--i){r=s[e];if(r===p){v+=1}else{if(r===u){v-=1}}if(v===0){return e}}return -1};b.template.register_engine("pythonic",(function(){var j,e,k,l;l=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;j=/%[\(\/]/;e=function(g){var y,z,i,n,w,h,A,B,x,v;y=g.split(j);A=y.length;x=[y[0]];n=1;for(i=v=1;1<=A?v<A:v>A;i=1<=A?++v:--v){z=a(y[i],")","(",0,-1);if(z===-1){return"Template syntax error: unmatched '%(' starting at: "+(y[i].substring(0,15))}w=y[i].substring(0,z);B=y[i].substring(z);h=l.exec(B);if(h===null){return"Template syntax error: invalid type specifier starting at '"+B+"'"}B=h[4];x[n++]=w;x[n++]=h[1]|0;x[n++]=h[2]|0;x[n++]=h[3];x[n++]=B}return x};e.cache={};k=function(B,F){var E,h,J,L,G,A,C,n,D,I,H,g,K,i;E=e.cache[B];if(!(E!=null)){E=e.cache[B]=e(B)}C=[E[0]];L=1;A=E.length;for(J=g=1,K=A-5;g<=K;J=g+=5){i=E.slice(J,(J+4)+1||9000000000),G=i[0],n=i[1],h=i[2],I=i[3],D=i[4];H=F[G];if(!(H!=null)){H="missing value: "+G}switch(I){case"d":C[L++]=""+parseInt(H,10);break;case"f":C[L++]=parseFloat(H).toFixed(h);break;case"s":C[L++]=""+H;break;default:C[L++]=""+H}if(n>0){C[L]=String.PadLeft(C[L],n)}C[L++]=D}return C.join("")};return k})());return b.template.register_engine("js-eval",(function(){var e;e=(function(i){c(j,i);function j(){return j.__super__.constructor.apply(this,arguments)}j.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return j})(b.StateMachine);return function(i,j){return i}})())})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var e,f,a;a=function(c){var n,m,i,d,l;m=c.indexOf(":");if(m>0){d=parseInt(c.slice(0,m),10);i=c.slice(m+1,m+1+d);l=c[m+1+d];n=c.slice(m+d+2);i=(function(){switch(l){case"#":return Number(i);case"'":return String(i);case"!":return i==="true";case"~":return null;case"]":return e(i);case"}":return f(i)}})();return[i,n]}return void 0};e=function(j){var c,i,d;c=[];while(j.length>0){d=a(j),i=d[0],j=d[1];c.push(i)}return c};f=function(n){var c,m,k,l,d;c={};while(n.length>0){l=a(n),m=l[0],n=l[1];d=a(n),k=d[0],n=d[1];c[m]=k}return c};return{name:"TNET",$:{TNET:{stringify:function(l){var d,k,c,j;j=(function(){switch(Object.Type(l)){case"number":return[String(l),"#"];case"string":return[l,"'"];case"function":return[String(l),"'"];case"boolean":return[String(!!l),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var g,h,i;i=[];for(g=0,h=l.length;g<h;g++){c=l[g];i.push(b.TNET.stringify(c))}return i})()).join(""),"]"];case"object":return[((function(){var g;g=[];for(c in l){g.push(b.TNET.stringify(c)+b.TNET.stringify(l[c]))}return g})()).join(""),"}"]}})(),d=j[0],k=j[1];return(d.length|0)+":"+d+k},parse:function(d){var c;return(c=a(d))!=null?c[0]:void 0}}}}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var k,h,l,i,j,a;h=function(e,c){var d;c=Object.Extend({autoOpen:false,draggable:true},c);d=b(e).addClass("dialog");if(c.draggable){d.draggable()}if(c.autoOpen){d.show().center()}d.find("button.close, .close-button").bind("click touchstart",function(){d.hide();return false});return d};l=function(g,c){var e,p,o,f,d;c=Object.Extend({handleCSS:{}},c);c.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},c.handleCSS);e=b(g);o=false;f=d=0;p=b.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(c.handleCSS.bind("mousedown, touchstart",function(m){o=true;f||(f=m.pageX);d||(d=m.pageY);return false})));b(document.bind("mousemove, touchmove",function(r){var m,n;if(o){m=r.pageX-f;n=r.pageY-d;e.transform({translate:[m,n]},0).trigger("drag",{dragObject:e});return false}})).bind("mouseup, touchend",function(m){var n;if(o){o=false;n=p.position()[0];return b(document.elementFromPoint(n.left,n.top-1).trigger("drop",{dropObject:e}))}});return e.addClass("draggable").css({position:"relative","padding-top":e.css("padding-top").map(Number.AtLeast(parseInt(c.handleCSS.height,10))).px().first()}.append(p))};i=function(c,f){var g,d,e,n;f=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},f);g=b(c).addClass("progress-bar");n=0;if(f.reset){d=g.css("background").first();e=g.css("color").first()}return g.zap("updateProgress",function(m){while(m>1){m/=100}n=m;if(m===1&&f.reset){g.css("background",d).css("color",e)}else{g.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(m*100)+"% 0, color-stop(0, "+f.barColor+"), color-stop(0.98, "+f.barColor+"), color-stop(1.0, "+f.backgroundColor+"))",color:f.textColor})}if(Object.IsFunc(f.change)){return f.change(n)}})};k=function(g,d){var f,e,c;d=Object.Extend({exclusive:false,sticky:false},d);e=b(g).addClass("accordion");c=null;f=function(t){var n,s,v,u;v=b(t).children().first().filter("*");if(v.len()!==2){throw Exception("accordion row requires 2 elements, not "+(v.len()))}u=v.eq(0).addClass("title");n=v.eq(1).addClass("body").hide();s=false;return u.click(function(){if(d.exclusive){e.find(".body").hide()}if(s){if(!d.sticky){n.hide().removeClass("visible");u.removeClass("selected").trigger("deselect");return s=false}else{n.show().addClass("visible");u.addClass("selected").trigger("select");return s=true}}else{n.show().addClass("visible");u.addClass("selected").trigger("select");return s=true}})};e.bind("DOMNodeInserted",function(q){var r,p;r=e.children().first().filter("*");p=b(q.target).parents().first();return f(p.intersect(r))});e.children().first().filter("*").map(f);return e};a=function(o,c){var d,f,e,g,p;f=b(o).css({position:"relative",top:"0px",left:"0px"}.hide().map(b));d=0;f[d].show();f.next=function(){f[d].hide();d=++d%nn;return f[d].show()};f.activate=function(m){f[d].hide();d=m;return f[m].show()};for(e=g=0,p=f.len();0<=p?g<p:g>p;e=0<=p?++g:--g){f[e].zap("_viewIndex",e.zap("activate",function(){return f.activate(this._viewIndex)}))}return f};j=function(n,g){var d,e,f,c;f=b(n);g=b(g).viewStack();e=f.len();for(d=c=0;0<=e?c<=e:c>=e;d=0<=e?++c:--c){f._tabIndex=d}b(f[0]).addClass("active");return f.click(function(){f.removeClass("active");g.activate(this._tabIndex);return b(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:l,ProgressBar:i,ViewStack:a,Tabs:j,Accordion:k}},dialog:function(c){return h(this,c)},progressBar:function(c){return i(this,c)},viewStack:function(c){return a(this,c)},tabs:function(c){return j(this,c)},accordion:function(c){return k(this,c)},draggable:function(c){return l(this,c)}}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var v,o,p,q,r,f,s,b,c,e,i,t,j,g,u,h,l,n,d,m,k;u=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;g="<span class='opr'>$&</span>";i=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;e="<span class='kwd'>$&</span>";v=/\d+\.*\d*/g;j="<span class='num'>$&</span>";p=/\$(\(|\.)/g;o="<span class='bln'>$$</span>$1";k=/\t/g;m="&nbsp;&nbsp;";l=/\/\/.*?(?:\n|$)/;t=/\/\*(?:.|\n)*?\*\//;r=function(w){if(w){return"<span class='com'>"+w+"</span>"}else{return""}};h=function(w){if(w){return"<span class='str'>"+w+"</span>"}else{return""}};s=function(x,w){var z,y;z=x.indexOf('"',w);y=x.indexOf("'",w);if(z===-1){z=x.length}if(y===-1){y=x.length}if(z===y){return[null,-1]}if(z<y){return['"',z]}return["'",y]};q=function(z,y,x){var w;w=z.indexOf(x,y);while(z.charAt(w-1)==="\\"&&(0<w&&w<z.length)){w=z.indexOf(x,w+1)}return w};d=function(B){var y,w,A,z,x,C;y=0;z=B.length;C=[];if(!Object.IsString(B)){if(!Object.IsFunction(B.toString)){throw TypeError("invalid string argument to split_quoted")}else{B=B.toString();z=B.length}}while(y<z){x=s(B,y);w=x[1];if(w===-1){C.push(B.substring(y));break}C.push(B.substring(y,w));A=q(B,w+1,x[0]);if(A===-1){throw Error("unclosed quote: "+x[0]+" starting at "+w)}C.push(B.substring(w,A+1));y=A+1}return C};f=function(w){var y,x;y=w.match(l);x=w.match(t);if(y===x){return[-1,null]}if(y===null&&x!==null){return[x.index,x[0]]}if(y!==null&&x===null){return[y.index,y[0]]}if(x.index<y.index){return[x.index,x[0]]}return[y.index,y[0]]};n=function(B){var y,C,z,w,A,x;A=[];y=0;z=B.length;while(y<z){x=B.substring(y);w=f(x);C=w[0];if(C>-1){A.push(x.substring(0,C));A.push(w[1]);y+=C+w[1].length}else{A.push(x);break}}return A};b=function(x,w){return x.replace(u,g).replace(v,j).replace(i,e).replace(p,o).replace(k,m)+h(w)};c=function(w,x){return a(d(w)).fold(b).join("")+r(x)};return{name:"PrettyPrint",$:{prettyPrint:function(z,A){var y,x,w;if(Object.IsFunction(z)){z=z.toString()}if(!Object.IsString(z)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(z)+"'")}if(a("style#prettyPrint").length===0){x="code.pp .bln { font-size: 17px; } ";A=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},A);for(y in A){x+="code.pp ."+y+" { color: "+A[y]+"; } "}a.synth("style#prettyPrint").text(x).appendTo("head")}return w="<code class='pp'>"+(a(n(z)).fold(c).join(""))+"</code>"}}}})})(Bling)}).call(this);(function(){var a={}.hasOwnProperty,b=function(d,f){for(var e in f){if(a.call(f,e)){d[e]=f[e]}}function c(){this.constructor=d}c.prototype=f.prototype;d.prototype=new c();d.__super__=f.prototype;return d};(function(c){c.plugin(function(){var d;d=(function(){function e(f){this.reset();this.table=f;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(g){var h;this._lastMode=this._mode;this._mode=g;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){h=this.modeline.enter.call(this);while(Object.IsFunction(h)){h=h.call(this)}}return g},get:function(){return this._mode}})}e.prototype.reset=function(){this._mode=null;return this._lastMode=null};e.prototype.GO=function(f){return function(){return this.mode=f}};e.GO=function(f){return function(){return this.mode=f}};e.prototype.run=function(h){var j,i,f,l,g,k;this.mode=0;for(l=0,g=h.length;l<g;l++){j=h[l];f=this.modeline;if(!(f!=null)){i=null}else{if(j in f){i=f[j]}else{if("def" in f){i=f.def}}}while(Object.IsFunction(i)){i=i.call(this,j)}}if(Object.IsFunction((k=this.modeline)!=null?k.eof:void 0)){i=this.modeline.eof.call(this)}while(Object.IsFunction(i)){i=i.call(this)}this.reset();return this};return e})();return{name:"StateMachine",$:{StateMachine:d}}});return c.plugin(function(){var d;d=(function(f){b(e,f);e.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':e.GO(6),"'":e.GO(7),"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.tag+=g},eof:e.GO(13)},{".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.id+=g},eof:e.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.cls+=g},eof:e.GO(13)},{"=":e.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(g){return this.attr+=g},eof:e.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(g){return this.val+=g},eof:e.GO(12)},{'"':e.GO(8),def:function(g){return this.text+=g},eof:e.GO(12)},{"'":e.GO(8),def:function(g){return this.text+=g},eof:e.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var g;this.emitNode();this.parent=(g=this.parent)!=null?g.parentNode:void 0;return this.GO(0)}},{enter:function(){return c.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function e(){e.__super__.constructor.call(this,e.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}e.prototype.emitNode=function(){var g,h;h=document.createElement(this.tag);h.id=this.id||null;h.className=this.cls||null;for(g in this.attrs){h.setAttribute(g,this.attrs[g])}this.parent.appendChild(h);return this.parent=h};e.prototype.emitText=function(){this.parent.appendChild(c.HTML.parse(this.text));return this.text=""};return e})(c.StateMachine);return{name:"Synth",$:{synth:function(f){var e;e=new d();e.run(f);if(e.fragment.childNodes.length===1){return c(e.fragment.childNodes[0])}else{return c(e.fragment)}}}}})})(Bling)}).call(this);(function(){var a={}.hasOwnProperty,b=function(d,f){for(var e in f){if(a.call(f,e)){d[e]=f[e]}}function c(){this.constructor=d}c.prototype=f.prototype;d.prototype=new c();d.__super__=f.prototype;return d};(function(d){var c,e;c={};d.plugin(function(){var f,g;f=null;c={};g={register_engine:function(h,i){c[h]=i;if(!(f!=null)){return f=h}},render:function(i,h){if(f in c){return c[f](i,h)}}};g.__defineSetter__("engine",function(h){if(!h in c){throw new Error("invalid template engine: "+h+" not one of "+(Object.Keys(c)))}else{return f=h}});g.__defineGetter__("engine",function(){return f});return{name:"Template",$:{template:g}}});d.template.register_engine("null",(function(){return function(g,f){return g}})());e=function(j,g,m,l,h){var f,o,k,n;if(h==null){h=-1}f=1;if(h<0){h=j.length+1+h}for(o=n=l;l<=h?n<h:n>h;o=l<=h?++n:--n){k=j[o];if(k===m){f+=1}else{if(k===g){f-=1}}if(f===0){return o}}return -1};d.template.register_engine("pythonic",(function(){var h,i,g,f;f=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;h=/%[\(\/]/;i=function(r){var j,u,p,o,l,q,t,s,k,m;j=r.split(h);t=j.length;k=[j[0]];o=1;for(p=m=1;1<=t?m<t:m>t;p=1<=t?++m:--m){u=e(j[p],")","(",0,-1);if(u===-1){return"Template syntax error: unmatched '%(' starting at: "+(j[p].substring(0,15))}l=j[p].substring(0,u);s=j[p].substring(u);q=f.exec(s);if(q===null){return"Template syntax error: invalid type specifier starting at '"+s+"'"}s=q[4];k[o++]=l;k[o++]=q[1]|0;k[o++]=q[2]|0;k[o++]=q[3];k[o++]=s}return k};i.cache={};g=function(l,y){var z,q,u,s,x,m,k,o,j,v,w,r,t,p;z=i.cache[l];if(!(z!=null)){z=i.cache[l]=i(l)}k=[z[0]];s=1;m=z.length;for(u=r=1,t=m-5;r<=t;u=r+=5){p=z.slice(u,(u+4)+1||9000000000),x=p[0],o=p[1],q=p[2],v=p[3],j=p[4];w=y[x];if(!(w!=null)){w="missing value: "+x}switch(v){case"d":k[s++]=""+parseInt(w,10);break;case"f":k[s++]=parseFloat(w).toFixed(q);break;case"s":k[s++]=""+w;break;default:k[s++]=""+w}if(o>0){k[s]=String.PadLeft(k[s],o)}k[s++]=j}return k.join("")};return g})());return d.template.register_engine("js-eval",(function(){var f;f=(function(h){b(g,h);function g(){return g.__super__.constructor.apply(this,arguments)}g.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return g})(d.StateMachine);return function(h,g){return h}})())})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var d,c,b;b=function(k){var e,f,h,j,g;f=k.indexOf(":");if(f>0){j=parseInt(k.slice(0,f),10);h=k.slice(f+1,f+1+j);g=k[f+1+j];e=k.slice(f+j+2);h=(function(){switch(g){case"#":return Number(h);case"'":return String(h);case"!":return h==="true";case"~":return null;case"]":return d(h);case"}":return c(h)}})();return[h,e]}return void 0};d=function(e){var h,f,g;h=[];while(e.length>0){g=b(e),f=g[0],e=g[1];h.push(f)}return h};c=function(e){var j,f,h,g,i;j={};while(e.length>0){g=b(e),f=g[0],e=g[1];i=b(e),h=i[0],e=i[1];j[f]=h}return j};return{name:"TNET",$:{TNET:{stringify:function(e){var h,f,i,g;g=(function(){switch(Object.Type(e)){case"number":return[String(e),"#"];case"string":return[e,"'"];case"function":return[String(e),"'"];case"boolean":return[String(!!e),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var l,k,j;j=[];for(l=0,k=e.length;l<k;l++){i=e[l];j.push(a.TNET.stringify(i))}return j})()).join(""),"]"];case"object":return[((function(){var j;j=[];for(i in e){j.push(a.TNET.stringify(i)+a.TNET.stringify(e[i]))}return j})()).join(""),"}"]}})(),h=g[0],f=g[1];return(h.length|0)+":"+h+f},parse:function(e){var f;return(f=b(e))!=null?f[0]:void 0}}}}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var d,g,c,f,e,b;g=function(h,j){var i;j=Object.Extend({autoOpen:false,draggable:true},j);i=a(h).addClass("dialog");if(j.draggable){i.draggable()}if(j.autoOpen){i.show().center()}i.find("button.close, .close-button").bind("click touchstart",function(){i.hide();return false});return i};c=function(i,m){var k,n,h,j,l;m=Object.Extend({handleCSS:{}},m);m.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},m.handleCSS);k=a(i);h=false;j=l=0;n=a.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(m.handleCSS.bind("mousedown, touchstart",function(o){h=true;j||(j=o.pageX);l||(l=o.pageY);return false})));a(document.bind("mousemove, touchmove",function(o){var q,p;if(h){q=o.pageX-j;p=o.pageY-l;k.transform({translate:[q,p]},0).trigger("drag",{dragObject:k});return false}})).bind("mouseup, touchend",function(p){var o;if(h){h=false;o=n.position()[0];return a(document.elementFromPoint(o.left,o.top-1).trigger("drop",{dropObject:k}))}});return k.addClass("draggable").css({position:"relative","padding-top":k.css("padding-top").map(Number.AtLeast(parseInt(m.handleCSS.height,10))).px().first()}.append(n))};f=function(m,j){var i,l,k,h;j=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},j);i=a(m).addClass("progress-bar");h=0;if(j.reset){l=i.css("background").first();k=i.css("color").first()}return i.zap("updateProgress",function(n){while(n>1){n/=100}h=n;if(n===1&&j.reset){i.css("background",l).css("color",k)}else{i.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(n*100)+"% 0, color-stop(0, "+j.barColor+"), color-stop(0.98, "+j.barColor+"), color-stop(1.0, "+j.backgroundColor+"))",color:j.textColor})}if(Object.IsFunc(j.change)){return j.change(h)}})};d=function(h,k){var i,j,l;k=Object.Extend({exclusive:false,sticky:false},k);j=a(h).addClass("accordion");l=null;i=function(q){var m,r,o,p;o=a(q).children().first().filter("*");if(o.len()!==2){throw Exception("accordion row requires 2 elements, not "+(o.len()))}p=o.eq(0).addClass("title");m=o.eq(1).addClass("body").hide();r=false;return p.click(function(){if(k.exclusive){j.find(".body").hide()}if(r){if(!k.sticky){m.hide().removeClass("visible");p.removeClass("selected").trigger("deselect");return r=false}else{m.show().addClass("visible");p.addClass("selected").trigger("select");return r=true}}else{m.show().addClass("visible");p.addClass("selected").trigger("select");return r=true}})};j.bind("DOMNodeInserted",function(o){var n,m;n=j.children().first().filter("*");m=a(o.target).parents().first();return i(m.intersect(n))});j.children().first().filter("*").map(i);return j};b=function(h,m){var l,j,k,i,n;j=a(h).css({position:"relative",top:"0px",left:"0px"}.hide().map(a));l=0;j[l].show();j.next=function(){j[l].hide();l=++l%nn;return j[l].show()};j.activate=function(o){j[l].hide();l=o;return j[o].show()};for(k=i=0,n=j.len();0<=n?i<n:i>n;k=0<=n?++i:--i){j[k].zap("_viewIndex",k.zap("activate",function(){return j.activate(this._viewIndex)}))}return j};e=function(h,i){var l,k,j,m;j=a(h);i=a(i).viewStack();k=j.len();for(l=m=0;0<=k?m<=k:m>=k;l=0<=k?++m:--m){j._tabIndex=l}a(j[0]).addClass("active");return j.click(function(){j.removeClass("active");i.activate(this._tabIndex);return a(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:c,ProgressBar:f,ViewStack:b,Tabs:e,Accordion:d}},dialog:function(h){return g(this,h)},progressBar:function(h){return f(this,h)},viewStack:function(h){return b(this,h)},tabs:function(h){return e(this,h)},accordion:function(h){return d(this,h)},draggable:function(h){return c(this,h)}}})})(Bling)}).call(this);(function(){var a=[].slice;$.plugin(function(){var i,j,g,q,d,e,p,o,n,k,m,f,c,b,h,l;f=["px","pt","pc","em","%","in","cm","mm","ex",""];i=/(\d+\.*\d*)(px|pt|pc|em|%|in|cm|mm|ex)/;o=function(r){return i.exec(r)[2](i.test(r)?void 0:"")};q=function(s,r){return q[s][r]()};n=function(r){return function(){return r}};for(c=0,h=f.length;c<h;c++){j=f[c];for(b=0,l=f.length;b<l;b++){g=f[b];(q[j]||(q[j]={}))[g]=n(+(j===g||j===""||g===""))}}q["in"].pt=function(){return 72};q["in"].px=function(){return 96};q["in"].cm=function(){return 2.54};q.pc.pt=function(){return 12};q.cm.mm=function(){return 10};q.em.px=function(){var r,s;s=$("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body");r=s.width().first();s.remove();return r};q.ex.px=function(){var r,s;s=$("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body");r=s.width().first();s.remove();return r};q.ex.em=function(){return 2};p=function(){var t,s,u,r;r=[];for(s=0,u=f.length;s<u;s++){j=f[s];r.push((function(){var w,x,v;v=[];for(w=0,x=f.length;w<x;w++){g=f[w];if(!q(j,g)&&q(g,j)){console.log("found inverse: "+j+"."+g);q[j][g]=n(1/q(g,j))}v.push((function(){var A,z,y;y=[];for(z=0,A=f.length;z<A;z++){t=f[z];if(!q(j,t)&&q(j,g)&&q(g,t)){console.log("found induction: "+j+"."+t);y.push(q[j][t]=n(q(j,g)*q(g,t)))}else{y.push(void 0)}}return y})())}return v})())}return r};p();p();e=function(r,s){return parseFloat(r)*q[o(r)][s]()+s};$.assert(e("300px","cm")==="10cm");d=function(v,r){var s,t,u,w;w=[];for(s=t=0,u=r.length;0<=u?t<u:t>u;s=0<=u?++t:--t){w.push(r[s]=convertTo(v,r[s]))}return w};Object.Type.register("units",{match:function(r){return i.test(r)}});k=function(r){return function(){var s,t;s=1<=arguments.length?a.call(arguments,0):[];d(t=o(this[0]),this);return(r.apply(this,s))+t}};m=function(r){return function(){var s,t;s=1<=arguments.length?a.call(arguments,0):[];t=this.map(o);return r.apply(this.floats(),s).map(function(){})}};return{min:k(function(){return this.reduce(function(r){return Math.min(parseFloat(this),r)})}),max:k(function(){return this.reduce(function(r){return Math.max(parseFloat(this),r)})}),sum:k(function(){return this.reduce(function(r){return parseFloat(this)+r})}),mean:k(function(){return parseFloat(this.sum())/this.length}),magnitude:k(function(){return Math.sqrt(this.floats().squares().sum())}),squares:function(){return this.map(function(){var r;return(r=parseFloat(this))*r})},scale:function(r){return this.map(function(){return r*parseFloat(this)})},add:function(r){return this.map(function(){return r+this})},normalize:function(){return this.scale(1/this.magnitude())}}})}).call(this);(function(){$.plugin(function(){var a,d,c,f,e,b;d=function(){return"EOF"};a=function(g){g=extend({item:function(){return d},action:Function.Identity,latency:10},g);return extend(new $.EventEmitter(),{run:function(){var i,h=this;i=function(){var j;if((j=g.action(g.item()))!==d){h.emit("data",j);return setTimeout(i,g.latency)}};return setTimeout(i,g.latency)}})};for(e=b=0;b<1000;e=++b){c=e}f=0;return a({item:function(){return c[f++](f<c.length?void 0:d)},action:function(g){return(g*g)-1},latency:10}).on("data",function(g){return console.log("data:",g.on("error",function(h){return console.log("error:",h.run())}))})})}).call(this);(function(){(function(a){return a.plugin(function(){var d,e,c,b;e={};c=function(f,g){return e[f]=g};d=function(f){return e[obj.t]};b=[];Object.Type.extend(null,{compact:function(f){return Object.String(f)}});Object.Type.extend("undefined",{compact:function(f){return""}});Object.Type.extend("null",{compact:function(f){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(g){var f;return((function(){var j,i,h;h=[];for(j=0,i=g.length;j<i;j++){f=g[j];h.push(Object.Compact(f))}return h})()).join("")}});Object.Type.extend("bling",{compact:function(f){return f.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(g){var f;return Object.Compact((f=d(g))!=null?f.call(g,g):void 0)}});Object.Compact=function(g){var f;b.push(g);if((f=Object.Type.lookup(g))!=null){f.compact(g)}return b.pop()};Object.Extend(Object.Compact,{register:c,lookup:d});c("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});c("text",function(){return this.EN});c("link",function(){var g,h,j,f,i;g=a(["<a"]);i=["href","name","target"];for(j=0,f=i.length;j<f;j++){h=i[j];if(h in this){g.extend(" ",h,"='",this[h],"'")}}return g.extend(">",node.content,"</a>")});a.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var v,o,p,q,r,f,s,b,c,e,i,t,j,g,u,h,l,n,d,m,k;u=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;g="<span class='opr'>$&</span>";i=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;e="<span class='kwd'>$&</span>";v=/\d+\.*\d*/g;j="<span class='num'>$&</span>";p=/\$(\(|\.)/g;o="<span class='bln'>$$</span>$1";k=/\t/g;m="&nbsp;&nbsp;";l=/\/\/.*?(?:\n|$)/;t=/\/\*(?:.|\n)*?\*\//;r=function(w){if(w){return"<span class='com'>"+w+"</span>"}else{return""}};h=function(w){if(w){return"<span class='str'>"+w+"</span>"}else{return""}};s=function(x,w){var z,y;z=x.indexOf('"',w);y=x.indexOf("'",w);if(z===-1){z=x.length}if(y===-1){y=x.length}if(z===y){return[null,-1]}if(z<y){return['"',z]}return["'",y]};q=function(z,y,x){var w;w=z.indexOf(x,y);while(z.charAt(w-1)==="\\"&&(0<w&&w<z.length)){w=z.indexOf(x,w+1)}return w};d=function(B){var y,w,A,z,x,C;y=0;z=B.length;C=[];if(!Object.IsString(B)){if(!Object.IsFunction(B.toString)){throw TypeError("invalid string argument to split_quoted")}else{B=B.toString();z=B.length}}while(y<z){x=s(B,y);w=x[1];if(w===-1){C.push(B.substring(y));break}C.push(B.substring(y,w));A=q(B,w+1,x[0]);if(A===-1){throw Error("unclosed quote: "+x[0]+" starting at "+w)}C.push(B.substring(w,A+1));y=A+1}return C};f=function(w){var y,x;y=w.match(l);x=w.match(t);if(y===x){return[-1,null]}if(y===null&&x!==null){return[x.index,x[0]]}if(y!==null&&x===null){return[y.index,y[0]]}if(x.index<y.index){return[x.index,x[0]]}return[y.index,y[0]]};n=function(B){var y,C,z,w,A,x;A=[];y=0;z=B.length;while(y<z){x=B.substring(y);w=f(x);C=w[0];if(C>-1){A.push(x.substring(0,C));A.push(w[1]);y+=C+w[1].length}else{A.push(x);break}}return A};b=function(x,w){return x.replace(u,g).replace(v,j).replace(i,e).replace(p,o).replace(k,m)+h(w)};c=function(w,x){return a(d(w)).fold(b).join("")+r(x)};return{name:"PrettyPrint",$:{prettyPrint:function(z,A){var y,x,w;if(Object.IsFunction(z)){z=z.toString()}if(!Object.IsString(z)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(z)+"'")}if(a("style#prettyPrint").length===0){x="code.pp .bln { font-size: 17px; } ";A=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},A);for(y in A){x+="code.pp ."+y+" { color: "+A[y]+"; } "}a.synth("style#prettyPrint").text(x).appendTo("head")}return w="<code class='pp'>"+(a(n(z)).fold(c).join(""))+"</code>"}}}})})(Bling)}).call(this);(function(){var a={}.hasOwnProperty,b=function(d,f){for(var e in f){if(a.call(f,e)){d[e]=f[e]}}function c(){this.constructor=d}c.prototype=f.prototype;d.prototype=new c();d.__super__=f.prototype;return d};(function(c){c.plugin(function(){var d;d=(function(){function e(f){this.reset();this.table=f;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(g){var h;this._lastMode=this._mode;this._mode=g;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){h=this.modeline.enter.call(this);while(Object.IsFunction(h)){h=h.call(this)}}return g},get:function(){return this._mode}})}e.prototype.reset=function(){this._mode=null;return this._lastMode=null};e.prototype.GO=function(f){return function(){return this.mode=f}};e.GO=function(f){return function(){return this.mode=f}};e.prototype.run=function(h){var j,i,f,l,g,k;this.mode=0;for(l=0,g=h.length;l<g;l++){j=h[l];f=this.modeline;if(!(f!=null)){i=null}else{if(j in f){i=f[j]}else{if("def" in f){i=f.def}}}while(Object.IsFunction(i)){i=i.call(this,j)}}if(Object.IsFunction((k=this.modeline)!=null?k.eof:void 0)){i=this.modeline.eof.call(this)}while(Object.IsFunction(i)){i=i.call(this)}this.reset();return this};return e})();return{name:"StateMachine",$:{StateMachine:d}}});return c.plugin(function(){var d;d=(function(f){b(e,f);e.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':e.GO(6),"'":e.GO(7),"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.tag+=g},eof:e.GO(13)},{".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.id+=g},eof:e.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.cls+=g},eof:e.GO(13)},{"=":e.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(g){return this.attr+=g},eof:e.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(g){return this.val+=g},eof:e.GO(12)},{'"':e.GO(8),def:function(g){return this.text+=g},eof:e.GO(12)},{"'":e.GO(8),def:function(g){return this.text+=g},eof:e.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var g;this.emitNode();this.parent=(g=this.parent)!=null?g.parentNode:void 0;return this.GO(0)}},{enter:function(){return c.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function e(){e.__super__.constructor.call(this,e.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}e.prototype.emitNode=function(){var g,h;h=document.createElement(this.tag);h.id=this.id||null;h.className=this.cls||null;for(g in this.attrs){h.setAttribute(g,this.attrs[g])}this.parent.appendChild(h);return this.parent=h};e.prototype.emitText=function(){this.parent.appendChild(c.HTML.parse(this.text));return this.text=""};return e})(c.StateMachine);return{name:"Synth",$:{synth:function(f){var e;e=new d();e.run(f);if(e.fragment.childNodes.length===1){return c(e.fragment.childNodes[0])}else{return c(e.fragment)}}}}})})(Bling)}).call(this);(function(){var a={}.hasOwnProperty,b=function(d,f){for(var e in f){if(a.call(f,e)){d[e]=f[e]}}function c(){this.constructor=d}c.prototype=f.prototype;d.prototype=new c();d.__super__=f.prototype;return d};(function(d){var c,e;c={};d.plugin(function(){var f,g;f=null;c={};g={register_engine:function(h,i){c[h]=i;if(!(f!=null)){return f=h}},render:function(i,h){if(f in c){return c[f](i,h)}}};g.__defineSetter__("engine",function(h){if(!h in c){throw new Error("invalid template engine: "+h+" not one of "+(Object.Keys(c)))}else{return f=h}});g.__defineGetter__("engine",function(){return f});return{name:"Template",$:{template:g}}});d.template.register_engine("null",(function(){return function(g,f){return g}})());e=function(j,g,m,l,h){var f,o,k,n;if(h==null){h=-1}f=1;if(h<0){h=j.length+1+h}for(o=n=l;l<=h?n<h:n>h;o=l<=h?++n:--n){k=j[o];if(k===m){f+=1}else{if(k===g){f-=1}}if(f===0){return o}}return -1};d.template.register_engine("pythonic",(function(){var h,i,g,f;f=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;h=/%[\(\/]/;i=function(r){var j,u,p,o,l,q,t,s,k,m;j=r.split(h);t=j.length;k=[j[0]];o=1;for(p=m=1;1<=t?m<t:m>t;p=1<=t?++m:--m){u=e(j[p],")","(",0,-1);if(u===-1){return"Template syntax error: unmatched '%(' starting at: "+(j[p].substring(0,15))}l=j[p].substring(0,u);s=j[p].substring(u);q=f.exec(s);if(q===null){return"Template syntax error: invalid type specifier starting at '"+s+"'"}s=q[4];k[o++]=l;k[o++]=q[1]|0;k[o++]=q[2]|0;k[o++]=q[3];k[o++]=s}return k};i.cache={};g=function(l,y){var z,q,u,s,x,m,k,o,j,v,w,r,t,p;z=i.cache[l];if(!(z!=null)){z=i.cache[l]=i(l)}k=[z[0]];s=1;m=z.length;for(u=r=1,t=m-5;r<=t;u=r+=5){p=z.slice(u,(u+4)+1||9000000000),x=p[0],o=p[1],q=p[2],v=p[3],j=p[4];w=y[x];if(!(w!=null)){w="missing value: "+x}switch(v){case"d":k[s++]=""+parseInt(w,10);break;case"f":k[s++]=parseFloat(w).toFixed(q);break;case"s":k[s++]=""+w;break;default:k[s++]=""+w}if(o>0){k[s]=String.PadLeft(k[s],o)}k[s++]=j}return k.join("")};return g})());return d.template.register_engine("js-eval",(function(){var f;f=(function(h){b(g,h);function g(){return g.__super__.constructor.apply(this,arguments)}g.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return g})(d.StateMachine);return function(h,g){return h}})())})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var d,c,b;b=function(k){var e,f,h,j,g;f=k.indexOf(":");if(f>0){j=parseInt(k.slice(0,f),10);h=k.slice(f+1,f+1+j);g=k[f+1+j];e=k.slice(f+j+2);h=(function(){switch(g){case"#":return Number(h);case"'":return String(h);case"!":return h==="true";case"~":return null;case"]":return d(h);case"}":return c(h)}})();return[h,e]}return void 0};d=function(e){var h,f,g;h=[];while(e.length>0){g=b(e),f=g[0],e=g[1];h.push(f)}return h};c=function(e){var j,f,h,g,i;j={};while(e.length>0){g=b(e),f=g[0],e=g[1];i=b(e),h=i[0],e=i[1];j[f]=h}return j};return{name:"TNET",$:{TNET:{stringify:function(e){var h,f,i,g;g=(function(){switch(Object.Type(e)){case"number":return[String(e),"#"];case"string":return[e,"'"];case"function":return[String(e),"'"];case"boolean":return[String(!!e),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var l,k,j;j=[];for(l=0,k=e.length;l<k;l++){i=e[l];j.push(a.TNET.stringify(i))}return j})()).join(""),"]"];case"object":return[((function(){var j;j=[];for(i in e){j.push(a.TNET.stringify(i)+a.TNET.stringify(e[i]))}return j})()).join(""),"}"]}})(),h=g[0],f=g[1];return(h.length|0)+":"+h+f},parse:function(e){var f;return(f=b(e))!=null?f[0]:void 0}}}}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var d,g,c,f,e,b;g=function(h,j){var i;j=Object.Extend({autoOpen:false,draggable:true},j);i=a(h).addClass("dialog");if(j.draggable){i.draggable()}if(j.autoOpen){i.show().center()}i.find("button.close, .close-button").bind("click touchstart",function(){i.hide();return false});return i};c=function(i,m){var k,n,h,j,l;m=Object.Extend({handleCSS:{}},m);m.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},m.handleCSS);k=a(i);h=false;j=l=0;n=a.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(m.handleCSS.bind("mousedown, touchstart",function(o){h=true;j||(j=o.pageX);l||(l=o.pageY);return false})));a(document.bind("mousemove, touchmove",function(o){var q,p;if(h){q=o.pageX-j;p=o.pageY-l;k.transform({translate:[q,p]},0).trigger("drag",{dragObject:k});return false}})).bind("mouseup, touchend",function(p){var o;if(h){h=false;o=n.position()[0];return a(document.elementFromPoint(o.left,o.top-1).trigger("drop",{dropObject:k}))}});return k.addClass("draggable").css({position:"relative","padding-top":k.css("padding-top").map(Number.AtLeast(parseInt(m.handleCSS.height,10))).px().first()}.append(n))};f=function(m,j){var i,l,k,h;j=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},j);i=a(m).addClass("progress-bar");h=0;if(j.reset){l=i.css("background").first();k=i.css("color").first()}return i.zap("updateProgress",function(n){while(n>1){n/=100}h=n;if(n===1&&j.reset){i.css("background",l).css("color",k)}else{i.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(n*100)+"% 0, color-stop(0, "+j.barColor+"), color-stop(0.98, "+j.barColor+"), color-stop(1.0, "+j.backgroundColor+"))",color:j.textColor})}if(Object.IsFunc(j.change)){return j.change(h)}})};d=function(h,k){var i,j,l;k=Object.Extend({exclusive:false,sticky:false},k);j=a(h).addClass("accordion");l=null;i=function(q){var m,r,o,p;o=a(q).children().first().filter("*");if(o.len()!==2){throw Exception("accordion row requires 2 elements, not "+(o.len()))}p=o.eq(0).addClass("title");m=o.eq(1).addClass("body").hide();r=false;return p.click(function(){if(k.exclusive){j.find(".body").hide()}if(r){if(!k.sticky){m.hide().removeClass("visible");p.removeClass("selected").trigger("deselect");return r=false}else{m.show().addClass("visible");p.addClass("selected").trigger("select");return r=true}}else{m.show().addClass("visible");p.addClass("selected").trigger("select");return r=true}})};j.bind("DOMNodeInserted",function(o){var n,m;n=j.children().first().filter("*");m=a(o.target).parents().first();return i(m.intersect(n))});j.children().first().filter("*").map(i);return j};b=function(h,m){var l,j,k,i,n;j=a(h).css({position:"relative",top:"0px",left:"0px"}.hide().map(a));l=0;j[l].show();j.next=function(){j[l].hide();l=++l%nn;return j[l].show()};j.activate=function(o){j[l].hide();l=o;return j[o].show()};for(k=i=0,n=j.len();0<=n?i<n:i>n;k=0<=n?++i:--i){j[k].zap("_viewIndex",k.zap("activate",function(){return j.activate(this._viewIndex)}))}return j};e=function(h,i){var l,k,j,m;j=a(h);i=a(i).viewStack();k=j.len();for(l=m=0;0<=k?m<=k:m>=k;l=0<=k?++m:--m){j._tabIndex=l}a(j[0]).addClass("active");return j.click(function(){j.removeClass("active");i.activate(this._tabIndex);return a(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:c,ProgressBar:f,ViewStack:b,Tabs:e,Accordion:d}},dialog:function(h){return g(this,h)},progressBar:function(h){return f(this,h)},viewStack:function(h){return b(this,h)},tabs:function(h){return e(this,h)},accordion:function(h){return d(this,h)},draggable:function(h){return c(this,h)}}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var a,G,F,E,D,L,C,P,O,M,J,B,y,K,A,z,I,w,N,H,x;A=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;K="<span class='opr'>$&</span>";J=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;M="<span class='kwd'>$&</span>";a=/\d+\.*\d*/g;y="<span class='num'>$&</span>";F=/\$(\(|\.)/g;G="<span class='bln'>$$</span>$1";x=/\t/g;H="&nbsp;&nbsp;";I=/\/\/.*?(?:\n|$)/;B=/\/\*(?:.|\n)*?\*\//;D=function(c){if(c){return"<span class='com'>"+c+"</span>"}else{return""}};z=function(c){if(c){return"<span class='str'>"+c+"</span>"}else{return""}};C=function(e,f){var c,d;c=e.indexOf('"',f);d=e.indexOf("'",f);if(c===-1){c=e.length}if(d===-1){d=e.length}if(c===d){return[null,-1]}if(c<d){return['"',c]}return["'",d]};E=function(c,d,e){var f;f=c.indexOf(e,d);while(c.charAt(f-1)==="\\"&&(0<f&&f<c.length)){f=c.indexOf(e,f+1)}return f};N=function(d){var g,i,e,f,h,c;g=0;f=d.length;c=[];if(!Object.IsString(d)){if(!Object.IsFunction(d.toString)){throw TypeError("invalid string argument to split_quoted")}else{d=d.toString();f=d.length}}while(g<f){h=C(d,g);i=h[1];if(i===-1){c.push(d.substring(g));break}c.push(d.substring(g,i));e=E(d,i+1,h[0]);if(e===-1){throw Error("unclosed quote: "+h[0]+" starting at "+i)}c.push(d.substring(i,e+1));g=e+1}return c};L=function(e){var c,d;c=e.match(I);d=e.match(B);if(c===d){return[-1,null]}if(c===null&&d!==null){return[d.index,d[0]]}if(c!==null&&d===null){return[c.index,c[0]]}if(d.index<c.index){return[d.index,d[0]]}return[c.index,c[0]]};w=function(d){var g,c,f,i,e,h;e=[];g=0;f=d.length;while(g<f){h=d.substring(g);i=L(h);c=i[0];if(c>-1){e.push(h.substring(0,c));e.push(i[1]);g+=c+i[1].length}else{e.push(h);break}}return e};P=function(c,d){return c.replace(A,K).replace(a,y).replace(J,M).replace(F,G).replace(x,H)+z(d)};O=function(d,c){return b(N(d)).fold(P).join("")+D(c)};return{name:"PrettyPrint",$:{prettyPrint:function(d,c){var e,f,g;if(Object.IsFunction(d)){d=d.toString()}if(!Object.IsString(d)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(d)+"'")}if(b("style#prettyPrint").length===0){f="code.pp .bln { font-size: 17px; } ";c=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},c);for(e in c){f+="code.pp ."+e+" { color: "+c[e]+"; } "}b.synth("style#prettyPrint").text(f).appendTo("head")}return g="<code class='pp'>"+(b(w(d)).fold(O).join(""))+"</code>"}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b();a.__super__=g.prototype;return a};(function(a){a.plugin(function(){var b;b=(function(){function f(e){this.reset();this.table=e;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(j){var i;this._lastMode=this._mode;this._mode=j;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){i=this.modeline.enter.call(this);while(Object.IsFunction(i)){i=i.call(this)}}return j},get:function(){return this._mode}})}f.prototype.reset=function(){this._mode=null;return this._lastMode=null};f.prototype.GO=function(e){return function(){return this.mode=e}};f.GO=function(e){return function(){return this.mode=e}};f.prototype.run=function(q){var e,p,m,n,r,o;this.mode=0;for(n=0,r=q.length;n<r;n++){e=q[n];m=this.modeline;if(!(m!=null)){p=null}else{if(e in m){p=m[e]}else{if("def" in m){p=m.def}}}while(Object.IsFunction(p)){p=p.call(this,e)}}if(Object.IsFunction((o=this.modeline)!=null?o.eof:void 0)){p=this.modeline.eof.call(this)}while(Object.IsFunction(p)){p=p.call(this)}this.reset();return this};return f})();return{name:"StateMachine",$:{StateMachine:b}}});return a.plugin(function(){var b;b=(function(g){c(h,g);h.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':h.GO(6),"'":h.GO(7),"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.tag+=e},eof:h.GO(13)},{".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.id+=e},eof:h.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.cls+=e},eof:h.GO(13)},{"=":h.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.attr+=e},eof:h.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.val+=e},eof:h.GO(12)},{'"':h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{"'":h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var e;this.emitNode();this.parent=(e=this.parent)!=null?e.parentNode:void 0;return this.GO(0)}},{enter:function(){return a.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function h(){h.__super__.constructor.call(this,h.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}h.prototype.emitNode=function(){var f,e;e=document.createElement(this.tag);e.id=this.id||null;e.className=this.cls||null;for(f in this.attrs){e.setAttribute(f,this.attrs[f])}this.parent.appendChild(e);return this.parent=e};h.prototype.emitText=function(){this.parent.appendChild(a.HTML.parse(this.text));return this.text=""};return h})(a.StateMachine);return{name:"Synth",$:{synth:function(g){var h;h=new b();h.run(g);if(h.fragment.childNodes.length===1){return a(h.fragment.childNodes[0])}else{return a(h.fragment)}}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b();a.__super__=g.prototype;return a};(function(a){var b,f;b={};a.plugin(function(){var h,e;h=null;b={};e={register_engine:function(j,g){b[j]=g;if(!(h!=null)){return h=j}},render:function(g,j){if(h in b){return b[h](g,j)}}};e.__defineSetter__("engine",function(g){if(!g in b){throw new Error("invalid template engine: "+g+" not one of "+(Object.Keys(b)))}else{return h=g}});e.__defineGetter__("engine",function(){return h});return{name:"Template",$:{template:e}}});a.template.register_engine("null",(function(){return function(e,h){return e}})());f=function(i,q,u,v,p){var r,s,e,t;if(p==null){p=-1}r=1;if(p<0){p=i.length+1+p}for(s=t=v;v<=p?t<p:t>p;s=v<=p?++t:--t){e=i[s];if(e===u){r+=1}else{if(e===q){r-=1}}if(r===0){return s}}return -1};a.template.register_engine("pythonic",(function(){var j,e,k,l;l=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;j=/%[\(\/]/;e=function(z){var C,w,h,i,A,g,x,y,B,n;C=z.split(j);x=C.length;B=[C[0]];i=1;for(h=n=1;1<=x?n<x:n>x;h=1<=x?++n:--n){w=f(C[h],")","(",0,-1);if(w===-1){return"Template syntax error: unmatched '%(' starting at: "+(C[h].substring(0,15))}A=C[h].substring(0,w);y=C[h].substring(w);g=l.exec(y);if(g===null){return"Template syntax error: invalid type specifier starting at '"+y+"'"}y=g[4];B[i++]=A;B[i++]=g[1]|0;B[i++]=g[2]|0;B[i++]=g[3];B[i++]=y}return B};e.cache={};k=function(B,F){var E,g,J,L,G,n,C,i,D,I,H,M,K,h;E=e.cache[B];if(!(E!=null)){E=e.cache[B]=e(B)}C=[E[0]];L=1;n=E.length;for(J=M=1,K=n-5;M<=K;J=M+=5){h=E.slice(J,(J+4)+1||9000000000),G=h[0],i=h[1],g=h[2],I=h[3],D=h[4];H=F[G];if(!(H!=null)){H="missing value: "+G}switch(I){case"d":C[L++]=""+parseInt(H,10);break;case"f":C[L++]=parseFloat(H).toFixed(g);break;case"s":C[L++]=""+H;break;default:C[L++]=""+H}if(i>0){C[L]=String.PadLeft(C[L],i)}C[L++]=D}return C.join("")};return k})());return a.template.register_engine("js-eval",(function(){var e;e=(function(i){c(j,i);function j(){return j.__super__.constructor.apply(this,arguments)}j.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return j})(a.StateMachine);return function(i,j){return i}})())})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var e,f,a;a=function(c){var m,l,d,n,i;l=c.indexOf(":");if(l>0){n=parseInt(c.slice(0,l),10);d=c.slice(l+1,l+1+n);i=c[l+1+n];m=c.slice(l+n+2);d=(function(){switch(i){case"#":return Number(d);case"'":return String(d);case"!":return d==="true";case"~":return null;case"]":return e(d);case"}":return f(d)}})();return[d,m]}return void 0};e=function(j){var c,i,d;c=[];while(j.length>0){d=a(j),i=d[0],j=d[1];c.push(i)}return c};f=function(m){var c,l,d,k,n;c={};while(m.length>0){k=a(m),l=k[0],m=k[1];n=a(m),d=n[0],m=n[1];c[l]=d}return c};return{name:"TNET",$:{TNET:{stringify:function(l){var d,k,c,j;j=(function(){switch(Object.Type(l)){case"number":return[String(l),"#"];case"string":return[l,"'"];case"function":return[String(l),"'"];case"boolean":return[String(!!l),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var g,h,i;i=[];for(g=0,h=l.length;g<h;g++){c=l[g];i.push(b.TNET.stringify(c))}return i})()).join(""),"]"];case"object":return[((function(){var g;g=[];for(c in l){g.push(b.TNET.stringify(c)+b.TNET.stringify(l[c]))}return g})()).join(""),"}"]}})(),d=j[0],k=j[1];return(d.length|0)+":"+d+k},parse:function(d){var c;return(c=a(d))!=null?c[0]:void 0}}}}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var k,h,l,i,j,a;h=function(e,c){var d;c=Object.Extend({autoOpen:false,draggable:true},c);d=b(e).addClass("dialog");if(c.draggable){d.draggable()}if(c.autoOpen){d.show().center()}d.find("button.close, .close-button").bind("click touchstart",function(){d.hide();return false});return d};l=function(f,d){var p,c,g,e,o;d=Object.Extend({handleCSS:{}},d);d.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},d.handleCSS);p=b(f);g=false;e=o=0;c=b.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(d.handleCSS.bind("mousedown, touchstart",function(m){g=true;e||(e=m.pageX);o||(o=m.pageY);return false})));b(document.bind("mousemove, touchmove",function(m){var n,r;if(g){n=m.pageX-e;r=m.pageY-o;p.transform({translate:[n,r]},0).trigger("drag",{dragObject:p});return false}})).bind("mouseup, touchend",function(n){var m;if(g){g=false;m=c.position()[0];return b(document.elementFromPoint(m.left,m.top-1).trigger("drop",{dropObject:p}))}});return p.addClass("draggable").css({position:"relative","padding-top":p.css("padding-top").map(Number.AtLeast(parseInt(d.handleCSS.height,10))).px().first()}.append(c))};i=function(n,e){var f,c,d,g;e=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},e);f=b(n).addClass("progress-bar");g=0;if(e.reset){c=f.css("background").first();d=f.css("color").first()}return f.zap("updateProgress",function(m){while(m>1){m/=100}g=m;if(m===1&&e.reset){f.css("background",c).css("color",d)}else{f.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(m*100)+"% 0, color-stop(0, "+e.barColor+"), color-stop(0.98, "+e.barColor+"), color-stop(1.0, "+e.backgroundColor+"))",color:e.textColor})}if(Object.IsFunc(e.change)){return e.change(g)}})};k=function(g,d){var f,e,c;d=Object.Extend({exclusive:false,sticky:false},d);e=b(g).addClass("accordion");c=null;f=function(s){var v,n,u,t;u=b(s).children().first().filter("*");if(u.len()!==2){throw Exception("accordion row requires 2 elements, not "+(u.len()))}t=u.eq(0).addClass("title");v=u.eq(1).addClass("body").hide();n=false;return t.click(function(){if(d.exclusive){e.find(".body").hide()}if(n){if(!d.sticky){v.hide().removeClass("visible");t.removeClass("selected").trigger("deselect");return n=false}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}})};e.bind("DOMNodeInserted",function(p){var q,r;q=e.children().first().filter("*");r=b(p.target).parents().first();return f(r.intersect(q))});e.children().first().filter("*").map(f);return e};a=function(g,d){var p,f,e,q,c;f=b(g).css({position:"relative",top:"0px",left:"0px"}.hide().map(b));p=0;f[p].show();f.next=function(){f[p].hide();p=++p%nn;return f[p].show()};f.activate=function(m){f[p].hide();p=m;return f[m].show()};for(e=q=0,c=f.len();0<=c?q<c:q>c;e=0<=c?++q:--q){f[e].zap("_viewIndex",e.zap("activate",function(){return f.activate(this._viewIndex)}))}return f};j=function(g,f){var d,o,e,c;e=b(g);f=b(f).viewStack();o=e.len();for(d=c=0;0<=o?c<=o:c>=o;d=0<=o?++c:--c){e._tabIndex=d}b(e[0]).addClass("active");return e.click(function(){e.removeClass("active");f.activate(this._tabIndex);return b(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:l,ProgressBar:i,ViewStack:a,Tabs:j,Accordion:k}},dialog:function(c){return h(this,c)},progressBar:function(c){return i(this,c)},viewStack:function(c){return a(this,c)},tabs:function(c){return j(this,c)},accordion:function(c){return k(this,c)},draggable:function(c){return l(this,c)}}})})(Bling)}).call(this);(function(){var b=[].slice;$.plugin(function(){var a,w,y,s,B,A,E,F,t,v,u,z,C,D,x,G;z=["px","pt","pc","em","%","in","cm","mm","ex",""];a=/(\d+\.*\d*)(px|pt|pc|em|%|in|cm|mm|ex)/;F=function(c){return a.exec(c)[2](a.test(c)?void 0:"")};s=function(c,d){return s[c][d]()};t=function(c){return function(){return c}};for(C=0,x=z.length;C<x;C++){w=z[C];for(D=0,G=z.length;D<G;D++){y=z[D];(s[w]||(s[w]={}))[y]=t(+(w===y||w===""||y===""))}}s["in"].pt=function(){return 72};s["in"].px=function(){return 96};s["in"].cm=function(){return 2.54};s.pc.pt=function(){return 12};s.cm.mm=function(){return 10};s.em.px=function(){var d,c;c=$("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body");d=c.width().first();c.remove();return d};s.ex.px=function(){var d,c;c=$("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body");d=c.width().first();c.remove();return d};s.ex.em=function(){return 2};E=function(){var d,e,c,f;f=[];for(e=0,c=z.length;e<c;e++){w=z[e];f.push((function(){var h,g,i;i=[];for(h=0,g=z.length;h<g;h++){y=z[h];if(!s(w,y)&&s(y,w)){console.log("found inverse: "+w+"."+y);s[w][y]=t(1/s(y,w))}i.push((function(){var j,k,l;l=[];for(k=0,j=z.length;k<j;k++){d=z[k];if(!s(w,d)&&s(w,y)&&s(y,d)){console.log("found induction: "+w+"."+d);l.push(s[w][d]=t(s(w,y)*s(y,d)))}else{l.push(void 0)}}return l})())}return i})())}return f};E();E();A=function(d,c){return parseFloat(d)*s[F(d)][c]()+c};$.assert(A("300px","cm")==="10cm");B=function(d,h){var g,f,e,c;c=[];for(g=f=0,e=h.length;0<=e?f<e:f>e;g=0<=e?++f:--f){c.push(h[g]=convertTo(d,h[g]))}return c};Object.Type.register("units",{match:function(c){return a.test(c)}});v=function(c){return function(){var e,d;e=1<=arguments.length?b.call(arguments,0):[];B(d=F(this[0]),this);return(c.apply(this,e))+d}};u=function(c){return function(){var e,d;e=1<=arguments.length?b.call(arguments,0):[];d=this.map(F);return c.apply(this.floats(),e).map(function(){})}};return{min:v(function(){return this.reduce(function(c){return Math.min(parseFloat(this),c)})}),max:v(function(){return this.reduce(function(c){return Math.max(parseFloat(this),c)})}),sum:v(function(){return this.reduce(function(c){return parseFloat(this)+c})}),mean:v(function(){return parseFloat(this.sum())/this.length}),magnitude:v(function(){return Math.sqrt(this.floats().squares().sum())}),squares:function(){return this.map(function(){var c;return(c=parseFloat(this))*c})},scale:function(c){return this.map(function(){return c*parseFloat(this)})},add:function(c){return this.map(function(){return c+this})},normalize:function(){return this.scale(1/this.magnitude())}}})}).call(this);(function(){$.plugin(function(){var l,i,j,g,h,k;i=function(){return"EOF"};l=function(a){a=extend({item:function(){return i},action:Function.Identity,latency:10},a);return extend(new $.EventEmitter(),{run:function(){var c,b=this;c=function(){var d;if((d=a.action(a.item()))!==i){b.emit("data",d);return setTimeout(c,a.latency)}};return setTimeout(c,a.latency)}})};for(h=k=0;k<1000;h=++k){j=h}g=0;return l({item:function(){return j[g++](g<j.length?void 0:i)},action:function(a){return(a*a)-1},latency:10}).on("data",function(a){return console.log("data:",a.on("error",function(b){return console.log("error:",b.run())}))})})}).call(this);(function(){(function(b){return b.plugin(function(){var g,f,h,a;f={};h=function(d,c){return f[d]=c};g=function(c){return f[obj.t]};a=[];Object.Type.extend(null,{compact:function(c){return Object.String(c)}});Object.Type.extend("undefined",{compact:function(c){return""}});Object.Type.extend("null",{compact:function(c){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(c){var d;return((function(){var e,k,l;l=[];for(e=0,k=c.length;e<k;e++){d=c[e];l.push(Object.Compact(d))}return l})()).join("")}});Object.Type.extend("bling",{compact:function(c){return c.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(c){var d;return Object.Compact((d=g(c))!=null?d.call(c,c):void 0)}});Object.Compact=function(c){var d;a.push(c);if((d=Object.Type.lookup(c))!=null){d.compact(c)}return a.pop()};Object.Extend(Object.Compact,{register:h,lookup:g});h("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});h("text",function(){return this.EN});h("link",function(){var k,e,c,l,d;k=b(["<a"]);d=["href","name","target"];for(c=0,l=d.length;c<l;c++){e=d[c];if(e in this){k.extend(" ",e,"='",this[e],"'")}}return k.extend(">",node.content,"</a>")});b.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var a,G,F,E,D,L,C,P,O,M,J,B,y,K,A,z,I,w,N,H,x;A=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;K="<span class='opr'>$&</span>";J=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;M="<span class='kwd'>$&</span>";a=/\d+\.*\d*/g;y="<span class='num'>$&</span>";F=/\$(\(|\.)/g;G="<span class='bln'>$$</span>$1";x=/\t/g;H="&nbsp;&nbsp;";I=/\/\/.*?(?:\n|$)/;B=/\/\*(?:.|\n)*?\*\//;D=function(c){if(c){return"<span class='com'>"+c+"</span>"}else{return""}};z=function(c){if(c){return"<span class='str'>"+c+"</span>"}else{return""}};C=function(e,f){var c,d;c=e.indexOf('"',f);d=e.indexOf("'",f);if(c===-1){c=e.length}if(d===-1){d=e.length}if(c===d){return[null,-1]}if(c<d){return['"',c]}return["'",d]};E=function(c,d,e){var f;f=c.indexOf(e,d);while(c.charAt(f-1)==="\\"&&(0<f&&f<c.length)){f=c.indexOf(e,f+1)}return f};N=function(d){var g,i,e,f,h,c;g=0;f=d.length;c=[];if(!Object.IsString(d)){if(!Object.IsFunction(d.toString)){throw TypeError("invalid string argument to split_quoted")}else{d=d.toString();f=d.length}}while(g<f){h=C(d,g);i=h[1];if(i===-1){c.push(d.substring(g));break}c.push(d.substring(g,i));e=E(d,i+1,h[0]);if(e===-1){throw Error("unclosed quote: "+h[0]+" starting at "+i)}c.push(d.substring(i,e+1));g=e+1}return c};L=function(e){var c,d;c=e.match(I);d=e.match(B);if(c===d){return[-1,null]}if(c===null&&d!==null){return[d.index,d[0]]}if(c!==null&&d===null){return[c.index,c[0]]}if(d.index<c.index){return[d.index,d[0]]}return[c.index,c[0]]};w=function(d){var g,c,f,i,e,h;e=[];g=0;f=d.length;while(g<f){h=d.substring(g);i=L(h);c=i[0];if(c>-1){e.push(h.substring(0,c));e.push(i[1]);g+=c+i[1].length}else{e.push(h);break}}return e};P=function(c,d){return c.replace(A,K).replace(a,y).replace(J,M).replace(F,G).replace(x,H)+z(d)};O=function(d,c){return b(N(d)).fold(P).join("")+D(c)};return{name:"PrettyPrint",$:{prettyPrint:function(d,c){var e,f,g;if(Object.IsFunction(d)){d=d.toString()}if(!Object.IsString(d)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(d)+"'")}if(b("style#prettyPrint").length===0){f="code.pp .bln { font-size: 17px; } ";c=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},c);for(e in c){f+="code.pp ."+e+" { color: "+c[e]+"; } "}b.synth("style#prettyPrint").text(f).appendTo("head")}return g="<code class='pp'>"+(b(w(d)).fold(O).join(""))+"</code>"}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b();a.__super__=g.prototype;return a};(function(a){a.plugin(function(){var b;b=(function(){function f(e){this.reset();this.table=e;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(j){var i;this._lastMode=this._mode;this._mode=j;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){i=this.modeline.enter.call(this);while(Object.IsFunction(i)){i=i.call(this)}}return j},get:function(){return this._mode}})}f.prototype.reset=function(){this._mode=null;return this._lastMode=null};f.prototype.GO=function(e){return function(){return this.mode=e}};f.GO=function(e){return function(){return this.mode=e}};f.prototype.run=function(q){var e,p,m,n,r,o;this.mode=0;for(n=0,r=q.length;n<r;n++){e=q[n];m=this.modeline;if(!(m!=null)){p=null}else{if(e in m){p=m[e]}else{if("def" in m){p=m.def}}}while(Object.IsFunction(p)){p=p.call(this,e)}}if(Object.IsFunction((o=this.modeline)!=null?o.eof:void 0)){p=this.modeline.eof.call(this)}while(Object.IsFunction(p)){p=p.call(this)}this.reset();return this};return f})();return{name:"StateMachine",$:{StateMachine:b}}});return a.plugin(function(){var b;b=(function(g){c(h,g);h.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':h.GO(6),"'":h.GO(7),"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.tag+=e},eof:h.GO(13)},{".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.id+=e},eof:h.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":h.GO(2),".":h.GO(3),"[":h.GO(4)," ":h.GO(9),"+":h.GO(11),",":h.GO(10),def:function(e){return this.cls+=e},eof:h.GO(13)},{"=":h.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.attr+=e},eof:h.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(e){return this.val+=e},eof:h.GO(12)},{'"':h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{"'":h.GO(8),def:function(e){return this.text+=e},eof:h.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var e;this.emitNode();this.parent=(e=this.parent)!=null?e.parentNode:void 0;return this.GO(0)}},{enter:function(){return a.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function h(){h.__super__.constructor.call(this,h.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}h.prototype.emitNode=function(){var f,e;e=document.createElement(this.tag);e.id=this.id||null;e.className=this.cls||null;for(f in this.attrs){e.setAttribute(f,this.attrs[f])}this.parent.appendChild(e);return this.parent=e};h.prototype.emitText=function(){this.parent.appendChild(a.HTML.parse(this.text));return this.text=""};return h})(a.StateMachine);return{name:"Synth",$:{synth:function(g){var h;h=new b();h.run(g);if(h.fragment.childNodes.length===1){return a(h.fragment.childNodes[0])}else{return a(h.fragment)}}}}})})(Bling)}).call(this);(function(){var d={}.hasOwnProperty,c=function(a,g){for(var h in g){if(d.call(g,h)){a[h]=g[h]}}function b(){this.constructor=a}b.prototype=g.prototype;a.prototype=new b();a.__super__=g.prototype;return a};(function(a){var b,f;b={};a.plugin(function(){var h,e;h=null;b={};e={register_engine:function(j,g){b[j]=g;if(!(h!=null)){return h=j}},render:function(g,j){if(h in b){return b[h](g,j)}}};e.__defineSetter__("engine",function(g){if(!g in b){throw new Error("invalid template engine: "+g+" not one of "+(Object.Keys(b)))}else{return h=g}});e.__defineGetter__("engine",function(){return h});return{name:"Template",$:{template:e}}});a.template.register_engine("null",(function(){return function(e,h){return e}})());f=function(i,q,u,v,p){var r,s,e,t;if(p==null){p=-1}r=1;if(p<0){p=i.length+1+p}for(s=t=v;v<=p?t<p:t>p;s=v<=p?++t:--t){e=i[s];if(e===u){r+=1}else{if(e===q){r-=1}}if(r===0){return s}}return -1};a.template.register_engine("pythonic",(function(){var j,e,k,l;l=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;j=/%[\(\/]/;e=function(z){var C,w,h,i,A,g,x,y,B,n;C=z.split(j);x=C.length;B=[C[0]];i=1;for(h=n=1;1<=x?n<x:n>x;h=1<=x?++n:--n){w=f(C[h],")","(",0,-1);if(w===-1){return"Template syntax error: unmatched '%(' starting at: "+(C[h].substring(0,15))}A=C[h].substring(0,w);y=C[h].substring(w);g=l.exec(y);if(g===null){return"Template syntax error: invalid type specifier starting at '"+y+"'"}y=g[4];B[i++]=A;B[i++]=g[1]|0;B[i++]=g[2]|0;B[i++]=g[3];B[i++]=y}return B};e.cache={};k=function(B,F){var E,g,J,L,G,n,C,i,D,I,H,M,K,h;E=e.cache[B];if(!(E!=null)){E=e.cache[B]=e(B)}C=[E[0]];L=1;n=E.length;for(J=M=1,K=n-5;M<=K;J=M+=5){h=E.slice(J,(J+4)+1||9000000000),G=h[0],i=h[1],g=h[2],I=h[3],D=h[4];H=F[G];if(!(H!=null)){H="missing value: "+G}switch(I){case"d":C[L++]=""+parseInt(H,10);break;case"f":C[L++]=parseFloat(H).toFixed(g);break;case"s":C[L++]=""+H;break;default:C[L++]=""+H}if(i>0){C[L]=String.PadLeft(C[L],i)}C[L++]=D}return C.join("")};return k})());return a.template.register_engine("js-eval",(function(){var e;e=(function(i){c(j,i);function j(){return j.__super__.constructor.apply(this,arguments)}j.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return j})(a.StateMachine);return function(i,j){return i}})())})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var e,f,a;a=function(c){var m,l,d,n,i;l=c.indexOf(":");if(l>0){n=parseInt(c.slice(0,l),10);d=c.slice(l+1,l+1+n);i=c[l+1+n];m=c.slice(l+n+2);d=(function(){switch(i){case"#":return Number(d);case"'":return String(d);case"!":return d==="true";case"~":return null;case"]":return e(d);case"}":return f(d)}})();return[d,m]}return void 0};e=function(j){var c,i,d;c=[];while(j.length>0){d=a(j),i=d[0],j=d[1];c.push(i)}return c};f=function(m){var c,l,d,k,n;c={};while(m.length>0){k=a(m),l=k[0],m=k[1];n=a(m),d=n[0],m=n[1];c[l]=d}return c};return{name:"TNET",$:{TNET:{stringify:function(l){var d,k,c,j;j=(function(){switch(Object.Type(l)){case"number":return[String(l),"#"];case"string":return[l,"'"];case"function":return[String(l),"'"];case"boolean":return[String(!!l),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var g,h,i;i=[];for(g=0,h=l.length;g<h;g++){c=l[g];i.push(b.TNET.stringify(c))}return i})()).join(""),"]"];case"object":return[((function(){var g;g=[];for(c in l){g.push(b.TNET.stringify(c)+b.TNET.stringify(l[c]))}return g})()).join(""),"}"]}})(),d=j[0],k=j[1];return(d.length|0)+":"+d+k},parse:function(d){var c;return(c=a(d))!=null?c[0]:void 0}}}}})})(Bling)}).call(this);(function(){(function(b){return b.plugin(function(){var k,h,l,i,j,a;h=function(e,c){var d;c=Object.Extend({autoOpen:false,draggable:true},c);d=b(e).addClass("dialog");if(c.draggable){d.draggable()}if(c.autoOpen){d.show().center()}d.find("button.close, .close-button").bind("click touchstart",function(){d.hide();return false});return d};l=function(f,d){var p,c,g,e,o;d=Object.Extend({handleCSS:{}},d);d.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},d.handleCSS);p=b(f);g=false;e=o=0;c=b.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(d.handleCSS.bind("mousedown, touchstart",function(m){g=true;e||(e=m.pageX);o||(o=m.pageY);return false})));b(document.bind("mousemove, touchmove",function(m){var n,r;if(g){n=m.pageX-e;r=m.pageY-o;p.transform({translate:[n,r]},0).trigger("drag",{dragObject:p});return false}})).bind("mouseup, touchend",function(n){var m;if(g){g=false;m=c.position()[0];return b(document.elementFromPoint(m.left,m.top-1).trigger("drop",{dropObject:p}))}});return p.addClass("draggable").css({position:"relative","padding-top":p.css("padding-top").map(Number.AtLeast(parseInt(d.handleCSS.height,10))).px().first()}.append(c))};i=function(n,e){var f,c,d,g;e=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},e);f=b(n).addClass("progress-bar");g=0;if(e.reset){c=f.css("background").first();d=f.css("color").first()}return f.zap("updateProgress",function(m){while(m>1){m/=100}g=m;if(m===1&&e.reset){f.css("background",c).css("color",d)}else{f.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(m*100)+"% 0, color-stop(0, "+e.barColor+"), color-stop(0.98, "+e.barColor+"), color-stop(1.0, "+e.backgroundColor+"))",color:e.textColor})}if(Object.IsFunc(e.change)){return e.change(g)}})};k=function(g,d){var f,e,c;d=Object.Extend({exclusive:false,sticky:false},d);e=b(g).addClass("accordion");c=null;f=function(s){var v,n,u,t;u=b(s).children().first().filter("*");if(u.len()!==2){throw Exception("accordion row requires 2 elements, not "+(u.len()))}t=u.eq(0).addClass("title");v=u.eq(1).addClass("body").hide();n=false;return t.click(function(){if(d.exclusive){e.find(".body").hide()}if(n){if(!d.sticky){v.hide().removeClass("visible");t.removeClass("selected").trigger("deselect");return n=false}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}}else{v.show().addClass("visible");t.addClass("selected").trigger("select");return n=true}})};e.bind("DOMNodeInserted",function(p){var q,r;q=e.children().first().filter("*");r=b(p.target).parents().first();return f(r.intersect(q))});e.children().first().filter("*").map(f);return e};a=function(g,d){var p,f,e,q,c;f=b(g).css({position:"relative",top:"0px",left:"0px"}.hide().map(b));p=0;f[p].show();f.next=function(){f[p].hide();p=++p%nn;return f[p].show()};f.activate=function(m){f[p].hide();p=m;return f[m].show()};for(e=q=0,c=f.len();0<=c?q<c:q>c;e=0<=c?++q:--q){f[e].zap("_viewIndex",e.zap("activate",function(){return f.activate(this._viewIndex)}))}return f};j=function(g,f){var d,o,e,c;e=b(g);f=b(f).viewStack();o=e.len();for(d=c=0;0<=o?c<=o:c>=o;d=0<=o?++c:--c){e._tabIndex=d}b(e[0]).addClass("active");return e.click(function(){e.removeClass("active");f.activate(this._tabIndex);return b(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:l,ProgressBar:i,ViewStack:a,Tabs:j,Accordion:k}},dialog:function(c){return h(this,c)},progressBar:function(c){return i(this,c)},viewStack:function(c){return a(this,c)},tabs:function(c){return j(this,c)},accordion:function(c){return k(this,c)},draggable:function(c){return l(this,c)}}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var v,k,l,m,n,f,o,b,c,e,h,p,s,g,q,r,i,u,d,j,t;q=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;g="<span class='opr'>$&</span>";h=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;e="<span class='kwd'>$&</span>";v=/\d+\.*\d*/g;s="<span class='num'>$&</span>";l=/\$(\(|\.)/g;k="<span class='bln'>$$</span>$1";t=/\t/g;j="&nbsp;&nbsp;";i=/\/\/.*?(?:\n|$)/;p=/\/\*(?:.|\n)*?\*\//;n=function(w){if(w){return"<span class='com'>"+w+"</span>"}else{return""}};r=function(w){if(w){return"<span class='str'>"+w+"</span>"}else{return""}};o=function(z,y){var x,w;x=z.indexOf('"',y);w=z.indexOf("'",y);if(x===-1){x=z.length}if(w===-1){w=z.length}if(x===w){return[null,-1]}if(x<w){return['"',x]}return["'",w]};m=function(x,w,z){var y;y=x.indexOf(z,w);while(x.charAt(y-1)==="\\"&&(0<y&&y<x.length)){y=x.indexOf(z,y+1)}return y};d=function(A){var z,y,w,C,B,x;z=0;C=A.length;x=[];if(!Object.IsString(A)){if(!Object.IsFunction(A.toString)){throw TypeError("invalid string argument to split_quoted")}else{A=A.toString();C=A.length}}while(z<C){B=o(A,z);y=B[1];if(y===-1){x.push(A.substring(z));break}x.push(A.substring(z,y));w=m(A,y+1,B[0]);if(w===-1){throw Error("unclosed quote: "+B[0]+" starting at "+y)}x.push(A.substring(y,w+1));z=w+1}return x};f=function(y){var x,w;x=y.match(i);w=y.match(p);if(x===w){return[-1,null]}if(x===null&&w!==null){return[w.index,w[0]]}if(x!==null&&w===null){return[x.index,x[0]]}if(w.index<x.index){return[w.index,w[0]]}return[x.index,x[0]]};u=function(A){var z,x,C,B,w,y;w=[];z=0;C=A.length;while(z<C){y=A.substring(z);B=f(y);x=B[0];if(x>-1){w.push(y.substring(0,x));w.push(B[1]);z+=x+B[1].length}else{w.push(y);break}}return w};b=function(x,w){return x.replace(q,g).replace(v,s).replace(h,e).replace(l,k).replace(t,j)+r(w)};c=function(w,x){return a(d(w)).fold(b).join("")+n(x)};return{name:"PrettyPrint",$:{prettyPrint:function(A,x){var w,z,y;if(Object.IsFunction(A)){A=A.toString()}if(!Object.IsString(A)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(A)+"'")}if(a("style#prettyPrint").length===0){z="code.pp .bln { font-size: 17px; } ";x=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},x);for(w in x){z+="code.pp ."+w+" { color: "+x[w]+"; } "}a.synth("style#prettyPrint").text(z).appendTo("head")}return y="<code class='pp'>"+(a(u(A)).fold(c).join(""))+"</code>"}}}})})(Bling)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};(function(c){c.plugin(function(){var d;d=(function(){function e(f){this.reset();this.table=f;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(g){var h;this._lastMode=this._mode;this._mode=g;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){h=this.modeline.enter.call(this);while(Object.IsFunction(h)){h=h.call(this)}}return g},get:function(){return this._mode}})}e.prototype.reset=function(){this._mode=null;return this._lastMode=null};e.prototype.GO=function(f){return function(){return this.mode=f}};e.GO=function(f){return function(){return this.mode=f}};e.prototype.run=function(g){var l,h,k,j,f,i;this.mode=0;for(j=0,f=g.length;j<f;j++){l=g[j];k=this.modeline;if(!(k!=null)){h=null}else{if(l in k){h=k[l]}else{if("def" in k){h=k.def}}}while(Object.IsFunction(h)){h=h.call(this,l)}}if(Object.IsFunction((i=this.modeline)!=null?i.eof:void 0)){h=this.modeline.eof.call(this)}while(Object.IsFunction(h)){h=h.call(this)}this.reset();return this};return e})();return{name:"StateMachine",$:{StateMachine:d}}});return c.plugin(function(){var d;d=(function(f){b(e,f);e.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':e.GO(6),"'":e.GO(7),"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.tag+=g},eof:e.GO(13)},{".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.id+=g},eof:e.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.cls+=g},eof:e.GO(13)},{"=":e.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(g){return this.attr+=g},eof:e.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(g){return this.val+=g},eof:e.GO(12)},{'"':e.GO(8),def:function(g){return this.text+=g},eof:e.GO(12)},{"'":e.GO(8),def:function(g){return this.text+=g},eof:e.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var g;this.emitNode();this.parent=(g=this.parent)!=null?g.parentNode:void 0;return this.GO(0)}},{enter:function(){return c.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function e(){e.__super__.constructor.call(this,e.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}e.prototype.emitNode=function(){var g,h;h=document.createElement(this.tag);h.id=this.id||null;h.className=this.cls||null;for(g in this.attrs){h.setAttribute(g,this.attrs[g])}this.parent.appendChild(h);return this.parent=h};e.prototype.emitText=function(){this.parent.appendChild(c.HTML.parse(this.text));return this.text=""};return e})(c.StateMachine);return{name:"Synth",$:{synth:function(f){var e;e=new d();e.run(f);if(e.fragment.childNodes.length===1){return c(e.fragment.childNodes[0])}else{return c(e.fragment)}}}}})})(Bling)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};(function(e){var d,c;d={};e.plugin(function(){var f,g;f=null;d={};g={register_engine:function(h,i){d[h]=i;if(!(f!=null)){return f=h}},render:function(i,h){if(f in d){return d[f](i,h)}}};g.__defineSetter__("engine",function(h){if(!h in d){throw new Error("invalid template engine: "+h+" not one of "+(Object.Keys(d)))}else{return f=h}});g.__defineGetter__("engine",function(){return f});return{name:"Template",$:{template:g}}});e.template.register_engine("null",(function(){return function(g,f){return g}})());c=function(n,l,g,f,m){var k,j,o,h;if(m==null){m=-1}k=1;if(m<0){m=n.length+1+m}for(j=h=f;f<=m?h<m:h>m;j=f<=m?++h:--h){o=n[j];if(o===g){k+=1}else{if(o===l){k-=1}}if(k===0){return j}}return -1};e.template.register_engine("pythonic",(function(){var h,i,g,f;f=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;h=/%[\(\/]/;i=function(v){var s,m,q,p,u,r,l,k,t,o;s=v.split(h);l=s.length;t=[s[0]];p=1;for(q=o=1;1<=l?o<l:o>l;q=1<=l?++o:--o){m=c(s[q],")","(",0,-1);if(m===-1){return"Template syntax error: unmatched '%(' starting at: "+(s[q].substring(0,15))}u=s[q].substring(0,m);k=s[q].substring(m);r=f.exec(k);if(r===null){return"Template syntax error: invalid type specifier starting at '"+k+"'"}k=r[4];t[p++]=u;t[p++]=r[1]|0;t[p++]=r[2]|0;t[p++]=r[3];t[p++]=k}return t};i.cache={};g=function(A,z){var k,r,v,t,y,o,m,p,l,w,x,s,u,q;k=i.cache[A];if(!(k!=null)){k=i.cache[A]=i(A)}m=[k[0]];t=1;o=k.length;for(v=s=1,u=o-5;s<=u;v=s+=5){q=k.slice(v,(v+4)+1||9000000000),y=q[0],p=q[1],r=q[2],w=q[3],l=q[4];x=z[y];if(!(x!=null)){x="missing value: "+y}switch(w){case"d":m[t++]=""+parseInt(x,10);break;case"f":m[t++]=parseFloat(x).toFixed(r);break;case"s":m[t++]=""+x;break;default:m[t++]=""+x}if(p>0){m[t]=String.PadLeft(m[t],p)}m[t++]=l}return m.join("")};return g})());return e.template.register_engine("js-eval",(function(){var f;f=(function(h){b(g,h);function g(){return g.__super__.constructor.apply(this,arguments)}g.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return g})(e.StateMachine);return function(h,g){return h}})())})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var d,c,b;b=function(k){var f,g,j,e,h;g=k.indexOf(":");if(g>0){e=parseInt(k.slice(0,g),10);j=k.slice(g+1,g+1+e);h=k[g+1+e];f=k.slice(g+e+2);j=(function(){switch(h){case"#":return Number(j);case"'":return String(j);case"!":return j==="true";case"~":return null;case"]":return d(j);case"}":return c(j)}})();return[j,f]}return void 0};d=function(e){var h,f,g;h=[];while(e.length>0){g=b(e),f=g[0],e=g[1];h.push(f)}return h};c=function(f){var j,g,i,h,e;j={};while(f.length>0){h=b(f),g=h[0],f=h[1];e=b(f),i=e[0],f=e[1];j[g]=i}return j};return{name:"TNET",$:{TNET:{stringify:function(e){var h,f,i,g;g=(function(){switch(Object.Type(e)){case"number":return[String(e),"#"];case"string":return[e,"'"];case"function":return[String(e),"'"];case"boolean":return[String(!!e),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var l,k,j;j=[];for(l=0,k=e.length;l<k;l++){i=e[l];j.push(a.TNET.stringify(i))}return j})()).join(""),"]"];case"object":return[((function(){var j;j=[];for(i in e){j.push(a.TNET.stringify(i)+a.TNET.stringify(e[i]))}return j})()).join(""),"}"]}})(),h=g[0],f=g[1];return(h.length|0)+":"+h+f},parse:function(e){var f;return(f=b(e))!=null?f[0]:void 0}}}}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var d,g,c,f,e,b;g=function(h,j){var i;j=Object.Extend({autoOpen:false,draggable:true},j);i=a(h).addClass("dialog");if(j.draggable){i.draggable()}if(j.autoOpen){i.show().center()}i.find("button.close, .close-button").bind("click touchstart",function(){i.hide();return false});return i};c=function(j,l){var n,m,i,k,h;l=Object.Extend({handleCSS:{}},l);l.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},l.handleCSS);n=a(j);i=false;k=h=0;m=a.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(l.handleCSS.bind("mousedown, touchstart",function(o){i=true;k||(k=o.pageX);h||(h=o.pageY);return false})));a(document.bind("mousemove, touchmove",function(q){var p,o;if(i){p=q.pageX-k;o=q.pageY-h;n.transform({translate:[p,o]},0).trigger("drag",{dragObject:n});return false}})).bind("mouseup, touchend",function(o){var p;if(i){i=false;p=m.position()[0];return a(document.elementFromPoint(p.left,p.top-1).trigger("drop",{dropObject:n}))}});return n.addClass("draggable").css({position:"relative","padding-top":n.css("padding-top").map(Number.AtLeast(parseInt(l.handleCSS.height,10))).px().first()}.append(m))};f=function(h,k){var j,m,l,i;k=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},k);j=a(h).addClass("progress-bar");i=0;if(k.reset){m=j.css("background").first();l=j.css("color").first()}return j.zap("updateProgress",function(n){while(n>1){n/=100}i=n;if(n===1&&k.reset){j.css("background",m).css("color",l)}else{j.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(n*100)+"% 0, color-stop(0, "+k.barColor+"), color-stop(0.98, "+k.barColor+"), color-stop(1.0, "+k.backgroundColor+"))",color:k.textColor})}if(Object.IsFunc(k.change)){return k.change(i)}})};d=function(h,k){var i,j,l;k=Object.Extend({exclusive:false,sticky:false},k);j=a(h).addClass("accordion");l=null;i=function(r){var o,m,p,q;p=a(r).children().first().filter("*");if(p.len()!==2){throw Exception("accordion row requires 2 elements, not "+(p.len()))}q=p.eq(0).addClass("title");o=p.eq(1).addClass("body").hide();m=false;return q.click(function(){if(k.exclusive){j.find(".body").hide()}if(m){if(!k.sticky){o.hide().removeClass("visible");q.removeClass("selected").trigger("deselect");return m=false}else{o.show().addClass("visible");q.addClass("selected").trigger("select");return m=true}}else{o.show().addClass("visible");q.addClass("selected").trigger("select");return m=true}})};j.bind("DOMNodeInserted",function(m){var o,n;o=j.children().first().filter("*");n=a(m.target).parents().first();return i(n.intersect(o))});j.children().first().filter("*").map(i);return j};b=function(h,l){var o,i,k,n,m;i=a(h).css({position:"relative",top:"0px",left:"0px"}.hide().map(a));o=0;i[o].show();i.next=function(){i[o].hide();o=++o%nn;return i[o].show()};i.activate=function(j){i[o].hide();o=j;return i[j].show()};for(k=n=0,m=i.len();0<=m?n<m:n>m;k=0<=m?++n:--n){i[k].zap("_viewIndex",k.zap("activate",function(){return i.activate(this._viewIndex)}))}return i};e=function(h,j){var l,n,k,m;k=a(h);j=a(j).viewStack();n=k.len();for(l=m=0;0<=n?m<=n:m>=n;l=0<=n?++m:--m){k._tabIndex=l}a(k[0]).addClass("active");return k.click(function(){k.removeClass("active");j.activate(this._tabIndex);return a(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:c,ProgressBar:f,ViewStack:b,Tabs:e,Accordion:d}},dialog:function(h){return g(this,h)},progressBar:function(h){return f(this,h)},viewStack:function(h){return b(this,h)},tabs:function(h){return e(this,h)},accordion:function(h){return d(this,h)},draggable:function(h){return c(this,h)}}})})(Bling)}).call(this);(function(){var a=[].slice;$.plugin(function(){var r,m,k,q,h,i,e,d,p,n,o,j,g,f,l,c;j=["px","pt","pc","em","%","in","cm","mm","ex",""];r=/(\d+\.*\d*)(px|pt|pc|em|%|in|cm|mm|ex)/;d=function(b){return r.exec(b)[2](r.test(b)?void 0:"")};q=function(t,s){return q[t][s]()};p=function(b){return function(){return b}};for(g=0,l=j.length;g<l;g++){m=j[g];for(f=0,c=j.length;f<c;f++){k=j[f];(q[m]||(q[m]={}))[k]=p(+(m===k||m===""||k===""))}}q["in"].pt=function(){return 72};q["in"].px=function(){return 96};q["in"].cm=function(){return 2.54};q.pc.pt=function(){return 12};q.cm.mm=function(){return 10};q.em.px=function(){var s,b;b=$("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body");s=b.width().first();b.remove();return s};q.ex.px=function(){var s,b;b=$("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body");s=b.width().first();b.remove();return s};q.ex.em=function(){return 2};e=function(){var u,t,b,s;s=[];for(t=0,b=j.length;t<b;t++){m=j[t];s.push((function(){var w,x,v;v=[];for(w=0,x=j.length;w<x;w++){k=j[w];if(!q(m,k)&&q(k,m)){console.log("found inverse: "+m+"."+k);q[m][k]=p(1/q(k,m))}v.push((function(){var A,z,y;y=[];for(z=0,A=j.length;z<A;z++){u=j[z];if(!q(m,u)&&q(m,k)&&q(k,u)){console.log("found induction: "+m+"."+u);y.push(q[m][u]=p(q(m,k)*q(k,u)))}else{y.push(void 0)}}return y})())}return v})())}return s};e();e();i=function(s,b){return parseFloat(s)*q[d(s)][b]()+b};$.assert(i("300px","cm")==="10cm");h=function(w,s){var t,u,v,b;b=[];for(t=u=0,v=s.length;0<=v?u<v:u>v;t=0<=v?++u:--u){b.push(s[t]=convertTo(w,s[t]))}return b};Object.Type.register("units",{match:function(b){return r.test(b)}});n=function(b){return function(){var s,t;s=1<=arguments.length?a.call(arguments,0):[];h(t=d(this[0]),this);return(b.apply(this,s))+t}};o=function(b){return function(){var s,t;s=1<=arguments.length?a.call(arguments,0):[];t=this.map(d);return b.apply(this.floats(),s).map(function(){})}};return{min:n(function(){return this.reduce(function(b){return Math.min(parseFloat(this),b)})}),max:n(function(){return this.reduce(function(b){return Math.max(parseFloat(this),b)})}),sum:n(function(){return this.reduce(function(b){return parseFloat(this)+b})}),mean:n(function(){return parseFloat(this.sum())/this.length}),magnitude:n(function(){return Math.sqrt(this.floats().squares().sum())}),squares:function(){return this.map(function(){var b;return(b=parseFloat(this))*b})},scale:function(b){return this.map(function(){return b*parseFloat(this)})},add:function(b){return this.map(function(){return b+this})},normalize:function(){return this.scale(1/this.magnitude())}}})}).call(this);(function(){$.plugin(function(){var c,f,e,b,a,d;f=function(){return"EOF"};c=function(g){g=extend({item:function(){return f},action:Function.Identity,latency:10},g);return extend(new $.EventEmitter(),{run:function(){var h,i=this;h=function(){var j;if((j=g.action(g.item()))!==f){i.emit("data",j);return setTimeout(h,g.latency)}};return setTimeout(h,g.latency)}})};for(a=d=0;d<1000;a=++d){e=a}b=0;return c({item:function(){return e[b++](b<e.length?void 0:f)},action:function(g){return(g*g)-1},latency:10}).on("data",function(g){return console.log("data:",g.on("error",function(h){return console.log("error:",h.run())}))})})}).call(this);(function(){(function(a){return a.plugin(function(){var d,e,c,b;e={};c=function(g,h){return e[g]=h};d=function(g){return e[obj.t]};b=[];Object.Type.extend(null,{compact:function(f){return Object.String(f)}});Object.Type.extend("undefined",{compact:function(f){return""}});Object.Type.extend("null",{compact:function(f){return""}});Object.Type.extend("string",{compact:Function.Identity});Object.Type.extend("array",{compact:function(g){var f;return((function(){var j,i,h;h=[];for(j=0,i=g.length;j<i;j++){f=g[j];h.push(Object.Compact(f))}return h})()).join("")}});Object.Type.extend("bling",{compact:function(f){return f.map(Object.Compact).join("")}});Object.Type.extend("object",{compact:function(g){var f;return Object.Compact((f=d(g))!=null?f.call(g,g):void 0)}});Object.Compact=function(g){var f;b.push(g);if((f=Object.Type.lookup(g))!=null){f.compact(g)}return b.pop()};Object.Extend(Object.Compact,{register:c,lookup:d});c("page",function(){return["<!DOCTYPE html><html><head>",this.head,"</head><body>",this.body,"</body></html>"]});c("text",function(){return this.EN});c("link",function(){var g,h,j,f,i;g=a(["<a"]);i=["href","name","target"];for(j=0,f=i.length;j<f;j++){h=i[j];if(h in this){g.extend(" ",h,"='",this[h],"'")}}return g.extend(">",node.content,"</a>")});a.assert(Object.Compact({t:"page",head:[],body:{type:"text",EN:"Hello World"}})==="<!DOCTYPE html><html><head></head><body>Hello World</body></html>");return{name:"Compact"}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var v,k,l,m,n,f,o,b,c,e,h,p,s,g,q,r,i,u,d,j,t;q=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;g="<span class='opr'>$&</span>";h=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;e="<span class='kwd'>$&</span>";v=/\d+\.*\d*/g;s="<span class='num'>$&</span>";l=/\$(\(|\.)/g;k="<span class='bln'>$$</span>$1";t=/\t/g;j="&nbsp;&nbsp;";i=/\/\/.*?(?:\n|$)/;p=/\/\*(?:.|\n)*?\*\//;n=function(w){if(w){return"<span class='com'>"+w+"</span>"}else{return""}};r=function(w){if(w){return"<span class='str'>"+w+"</span>"}else{return""}};o=function(z,y){var x,w;x=z.indexOf('"',y);w=z.indexOf("'",y);if(x===-1){x=z.length}if(w===-1){w=z.length}if(x===w){return[null,-1]}if(x<w){return['"',x]}return["'",w]};m=function(x,w,z){var y;y=x.indexOf(z,w);while(x.charAt(y-1)==="\\"&&(0<y&&y<x.length)){y=x.indexOf(z,y+1)}return y};d=function(A){var z,y,w,C,B,x;z=0;C=A.length;x=[];if(!Object.IsString(A)){if(!Object.IsFunction(A.toString)){throw TypeError("invalid string argument to split_quoted")}else{A=A.toString();C=A.length}}while(z<C){B=o(A,z);y=B[1];if(y===-1){x.push(A.substring(z));break}x.push(A.substring(z,y));w=m(A,y+1,B[0]);if(w===-1){throw Error("unclosed quote: "+B[0]+" starting at "+y)}x.push(A.substring(y,w+1));z=w+1}return x};f=function(y){var x,w;x=y.match(i);w=y.match(p);if(x===w){return[-1,null]}if(x===null&&w!==null){return[w.index,w[0]]}if(x!==null&&w===null){return[x.index,x[0]]}if(w.index<x.index){return[w.index,w[0]]}return[x.index,x[0]]};u=function(A){var z,x,C,B,w,y;w=[];z=0;C=A.length;while(z<C){y=A.substring(z);B=f(y);x=B[0];if(x>-1){w.push(y.substring(0,x));w.push(B[1]);z+=x+B[1].length}else{w.push(y);break}}return w};b=function(x,w){return x.replace(q,g).replace(v,s).replace(h,e).replace(l,k).replace(t,j)+r(w)};c=function(w,x){return a(d(w)).fold(b).join("")+n(x)};return{name:"PrettyPrint",$:{prettyPrint:function(A,x){var w,z,y;if(Object.IsFunction(A)){A=A.toString()}if(!Object.IsString(A)){throw TypeError("prettyPrint requires a function or string to format, not '"+Object.Type(A)+"'")}if(a("style#prettyPrint").length===0){z="code.pp .bln { font-size: 17px; } ";x=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},x);for(w in x){z+="code.pp ."+w+" { color: "+x[w]+"; } "}a.synth("style#prettyPrint").text(z).appendTo("head")}return y="<code class='pp'>"+(a(u(A)).fold(c).join(""))+"</code>"}}}})})(Bling)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};(function(c){c.plugin(function(){var d;d=(function(){function e(f){this.reset();this.table=f;Object.defineProperty(this,"modeline",{get:this.table[this._mode]});Object.defineProperty(this,"mode",{set:function(g){var h;this._lastMode=this._mode;this._mode=g;if(this._mode!==this._lastMode&&(this.modeline!=null)&&"enter" in this.modeline){h=this.modeline.enter.call(this);while(Object.IsFunction(h)){h=h.call(this)}}return g},get:function(){return this._mode}})}e.prototype.reset=function(){this._mode=null;return this._lastMode=null};e.prototype.GO=function(f){return function(){return this.mode=f}};e.GO=function(f){return function(){return this.mode=f}};e.prototype.run=function(g){var l,h,k,j,f,i;this.mode=0;for(j=0,f=g.length;j<f;j++){l=g[j];k=this.modeline;if(!(k!=null)){h=null}else{if(l in k){h=k[l]}else{if("def" in k){h=k.def}}}while(Object.IsFunction(h)){h=h.call(this,l)}}if(Object.IsFunction((i=this.modeline)!=null?i.eof:void 0)){h=this.modeline.eof.call(this)}while(Object.IsFunction(h)){h=h.call(this)}this.reset();return this};return e})();return{name:"StateMachine",$:{StateMachine:d}}});return c.plugin(function(){var d;d=(function(f){b(e,f);e.STATE_TABLE=[{enter:function(){this.tag=this.id=this.cls=this.attr=this.val=this.text="";this.attrs={};return this.GO(1)}},{'"':e.GO(6),"'":e.GO(7),"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.tag+=g},eof:e.GO(13)},{".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.id+=g},eof:e.GO(13)},{enter:function(){if(this.cls.length>0){return this.cls+=" "}},"#":e.GO(2),".":e.GO(3),"[":e.GO(4)," ":e.GO(9),"+":e.GO(11),",":e.GO(10),def:function(g){return this.cls+=g},eof:e.GO(13)},{"=":e.GO(5),"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(g){return this.attr+=g},eof:e.GO(12)},{"]":function(){this.attrs[this.attr]=this.val;return this.GO(1)},def:function(g){return this.val+=g},eof:e.GO(12)},{'"':e.GO(8),def:function(g){return this.text+=g},eof:e.GO(12)},{"'":e.GO(8),def:function(g){return this.text+=g},eof:e.GO(12)},{enter:function(){this.emitText();return this.GO(0)}},{enter:function(){this.emitNode();return this.GO(0)}},{enter:function(){this.emitNode();this.parent=null;return this.GO(0)}},{enter:function(){var g;this.emitNode();this.parent=(g=this.parent)!=null?g.parentNode:void 0;return this.GO(0)}},{enter:function(){return c.log("Error in synth expression: "+this.input)}},{enter:function(){if(this.tag.length){this.emitNode()}if(this.text.length){return this.emitText()}}}];function e(){e.__super__.constructor.call(this,e.STATE_TABLE);this.fragment=this.parent=document.createDocumentFragment()}e.prototype.emitNode=function(){var g,h;h=document.createElement(this.tag);h.id=this.id||null;h.className=this.cls||null;for(g in this.attrs){h.setAttribute(g,this.attrs[g])}this.parent.appendChild(h);return this.parent=h};e.prototype.emitText=function(){this.parent.appendChild(c.HTML.parse(this.text));return this.text=""};return e})(c.StateMachine);return{name:"Synth",$:{synth:function(f){var e;e=new d();e.run(f);if(e.fragment.childNodes.length===1){return c(e.fragment.childNodes[0])}else{return c(e.fragment)}}}}})})(Bling)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};(function(e){var d,c;d={};e.plugin(function(){var f,g;f=null;d={};g={register_engine:function(h,i){d[h]=i;if(!(f!=null)){return f=h}},render:function(i,h){if(f in d){return d[f](i,h)}}};g.__defineSetter__("engine",function(h){if(!h in d){throw new Error("invalid template engine: "+h+" not one of "+(Object.Keys(d)))}else{return f=h}});g.__defineGetter__("engine",function(){return f});return{name:"Template",$:{template:g}}});e.template.register_engine("null",(function(){return function(g,f){return g}})());c=function(n,l,g,f,m){var k,j,o,h;if(m==null){m=-1}k=1;if(m<0){m=n.length+1+m}for(j=h=f;f<=m?h<m:h>m;j=f<=m?++h:--h){o=n[j];if(o===g){k+=1}else{if(o===l){k-=1}}if(k===0){return j}}return -1};e.template.register_engine("pythonic",(function(){var h,i,g,f;f=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;h=/%[\(\/]/;i=function(v){var s,m,q,p,u,r,l,k,t,o;s=v.split(h);l=s.length;t=[s[0]];p=1;for(q=o=1;1<=l?o<l:o>l;q=1<=l?++o:--o){m=c(s[q],")","(",0,-1);if(m===-1){return"Template syntax error: unmatched '%(' starting at: "+(s[q].substring(0,15))}u=s[q].substring(0,m);k=s[q].substring(m);r=f.exec(k);if(r===null){return"Template syntax error: invalid type specifier starting at '"+k+"'"}k=r[4];t[p++]=u;t[p++]=r[1]|0;t[p++]=r[2]|0;t[p++]=r[3];t[p++]=k}return t};i.cache={};g=function(A,z){var k,r,v,t,y,o,m,p,l,w,x,s,u,q;k=i.cache[A];if(!(k!=null)){k=i.cache[A]=i(A)}m=[k[0]];t=1;o=k.length;for(v=s=1,u=o-5;s<=u;v=s+=5){q=k.slice(v,(v+4)+1||9000000000),y=q[0],p=q[1],r=q[2],w=q[3],l=q[4];x=z[y];if(!(x!=null)){x="missing value: "+y}switch(w){case"d":m[t++]=""+parseInt(x,10);break;case"f":m[t++]=parseFloat(x).toFixed(r);break;case"s":m[t++]=""+x;break;default:m[t++]=""+x}if(p>0){m[t]=String.PadLeft(m[t],p)}m[t++]=l}return m.join("")};return g})());return e.template.register_engine("js-eval",(function(){var f;f=(function(h){b(g,h);function g(){return g.__super__.constructor.apply(this,arguments)}g.STATE_TABLE=[{enter:function(){this.data=[];return this.GO(1)}},{}];return g})(e.StateMachine);return function(h,g){return h}})())})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var d,c,b;b=function(k){var f,g,j,e,h;g=k.indexOf(":");if(g>0){e=parseInt(k.slice(0,g),10);j=k.slice(g+1,g+1+e);h=k[g+1+e];f=k.slice(g+e+2);j=(function(){switch(h){case"#":return Number(j);case"'":return String(j);case"!":return j==="true";case"~":return null;case"]":return d(j);case"}":return c(j)}})();return[j,f]}return void 0};d=function(e){var h,f,g;h=[];while(e.length>0){g=b(e),f=g[0],e=g[1];h.push(f)}return h};c=function(f){var j,g,i,h,e;j={};while(f.length>0){h=b(f),g=h[0],f=h[1];e=b(f),i=e[0],f=e[1];j[g]=i}return j};return{name:"TNET",$:{TNET:{stringify:function(e){var h,f,i,g;g=(function(){switch(Object.Type(e)){case"number":return[String(e),"#"];case"string":return[e,"'"];case"function":return[String(e),"'"];case"boolean":return[String(!!e),"!"];case"null":return["","~"];case"undefined":return["","~"];case"array":return[((function(){var l,k,j;j=[];for(l=0,k=e.length;l<k;l++){i=e[l];j.push(a.TNET.stringify(i))}return j})()).join(""),"]"];case"object":return[((function(){var j;j=[];for(i in e){j.push(a.TNET.stringify(i)+a.TNET.stringify(e[i]))}return j})()).join(""),"}"]}})(),h=g[0],f=g[1];return(h.length|0)+":"+h+f},parse:function(e){var f;return(f=b(e))!=null?f[0]:void 0}}}}})})(Bling)}).call(this);(function(){(function(a){return a.plugin(function(){var d,g,c,f,e,b;g=function(h,j){var i;j=Object.Extend({autoOpen:false,draggable:true},j);i=a(h).addClass("dialog");if(j.draggable){i.draggable()}if(j.autoOpen){i.show().center()}i.find("button.close, .close-button").bind("click touchstart",function(){i.hide();return false});return i};c=function(j,l){var n,m,i,k,h;l=Object.Extend({handleCSS:{}},l);l.handleCSS=Object.Extend({position:"absolute",top:"0px",left:"0px",width:"100%",height:"6px"},l.handleCSS);n=a(j);i=false;k=h=0;m=a.synth("div.handle").defaultCss({background:"-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",height:"6px","border-radius":"3px",cursor:"move"}.css(l.handleCSS.bind("mousedown, touchstart",function(o){i=true;k||(k=o.pageX);h||(h=o.pageY);return false})));a(document.bind("mousemove, touchmove",function(q){var p,o;if(i){p=q.pageX-k;o=q.pageY-h;n.transform({translate:[p,o]},0).trigger("drag",{dragObject:n});return false}})).bind("mouseup, touchend",function(o){var p;if(i){i=false;p=m.position()[0];return a(document.elementFromPoint(p.left,p.top-1).trigger("drop",{dropObject:n}))}});return n.addClass("draggable").css({position:"relative","padding-top":n.css("padding-top").map(Number.AtLeast(parseInt(l.handleCSS.height,10))).px().first()}.append(m))};f=function(h,k){var j,m,l,i;k=Object.Extend({change:Function.Empty,backgroundColor:"#fff",barColor:"rgba(0,128,0,0.5)",textColor:"white",reset:false},k);j=a(h).addClass("progress-bar");i=0;if(k.reset){m=j.css("background").first();l=j.css("color").first()}return j.zap("updateProgress",function(n){while(n>1){n/=100}i=n;if(n===1&&k.reset){j.css("background",m).css("color",l)}else{j.css({background:"-webkit-gradient(linear, 0 0, "+parseInt(n*100)+"% 0, color-stop(0, "+k.barColor+"), color-stop(0.98, "+k.barColor+"), color-stop(1.0, "+k.backgroundColor+"))",color:k.textColor})}if(Object.IsFunc(k.change)){return k.change(i)}})};d=function(h,k){var i,j,l;k=Object.Extend({exclusive:false,sticky:false},k);j=a(h).addClass("accordion");l=null;i=function(r){var o,m,p,q;p=a(r).children().first().filter("*");if(p.len()!==2){throw Exception("accordion row requires 2 elements, not "+(p.len()))}q=p.eq(0).addClass("title");o=p.eq(1).addClass("body").hide();m=false;return q.click(function(){if(k.exclusive){j.find(".body").hide()}if(m){if(!k.sticky){o.hide().removeClass("visible");q.removeClass("selected").trigger("deselect");return m=false}else{o.show().addClass("visible");q.addClass("selected").trigger("select");return m=true}}else{o.show().addClass("visible");q.addClass("selected").trigger("select");return m=true}})};j.bind("DOMNodeInserted",function(m){var o,n;o=j.children().first().filter("*");n=a(m.target).parents().first();return i(n.intersect(o))});j.children().first().filter("*").map(i);return j};b=function(h,l){var o,i,k,n,m;i=a(h).css({position:"relative",top:"0px",left:"0px"}.hide().map(a));o=0;i[o].show();i.next=function(){i[o].hide();o=++o%nn;return i[o].show()};i.activate=function(j){i[o].hide();o=j;return i[j].show()};for(k=n=0,m=i.len();0<=m?n<m:n>m;k=0<=m?++n:--n){i[k].zap("_viewIndex",k.zap("activate",function(){return i.activate(this._viewIndex)}))}return i};e=function(h,j){var l,n,k,m;k=a(h);j=a(j).viewStack();n=k.len();for(l=m=0;0<=n?m<=n:m>=n;l=0<=n?++m:--m){k._tabIndex=l}a(k[0]).addClass("active");return k.click(function(){k.removeClass("active");j.activate(this._tabIndex);return a(this).addClass("active")})};return{name:"UI",$:{UI:{Draggable:c,ProgressBar:f,ViewStack:b,Tabs:e,Accordion:d}},dialog:function(h){return g(this,h)},progressBar:function(h){return f(this,h)},viewStack:function(h){return b(this,h)},tabs:function(h){return e(this,h)},accordion:function(h){return d(this,h)},draggable:function(h){return c(this,h)}}})})(Bling)}).call(this);// Generated by CoffeeScript 1.3.3
(function() {

  (function($) {
    return $.plugin(function() {
      var allNumbers, blingHtml, blingSymbol, closingQuote, commentHtml, firstComment, firstQuote, foldCodeAndQuoted, foldTextAndComments, keywordHtml, keywords, multilineComment, numberHtml, operatorHtml, operators, quotedHtml, singlelineComment, splitComments, splitQuoted, tabHtml, tabs;
      operators = /!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g;
      operatorHtml = "<span class='opr'>$&</span>";
      keywords = /\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g;
      keywordHtml = "<span class='kwd'>$&</span>";
      allNumbers = /\d+\.*\d*/g;
      numberHtml = "<span class='num'>$&</span>";
      blingSymbol = /\$(\(|\.)/g;
      blingHtml = "<span class='bln'>$$</span>$1";
      tabs = /\t/g;
      tabHtml = "&nbsp;&nbsp;";
      singlelineComment = /\/\/.*?(?:\n|$)/;
      multilineComment = /\/\*(?:.|\n)*?\*\//;
      commentHtml = function(comment) {
        if (comment) {
          return "<span class='com'>" + comment + "</span>";
        } else {
          return "";
        }
      };
      quotedHtml = function(quoted) {
        if (quoted) {
          return "<span class='str'>" + quoted + "</span>";
        } else {
          return "";
        }
      };
      firstQuote = function(s, i) {
        var a, b;
        a = s.indexOf('"', i);
        b = s.indexOf("'", i);
        if (a === -1) {
          a = s.length;
        }
        if (b === -1) {
          b = s.length;
        }
        if (a === b) {
          return [null, -1];
        }
        if (a < b) {
          return ['"', a];
        }
        return ["'", b];
      };
      closingQuote = function(s, i, q) {
        var r;
        r = s.indexOf(q, i);
        while (s.charAt(r - 1) === "\\" && (0 < r && r < s.length)) {
          r = s.indexOf(q, r + 1);
        }
        return r;
      };
      splitQuoted = function(s) {
        var i, j, k, n, q, ret;
        i = 0;
        n = s.length;
        ret = [];
        if (!Object.IsString(s)) {
          if (!Object.IsFunction(s.toString)) {
            throw TypeError("invalid string argument to split_quoted");
          } else {
            s = s.toString();
            n = s.length;
          }
        }
        while (i < n) {
          q = firstQuote(s, i);
          j = q[1];
          if (j === -1) {
            ret.push(s.substring(i));
            break;
          }
          ret.push(s.substring(i, j));
          k = closingQuote(s, j + 1, q[0]);
          if (k === -1) {
            throw Error("unclosed quote: " + q[0] + " starting at " + j);
          }
          ret.push(s.substring(j, k + 1));
          i = k + 1;
        }
        return ret;
      };
      firstComment = function(s) {
        var a, b;
        a = s.match(singlelineComment);
        b = s.match(multilineComment);
        if (a === b) {
          return [-1, null];
        }
        if (a === null && b !== null) {
          return [b.index, b[0]];
        }
        if (a !== null && b === null) {
          return [a.index, a[0]];
        }
        if (b.index < a.index) {
          return [b.index, b[0]];
        }
        return [a.index, a[0]];
      };
      splitComments = function(s) {
        var i, j, n, q, ret, ss;
        ret = [];
        i = 0;
        n = s.length;
        while (i < n) {
          ss = s.substring(i);
          q = firstComment(ss);
          j = q[0];
          if (j > -1) {
            ret.push(ss.substring(0, j));
            ret.push(q[1]);
            i += j + q[1].length;
          } else {
            ret.push(ss);
            break;
          }
        }
        return ret;
      };
      foldCodeAndQuoted = function(code, quoted) {
        return code.replace(operators, operatorHtml).replace(allNumbers, numberHtml).replace(keywords, keywordHtml).replace(blingSymbol, blingHtml).replace(tabs, tabHtml) + quotedHtml(quoted);
      };
      foldTextAndComments = function(text, comment) {
        return $(splitQuoted(text)).fold(foldCodeAndQuoted).join('') + commentHtml(comment);
      };
      return {
        name: "PrettyPrint",
        $: {
          prettyPrint: function(js, colors) {
            var cls, css, ret;
            if (Object.IsFunction(js)) {
              js = js.toString();
            }
            if (!Object.IsString(js)) {
              throw TypeError("prettyPrint requires a function or string to format, not '" + Object.Type(js) + "'");
            }
            if ($("style#prettyPrint").length === 0) {
              css = "code.pp .bln { font-size: 17px; } ";
              colors = Object.Extend({
                opr: "#880",
                str: "#008",
                com: "#080",
                kwd: "#088",
                num: "#808",
                bln: "#800"
              }, colors);
              for (cls in colors) {
                css += "code.pp ." + cls + " { color: " + colors[cls] + "; } ";
              }
              $.synth("style#prettyPrint").text(css).appendTo("head");
            }
            return ret = "<code class='pp'>" + ($(splitComments(js)).fold(foldTextAndComments).join('')) + "</code>";
          }
        }
      };
    });
  })(Bling);

}).call(this);
// Generated by CoffeeScript 1.3.3
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  (function($) {
    $.plugin(function() {
      var StateMachine;
      StateMachine = (function() {

        function StateMachine(stateTable) {
          this.reset();
          this.table = stateTable;
          Object.defineProperty(this, "modeline", {
            get: this.table[this._mode]
          });
          Object.defineProperty(this, "mode", {
            set: function(m) {
              var ret;
              this._lastMode = this._mode;
              this._mode = m;
              if (this._mode !== this._lastMode && (this.modeline != null) && 'enter' in this.modeline) {
                ret = this.modeline['enter'].call(this);
                while (Object.IsFunction(ret)) {
                  ret = ret.call(this);
                }
              }
              return m;
            },
            get: function() {
              return this._mode;
            }
          });
        }

        StateMachine.prototype.reset = function() {
          this._mode = null;
          return this._lastMode = null;
        };

        StateMachine.prototype.GO = function(m) {
          return function() {
            return this.mode = m;
          };
        };

        StateMachine.GO = function(m) {
          return function() {
            return this.mode = m;
          };
        };

        StateMachine.prototype.run = function(input) {
          var c, ret, row, _i, _len, _ref;
          this.mode = 0;
          for (_i = 0, _len = input.length; _i < _len; _i++) {
            c = input[_i];
            row = this.modeline;
            if (!(row != null)) {
              ret = null;
            } else if (c in row) {
              ret = row[c];
            } else if ('def' in row) {
              ret = row['def'];
            }
            while (Object.IsFunction(ret)) {
              ret = ret.call(this, c);
            }
          }
          if (Object.IsFunction((_ref = this.modeline) != null ? _ref.eof : void 0)) {
            ret = this.modeline.eof.call(this);
          }
          while (Object.IsFunction(ret)) {
            ret = ret.call(this);
          }
          this.reset();
          return this;
        };

        return StateMachine;

      })();
      return {
        name: "StateMachine",
        $: {
          StateMachine: StateMachine
        }
      };
    });
    return $.plugin(function() {
      var SynthMachine;
      SynthMachine = (function(_super) {

        __extends(SynthMachine, _super);

        SynthMachine.STATE_TABLE = [
          {
            enter: function() {
              this.tag = this.id = this.cls = this.attr = this.val = this.text = "";
              this.attrs = {};
              return this.GO(1);
            }
          }, {
            '"': SynthMachine.GO(6),
            "'": SynthMachine.GO(7),
            "#": SynthMachine.GO(2),
            ".": SynthMachine.GO(3),
            "[": SynthMachine.GO(4),
            " ": SynthMachine.GO(9),
            "+": SynthMachine.GO(11),
            ",": SynthMachine.GO(10),
            def: function(c) {
              return this.tag += c;
            },
            eof: SynthMachine.GO(13)
          }, {
            ".": SynthMachine.GO(3),
            "[": SynthMachine.GO(4),
            " ": SynthMachine.GO(9),
            "+": SynthMachine.GO(11),
            ",": SynthMachine.GO(10),
            def: function(c) {
              return this.id += c;
            },
            eof: SynthMachine.GO(13)
          }, {
            enter: function() {
              if (this.cls.length > 0) {
                return this.cls += " ";
              }
            },
            "#": SynthMachine.GO(2),
            ".": SynthMachine.GO(3),
            "[": SynthMachine.GO(4),
            " ": SynthMachine.GO(9),
            "+": SynthMachine.GO(11),
            ",": SynthMachine.GO(10),
            def: function(c) {
              return this.cls += c;
            },
            eof: SynthMachine.GO(13)
          }, {
            "=": SynthMachine.GO(5),
            "]": function() {
              this.attrs[this.attr] = this.val;
              return this.GO(1);
            },
            def: function(c) {
              return this.attr += c;
            },
            eof: SynthMachine.GO(12)
          }, {
            "]": function() {
              this.attrs[this.attr] = this.val;
              return this.GO(1);
            },
            def: function(c) {
              return this.val += c;
            },
            eof: SynthMachine.GO(12)
          }, {
            '"': SynthMachine.GO(8),
            def: function(c) {
              return this.text += c;
            },
            eof: SynthMachine.GO(12)
          }, {
            "'": SynthMachine.GO(8),
            def: function(c) {
              return this.text += c;
            },
            eof: SynthMachine.GO(12)
          }, {
            enter: function() {
              this.emitText();
              return this.GO(0);
            }
          }, {
            enter: function() {
              this.emitNode();
              return this.GO(0);
            }
          }, {
            enter: function() {
              this.emitNode();
              this.parent = null;
              return this.GO(0);
            }
          }, {
            enter: function() {
              var _ref;
              this.emitNode();
              this.parent = (_ref = this.parent) != null ? _ref.parentNode : void 0;
              return this.GO(0);
            }
          }, {
            enter: function() {
              return $.log("Error in synth expression: " + this.input);
            }
          }, {
            enter: function() {
              if (this.tag.length) {
                this.emitNode();
              }
              if (this.text.length) {
                return this.emitText();
              }
            }
          }
        ];

        function SynthMachine() {
          SynthMachine.__super__.constructor.call(this, SynthMachine.STATE_TABLE);
          this.fragment = this.parent = document.createDocumentFragment();
        }

        SynthMachine.prototype.emitNode = function() {
          var k, node;
          node = document.createElement(this.tag);
          node.id = this.id || null;
          node.className = this.cls || null;
          for (k in this.attrs) {
            node.setAttribute(k, this.attrs[k]);
          }
          this.parent.appendChild(node);
          return this.parent = node;
        };

        SynthMachine.prototype.emitText = function() {
          this.parent.appendChild($.HTML.parse(this.text));
          return this.text = "";
        };

        return SynthMachine;

      })($.StateMachine);
      return {
        name: "Synth",
        $: {
          synth: function(expr) {
            var s;
            s = new SynthMachine();
            s.run(expr);
            if (s.fragment.childNodes.length === 1) {
              return $(s.fragment.childNodes[0]);
            } else {
              return $(s.fragment);
            }
          }
        }
      };
    });
  })(Bling);

}).call(this);
// Generated by CoffeeScript 1.3.3
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  (function($) {
    var engines, match_forward;
    engines = {};
    $.plugin(function() {
      var current_engine, template;
      current_engine = null;
      engines = {};
      template = {
        register_engine: function(name, render_func) {
          engines[name] = render_func;
          if (!(current_engine != null)) {
            return current_engine = name;
          }
        },
        render: function(text, args) {
          if (current_engine in engines) {
            return engines[current_engine](text, args);
          }
        }
      };
      template.__defineSetter__('engine', function(v) {
        if (!v in engines) {
          throw new Error("invalid template engine: " + v + " not one of " + (Object.Keys(engines)));
        } else {
          return current_engine = v;
        }
      });
      template.__defineGetter__('engine', function() {
        return current_engine;
      });
      return {
        name: 'Template',
        $: {
          template: template
        }
      };
    });
    $.template.register_engine('null', (function() {
      return function(text, values) {
        return text;
      };
    })());
    match_forward = function(text, find, against, start, stop) {
      var count, i, t, _i;
      if (stop == null) {
        stop = -1;
      }
      count = 1;
      if (stop < 0) {
        stop = text.length + 1 + stop;
      }
      for (i = _i = start; start <= stop ? _i < stop : _i > stop; i = start <= stop ? ++_i : --_i) {
        t = text[i];
        if (t === against) {
          count += 1;
        } else if (t === find) {
          count -= 1;
        }
        if (count === 0) {
          return i;
        }
      }
      return -1;
    };
    $.template.register_engine('pythonic', (function() {
      var chunk_re, compile, render, type_re;
      type_re = /([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;
      chunk_re = /%[\(\/]/;
      compile = function(text) {
        var chunks, end, i, j, key, match, n, rest, ret, _i;
        chunks = text.split(chunk_re);
        n = chunks.length;
        ret = [chunks[0]];
        j = 1;
        for (i = _i = 1; 1 <= n ? _i < n : _i > n; i = 1 <= n ? ++_i : --_i) {
          end = match_forward(chunks[i], ')', '(', 0, -1);
          if (end === -1) {
            return "Template syntax error: unmatched '%(' starting at: " + (chunks[i].substring(0, 15));
          }
          key = chunks[i].substring(0, end);
          rest = chunks[i].substring(end);
          match = type_re.exec(rest);
          if (match === null) {
            return "Template syntax error: invalid type specifier starting at '" + rest + "'";
          }
          rest = match[4];
          ret[j++] = key;
          ret[j++] = match[1] | 0;
          ret[j++] = match[2] | 0;
          ret[j++] = match[3];
          ret[j++] = rest;
        }
        return ret;
      };
      compile.cache = {};
      render = function(text, values) {
        var cache, fixed, i, j, key, n, output, pad, rest, type, value, _i, _ref, _ref1;
        cache = compile.cache[text];
        if (!(cache != null)) {
          cache = compile.cache[text] = compile(text);
        }
        output = [cache[0]];
        j = 1;
        n = cache.length;
        for (i = _i = 1, _ref = n - 5; _i <= _ref; i = _i += 5) {
          _ref1 = cache.slice(i, (i + 4) + 1 || 9e9), key = _ref1[0], pad = _ref1[1], fixed = _ref1[2], type = _ref1[3], rest = _ref1[4];
          value = values[key];
          if (!(value != null)) {
            value = "missing value: " + key;
          }
          switch (type) {
            case 'd':
              output[j++] = "" + parseInt(value, 10);
              break;
            case 'f':
              output[j++] = parseFloat(value).toFixed(fixed);
              break;
            case 's':
              output[j++] = "" + value;
              break;
            default:
              output[j++] = "" + value;
          }
          if (pad > 0) {
            output[j] = String.PadLeft(output[j], pad);
          }
          output[j++] = rest;
        }
        return output.join("");
      };
      return render;
    })());
    return $.template.register_engine('js-eval', (function() {
      var TemplateMachine;
      TemplateMachine = (function(_super) {

        __extends(TemplateMachine, _super);

        function TemplateMachine() {
          return TemplateMachine.__super__.constructor.apply(this, arguments);
        }

        TemplateMachine.STATE_TABLE = [
          {
            enter: function() {
              this.data = [];
              return this.GO(1);
            }
          }, {}
        ];

        return TemplateMachine;

      })($.StateMachine);
      return function(text, values) {
        return text;
      };
    })());
  })(Bling);

}).call(this);
// Generated by CoffeeScript 1.3.3
(function() {

  (function($) {
    return $.plugin(function() {
      var parseArray, parseObject, parseOne;
      parseOne = function(data) {
        var extra, i, item, len, type;
        i = data.indexOf(":");
        if (i > 0) {
          len = parseInt(data.slice(0, i), 10);
          item = data.slice(i + 1, i + 1 + len);
          type = data[i + 1 + len];
          extra = data.slice(i + len + 2);
          item = (function() {
            switch (type) {
              case "#":
                return Number(item);
              case "'":
                return String(item);
              case "!":
                return item === "true";
              case "~":
                return null;
              case "]":
                return parseArray(item);
              case "}":
                return parseObject(item);
            }
          })();
          return [item, extra];
        }
        return void 0;
      };
      parseArray = function(x) {
        var data, one, _ref;
        data = [];
        while (x.length > 0) {
          _ref = parseOne(x), one = _ref[0], x = _ref[1];
          data.push(one);
        }
        return data;
      };
      parseObject = function(x) {
        var data, key, value, _ref, _ref1;
        data = {};
        while (x.length > 0) {
          _ref = parseOne(x), key = _ref[0], x = _ref[1];
          _ref1 = parseOne(x), value = _ref1[0], x = _ref1[1];
          data[key] = value;
        }
        return data;
      };
      return {
        name: 'TNET',
        $: {
          TNET: {
            stringify: function(x) {
              var data, type, y, _ref;
              _ref = (function() {
                switch (Object.Type(x)) {
                  case "number":
                    return [String(x), "#"];
                  case "string":
                    return [x, "'"];
                  case "function":
                    return [String(x), "'"];
                  case "boolean":
                    return [String(!!x), "!"];
                  case "null":
                    return ["", "~"];
                  case "undefined":
                    return ["", "~"];
                  case "array":
                    return [
                      ((function() {
                        var _i, _len, _results;
                        _results = [];
                        for (_i = 0, _len = x.length; _i < _len; _i++) {
                          y = x[_i];
                          _results.push($.TNET.stringify(y));
                        }
                        return _results;
                      })()).join(''), "]"
                    ];
                  case "object":
                    return [
                      ((function() {
                        var _results;
                        _results = [];
                        for (y in x) {
                          _results.push($.TNET.stringify(y) + $.TNET.stringify(x[y]));
                        }
                        return _results;
                      })()).join(''), "}"
                    ];
                }
              })(), data = _ref[0], type = _ref[1];
              return (data.length | 0) + ":" + data + type;
            },
            parse: function(x) {
              var _ref;
              return (_ref = parseOne(x)) != null ? _ref[0] : void 0;
            }
          }
        }
      };
    });
  })(Bling);

}).call(this);
// Generated by CoffeeScript 1.3.3
(function() {

  (function($) {
    return $.plugin(function() {
      var Accordion, Dialog, Draggable, ProgressBar, Tabs, ViewStack;
      Dialog = function(selector, opts) {
        var dialog;
        opts = Object.Extend({
          autoOpen: false,
          draggable: true
        }, opts);
        dialog = $(selector).addClass("dialog");
        if (opts.draggable) {
          dialog.draggable();
        }
        if (opts.autoOpen) {
          dialog.show().center();
        }
        dialog.find("button.close, .close-button").bind("click touchstart", function() {
          dialog.hide();
          return false;
        });
        return dialog;
      };
      Draggable = function(selector, opts) {
        var dragObject, handle, moving, oX, oY;
        opts = Object.Extend({
          handleCSS: {}
        }, opts);
        opts.handleCSS = Object.Extend({
          position: "absolute",
          top: "0px",
          left: "0px",
          width: "100%",
          height: "6px"
        }, opts.handleCSS);
        dragObject = $(selector);
        moving = false;
        oX = oY = 0;
        handle = $.synth("div.handle").defaultCss({
          background: "-webkit-gradient(linear, 50% 0%, 50% 100%, from(#eee), color-stop(0.25, #bbb), color-stop(0.3, #eee), color-stop(0.5, #eee), to(#bbb))",
          height: "6px",
          "border-radius": "3px",
          cursor: "move"
        }.css(opts.handleCSS.bind('mousedown, touchstart', function(evt) {
          moving = true;
          oX || (oX = evt.pageX);
          oY || (oY = evt.pageY);
          return false;
        })));
        $(document.bind('mousemove, touchmove', function(evt) {
          var dX, dY;
          if (moving) {
            dX = evt.pageX - oX;
            dY = evt.pageY - oY;
            dragObject.transform({
              translate: [dX, dY]
            }, 0).trigger('drag', {
              dragObject: dragObject
            });
            return false;
          }
        })).bind('mouseup, touchend', function(evt) {
          var pos;
          if (moving) {
            moving = false;
            pos = handle.position()[0];
            return $(document.elementFromPoint(pos.left, pos.top - 1).trigger('drop', {
              dropObject: dragObject
            }));
          }
        });
        return dragObject.addClass("draggable").css({
          position: "relative",
          "padding-top": dragObject.css("padding-top").map(Number.AtLeast(parseInt(opts.handleCSS.height, 10))).px().first()
        }.append(handle));
      };
      ProgressBar = function(selector, opts) {
        var node, _bg, _color, _progress;
        opts = Object.Extend({
          change: Function.Empty,
          backgroundColor: "#fff",
          barColor: "rgba(0,128,0,0.5)",
          textColor: "white",
          reset: false
        }, opts);
        node = $(selector).addClass('progress-bar');
        _progress = 0.0;
        if (opts.reset) {
          _bg = node.css("background").first();
          _color = node.css("color").first();
        }
        return node.zap('updateProgress', function(pct) {
          while (pct > 1) {
            pct /= 100;
          }
          _progress = pct;
          if (pct === 1 && opts.reset) {
            node.css("background", _bg).css("color", _color);
          } else {
            node.css({
              background: "-webkit-gradient(linear, 0 0, " + parseInt(pct * 100) + "% 0, " + "color-stop(0, " + opts.barColor + "), " + "color-stop(0.98, " + opts.barColor + "), " + "color-stop(1.0, " + opts.backgroundColor + "))",
              color: opts.textColor
            });
          }
          if (Object.IsFunc(opts.change)) {
            return opts.change(_progress);
          }
        });
      };
      Accordion = function(selector, opts) {
        var initRow, node, selectedChild;
        opts = Object.Extend({
          exclusive: false,
          sticky: false
        }, opts);
        node = $(selector).addClass("accordion");
        selectedChild = null;
        initRow = function(n) {
          var body, bodyVisible, t, title;
          t = $(n).children().first().filter("*");
          if (t.len() !== 2) {
            throw Exception("accordion row requires 2 elements, not " + (t.len()));
          }
          title = t.eq(0).addClass("title");
          body = t.eq(1).addClass("body").hide();
          bodyVisible = false;
          return title.click(function() {
            if (opts.exclusive) {
              node.find(".body").hide();
            }
            if (bodyVisible) {
              if (!opts.sticky) {
                body.hide().removeClass("visible");
                title.removeClass("selected").trigger("deselect");
                return bodyVisible = false;
              } else {
                body.show().addClass("visible");
                title.addClass("selected").trigger("select");
                return bodyVisible = true;
              }
            } else {
              body.show().addClass("visible");
              title.addClass("selected").trigger("select");
              return bodyVisible = true;
            }
          });
        };
        node.bind("DOMNodeInserted", function(evt) {
          var directChildren, parentsOfInserted;
          directChildren = node.children().first().filter("*");
          parentsOfInserted = $(evt.target).parents().first();
          return initRow(parentsOfInserted.intersect(directChildren));
        });
        node.children().first().filter("*").map(initRow);
        return node;
      };
      ViewStack = function(selector, opts) {
        var active, items, j, _i, _ref;
        items = $(selector).css({
          position: "relative",
          top: "0px",
          left: "0px"
        }.hide().map($));
        active = 0;
        items[active].show();
        items.next = function() {
          items[active].hide();
          active = ++active % nn;
          return items[active].show();
        };
        items.activate = function(k) {
          items[active].hide();
          active = k;
          return items[k].show();
        };
        for (j = _i = 0, _ref = items.len(); 0 <= _ref ? _i < _ref : _i > _ref; j = 0 <= _ref ? ++_i : --_i) {
          items[j].zap("_viewIndex", j.zap("activate", function() {
            return items.activate(this._viewIndex);
          }));
        }
        return items;
      };
      Tabs = function(selector, views) {
        var i, nn, tabs, _i;
        tabs = $(selector);
        views = $(views).viewStack();
        nn = tabs.len();
        for (i = _i = 0; 0 <= nn ? _i <= nn : _i >= nn; i = 0 <= nn ? ++_i : --_i) {
          tabs._tabIndex = i;
        }
        $(tabs[0]).addClass("active");
        return tabs.click(function() {
          tabs.removeClass("active");
          views.activate(this._tabIndex);
          return $(this).addClass("active");
        });
      };
      return {
        name: 'UI',
        $: {
          UI: {
            Draggable: Draggable,
            ProgressBar: ProgressBar,
            ViewStack: ViewStack,
            Tabs: Tabs,
            Accordion: Accordion
          }
        },
        dialog: function(opts) {
          return Dialog(this, opts);
        },
        progressBar: function(opts) {
          return ProgressBar(this, opts);
        },
        viewStack: function(opts) {
          return ViewStack(this, opts);
        },
        tabs: function(views) {
          return Tabs(this, views);
        },
        accordion: function(opts) {
          return Accordion(this, opts);
        },
        draggable: function(opts) {
          return Draggable(this, opts);
        }
      };
    });
  })(Bling);

}).call(this);
// Generated by CoffeeScript 1.3.3
(function() {
  var __slice = [].slice;

  $.plugin(function() {
    var UNIT_RE, a, b, conv, convertAll, convertUnits, fillIn, parseUnits, trick, unit_scalar, unit_vector, units, _i, _j, _len, _len1;
    units = ["px", "pt", "pc", "em", "%", "in", "cm", "mm", "ex", ""];
    UNIT_RE = /(\d+\.*\d*)(px|pt|pc|em|%|in|cm|mm|ex)/;
    parseUnits = function(s) {
      return UNIT_RE.exec(s)[2](UNIT_RE.test(s) ? void 0 : "");
    };
    conv = function(a, b) {
      return conv[a][b]();
    };
    trick = function(x) {
      return function() {
        return x;
      };
    };
    for (_i = 0, _len = units.length; _i < _len; _i++) {
      a = units[_i];
      for (_j = 0, _len1 = units.length; _j < _len1; _j++) {
        b = units[_j];
        (conv[a] || (conv[a] = {}))[b] = trick(+(a === b || a === "" || b === ""));
      }
    }
    conv["in"].pt = function() {
      return 72;
    };
    conv["in"].px = function() {
      return 96;
    };
    conv["in"].cm = function() {
      return 2.54;
    };
    conv.pc.pt = function() {
      return 12;
    };
    conv.cm.mm = function() {
      return 10;
    };
    conv.em.px = function() {
      var w, x;
      x = $("<span style='font-size:1em;visibility:hidden'>x</span>").appendTo("body");
      w = x.width().first();
      x.remove();
      return w;
    };
    conv.ex.px = function() {
      var w, x;
      x = $("<span style='font-size:1ex;visibility:hidden'>x</span>").appendTo("body");
      w = x.width().first();
      x.remove();
      return w;
    };
    conv.ex.em = function() {
      return 2;
    };
    fillIn = function() {
      var c, _k, _len2, _results;
      _results = [];
      for (_k = 0, _len2 = units.length; _k < _len2; _k++) {
        a = units[_k];
        _results.push((function() {
          var _l, _len3, _results1;
          _results1 = [];
          for (_l = 0, _len3 = units.length; _l < _len3; _l++) {
            b = units[_l];
            if (!conv(a, b) && conv(b, a)) {
              console.log("found inverse: " + a + "." + b);
              conv[a][b] = trick(1.0 / conv(b, a));
            }
            _results1.push((function() {
              var _len4, _m, _results2;
              _results2 = [];
              for (_m = 0, _len4 = units.length; _m < _len4; _m++) {
                c = units[_m];
                if (!conv(a, c) && conv(a, b) && conv(b, c)) {
                  console.log("found induction: " + a + "." + c);
                  _results2.push(conv[a][c] = trick(conv(a, b) * conv(b, c)));
                } else {
                  _results2.push(void 0);
                }
              }
              return _results2;
            })());
          }
          return _results1;
        })());
      }
      return _results;
    };
    fillIn();
    fillIn();
    convertUnits = function(number, unit) {
      return parseFloat(number) * conv[parseUnits(number)][unit]() + unit;
    };
    $.assert(convertUnits("300px", "cm") === "10cm");
    convertAll = function(to, a) {
      var i, _k, _ref, _results;
      _results = [];
      for (i = _k = 0, _ref = a.length; 0 <= _ref ? _k < _ref : _k > _ref; i = 0 <= _ref ? ++_k : --_k) {
        _results.push(a[i] = convertTo(to, a[i]));
      }
      return _results;
    };
    Object.Type.register("units", {
      match: function(x) {
        return UNIT_RE.test(x);
      }
    });
    unit_scalar = function(f) {
      return function() {
        var a, unit;
        a = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
        convertAll(unit = parseUnits(this[0]), this);
        return (f.apply(this, a)) + unit;
      };
    };
    unit_vector = function(f) {
      return function() {
        var a, u;
        a = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
        u = this.map(parseUnits);
        return f.apply(this.floats(), a).map(function() {});
      };
    };
    return {
      min: unit_scalar(function() {
        return this.reduce(function(a) {
          return Math.min(parseFloat(this), a);
        });
      }),
      max: unit_scalar(function() {
        return this.reduce(function(a) {
          return Math.max(parseFloat(this), a);
        });
      }),
      sum: unit_scalar(function() {
        return this.reduce(function(a) {
          return parseFloat(this) + a;
        });
      }),
      mean: unit_scalar(function() {
        return parseFloat(this.sum()) / this.length;
      }),
      magnitude: unit_scalar(function() {
        return Math.sqrt(this.floats().squares().sum());
      }),
      squares: function() {
        return this.map(function() {
          var x;
          return (x = parseFloat(this)) * x;
        });
      },
      scale: function(n) {
        return this.map(function() {
          return n * parseFloat(this);
        });
      },
      add: function(d) {
        return this.map(function() {
          return d + this;
        });
      },
      normalize: function() {
        return this.scale(1 / this.magnitude());
      }
    };
  });

}).call(this);
// Generated by CoffeeScript 1.3.3
(function() {

  $.plugin(function() {
    var BackgroundQueue, EOF, data, i, x, _i;
    EOF = function() {
      return "EOF";
    };
    BackgroundQueue = function(opts) {
      opts = extend({
        item: function() {
          return EOF;
        },
        action: Function.Identity,
        latency: 10
      }, opts);
      return extend(new $.EventEmitter(), {
        run: function() {
          var r,
            _this = this;
          r = function() {
            var item;
            if ((item = opts.action(opts.item())) !== EOF) {
              _this.emit("data", item);
              return setTimeout(r, opts.latency);
            }
          };
          return setTimeout(r, opts.latency);
        }
      });
    };
    for (x = _i = 0; _i < 1000; x = ++_i) {
      data = x;
    }
    i = 0;
    return BackgroundQueue({
      item: function() {
        return data[i++](i < data.length ? void 0 : EOF);
      },
      action: function(item) {
        return (item * item) - 1;
      },
      latency: 10
    }).on("data", function(x) {
      return console.log("data:", x.on("error", function(x) {
        return console.log("error:", x.run());
      }));
    });
  });

}).call(this);
