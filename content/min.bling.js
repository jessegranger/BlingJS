Bling.extend=function(d,f,b){for(var c in f)if(b&&d[c]!=undefined)for(var a in b)d[c][a]=f[c][a];else d[c]=f[c];return d};Bling.extend(Function.prototype,{inherit:function(d){this.prototype=new d;return this.prototype.constructor=this},bound:function(d,f){function b(){return c.apply(d,f?f:arguments)}var c=this;b.toString=function(){return"bound-method of "+d+"."+c.name+"(...) { [code] }"};return b}});
Bling.extend(window,{isType:function(d,f){return!d?f===d:typeof f==="string"?d.__proto__.constructor.name==f:d.__proto__.constructor===f},isSubtype:function(d,f){return d==null?d==f:d.__proto__==null?false:typeof f==="string"?d.__proto__.constructor.name==f:d.__proto__.constructor==f?true:isSubtype(d.__proto__,f)},isString:function(d){return typeof d=="string"||isSubtype(d,String)},isNumber:isFinite,isFunc:function(d){return typeof d=="function"||isType(d,Function)},isNode:function(d){return d?d.nodeType>
0:false},isFragment:function(d){return d?d.nodeType==11:false},isArray:function(d){return d?Function.ToString(d)=="[object Array]"||isSubtype(d,Array):false},isObject:function(d){return typeof d=="object"},hasValue:function(d){return d!=null}});var OtoS=Object.prototype.toString;Array.Slice=function(d,f,b){var c=[],a=0,e=d.length;b=b==undefined?e:b<0?e+b:b;for(f=f==undefined?0:f<0?e+f:f;f<b;)c[a++]=d[f++];return c};Number.Px=function(d,f){return parseInt(d)+(f|0)+"px"};
Bling.extend(Function,{Empty:function(){},NotNull:function(d){return d!=null},NotUndefined:function(d){return d!=undefined},IndexFound:function(d){return d>-1},ReduceAnd:function(d){return d&&this},UpperLimit:function(d){return function(f){return Math.min(d,f)}},LowerLimit:function(d){return function(f){return Math.max(d,f)}},ToString:function(d){return OtoS.apply(d)},Px:function(d){return function(){return Number.Px(this,d)}}});
Bling.extend(String,{HtmlEscape:function(d){return d.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"&nbsp;&nbsp;")},PadLeft:function(d,f,b){for(b=b||" ";d.length<f;)d=b+d;return d},Splice:function(){var d=arguments[0],f=arguments[1],b=arguments[2],c=Array.Slice(arguments,3).join("");return d.substring(0,f)+c+d.substring(b)}});
(function(){function d(h){var k=0,m=h.length,p=[],n=-1,j=-1,l=null;if(!isString(h))if(isFunc(h.toString)){h=h.toString();m=h.length}else throw TypeError("invalid string argument to extract_quoted");for(;k<m;){n=h;j=k;l=n.indexOf('"',j);j=n.indexOf("'",j);if(l==-1)l=n.length;if(j==-1)j=n.length;l=l==j?[null,-1]:l<j?['"',l]:["'",j];n=l[1];if(n==-1){p.push(h.substring(k));break}p.push(h.substring(k,n));k=h;j=l[0];for(var o=k.indexOf(j,n+1);k.charAt(o-1)=="\\"&&o<k.length&&o>0;)o=k.indexOf(j,o+1);j=o;
if(j==-1)throw Error("unmatched "+l[0]+" at "+n);p.push(h.substring(n,j+1));k=j+1}return p}function f(h){for(var k=[],m=0,p=0,n=h.length,j=null,l=null;m<n;){j=l=h.substring(m);p=j.match(a);j=j.match(e);j=p==j?[-1,null]:p==null&&j!=null?[j.index,j[0]]:p!=null&&j==null?[p.index,p[0]]:j.index<p.index?[j.index,j[0]]:[p.index,p[0]];p=j[0];if(p>-1){k.push(l.substring(0,p));k.push(j[1]);m+=p+j[1].length}else{k.push(l);break}}return k}var b=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g,
c=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b/g,a=/\/\/.*?\n/,e=/\/\*(?:.|\n)*?\*\//,g=/\d+\.*\d*/g;Function.PrettyPrint=function(h,k){if(isFunc(h))h=h.toString();if(!isString(h))throw TypeError("prettyPrint requires a function or string to format");if($("style#pp-injected").length==0){k=Bling.extend({opr:"#880",str:"#008",
com:"#080",kwd:"#088",num:"#808"},k);var m="<style id='pp-injected'> ",p;for(p in k)m+="pre.pp ."+p+" { color: "+k[p]+"; }";m+="</style>";$("head").append(m)}return"<pre class='pp'>"+$(f(h)).fold(function(n,j){return $(d(n)).fold(function(l,o){return l.replace(b,"<span class='opr'>$&</span>").replace(g,"<span class='num'>$&</span>").replace(c,"<span class='kwd'>$&</span>").replace(/\t/g,"&nbsp;&nbsp;")+(o?"<span class='str'>"+o+"</span>":"")}).join("")+(j?"<span class='com'>"+j+"</span>":"")}).join("")+
"</pre>"}})();
function Bling(d,f){if(isBling(d))return d;f=f||document;if(d===undefined)return Bling.__init__(d,f,[]);if(typeof d==="string"){d=d.trimLeft();if(d[0]=="<")return Bling.__init__(d,f,[Bling.HTML.parse(d)]);if(isBling(f))return f.reduce(function(c,a){c.union(a.querySelectorAll(d))},Bling.__init__(d,f,[]));if(f.querySelectorAll!=undefined)try{return Bling.__init__(d,f,f.querySelectorAll(d))}catch(b){console.log("err",b,d,f);return null}throw Error("invalid parameters: "+d+", "+f);}if(typeof d==="number")return Bling.__init__(d,
f,Array(d));if(d===window||isNode(d))return Bling.__init__(d,f,[d]);if(d.length!=undefined)return Bling.__init__(d,f,d);return Bling.__init__(d,f,[d])}Bling.inherit(Array);function isBling(d){return isType(d,Bling)}Bling.__init__=function(d,f,b){b.__proto__=Bling.prototype;b.selector=d;b.context=f;return b};
Bling.addOps=function(){for(var d=0,f=arguments.length;d<f;d++){var b=arguments[d];if(isFunc(b)){if(b.name==null)throw Error("cannot extend with an anonymous method (must have a name)");Bling.prototype[b.name]=b}else if(isObject(b))Bling.extend(Bling.prototype,b);else throw Error("can only extend by an object or function, not:"+typeof b);}};Bling.module=function(d,f){var b=f(),c=arguments.callee;c.order.push(d);c[d]=b;Bling.addOps(b)};Bling.module.order=[];
Bling.module("Core",function(){function d(b){if(isObject(b)&&isNumber(b))return Number(b);return b}var f=new function(){this.queue=[];this.next=function(){this.queue.length>0&&this.queue.shift()()}.bound(this);this.schedule=function(b,c){if(isFunc(b)){var a=this.queue.length;b.order=c+(new Date).getTime();if(a==0||b.order>this.queue[a-1].order)this.queue[a]=b;else for(var e=0;e<a;e++)this.queue[e].order>b.order&&this.queue.splice(e,0,b);setTimeout(this.next,c)}}};return{each:function(b){for(var c=
-1,a=this.len(),e=null;++c<a;){e=this[c];b.call(e,e)}return this},map:function(b){var c=this.len(),a=Bling(c),e=0,g=null;a.context=this;for(a.selector=b;e<c;e++){g=this[e];try{a[e]=b.call(g,g)}catch(h){if(isType(h,TypeError))a[e]=b(g);else throw h;}}return a},reduce:function(b,c){if(!b)return this;var a=c,e=this;if(c==null){a=this[0];e=this.skip(1)}e.each(function(){a=b.call(this,a,this)});return a},filter:function(b){var c=0,a=-1,e=this.length,g=Bling(e),h=null;g.context=this;for(g.selector=b;c<
e;c++)if(h=this[c])if(isFunc(b)&&b.call(h,h)||isString(b)&&h.webkitMatchesSelector&&h.webkitMatchesSelector(b))g[++a]=h;return g},matches:function(b){return this.map(function(){if(this.webkitMatchesSelector)return this.webkitMatchesSelector(b);return false})},union:function(b){var c=Bling(),a=0,e=0,g=null;c.context=this.context;c.selector=this.selector;for(this.each(function(){c[a++]=this});g=b[e++];)c.contains(g)||(c[a++]=g);return c},intersect:function(b){var c=Bling(),a=0,e=0,g=this.length,h=b.length;
c.context=this.context;c.selector=this.selector;if(isBling(b))for(;a<g;a++){if(b.contains(this[a]))c[c.length]=this[a]}else for(a=0;a<g;a++)for(;e<h;e++)if(this[a]==b[e])c[c.length]=this[a];return c},distinct:function(){return this.union(this)},contains:function(b){return this.count(b)>0},count:function(b){if(b==undefined)return this.len();b=d(b);if(isObject(b)&&isNumber(b))b=Number(b);var c=0;this.each(function(){var a=this;if(isObject(a)&&isNumber(a))a=Number(a);a==b&&c++});return c},zip:function(){function b(n){var j;
return function(){j=this[n];return isFunc(j)?j.bound(this):j}}function c(n){var j=n.indexOf(".");return j>-1?this.zip(n.substr(0,j)).zip(n.substr(j+1)):this.map(b(n))}switch(arguments.length){case 0:return this;case 1:return c.call(this,arguments[0]);default:var a={},e=Bling(),g=arguments.length,h=this.length,k=0,m=0,p=null;for(k=0;k<g;k++)a[k]=c.call(this,arguments[k]);for(k=0;k<h;k++){g={};for(p in a)g[p]=a[p].shift();e[m++]=g}return e}},zap:function(b,c){if(!b)return this;var a=b.indexOf(".");
return a>-1?this.zip(b.substr(0,a)).zap(b.substr(a+1),c):isArray(c)?this.each(function(e){e[b]=c[++a]}):this.each(function(){this[b]=c})},take:function(b){b=Math.min(b|0,this.len());var c=Bling(b),a=-1;c.context=this.context;for(c.selector=this.selector;++a<b;)c[a]=this[a];return c},skip:function(b){b=Math.min(this.len(),Math.max(0,b|0));var c=Bling(b);i=0;nn=this.len()-b;c.context=this.context;for(c.selector=this.selector;i<nn;i++)c[i]=this[i+b];return c},last:function(b){return b?this.skip(this.len()-
b):this[this.length-1]},first:function(b){return b?this.take(b):this[0]},join:function(b){if(this.length==0)return"";return this.reduce(function(c){return c+b+this})},slice:function(b,c){var a=Bling(Array.Slice(this,b,c));a.context=this.context;a.selector=this.selector;return a},concat:function(b){for(var c=this.len()-1,a=-1,e=b.length;a<e;)this[++c]=b[++a];return this},weave:function(b){var c=b.length,a=this.length,e=Bling(2*Math.max(a,c));i=a-1;e.context=this.context;for(e.selector=this.selector;i>=
0;i--)e[i*2+1]=this[i];for(;++i<c;)e[i*2]=b[i];return e},fold:function(b){var c=this.len(),a=0,e=Bling(Math.ceil(c/2)),g=0;e.context=this.context;e.selector=this.selector;for(g=0;g<c-1;g+=2)e[a++]=b.call(this,this[g],this[g+1]);if(c%2==1)e[a++]=b.call(this,this[c-1],undefined);return e},flatten:function(){var b=Bling(),c=this.len(),a=null,e=0,g=0,h=0,k=0;b.context=this.context;for(b.selector=this.selector;g<c;g++){a=this[g];h=0;for(e=a.length;h<e;)b[k++]=a[h++]}return b},call:function(){return this.apply(null,
arguments)},apply:function(b,c){return this.map(function(){if(isFunc(this))return this.apply(b,c);return this})},toString:function(){return Bling.symbol+"(["+this.map(function(){return this==undefined||this==window?"undefined":this==null?"null":this.toString().replace(/\[object (\w+)\]/,"$1")}).join(", ")+"])"},future:function(b,c){c&&f.schedule(c.bound(this),b);return this},log:function(b){b?console.log(b,this,this.length+" items"):console.log(this,this.length+" items");return this},len:function(){for(var b=
this.length;b>-1&&this[--b]==undefined;);return b+1}}});
Bling.module("Html",function(){function d(a,e){a&&e&&a.parentNode.insertBefore(e,a)}function f(a){a=isNode(a)?a:isBling(a)?a.toFragment():isString(a)?Bling(a).toFragment():isFunc(a.toString)?Bling(a.toString()).toFragment():undefined;Bling.nextguid=Bling.nextguid||1;if(a.guid==null)a.guid=Bling.nextguid++;return a}function b(a){for(var e=a.cloneNode(),g=0;g<a.childNodes.length;g++)e.appendChild(b(a.childNodes[g])).parentNode=e;return e}var c=null;Bling.HTML={parse:function(a){var e=document.createElement("div");
e.innerHTML=a;a=document.createDocumentFragment();for(var g=0,h=e.childNodes.length;g<h;g++)a.appendChild(e.removeChild(e.childNodes[0]));return h==1?a.removeChild(a.childNodes[0]):a},stringify:function(a){a=b(a);var e=document.createElement("div");e.appendChild(a);var g=e.innerHTML;e.removeChild(a);a.parentNode=null;return g},escape:function(a){c=c||Bling("<div>&nbsp;</div>").child(0);a=c.zap("data",a).zip("parentNode.innerHTML").first();c.zap("data","");return a}};Bling.Color={fromCss:function(a){a=
a||this;if(isString(a)){var e=document.createElement("div");e.style.display="none";e.style.color=a;$(document.body).append(e);a=window.getComputedStyle(e).getPropertyValue("color");$(e).remove();if(a){a=a.slice(a.indexOf("(")+1,a.indexOf(")")).split(", ");if(a.length==3)a[3]=1;return Bling(a).floats()}}},toCss:function(a){function e(g){g=g.map(Function.UpperLimit(255)).map(Function.LowerLimit(0));g[3]=Math.min(1,g[3]);return"rgba("+g.join(", ")+")"}a=a||this;return isBling(a[0])?a.map(e):e(a)},invert:function(a){var e=
Bling(4);e[0]=255-a[0];e[1]=255-a[1];e[2]=255-a[2];e[3]=a[3];return e}};return{html:function(a){return a==undefined?this.zip("innerHTML"):isString(a)?this.zap("innerHTML",a):isBling(a)?this.html(a.toFragment()):isNode(a)?this.each(function(){for(this.replaceChild(this.childNodes[0],a);this.childNodes.length>1;)this.removeChild(this.childNodes[1])}):undefined},append:function(a){if(a==null)return this;a=f(a);var e=this.zip("appendChild");e.take(1).call(a);e.skip(1).each(function(){this(b(a))});return this},
appendTo:function(a){if(a==null)return this;Bling(a).append(this);return this},prepend:function(a){if(a==null)return this;a=f(a);this.take(1).each(function(){d(this.childNodes[0],a)});this.skip(1).each(function(){d(this.childNodes[0],b(a))});return this},prependTo:function(a){if(a==null)return this;Bling(a).prepend(this);return this},before:function(a){if(a==null)return this;a=f(a);this.take(1).each(function(){d(this,a)});this.skip(1).each(function(){d(this,b(a))});return this},after:function(a){if(a==
null)return this;a=f(a);this.take(1).each(function(){this.parentNode.insertBefore(a,this.nextSibling)});this.skip(1).each(function(){this.parentNode.insertBefore(b(a),this.nextSibling)});return this},wrap:function(a){a=f(a);if(isFragment(a))throw Error("cannot wrap something with a fragment");return this.map(function(e){if(isFragment(e))a.appendChild(e);else if(isNode(e)){var g=e.parentNode;if(g){var h=document.createElement("dummy");a.appendChild(g.replaceChild(h,e));g.replaceChild(a,h)}else a.appendChild(e)}return e})},
unwrap:function(){return this.each(function(){this.parentNode&&this.parentNode.parentNode&&this.parentNode.parentNode.replaceChild(this,this.parentNode)})},replace:function(a){a=f(a);var e=Bling(),g=-1;this.take(1).each(function(){if(this.parentNode){this.parentNode.replaceChild(a,this);e[++g]=a}});this.skip(1).each(function(){if(this.parentNode){var h=b(a);this.parentNode.replaceChild(h,this);e[++g]=h}});return e},attr:function(a,e){var g=this.zip(e?"setAttribute":"getAttribute").call(a,e);return e?
this:g},addClass:function(a){return this.removeClass(a).each(function(){var e=this.className.split(" ").filter(function(g){return g&&g!=""});e.push(a);this.className=e.join(" ")})},removeClass:function(a){var e=function(g){return g!=a};return this.each(function(){this.className=this.className.split(" ").filter(e).join(" ")})},toggleClass:function(a){function e(g){return g!=a}return this.each(function(g){var h=g.className.split(" ");g.className=h.indexOf(a)>-1?h.filter(e).join(" "):h.push(a).join(" ")})},
hasClass:function(a){return this.zip("className.split").call(" ").zip("indexOf").call(a).map(Function.IndexFound)},text:function(a){return a?this.zap("innerText",a):this.zip("innerText")},val:function(a){return a?this.zap("value",a):this.zip("value")},css:function(a,e){if(hasValue(e)||isObject(a)){var g=/^-webkit-/,h=this.zip("style.setProperty").map(function(){var m=this;return function(p,n){if(g.test(p)){m(p.replace(g,"-moz-"),n);m(p.replace(g,"-o-"),n);m(p.replace(g,""),n)}m(p,n)}});if(isString(a))h.call(a,
e);else for(var k in a)h.call(k,a[k]);return this}h=this.map(window.getComputedStyle).zip("getPropertyValue").call(a);return this.zip("style").zip(a).weave(h).fold(function(m,p){return m?m:p})},defaultCss:function(a,e){var g=this.selector,h="<style> ",k=$("head");if(isString(a))if(isString(e))h+=g+" { "+a+": "+e+" } ";else throw Error("defaultCss requires a value with a string key");else if(isObject(a)){h+=g+" { ";for(var m in a)h+=m+": "+a[m];h+=" } "}h+="</style>";k.append(h)},rect:function(){return this.zip("getBoundingClientRect").call()},
width:function(){return this.rect().zip("width")},height:function(a){return a==null?this.rect().zip("height"):this.css("height",a)},top:function(a){return a==null?this.rect().zip("top"):this.css("top",a)},left:function(a){return a==null?this.rect().zip("left"):this.css("left",a)},position:function(a,e){return a==null?this.rect():e==null?this.css("left",Number.Px(a)):this.css({top:Number.Px(e),left:Number.Px(a)})},center:function(a){a=a||"viewport";var e=document.body.clientHeight/2,g=document.body.clientWidth/
2;return this.each(function(){var h=Bling(this),k=h.height().floats().first(),m=h.width().floats().first();m=a=="viewport"||a=="horizontal"?document.body.scrollLeft+g-m/2:NaN;y=a=="viewport"||a=="vertical"?document.body.scrollTop+e-k/2:NaN;h.css({position:"absolute",left:isNumber(m)?m+"px":undefined,top:isNumber(y)?y+"px":undefined})})},trueColor:function(a,e){function e(g){g[0]+=(this[0]-g[0])*this[3];g[1]+=(this[1]-g[1])*this[3];g[2]+=(this[2]-g[2])*this[3];g[3]=Math.min(1,g[3]+this[3]);return g}
a=a||"background-color";return this.parents().map(function(){return this.map(window.getComputedStyle).filter(hasValue).zip("getPropertyValue").call(a).filter(isString).map(Bling.Color.fromCss).reverse().reduce(e,Bling([0,0,0,0])).map(Bling.Color.toCss)})},child:function(a){return this.map(function(){return this.childNodes[a]})},children:function(){return this.map(function(){return Bling(this.childNodes,this)})},parent:function(){return this.zip("parentNode")},parents:function(){return this.map(function(){for(var a=
Bling(),e=-1,g=this;g=g.parentNode;)a[++e]=g;return a})},prev:function(){return this.map(function(){for(var a=Bling(),e=-1,g=this;g=g.previousSibling;)a[++e]=g;return a})},next:function(){return this.map(function(){for(var a=Bling(),e=-1,g=this;g=g.previousSibling;)a[++e]=g;return a})},remove:function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},find:function(a){return this.filter("*").map(function(){return Bling(a,this)}).flatten()},clone:function(){return this.map(b)},
toFragment:function(){if(this.length==1)return f(this[0]);var a=document.createDocumentFragment();this.map(f).map(a.appendChild.bound(a));return a}}});
Bling.module("Math",function(){return{floats:function(){return this.map(function(){if(isBling(this))return this.floats();return parseFloat(this)})},ints:function(){return this.map(function(){if(isBling(this))return this.ints();return parseInt(this)})},px:function(d){d=d||0;return this.ints().map(Function.Px(d))},min:function(){return this.reduce(function(d){if(isBling(this))return this.min();return Math.min(this,d)})},max:function(){return this.reduce(function(d){if(isBling(this))return this.max();
return Math.max(this,d)})},average:function(){return this.sum()/this.length},sum:function(){return this.reduce(function(d){if(isBling(this))return d+this.sum();return d+this})},squares:function(){return this.map(function(){if(isBling(this))return this.squares();return this*this})},magnitude:function(){var d=this.map(function(){if(isBling(this))return this.magnitude();return parseFloat(this)});return Math.sqrt(d.squares().sum())},scale:function(d){return this.map(function(){if(isBling(this))return this.scale(d);
return d*this})},normalize:function(){return this.scale(1/this.magnitude())}}});
Bling.module("Event",function(){function d(b){return function(c){return isFunc(c)?this.bind(b,c):this.trigger(b,c?c:{})}}Bling.ready=function(b){return Bling(document).ready(b)};setTimeout(function(){Bling.prototype.trigger!=null&&document.readyState=="complete"?Bling(document).trigger("ready"):setTimeout(arguments.callee,10)},0);var f=/, */;return{bind:function(b,c){var a=0;b=(b||"").split(f);var e=b.length;return this.each(function(){for(;a<e;a++)this.addEventListener(b[a],c)})},unbind:function(b,
c){var a=0;b=(b||"").split(f);var e=b.length;return this.each(function(){for(;a<e;a++)this.removeEventListener(b[a],c)})},once:function(b,c){var a=0;b=(b||"").split(f);for(var e=b.length;a<e;a++)this.bind(b[a],function(g){c.call(this,g);this.unbind(g.type,arguments.callee)})},cycle:function(b){function c(){var k=0;return function(m){e[k].call(this,m);k=++k%h}}var a=0,e=Array.Slice(arguments,1,arguments.length);b=(b||"").split(f);for(var g=b.length,h=e.length;a<g;)this.bind(b[a++],c());return this},
trigger:function(b,c){var a=undefined,e=0;b=(b||"").split(f);var g=b.length,h=null;for(c=Bling.extend({bubbles:true,cancelable:true},c);e<g;e++){h=b[e];switch(h){case "click":case "mousemove":case "mousedown":case "mouseup":case "mouseover":case "mouseout":a=document.createEvent("MouseEvents");c=Bling.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:null},c);a.initMouseEvent(h,c.bubbles,c.cancelable,window,c.detail,
c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget);break;case "blur":case "focus":case "reset":case "submit":case "abort":case "change":case "load":case "unload":a=document.createEvent("UIEvents");a.initUIEvent(h,c.bubbles,c.cancelable,window,1);break;case "touchstart":case "touchmove":case "touchend":case "touchcancel":a=document.createEvent("TouchEvents");c=Bling.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,
shiftKey:false,metaKey:false,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},c);a.initTouchEvent(h,c.bubbles,c.cancelable,window,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.touches,c.targetTouches,c.changedTouches,c.scale,c.rotation);break;case "gesturestart":case "gestureend":case "gesturecancel":a=document.createEvent("GestureEvents");c=Bling.extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,
metaKey:false,target:null,scale:1,rotation:0},c);a.initGestureEvent(h,c.bubbles,c.cancelable,window,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.target,c.scale,c.rotation);break;default:a=document.createEvent("Events");a.initEvent(h,c.bubbles,c.cancelable)}a&&this.each(function(){this.dispatchEvent(a);a.result=a.returnValue=undefined})}return this},live:function(b,c){var a=this.selector,e=this.context;Bling(e).bind(b,function(h){Bling(a,e).intersect(Bling(h.target).parents().first()).each(function(){h.target=
this;c.call(this,h)})});var g=e.__livers__=e.__livers__||{};g[a]=g[a]||{};g[a][b]=g[a][b]||[];g[a][b].push(c)},die:function(b,c){var a=this.selector,e=this.context,g=Bling(e);h=e.__livers__;if(h==null)return this;var h=e.__livers__[a][b];a=0;for(e=h.length;a<e;a++)if(c==undefined||c==h[a]){g.unbind(b,c);h.splice(a,1);e--;a--}},liveCycle:function(b){var c=0,a=Array.Slice(arguments,1,arguments.length);return this.live(b,function(e){a[c].call(this,e);c=++c%a.length})},click:function(b){this.css("cursor").intersect(["auto",
""]).len()>0&&this.css("cursor","pointer");return isFunc(b)?this.bind("click",b):this.trigger("click",b?b:{})},mousemove:d("mousemove"),mousedown:d("mousedown"),mouseup:d("mouseup"),mouseover:d("mouseover"),mouseout:d("mouseout"),blur:d("blur"),focus:d("focus"),load:d("load"),ready:d("ready"),unload:d("unload"),reset:d("reset"),submit:d("submit"),change:d("change"),abort:d("abort"),cut:d("cut"),copy:d("copy"),paste:d("paste"),selection:d("selection"),drag:d("drag"),drop:d("drop"),orientationchange:d("orientationchange"),
touchstart:d("touchstart"),touchmove:d("touchmove"),touchend:d("touchend"),touchcancel:d("touchcancel"),gesturestart:d("gesturestart"),gestureend:d("gestureend"),gesturecancel:d("gesturecancel")}});
Bling.module("Transform",function(){Bling.duration=function(f){var b={slow:700,medium:500,normal:300,fast:100,instant:0,now:0}[f];return b?b:parseFloat(f)};var d=/(?:scale|translate|rotate|scale3d|translateX|translateY|translateZ|translate3d|rotateX|rotateY|rotateZ|rotate3d)/;return{transform:function(f,b,c){if(typeof b=="function"){c=b;b=undefined}b=b||"normal";var a=Bling.duration(b);b=[];var e=0,g=0,h=null,k="",m={};for(g in f)if(d.test(g)){h=f[g];if(h.join)h=h.join(", ");else if(h.toString)h=
h.toString();k+=" "+g+"("+h+")"}else m[g]=f[g];for(g in m)b[e++]=g;if(k)b[e++]="-webkit-transfrom";m["-webkit-transition-property"]=b.join(", ");m["-webkit-transition-duration"]=b.map(function(){return a+"ms"}).join(", ");if(k)m["-webkit-transform"]=k;this.css(m);return this.future(a,c)},hide:function(f){return this.each(function(){if(this.style){this._display=this.style.display=="none"?undefined:this.style.display;this.style.display="none"}}).future(50,f)},show:function(f){return this.each(function(){if(this.style){this.style.display=
this._display?this._display:"block";this._display=undefined}}).future(50,f)},toggle:function(f){this.weave(this.css("display")).fold(function(b,c){if(b=="none"){c.style.display=c._old_display?c._old_display:"block";c._old_display=undefined}else{c._old_display=b;c.style.display="none"}return c}).future(50,f)},fadeIn:function(f,b){return this.css("opacity","0.0").show(function(){this.transform({opacity:"1.0",translate3d:[0,0,0]},f,b)})},fadeOut:function(f,b,c,a){c=c||0;a=a||0;return this.each(function(e){Bling(e).transform({opacity:"0.0",
translate3d:[c,a,0]},f,function(){this.hide()})}).future(Bling.duration(f),b)},fadeLeft:function(f,b){return this.fadeOut(f,b,"-"+this.width().first(),0)},fadeRight:function(f,b){return this.fadeOut(f,b,this.width().first(),0)},fadeUp:function(f,b){return this.fadeOut(f,b,0,"-"+this.height().first())},fadeDown:function(f,b){return this.fadeOut(f,b,0,this.height().first())}}});
Bling.module("Http",function(){function d(f){var b=[],c=0;f=JSON.parse(JSON.stringify(f));for(var a in f)b[c++]=a+"="+escape(f[a]);return b.join("&")}Bling.extend(Bling,{http:function(f,b){var c=new XMLHttpRequest;if(isFunc(b))b={success:b.bound(c)};b=Bling.extend({method:"GET",data:null,state:Function.Empty,success:Function.Empty,error:Function.Empty,async:true,withCredentials:false},b);b.state=b.state.bound(c);b.success=b.success.bound(c);b.error=b.error.bound(c);if(b.data&&b.method=="GET")f+="?"+
d(b.data);else if(b.data&&b.method=="POST")b.data=d(b.data);c.open(b.method,f,b.async);c.withCredentials=b.withCredentials;c.onreadystatechange=function(){b.state&&b.state();if(c.readyState==4)c.status==200?b.success(c.responseText):b.error(c.status,c.statusText)};c.send(b.data);return Bling([c])},post:function(f,b){if(isFunc(b))b={success:b};b=b||{};b.method="POST";return Bling.http(f,b)},get:function(f,b){if(isFunc(b))b={success:b};b=b||{};b.method="GET";return Bling.http(f,b)}});return{}});
Bling.module("Database",function(){function d(f,b){throw Error("sql error ["+b.code+"] "+b.message);}Bling.db=function(f,b,c,a){return Bling([window.openDatabase(f||"bling.db",b||"1.0",c||"bling database",a||1024)])};return{transaction:function(f){this.zip("transaction").call(f);return this},sql:function f(f,b,c,a){if(f!=undefined){if(typeof b=="function"){a=c;c=b;b=undefined}b=b||[];c=c||Function.Empty;a=a||d;assert(isType(this[0],"Database"),"can only call .sql() on a bling of Database");return this.transaction(function(e){e.executeSql(f,
b,c,a)})}}}});
Bling.module("Template",function(){function d(n,j){var l;if(!(l=arguments.callee.cache[n])){l=arguments.callee.cache;var o;a:{o=[];var q=n.split(/%[\(\/]/),s=-1,r=1,v=q.length;for(o.push(q[0]);r<v;r++){b:{s=q[r];var t=-1,w=1;if(t==null||t==-1)t=s.length;for(var u=0;u<t;u++){if(s.charAt(u)=="(")w+=1;else if(s.charAt(u)==")")w-=1;if(w==0){s=u;break b}}s=-1}if(s==-1){o="Template syntax error: unmatched '%(' in chunk starting at: "+q[r].substring(0,15);break a}key=q[r].substring(0,s);rest=q[r].substring(s);
match=b.exec(rest);if(match==null){o="Template syntax error: invalid type specifier starting at '"+rest+"'";break a}rest=match[4];o.push(key);o.push(match[1]|0);o.push(match[2]|0);o.push(match[3]);o.push(rest)}o=o}l=l[n]=o}l=l;o=[l[0]];r=q=1;for(v=l.length;r<v-4;r+=5){s=l[r];t=l[r+1];w=l[r+2];u=l[r+3];var z=l[r+4],x=j[s];if(x==null)x="missing required value: "+s;switch(u){case "d":o[q++]=""+parseInt(x);break;case "f":o[q++]=parseFloat(x).toFixed(w);break;default:o[q++]=""+x}if(t>0)o[q]=String.PadLeft(o[q],
t);o[q++]=z}return o.join("")}function f(n){return $(n.split(/,\s*/)).zip("split").call(" ").map(function(){var j=null;return $(this).map(function(){var l=this.valueOf(),o=l.match(c),q=l.match(a),s=l.match(e);l=l.match(g);var r=null;if(o==null||o.length>1)throw Error("Invalid synth expression: "+o);o=o[0];if(o==="+"&&j!=null){j=j.parentNode;return null}q=q!=null?' id="'+q[0].replace(m,"")+'"':"";s=s!=null?' class="'+$(s).zip("replace").call(k,"").join(" ")+'"':"";l=l!=null?$(l).zip("replace").call(h,
"").zip("replace").call(p,"").zip("split").call("=").flatten().fold(function(v,t){return" "+v+'="'+t+'"'}).join(""):"";r=Bling.HTML.parse("<"+o+q+s+l+"></"+o+">");j!=null&&j.appendChild(r);return j=r}).first()})}var b=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])(.*)/;d.cache={};var c=/^\s*([A-Za-z+]+)/g,a=/#([^\[.# ]+)/g,e=/\.([^\[.# ]+)/g,g=/\[([^\[.# ]+)=*([^\]]*)\]/g,h=/(?:^\[)|(?:\]$)/g,k=/\./,m=/#/,p=/"/g;Bling.synth=f;return{template:function(n){n=Bling.extend({},n);this.render=function(j){return d(Bling.HTML.stringify(this.first()),
Bling.extend(n,j))};return this.hide()},synth:function(n){return f(n).appendTo(this)}}});$=Bling;Bling.symbol="$";
