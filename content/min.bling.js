var console=console||{};console.log=console.log||function(){};
function Bling(e,h){if(isBling(e))return e;h=h||document;var f=null;if(e==null)f=[];else if(typeof e==="number")f=Array(e);else if(e===window||isNode(e))f=[e];else if(typeof e==="string"){e=e.trimLeft();if(e[0]=="<")f=[Bling.HTML.parse(e)];else if(isBling(h))f=h.reduce(function(a,b){for(var c=b.querySelectorAll(e),g=0,i=c.length;g<i;g++)a.push(c[g]);return a},[]);else if(h.querySelectorAll!=undefined)try{f=h.querySelectorAll(e)}catch(d){throw Error("invalid selector: "+e,d);}else throw Error("invalid context: "+
h);}else f=e;f.__proto__=Bling.prototype;f.selector=e;f.context=h;return f}Bling.prototype=[];Bling.prototype.constructor=Bling;function isBling(e){return isType(e,Bling)}Bling.symbol="$";window[Bling.symbol]=Bling;function isType(e,h){return!e?h===e:typeof h==="string"?e.__proto__.constructor.name==h:e.__proto__.constructor===h}
function isSubtype(e,h){return e==null?e==h:e.__proto__==null?false:typeof h==="string"?e.__proto__.constructor.name==h:e.__proto__.constructor==h?true:isSubtype(e.__proto__,h)}function isString(e){return typeof e=="string"||isSubtype(e,String)}var isNumber=isFinite;function isFunc(e){return typeof e=="function"||isType(e,Function)}function isNode(e){return e?e.nodeType>0:false}function isFragment(e){return e?e.nodeType==11:false}
function isArray(e){return e?Function.ToString(e)=="[object Array]"||isSubtype(e,Array):false}function isObject(e){return typeof e=="object"}function hasValue(e){return e!=null}Object.Extend=function(e,h,f){for(var d in h)if(f&&e[d]!=undefined)for(var a in f)e[d][a]=h[d][a];else e[d]=h[d];return e};Object.Keys=function(e){var h=[],f=0,d;for(d in e)h[f++]=d;return h};
function boundmethod(e,h,f){function d(){return e.apply(h,f?f:arguments)}d.toString=function(){return"bound-method of "+h+"."+e.name+"(...) { [code] }"};return d}var OtoS=Object.prototype.toString;Array.Slice=function(e,h,f){var d=[],a=0,b=e.length;f=f==undefined?b:f<0?b+f:f;for(h=h==undefined?0:h<0?b+h:h;h<f;)d[a++]=e[h++];return d};Number.Px=function(e,h){return parseInt(e,10)+(h|0)+"px"};
Object.Extend(String,{HtmlEscape:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"&nbsp;&nbsp;")},PadLeft:function(e,h,f){for(f=f||" ";e.length<h;)e=f+e;return e},Splice:function(){var e=arguments[0],h=arguments[1],f=arguments[2],d=Array.Slice(arguments,3).join("");return e.substring(0,h)+d+e.substring(f)}});
Object.Extend(Function,{Empty:function(){},NotNull:function(e){return e!=null},NotUndefined:function(e){return e!=undefined},IndexFound:function(e){return e>-1},ReduceAnd:function(e){return e&&this},UpperLimit:function(e){return function(h){return Math.min(e,h)}},LowerLimit:function(e){return function(h){return Math.max(e,h)}},ToString:function(e){return OtoS.apply(e)},Px:function(e){return function(){return Number.Px(this,e)}},PrettyPrint:function(){function e(i){var j=0,l=i.length,m=[],p=-1,n=-1,
o=null;if(!isString(i))if(isFunc(i.toString)){i=i.toString();l=i.length}else throw TypeError("invalid string argument to extract_quoted");for(;j<l;){p=i;n=j;o=p.indexOf('"',n);n=p.indexOf("'",n);if(o==-1)o=p.length;if(n==-1)n=p.length;o=o==n?[null,-1]:o<n?['"',o]:["'",n];p=o[1];if(p==-1){m.push(i.substring(j));break}m.push(i.substring(j,p));j=i;n=o[0];for(var k=j.indexOf(n,p+1);j.charAt(k-1)=="\\"&&k<j.length&&k>0;)k=j.indexOf(n,k+1);n=k;if(n==-1)throw Error("unmatched "+o[0]+" at "+p);m.push(i.substring(p,
n+1));j=n+1}return m}function h(i){for(var j=[],l=0,m=0,p=i.length,n=null,o=null;l<p;){n=o=i.substring(l);m=n.match(a);n=n.match(b);n=m==n?[-1,null]:m==null&&n!=null?[n.index,n[0]]:m!=null&&n==null?[m.index,m[0]]:n.index<m.index?[n.index,n[0]]:[m.index,m[0]];m=n[0];if(m>-1){j.push(o.substring(0,m));j.push(n[1]);l+=m+n[1].length}else{j.push(o);break}}return j}var f=/!==|!=|!|\#|\%|\%=|\&|\&\&|\&\&=|&=|\*|\*=|\+|\+=|-|-=|->|\.{1,3}|\/|\/=|:|::|;|<<=|<<|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\?|@|\[|\]|}|{|\^|\^=|\^\^|\^\^=|\|=|\|\|=|\|\||\||~/g,
d=/\b[Ff]unction\b|\bvar\b|\.prototype\b|\.__proto__\b|\bString\b|\bArray\b|\bNumber\b|\bObject\b|\bbreak\b|\bcase\b|\bcontinue\b|\bdelete\b|\bdo\b|\bif\b|\belse\b|\bfinally\b|\binstanceof\b|\breturn\b|\bthrow\b|\btry\b|\btypeof\b|\btrue\b|\bfalse\b/g,a=/\/\/.*?(?:\n|$)/,b=/\/\*(?:.|\n)*?\*\//,c=/\d+\.*\d*/g,g=/\$(?:\(|\.)/g;return function(i,j){if(isFunc(i))i=i.toString();if(!isString(i))throw TypeError("prettyPrint requires a function or string to format");if(Bling("style#pp-injected").length==
0){j=Object.Extend({opr:"#880",str:"#008",com:"#080",kwd:"#088",num:"#808",bln:"#800"},j);var l="code.pp .bln { font-size: 17px; } ",m;for(m in j)l+="code.pp ."+m+" { color: "+j[m]+"; }";Bling("head").append(Bling.synth("style#pp-injected").text(l))}return"<code class='pp'>"+Bling(h(i)).fold(function(p,n){return Bling(e(p)).fold(function(o,k){return o.replace(f,"<span class='opr'>$&</span>").replace(c,"<span class='num'>$&</span>").replace(d,"<span class='kwd'>$&</span>").replace(g,"<span class='bln'>$$</span>(").replace(/\t/g,
"&nbsp;&nbsp;")+(k?"<span class='str'>"+k+"</span>":"")}).join("")+(n?"<span class='com'>"+n+"</span>":"")}).join("")+"</code>"}}()});Bling.addOps=function(){for(var e=0,h=arguments.length;e<h;e++){var f=arguments[e];if(isFunc(f))if(f.name==null)throw Error("cannot add an anonymous method (must have a name)");else Bling.prototype[f.name]=f;else if(isObject(f))Object.Extend(Bling.prototype,f);else throw Error("can only add an object or function, not:"+typeof f);}};
Bling.module=function(e,h){var f=h(),d=arguments.callee;d.order.push(e);d[e]=f;Bling.addOps(f)};Bling.module.order=[];
Bling.module("Core",function(){function e(a){if(isObject(a)&&isNumber(a))return Number(a);return a}function h(a){var b;return function(){b=this[a];return isFunc(b)?boundmethod(b,this):b}}function f(a){var b=a.indexOf(".");return b>-1?this.zip(a.substr(0,b)).zip(a.substr(b+1)):this.map(h(a))}var d=new function(){this.queue=[];this.next=boundmethod(function(){this.queue.length>0&&this.queue.shift()()},this);this.schedule=function(a,b){if(isFunc(a)){var c=this.queue.length;a.order=b+(new Date).getTime();
if(c==0||a.order>this.queue[c-1].order)this.queue[c]=a;else for(var g=0;g<c;g++)this.queue[g].order>a.order&&this.queue.splice(g,0,a);setTimeout(this.next,b)}}};return{each:function(a){for(var b=-1,c=this.len(),g=null;++b<c;){g=this[b];a.call(g,g)}return this},map:function(a){var b=this.len(),c=Bling(b),g=0,i=null,j=true;c.context=this;for(c.selector=a;g<b;g++){i=this[g];if(j)try{c[g]=a.call(i,i)}catch(l){if(isType(l,TypeError)){j=false;g--}else c[g]=l}else try{c[g]=a(i)}catch(m){c[g]=m}}return c},
reduce:function(a,b){if(!a)return this;var c=b,g=this;if(b==null){c=this[0];g=this.skip(1)}g.each(function(){c=a.call(this,c,this)});return c},union:function(a){var b=Bling(),c=0,g=0,i=null;b.context=this.context;b.selector=this.selector;for(this.each(function(){b[c++]=this});i=a[g++];)b.contains(i)||(b[c++]=i);return b},intersect:function(a){var b=Bling(),c=0,g=0,i=this.length,j=a.length;b.context=this.context;b.selector=this.selector;if(isBling(a))for(;c<i;c++){if(a.contains(this[c]))b[b.length]=
this[c]}else for(c=0;c<i;c++)for(;g<j;g++)if(this[c]==a[g])b[b.length]=this[c];return b},distinct:function(){return this.union(this)},contains:function(a){return this.count(a)>0},count:function(a){if(a==undefined)return this.len();a=e(a);if(isObject(a)&&isNumber(a))a=Number(a);var b=0;this.each(function(){var c=this;if(isObject(c)&&isNumber(c))c=Number(c);c==a&&b++});return b},zip:function(){switch(arguments.length){case 0:return this;case 1:return f.call(this,arguments[0]);default:var a={},b=Bling(),
c=arguments.length,g=this.length,i=0,j=0,l=null;for(i=0;i<c;i++)a[i]=f.call(this,arguments[i]);for(i=0;i<g;i++){c={};for(l in a)c[l]=a[l].shift();b[j++]=c}return b}},zap:function(a,b){if(!a)return this;var c=a.indexOf(".");return c>-1?this.zip(a.substr(0,c)).zap(a.substr(c+1),b):isArray(b)?this.each(function(g){g[a]=b[++c]}):this.each(function(){this[a]=b})},take:function(a){a=Math.min(a|0,this.len());var b=Bling(a),c=-1;b.context=this.context;for(b.selector=this.selector;++c<a;)b[c]=this[c];return b},
skip:function(a){a=Math.min(this.len(),Math.max(0,a|0));var b=Bling(a),c=0,g=this.len()-a;b.context=this.context;for(b.selector=this.selector;c<g;c++)b[c]=this[c+a];return b},first:function(a){return a?this.take(a):this[0]},last:function(a){return a?this.skip(this.len()-a):this[this.length-1]},join:function(a){if(this.length==0)return"";return this.reduce(function(b){return b+a+this})},slice:function(a,b){var c=Bling(Array.Slice(this,a,b));c.context=this.context;c.selector=this.selector;return c},
concat:function(a){for(var b=this.len()-1,c=-1,g=a.length;c<g;)this[++b]=a[++c];return this},push:function(a){Array.prototype.push.call(this,a);return this},filter:function(a){var b=0,c=-1,g=this.length,i=Bling(g),j=null;i.context=this;for(i.selector=a;b<g;b++)if(j=this[b])if(isFunc(a)&&a.call(j,j)||isString(a)&&j.webkitMatchesSelector&&j.webkitMatchesSelector(a)||isType(a,"RegExp")&&a.test(j))i[++c]=j;return i},matches:function(a){if(isType(a,"RegExp"))return this.map(function(){return a.test(this)});
return isString(a)&&this.webkitMatchesSelector?this.map(function(){return this.webkitMatchesSelector(a)}):this.map(function(){return false})},weave:function(a){var b=a.length,c=this.length,g=Bling(2*Math.max(c,b));c=c-1;g.context=this.context;for(g.selector=this.selector;c>=0;c--)g[c*2+1]=this[c];for(;++c<b;)g[c*2]=a[c];return g},fold:function(a){var b=this.len(),c=0,g=Bling(Math.ceil(b/2)),i=0;g.context=this.context;g.selector=this.selector;for(i=0;i<b-1;i+=2)g[c++]=a.call(this,this[i],this[i+1]);
if(b%2==1)g[c++]=a.call(this,this[b-1],undefined);return g},flatten:function(){var a=Bling(),b=this.len(),c=null,g=0,i=0,j=0,l=0;a.context=this.context;for(a.selector=this.selector;i<b;i++){c=this[i];j=0;for(g=c.length;j<g;)a[l++]=c[j++]}return a},call:function(){return this.apply(null,arguments)},apply:function(a,b){return this.map(function(){if(isFunc(this))return this.apply(a,b);return this})},toString:function(){return Bling.symbol+"(["+this.map(function(){return this==undefined||this==window?
"undefined":this==null?"null":this.toString().replace(/\[object (\w+)\]/,"$1")}).join(", ")+"])"},future:function(a,b){b&&d.schedule(boundmethod(b,this),a);return this},log:function(a){a?console.log(a,this,this.length+" items"):console.log(this,this.length+" items");return this},len:function(){for(var a=this.length;a>-1&&this[--a]==undefined;);return a+1}}});
Bling.module("Html",function(){function e(a,b){a&&b&&a.parentNode.insertBefore(b,a)}function h(a){a=isNode(a)?a:isBling(a)?a.toFragment():isString(a)?Bling(a).toFragment():isFunc(a.toString)?Bling(a.toString()).toFragment():undefined;Bling.nextguid=Bling.nextguid||1;if(a&&a.guid==null)a.guid=Bling.nextguid++;return a}function f(a){for(var b=a.cloneNode(),c=0;c<a.childNodes.length;c++)b.appendChild(f(a.childNodes[c])).parentNode=b;return b}var d=null;Bling.HTML={parse:function(a){var b=document.createElement("body");
b.innerHTML=a;a=document.createDocumentFragment();for(var c=0,g=b.childNodes.length;c<g;c++)a.appendChild(b.removeChild(b.childNodes[0]));return g==1?a.removeChild(a.childNodes[0]):a},stringify:function(a){a=f(a);var b=document.createElement("div");b.appendChild(a);var c=b.innerHTML;b.removeChild(a);a.parentNode=null;return c},escape:function(a){d=d||Bling("<div>&nbsp;</div>").child(0);a=d.zap("data",a).zip("parentNode.innerHTML").first();d.zap("data","");return a}};Bling.Color={fromCss:function(a){a=
a||this;if(isString(a)){var b=document.createElement("div");b.style.display="none";b.style.color=a;Bling(document.body).append(b);a=window.getComputedStyle(b,null).getPropertyValue("color");Bling(b).remove();if(a){a=a.slice(a.indexOf("(")+1,a.indexOf(")")).split(", ");if(a.length==3)a[3]="1.0";return Bling(a).floats()}}},toCss:function(a){function b(c){c=c.map(Function.UpperLimit(255)).map(Function.LowerLimit(0));c[3]=Math.min(1,c[3]);return"rgba("+c.join(", ")+")"}a=a||this;return isBling(a[0])?
a.map(b):b(a)},invert:function(a){var b=Bling(4);b[0]=255-a[0];b[1]=255-a[1];b[2]=255-a[2];b[3]=a[3];return b}};return{html:function(a){return a==undefined?this.zip("innerHTML"):isString(a)?this.zap("innerHTML",a):isBling(a)?this.html(a.toFragment()):isNode(a)?this.each(function(){for(this.replaceChild(this.childNodes[0],a);this.childNodes.length>1;)this.removeChild(this.childNodes[1])}):undefined},append:function(a){if(a==null)return this;a=h(a);var b=this.zip("appendChild");b.take(1).call(a);b.skip(1).each(function(){this(f(a))});
return this},appendTo:function(a){if(a==null)return this;Bling(a).append(this);return this},prepend:function(a){if(a==null)return this;a=h(a);this.take(1).each(function(){e(this.childNodes[0],a)});this.skip(1).each(function(){e(this.childNodes[0],f(a))});return this},prependTo:function(a){if(a==null)return this;Bling(a).prepend(this);return this},before:function(a){if(a==null)return this;a=h(a);this.take(1).each(function(){e(this,a)});this.skip(1).each(function(){e(this,f(a))});return this},after:function(a){if(a==
null)return this;a=h(a);this.take(1).each(function(){this.parentNode.insertBefore(a,this.nextSibling)});this.skip(1).each(function(){this.parentNode.insertBefore(f(a),this.nextSibling)});return this},wrap:function(a){a=h(a);if(isFragment(a))throw Error("cannot wrap something with a fragment");return this.map(function(b){if(isFragment(b))a.appendChild(b);else if(isNode(b)){var c=b.parentNode;if(c){var g=document.createElement("dummy");a.appendChild(c.replaceChild(g,b));c.replaceChild(a,g)}else a.appendChild(b)}return b})},
unwrap:function(){return this.each(function(){this.parentNode&&this.parentNode.parentNode&&this.parentNode.parentNode.replaceChild(this,this.parentNode)})},replace:function(a){a=h(a);var b=Bling(),c=-1;this.take(1).each(function(){if(this.parentNode){this.parentNode.replaceChild(a,this);b[++c]=a}});this.skip(1).each(function(){if(this.parentNode){var g=f(a);this.parentNode.replaceChild(g,this);b[++c]=g}});return b},attr:function(a,b){var c=this.zip(b===undefined?"getAttribute":b===null?"removeAttribute":
"setAttribute").call(a,b);return b?this:c},addClass:function(a){return this.removeClass(a).each(function(){var b=this.className.split(" ").filter(function(c){return c&&c!=""});b.push(a);this.className=b.join(" ")})},removeClass:function(a){var b=function(c){return c!=a};return this.each(function(){this.className=this.className.split(" ").filter(b).join(" ")})},toggleClass:function(a){function b(c){return c!=a}return this.each(function(c){var g=c.className.split(" ");c.className=g.indexOf(a)>-1?g.filter(b).join(" "):
g.push(a).join(" ")})},hasClass:function(a){return this.zip("className.split").call(" ").zip("indexOf").call(a).map(Function.IndexFound)},text:function(a){return a?this.zap("innerText",a):this.zip("innerText")},val:function(a){return a?this.zap("value",a):this.zip("value")},css:function(a,b){if(hasValue(b)||isObject(a)){var c=/^-webkit-/,g=this.zip("style.setProperty").map(function(){var j=this;return function(l,m){if(c.test(l)){j(l.replace(c,"-moz-"),m);j(l.replace(c,"-o-"),m);j(l.replace(c,""),
m)}j(l,m)}});if(isString(a))g.call(a,b);else for(var i in a)g.call(i,a[i]);return this}g=this.map(window.getComputedStyle).zip("getPropertyValue").call(a);return this.zip("style").zip(a).weave(g).fold(function(j,l){return j?j:l})},defaultCss:function(a,b){var c=this.selector,g="<style> ",i=Bling("head");if(isString(a))if(isString(b))g+=c+" { "+a+": "+b+" } ";else throw Error("defaultCss requires a value with a string key");else if(isObject(a)){g+=c+" { ";for(var j in a)g+=j+": "+a[j];g+=" } "}g+=
"</style>";i.append(g)},rect:function(){return this.zip("getBoundingClientRect").call()},width:function(){return this.rect().zip("width")},height:function(a){return a==null?this.rect().zip("height"):this.css("height",a)},top:function(a){return a==null?this.rect().zip("top"):this.css("top",a)},left:function(a){return a==null?this.rect().zip("left"):this.css("left",a)},position:function(a,b){return a==null?this.rect():b==null?this.css("left",Number.Px(a)):this.css({top:Number.Px(b),left:Number.Px(a)})},
center:function(a){a=a||"viewport";var b=document.body.clientHeight/2,c=document.body.clientWidth/2;return this.each(function(){var g=Bling(this),i=g.height().floats().first(),j=g.width().floats().first();j=a=="viewport"||a=="horizontal"?document.body.scrollLeft+c-j/2:NaN;i=a=="viewport"||a=="vertical"?document.body.scrollTop+b-i/2:NaN;g.css({position:"absolute",left:isNumber(j)?j+"px":undefined,top:isNumber(i)?i+"px":undefined})})},trueColor:function(a,b){a=a||"background-color";b=b||function(c){c[0]+=
(this[0]-c[0])*this[3];c[1]+=(this[1]-c[1])*this[3];c[2]+=(this[2]-c[2])*this[3];c[3]=Math.min(1,c[3]+this[3]);return c};return this.parents().map(function(){return this.map(window.getComputedStyle).filter(hasValue).zip("getPropertyValue").call(a).filter(isString).map(Bling.Color.fromCss).reverse().reduce(b,Bling([0,0,0,0])).map(Bling.Color.toCss)})},child:function(a){return this.map(function(){return this.childNodes[a]})},children:function(){return this.map(function(){return Bling(this.childNodes,
this)})},parent:function(){return this.zip("parentNode")},parents:function(){return this.map(function(){for(var a=Bling(),b=-1,c=this;c=c.parentNode;)a[++b]=c;return a})},prev:function(){return this.map(function(){for(var a=Bling(),b=-1,c=this;c=c.previousSibling;)a[++b]=c;return a})},next:function(){return this.map(function(){for(var a=Bling(),b=-1,c=this;c=c.previousSibling;)a[++b]=c;return a})},remove:function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},
find:function(a){return this.filter("*").map(function(){return Bling(a,this)}).flatten()},clone:function(){return this.map(f)},toFragment:function(){if(this.length==1)return h(this[0]);var a=document.createDocumentFragment();this.map(h).map(boundmethod(a.appendChild,a));return a}}});
Bling.module("Math",function(){return{floats:function(){return this.map(function(){if(isBling(this))return this.floats();return parseFloat(this)})},ints:function(){return this.map(function(){if(isBling(this))return this.ints();return parseInt(this,10)})},px:function(e){e=e||0;return this.ints().map(Function.Px(e))},min:function(){return this.reduce(function(e){if(isBling(this))return this.min();return Math.min(this,e)})},max:function(){return this.reduce(function(e){if(isBling(this))return this.max();
return Math.max(this,e)})},average:function(){return this.sum()/this.length},sum:function(){return this.reduce(function(e){if(isBling(this))return e+this.sum();return e+this})},squares:function(){return this.map(function(){if(isBling(this))return this.squares();return this*this})},magnitude:function(){var e=this.map(function(){if(isBling(this))return this.magnitude();return parseFloat(this)});return Math.sqrt(e.squares().sum())},scale:function(e){return this.map(function(){if(isBling(this))return this.scale(e);
return e*this})},normalize:function(){return this.scale(1/this.magnitude())}}});
Bling.module("Event",function(){function e(f){eval("var f = function "+f+"(f) { // ."+f+"([f]) - trigger [or bind] the '"+f+"' event \nreturn isFunc(f) ? this.bind('"+f+"',f) : this.trigger('"+f+"', f ? f : {}) }");return eval("f")}setTimeout(function(){Bling.prototype.trigger!=null&&document.readyState=="complete"?Bling(document).trigger("ready"):setTimeout(arguments.callee,20)},0);var h=/, */;return{bind:function(f,d){var a=0,b=(f||"").split(h),c=b.length;return this.each(function(){for(;a<c;a++)this.addEventListener(b[a],
d)})},unbind:function(f,d){var a=0,b=(f||"").split(h),c=b.length;return this.each(function(){for(;a<c;a++)this.removeEventListener(b[a],d)})},once:function(f,d){for(var a=0,b=(f||"").split(h),c=b.length;a<c;a++)this.bind(b[a],function(g){d.call(this,g);this.unbind(g.type,arguments.callee)})},cycle:function(f){function d(){var j=0;return function(l){b[j].call(this,l);j=++j%i}}for(var a=0,b=Array.Slice(arguments,1,arguments.length),c=(f||"").split(h),g=c.length,i=b.length;a<g;)this.bind(c[a++],d());
return this},trigger:function(f,d){var a=undefined,b=0,c=(f||"").split(h),g=c.length,i=null;for(d=Object.Extend({bubbles:true,cancelable:true},d);b<g;b++){i=c[b];switch(i){case "click":case "mousemove":case "mousedown":case "mouseup":case "mouseover":case "mouseout":a=document.createEvent("MouseEvents");d=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,button:0,relatedTarget:null},d);a.initMouseEvent(i,d.bubbles,d.cancelable,
window,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,d.relatedTarget);break;case "blur":case "focus":case "reset":case "submit":case "abort":case "change":case "load":case "unload":a=document.createEvent("UIEvents");a.initUIEvent(i,d.bubbles,d.cancelable,window,1);break;case "touchstart":case "touchmove":case "touchend":case "touchcancel":a=document.createEvent("TouchEvents");d=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,
altKey:false,shiftKey:false,metaKey:false,touches:[],targetTouches:[],changedTouches:[],scale:1,rotation:0},d);a.initTouchEvent(i,d.bubbles,d.cancelable,window,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.touches,d.targetTouches,d.changedTouches,d.scale,d.rotation);break;case "gesturestart":case "gestureend":case "gesturecancel":a=document.createEvent("GestureEvents");d=Object.Extend({detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:false,altKey:false,
shiftKey:false,metaKey:false,target:null,scale:1,rotation:0},d);a.initGestureEvent(i,d.bubbles,d.cancelable,window,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.target,d.scale,d.rotation);break;default:a=document.createEvent("Events");a.initEvent(i,d.bubbles,d.cancelable)}a&&this.each(function(){this.dispatchEvent(a);a.result=a.returnValue=undefined})}return this},live:function(f,d){var a=this.selector,b=this.context;Bling(b).bind(f,function(g){Bling(a,
b).intersect(Bling(g.target).parents().first()).each(function(){g.target=this;d.call(this,g)})});var c=b.__livers__=b.__livers__||{};c[a]=c[a]||{};c[a][f]=c[a][f]||[];c[a][f].push(d)},die:function(f,d){var a=this.selector,b=this.context,c=Bling(b),g=b.__livers__;if(g==null)return this;g=b.__livers__[a][f];a=0;for(b=g.length;a<b;a++)if(d==undefined||d==g[a]){c.unbind(f,d);g.splice(a,1);b--;a--}},liveCycle:function(f){var d=0,a=Array.Slice(arguments,1,arguments.length);return this.live(f,function(b){a[d].call(this,
b);d=++d%a.length})},click:function(f){this.css("cursor").intersect(["auto",""]).len()>0&&this.css("cursor","pointer");return isFunc(f)?this.bind("click",f):this.trigger("click",f?f:{})},mousemove:e("mousemove"),mousedown:e("mousedown"),mouseup:e("mouseup"),mouseover:e("mouseover"),mouseout:e("mouseout"),blur:e("blur"),focus:e("focus"),load:e("load"),ready:e("ready"),unload:e("unload"),reset:e("reset"),submit:e("submit"),keyup:e("keyup"),keydown:e("keydown"),change:e("change"),abort:e("abort"),cut:e("cut"),
copy:e("copy"),paste:e("paste"),selection:e("selection"),drag:e("drag"),drop:e("drop"),orientationchange:e("orientationchange"),touchstart:e("touchstart"),touchmove:e("touchmove"),touchend:e("touchend"),touchcancel:e("touchcancel"),gesturestart:e("gesturestart"),gestureend:e("gestureend"),gesturecancel:e("gesturecancel")}});
Bling.module("Transform",function(){Bling.duration=function(h){var f={slow:700,medium:500,normal:300,fast:100,instant:0,now:0}[h];return f?f:parseFloat(h)};var e=/(?:scale|translate|rotate|scale3d|translateX|translateY|translateZ|translate3d|rotateX|rotateY|rotateZ|rotate3d)/;return{transform:function(h,f,d){if(typeof f=="function"){d=f;f=undefined}f=f||"normal";var a=Bling.duration(f);f=[];var b=0,c=0,g=null,i="",j={};for(c in h)if(e.test(c)){g=h[c];if(g.join)g=g.join(", ");else if(g.toString)g=
g.toString();i+=" "+c+"("+g+")"}else j[c]=h[c];for(c in j)f[b++]=c;if(i)f[b++]="-webkit-transfrom";j["-webkit-transition-property"]=f.join(", ");j["-webkit-transition-duration"]=f.map(function(){return a+"ms"}).join(", ");if(i)j["-webkit-transform"]=i;this.css(j);return this.future(a,d)},hide:function(h){return this.each(function(){if(this.style){this._display=this.style.display=="none"?undefined:this.style.display;this.style.display="none"}}).future(50,h)},show:function(h){return this.each(function(){if(this.style){this.style.display=
this._display?this._display:"block";this._display=undefined}}).future(50,h)},toggle:function(h){this.weave(this.css("display")).fold(function(f,d){if(f=="none"){d.style.display=d._old_display?d._old_display:"block";d._old_display=undefined}else{d._old_display=f;d.style.display="none"}return d}).future(50,h)},fadeIn:function(h,f){return this.css("opacity","0.0").show(function(){this.transform({opacity:"1.0",translate3d:[0,0,0]},h,f)})},fadeOut:function(h,f,d,a){d=d||0;a=a||0;return this.each(function(b){Bling(b).transform({opacity:"0.0",
translate3d:[d,a,0]},h,function(){this.hide()})}).future(Bling.duration(h),f)},fadeLeft:function(h,f){return this.fadeOut(h,f,"-"+this.width().first(),0)},fadeRight:function(h,f){return this.fadeOut(h,f,this.width().first(),0)},fadeUp:function(h,f){return this.fadeOut(h,f,0,"-"+this.height().first())},fadeDown:function(h,f){return this.fadeOut(h,f,0,this.height().first())}}});
Bling.module("Http",function(){function e(f){var d=[],a=0;f=h.parse(h.stringify(f));for(var b in f)d[a++]=b+"="+escape(f[b]);return d.join("&")}var h=h||{};Object.Extend(Bling,{http:function(f,d){var a=new XMLHttpRequest;if(isFunc(d))d={success:boundmethod(d,a)};d=Object.Extend({method:"GET",data:null,state:Function.Empty,success:Function.Empty,error:Function.Empty,async:true,withCredentials:false},d);d.state=boundmethod(d.state,a);d.success=boundmethod(d.success,a);d.error=boundmethod(d.error,a);
if(d.data&&d.method=="GET")f+="?"+e(d.data);else if(d.data&&d.method=="POST")d.data=e(d.data);a.open(d.method,f,d.async);a.withCredentials=d.withCredentials;a.onreadystatechange=function(){d.state&&d.state();if(a.readyState==4)a.status==200?d.success(a.responseText):d.error(a.status,a.statusText)};a.send(d.data);return Bling([a])},post:function(f,d){if(isFunc(d))d={success:d};d=d||{};d.method="POST";return Bling.http(f,d)},get:function(f,d){if(isFunc(d))d={success:d};d=d||{};d.method="GET";return Bling.http(f,
d)}});return{}});
Bling.module("Database",function(){function e(f,d){throw Error("sql error ["+d.code+"] "+d.message);}function h(f,d){if(!f)throw Error("assert failed: "+d);}Bling.db=function(f,d,a,b){return Bling([window.openDatabase(f||"bling.db",d||"1.0",a||"bling database",b||1024)])};return{transaction:function(f){this.zip("transaction").call(f);return this},sql:function(f,d,a,b){if(f!=undefined){if(typeof d=="function"){b=a;a=d;d=undefined}d=d||[];a=a||Function.Empty;b=b||e;h(isType(this[0],"Database"),"can only call .sql() on a bling of Database");
return this.transaction(function(c){c.executeSql(f,d,a,b)})}}}});
Bling.module("Template",function(){function e(a){var b=[];a=a.split(/%[\(\/]/);var c=-1,g=1,i=a.length,j=null,l=c=null;for(b.push(a[0]);g<i;g++){a:{j=a[g];c=-1;l=1;if(c==null||c==-1)c=j.length;for(var m=0;m<c;m++){if(j.charAt(m)=="(")l+=1;else if(j.charAt(m)==")")l-=1;if(l==0){c=m;break a}}c=-1}if(c==-1)return"Template syntax error: unmatched '%(' in chunk starting at: "+a[g].substring(0,15);j=a[g].substring(0,c);c=a[g].substring(c);l=f.exec(c);if(l==null)return"Template syntax error: invalid type specifier starting at '"+
c+"'";c=l[4];b.push(j);b.push(l[1]|0);b.push(l[2]|0);b.push(l[3]);b.push(c)}return b}function h(a,b){for(var c=e.cache[a]||(e.cache[a]=e(a)),g=[c[0]],i=1,j=1,l=c.length;j<l-4;j+=5){var m=c[j],p=c[j+1],n=c[j+2],o=c[j+3],k=c[j+4],r=b[m];if(r==null)r="missing required value: "+m;switch(o){case "d":g[i++]=""+parseInt(r,10);break;case "f":g[i++]=parseFloat(r).toFixed(n);break;default:g[i++]=""+r}if(p>0)g[i]=String.PadLeft(g[i],p);g[i++]=k}return g.join("")}var f=/([0-9#0+-]*)\.*([0-9#+-]*)([diouxXeEfFgGcrsqm])((?:.|\n)*)/;
e.cache={};Bling.render=h;var d=1;Bling.synth=function(a){function b(){var s=document.createTextNode(p);o?o.appendChild(s):r.push(s);p="";k=d}function c(){var s=document.createElement(g);s.id=i?i:null;s.className=j?j:null;for(var t in n)s.setAttribute(t,n[t]);o?o.appendChild(s):r.push(s);o=s;p=m=l=j=i=g="";n={};k=d}var g="",i="",j="",l="",m="",p="",n={},o=null,k=d,r=Bling([]),u=0,q=null;for(o=null;q=a.charAt(u++);)if(q=="+"&&k==d)o=o?o.parentNode:o;else if(q=="#"&&(k==d||k==3||k==4))k=2;else if(q==
"."&&(k==d||k==2||k==4))k=3;else if(q=="["&&(k==d||k==2||k==3||k==4))k=4;else if(q=="="&&k==4)k=5;else if(q=='"'&&k==d)k=6;else if(q=="'"&&k==d)k=7;else if(q=="]"&&(k==4||k==5)){n[l]=m;m=l="";k=d}else if(q=='"'&&k==6)b();else if(q=="'"&&k==7)b();else if((q==" "||q==",")&&k!=5&&k!=4&&g.length>0)c();else if(k==d)g+=q!=" "?q:"";else if(k==2)i+=q;else if(k==3)j+=q;else if(k==4)l+=q;else if(k==5)m+=q;else if(k==6||k==7)p+=q;else throw Error("Unknown input/state: '"+q+"'/"+k);g.length>0&&c();p.length>0&&
b();return r};return{template:function(a){a=Object.Extend({},a);this.render=function(b){return h(this.map(Bling.HTML.stringify).join(""),Object.Extend(a,b))};return this.remove()},render:function(a){return h(this.map(Bling.HTML.stringify).join(""),a)},synth:function a(b){return a(b).appendTo(this)}}});
