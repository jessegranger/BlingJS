<html>
	<head>
		<title>BlingJS Framework.</title>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=yes, width=device-width" />
		<link href="prettify.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="prettify.js"></script>
		<link href=' http://fonts.googleapis.com/css?family=Nobile' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
		<script src="bling.js" type="text/javascript"></script>
		<style type="text/css">
			body {
				font-family: 'Nobile', Verdana, sans;
				width:320px;
				border-right:1px dashed grey;
			}
			p {
				width:300px;
				text-align: justify;
				margin-right:4px;
			}
			pre {
				font-family: 'Inconsolata', courier, fixed, sans;
				font-size:0.9em;
				line-height:1.1em;
				padding:6px 0px 6px 4px;
				margin:0px 0px;
				display: inline-block;
				border:1px dashed gray;
				background-color:#ffc;
				width:300px;
			}
			div pre {
				min-width:320px;
				width: auto;
			}
			ol.apilist {
				padding:0px 2em;
			}
			ol.apilist li {
				padding: 0px;
				margin:0px;
				border-bottom:1px solid black;
			}
			ol.apilist li pre { 
				display: none; 
				margin-left: -25px;
			}
			ol.apilist li > a {
				text-decoration:none;
				color:black;
			}
			ol.apilist li > a span {
				font-size:1.2em;
				margin-right:.2em;
			}
		</style>
	</head>
<body>
<script>

	$(window).ready(function(){ 
		$("h1").concat($("h3")).each(function() {
			$(this).wrap("<a name='"+this.innerText+"'></a>");
		})
		$("h3").skip(2).before($("<a href='#BlingJS'>&#171;Back to top</a>").css('font-size','0.9em').css('float','right'))
		$("pre").each(function(){ 
			this.innerText = this.innerText.replace(/\t/g,"  ");
		}).addClass("prettyprint")
		prettyPrint();
		$("a[href^='#doc:Bling']").click(function(e) {
			e.stopPropagation()
			e.preventDefault()
			doc(this,e);
		})

	})

	function doc(a,e) {
		var b = a.getAttribute("href").split("#doc:")[1]
		var d = a.__doc__
		if( d == undefined ) {
			var obj = eval(b)
			obj = obj.toString().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"  ")
			obj = prettyPrintOne("<pre class='prettyprint'>"+obj+"</pre>")
			obj = obj + "<pre class='prettyprint'>" + $(a.parentNode).find("pre").text() + "</pre>"
			// create the shadow
			// create and show the doc overlay
			d = $("<div class='doc'></div>")
				.html(obj)
				.css("position","absolute")
				.css("display", "block")
				.css("padding", "0")
				.css("margin", "0")
				.css("top", e.pageY + 4 + "px")
				.css("left", "0px")
				.css("z-index", "9001")
				.bind('click', function() { d.shadow.remove(); $(this).unbind('click').remove() })
				.appendTo("body")
			// size and position the code block
			d.find("pre")
				.css("margin", "0px")
				.css('border','1px solid navy')
				.css('background','#f0f0f0')
				.css('-webkit-border-radius','6px')
			// size and position the shadow
			d.shadow = $("<div class='shadow'>&nbsp;</div>")
				.css("position", "absolute")
				.css("display", "block")
				.css("background-color", "rgba(0,0,0,0.35)")
				.css("z-index", "9000")
				.css("height", d.height().first())
				.css("width", d.width().first())
				.css("top", d.css("top").floats().first() + 8 + "px")
				.css("left", d.css("left").floats().first() + 6 + "px")
				.css("-webkit-border-radius", "6px")
				.appendTo("body")

			a.__doc__ = d
		} else {
			a.__doc__.appendTo("body").transform({scale:1.5},"fast",function(){this.transform({scale:1.0},"fast")})
			a.__doc__.shadow.appendTo("body")
		}

	}

</script>
<h1><a name="top">BlingJS</a><h1>
<h2>A jQuery-like framework for WebKit.</h2>

<p>BlingJS is named after the bling operator ($) to which it is bound by default.
<pre>
$("body").append('&lt;div&gt;'); </pre>

<h3>Download</h3>
<p>Get the <a href="bling.js">latest BlingJS.</a> (<a href="min.bling.js">minified</a>).

<h3>Documentation</h3>
<p><i>A Bling</i> is an ordered set of items of any type.  This set defines functional operations to collect and manipulate the members.
<p>A Bling is a container, so you create them by wrapping up other items or sets:
<pre>
$("button") // css expressions
$("&lt;button&gt;") // or html
$([1, "foo", {a: 'b'}]) // or junk </pre>
<p>During all set-like operations, the context (the 'this' value) is equal to the item being iterated.
<h5>Operations defined on sets of anything:</h5>
<p>Core Module:
<ol class='apilist'>
<li><a href='#doc:Bling.prototype.each'><span>.each(f)</span></a>&nbsp;&mdash;&nbsp;applies <b>f</b> to every <b>x</b> in <i>this</i>
	<pre>
	// hide all buttons (manually)
	$("button").each(function(){
		this.style.display = "none"
	}) </pre>
</li>
<li><a href="#doc:Bling.prototype.map"><span>.map(f)</span></a>&nbsp;&mdash;&nbsp;collects the value of <b>f</b>(<b>x</b>) for <b>x</b> in <i>this</i>
	<pre>
	// get a list of hrefs
	$("a").map(function() {
		return this.getAttribute("href");
	}) </pre>
</li>
<li><a href="#doc:Bling.prototype.reduce"><span>.reduce(f)</span></a>&nbsp;&mdash;&nbsp;accumulates <b>f</b>(a,<b>x</b>) to a single value.
	<pre>
	// compute the sum
	$([1, 2, 3, 4]).reduce(function(a) { 
		return a + this; 
	}) </pre>
</li>
<li><a href="#doc:Bling.prototype.filter"><span>.filter(f)</span></a>&nbsp;&mdash;&nbsp;collect all <b>x</b> from <i>this</i> where <b>f</b>(<b>x</b>) returns true.
	<pre>
	// return only elements that pass a test
	$([-1, 0, 1]).filter(function() {
		return this > 0;
	}) </pre>
</li>
<li><a href="#doc:Bling.prototype.distinct"><span>.distinct()</span></a>&nbsp;&mdash;&nbsp;get a copy of <i>this</i> with duplicates removed.
	<pre>
	// reduce the set to only unique elements
	$([1,2,3,1,5,1]).distinct() </pre>
</li>
<li><a href="#doc:Bling.prototype.take"><span>.take(n)</span></a>&nbsp;&mdash;&nbsp;a new set of at most <b>n</b> items from the front of <i>this</i>.
	<pre>
	// take the first n elements
	$([0,1,2,-1,-1]).take(3) </pre>
</li>
<li><a href="#doc:Bling.prototype.skip"><span>.skip(n)</span></a>&nbsp;&mdash;&nbsp;a new set of <i>this</i>'s items without the first <b>n</b>.
	<pre>
	// skip the first n, return the rest
	$([-1,-1,0,1,2]).skip(2) </pre>
</li>
<li><a href="#doc:Bling.prototype.zip"><span>.zip(p)</span></a>&nbsp;&mdash;&nbsp;collect the values of <b>x</b>.<b>p</b> for every <b>x</b> in <i>this</i>.
	<pre>
	// select the values of a property
	$("input").zip('offsetTop') </pre>
</li>
<li><a href="#doc:Bling.prototype.zap"><span>.zap(p,v)</span></a>&nbsp;&mdash;&nbsp;assign <b>x</b>.<b>p</b> = <b>v</b> for every <b>x</b> in <i>this</i>.
	<pre>
	// assign all properties at once
	$("input").zap("style.display", "none") </pre>
</li>
<li><a href="#doc:Bling.prototype.last"><span>.last()</span></a>&nbsp;&mdash;&nbsp;return the last item in <i>this</i>, as itself.
	<pre>
	// returns the last item in the set, bare
	$("input").last().nodeName
	// or, if n > 0, a list </pre>
</li>
<li><a href="#doc:Bling.prototype.first"><span>.first()</span></a>&nbsp;&mdash;&nbsp;return the first item in <i>this</i>, as itself.
	<pre>
	// return the first item in the set, bare
	$("input").first().nodeName
	// or, if n > 0, a list, like .take() </pre>
</li>
<li><a href="#doc:Bling.prototype.join"><span>.join(s)</span></a>&nbsp;&mdash;&nbsp;concatenate all items in <i>this</i>, separated by <b>s</b>.
	<pre>
	// join all the items into a single string
	// separated by the given string
	$("input").zip("nodeName").join(", ") </pre>
</li>
<li><a href="#doc:Bling.prototype.slice"><span>.slice(i,j)</span></a>&nbsp;&mdash;&nbsp;get a subset of <i>this</i> from [<b>i</b>] to [<b>j</b>-1]
	<pre>
	// return a subset, given start and end indices
	// the end index is not included
	// negative indices count from the end, ala python
	$([0,1,2,3,4,5]).slice(3,-1)
		== [3, 4] </pre>
</li>
<li><a href="#doc:Bling.prototype.concat"><span>.concat(b)</span></a>&nbsp;&mdash;&nbsp;push all items from <b>b</b> on to the end of <i>this</i>.
	<pre>
	// puts all items from b into this
	$("input").concat($("select")) </pre>
</li>
<li><a href="#doc:Bling.prototype.weave"><span>.weave(b)</span></a>&nbsp;&mdash;&nbsp;interleave the items of <i>this</i> and the items of <b>b</b>.
	<pre>
	// interleaves the items from this bling 
	// with the items from any other list
	$(["foo=","bar="]).weave($("input").val())
		== ["foo=","value1","bar=","value2"] 
	$([1,1,1]).weave($([2,3,4]))
	 == [1,2,1,3,1,4] </pre>
</li>
<li><a href="#doc:Bling.prototype.fold"><span>.fold(f)</span></a>&nbsp;&mdash;&nbsp;use <b>f</b> to reduce this to half as many values.
	<pre>
	// fold is like reduce only it iterates two items at a time
	// always returning a list about half the length of the input
	$([1,1,1]).weave([2,3,4]).fold(function(x) { return this + x })
		== $([3,4,5])
	// for a non-trival example see the source of .css() </pre>
</li>
<li><a href="#doc:Bling.prototype.future"><span>.future(n,f)</span></a>&nbsp;&mdash;&nbsp;apply <b>f</b> to <i>this</i>, approx. <b>n</b> ms in the future.
	<pre>
	// future resumes execution at a later time, bound to the current context
	$("input").show()
		// wait 3 seconds, and then run function bound to this
		.future(3000, function() {
			console.log("3 seconds later!:"+this.zip('value').join(", "))
		})
		// back in the past
		.zap('value','hamburger') </pre>
</li>
</ol>

<p>My favorites are <a href="#doc:Bling.prototype.zip">zip</a> and <a href="#doc:Bling.prototype.zap">zap</a>. 
<p>The <a href="#doc:Bling.prototype.zip">.zip</a>(property) method will extract a list of the values of a certain property.  This is why <a href="#doc:Bling.prototype.parent">.parent</a>() is defined as simply as <a href="#doc:Bling.prototype.zip">.zip</a>('parentNode'), meaning, return a list of all the .parentNode properties of the items in the current set.
<p>The following are all equivalent:
<pre>
$("button").parent().first()
$("button").zip('parentNode').first()
$("button").first().parentNode </pre>
<p>The <a href="#doc:Bling.prototype.zip">.zip</a>() method is different from <a href="#doc:Bling.prototype.attr">.attr</a>(name), which uses get/setAttribute functions, and applies only to the Node attributes, not general object properties.
<p><a href="#doc:Bling.prototype.zip">.zip</a>() also gives you some extra help if you zip up a set of function members of an object, by automatically binding that function to it's original host.
<p>For example, if you wanted to call the same function on each of a set of items:
<pre>
var x = $("input").first()
$("input").zip('isSameNode').call( x ) </pre>
<p>This will return a Bling{[true, false, false, ... false for every input except the first]}.

<p>The <a href="#doc:Bling.prototype.zap">.zap</a>() method is similar to <a href="#doc:Bling.prototype.zip">.zip</a>() except that it sets the value of the property, returning the original set of nodes.
<pre>
$("button").zap("style.display","none") </pre>
<p class='caption'>This example would hide all buttons on the page.</p>
<p>For the full API, see the <a href="docs.html">Documentation</a>.

<h3>Extending the API</h3>
<p>Extending the Bling API is very easy: you use two methods addGlobals, and addMethods.
<h4>Bling.addMethods:</h4>
<p>In a plugin file/script:
<pre>
Bling.addMethods({ "echo": function() {
	console.log("context: "+this
		+" arguments: "+arguments)
}) </pre>
<p>On a page:
<pre>
$("body").echo() </pre>
<p>This would log all of the selected nodes, and the arguments of a standard Bling method invocation.

<p>But, always try to return either a new context or the existing one.
<p>The better way:
<pre>
Bling.addMethods({
	"echo": function(){
		console.log("context: "+this
			+" arguments: "+arguments);
		return this // the better way
	},
}) </pre>
<pre>
$("body").echo()
	.css('color','yellow')
	.fadeOut() </pre>
<p>This will log the same thing to the console, and still allow you to chain other methods.
<p>If you modify the set, try to return a new set equivalent in all other ways except your desired change. See <a href="#doc:Bling.prototype.map">.map()</a>for an example.
<h4>Bling.addGlobals:</h4>
<p>addGlobals is simpler, because it is not expected to be part of the chain, it will just add something available as Bling.XXX
<pre>
Bling.addGlobals("breakpoint", function() { 
	debugger;
}) </pre>
<pre>
$.breakpoint() </pre>

		<h3>Unit tests</h3>
		<p>You can run the <a href="test.bling.html">BlingJS unit tests</a> in your browser.
		<h3>jQuery</h3>
		<p>BlingJS is very much like jQuery, and you can do just about anything in it that you can do in jQuery.  If you know jQuery, then in general you can use BlingJS by writing what you would expect to work in jQuery, then assume everything you get is a list, and end your expressions with things like .first()
	</body>
</html>
